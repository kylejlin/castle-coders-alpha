{"version":3,"file":"static/js/main.e61d118a.js","mappings":"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","sources":["../node_modules/@capacitor/core/build/platforms.js","../node_modules/@capacitor/core/build/util.js","../node_modules/@capacitor/core/build/runtime.js","../node_modules/@capacitor/core/build/global.js","../node_modules/@capacitor/core/build/web-plugin.js","../node_modules/@capacitor/core/build/core-plugins.js","../node_modules/react-dom/cjs/react-dom.production.min.js","../node_modules/react-dom/client.js","../node_modules/react-dom/index.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/cjs/react.production.min.js","../node_modules/react/index.js","../node_modules/react/jsx-runtime.js","../node_modules/scheduler/cjs/scheduler.production.min.js","../node_modules/scheduler/index.js","../webpack/bootstrap","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/load script","../webpack/runtime/make namespace object","../webpack/runtime/publicPath","../webpack/runtime/jsonp chunk loading","../node_modules/pure-rand/lib/esm/generator/RandomGenerator.js","../node_modules/pure-rand/lib/esm/generator/LinearCongruential.js","../node_modules/pure-rand/lib/esm/generator/MersenneTwister.js","../node_modules/pure-rand/lib/esm/generator/XorShift.js","../node_modules/pure-rand/lib/esm/generator/XoroShiro.js","../node_modules/pure-rand/lib/esm/distribution/internals/ArrayInt.js","../node_modules/pure-rand/lib/esm/distribution/internals/UnsafeUniformIntDistributionInternal.js","../node_modules/pure-rand/lib/esm/distribution/internals/UnsafeUniformArrayIntDistributionInternal.js","../node_modules/pure-rand/lib/esm/distribution/UnsafeUniformArrayIntDistribution.js","../node_modules/pure-rand/lib/esm/distribution/UniformArrayIntDistribution.js","../node_modules/pure-rand/lib/esm/distribution/UnsafeUniformBigIntDistribution.js","../node_modules/pure-rand/lib/esm/distribution/UniformBigIntDistribution.js","../node_modules/pure-rand/lib/esm/distribution/UnsafeUniformIntDistribution.js","../node_modules/pure-rand/lib/esm/distribution/UniformIntDistribution.js","../node_modules/pure-rand/lib/esm/pure-rand-default.js","../node_modules/pure-rand/lib/esm/pure-rand.js","images/index.ts","fonts/index.ts","vec2.ts","icons/dropdownArrow.ts","icons/trash_can.ts","BlockEditor.tsx","paintCanvas.ts","SETTINGS_VERSION.ts","../node_modules/capacitor-plugin-safe-area/src/index.ts","safeArea.ts","../node_modules/@capacitor/preferences/src/index.ts","deviceStorage.ts","../node_modules/@capacitor/splash-screen/src/index.ts","audio/index.ts","audioManager.ts","../node_modules/@capacitor/app/src/index.ts","../node_modules/@capacitor-community/keep-awake/src/index.ts","keepAwake.ts","../node_modules/@capacitor/device/src/index.ts","GAME_VERSION.ts","constsAndEnums.ts","../node_modules/@firebase/util/src/constants.ts","../node_modules/@firebase/util/src/crypt.ts","../node_modules/@firebase/util/src/defaults.ts","../node_modules/@firebase/util/src/global.ts","../node_modules/@firebase/util/src/deferred.ts","../node_modules/@firebase/util/src/errors.ts","../node_modules/@firebase/util/src/obj.ts","../node_modules/@firebase/util/src/compat.ts","../node_modules/@firebase/component/src/component.ts","../node_modules/@firebase/component/src/constants.ts","../node_modules/@firebase/component/src/provider.ts","../node_modules/@firebase/component/src/component_container.ts","../node_modules/@firebase/logger/src/logger.ts","../node_modules/idb/build/wrap-idb-value.js","../node_modules/idb/build/index.js","../node_modules/@firebase/app/src/platformLoggerService.ts","../node_modules/@firebase/app/src/logger.ts","../node_modules/@firebase/app/src/constants.ts","../node_modules/@firebase/app/src/internal.ts","../node_modules/@firebase/app/src/errors.ts","../node_modules/@firebase/app/src/firebaseApp.ts","../node_modules/@firebase/app/src/api.ts","../node_modules/@firebase/app/src/indexeddb.ts","../node_modules/@firebase/app/src/heartbeatService.ts","../node_modules/@firebase/util/src/environment.ts","../node_modules/@firebase/app/src/registerCoreComponents.ts","../node_modules/@firebase/app/src/index.ts","../node_modules/firebase/app/index.ts","../node_modules/@firebase/storage/src/implementation/constants.ts","../node_modules/@firebase/storage/src/implementation/error.ts","../node_modules/@firebase/storage/src/implementation/connection.ts","../node_modules/@firebase/storage/src/implementation/location.ts","../node_modules/@firebase/storage/src/implementation/failrequest.ts","../node_modules/@firebase/storage/src/implementation/type.ts","../node_modules/@firebase/storage/src/implementation/url.ts","../node_modules/@firebase/storage/src/implementation/utils.ts","../node_modules/@firebase/storage/src/implementation/request.ts","../node_modules/@firebase/storage/src/implementation/backoff.ts","../node_modules/@firebase/storage/src/implementation/fs.ts","../node_modules/@firebase/storage/src/platform/browser/base64.ts","../node_modules/@firebase/storage/src/implementation/string.ts","../node_modules/@firebase/storage/src/implementation/blob.ts","../node_modules/@firebase/storage/src/implementation/json.ts","../node_modules/@firebase/storage/src/implementation/path.ts","../node_modules/@firebase/storage/src/implementation/metadata.ts","../node_modules/@firebase/storage/src/implementation/requestinfo.ts","../node_modules/@firebase/storage/src/implementation/requests.ts","../node_modules/@firebase/storage/src/platform/browser/connection.ts","../node_modules/@firebase/storage/src/reference.ts","../node_modules/@firebase/storage/src/service.ts","../node_modules/@firebase/util/src/emulator.ts","../node_modules/@firebase/storage/src/constants.ts","../node_modules/@firebase/storage/src/index.ts","firebase.ts","../node_modules/@firebase/storage/src/api.ts","jsonCompression.ts","../node_modules/serialize-error/error-constructors.js","../node_modules/serialize-error/index.js","stringifyError.ts","log.ts","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"sourcesContent":["const createCapacitorPlatforms = (win) => {\n    const defaultPlatformMap = new Map();\n    defaultPlatformMap.set('web', { name: 'web' });\n    const capPlatforms = win.CapacitorPlatforms || {\n        currentPlatform: { name: 'web' },\n        platforms: defaultPlatformMap,\n    };\n    const addPlatform = (name, platform) => {\n        capPlatforms.platforms.set(name, platform);\n    };\n    const setPlatform = (name) => {\n        if (capPlatforms.platforms.has(name)) {\n            capPlatforms.currentPlatform = capPlatforms.platforms.get(name);\n        }\n    };\n    capPlatforms.addPlatform = addPlatform;\n    capPlatforms.setPlatform = setPlatform;\n    return capPlatforms;\n};\nconst initPlatforms = (win) => (win.CapacitorPlatforms = createCapacitorPlatforms(win));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nexport const CapacitorPlatforms = /*#__PURE__*/ initPlatforms((typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {}));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nexport const addPlatform = CapacitorPlatforms.addPlatform;\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nexport const setPlatform = CapacitorPlatforms.setPlatform;\n//# sourceMappingURL=platforms.js.map","export var ExceptionCode;\n(function (ExceptionCode) {\n    /**\n     * API is not implemented.\n     *\n     * This usually means the API can't be used because it is not implemented for\n     * the current platform.\n     */\n    ExceptionCode[\"Unimplemented\"] = \"UNIMPLEMENTED\";\n    /**\n     * API is not available.\n     *\n     * This means the API can't be used right now because:\n     *   - it is currently missing a prerequisite, such as network connectivity\n     *   - it requires a particular platform or browser version\n     */\n    ExceptionCode[\"Unavailable\"] = \"UNAVAILABLE\";\n})(ExceptionCode || (ExceptionCode = {}));\nexport class CapacitorException extends Error {\n    constructor(message, code, data) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        this.data = data;\n    }\n}\nexport const getPlatformId = (win) => {\n    var _a, _b;\n    if (win === null || win === void 0 ? void 0 : win.androidBridge) {\n        return 'android';\n    }\n    else if ((_b = (_a = win === null || win === void 0 ? void 0 : win.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.bridge) {\n        return 'ios';\n    }\n    else {\n        return 'web';\n    }\n};\n//# sourceMappingURL=util.js.map","import { CapacitorException, getPlatformId, ExceptionCode } from './util';\nexport const createCapacitor = (win) => {\n    var _a, _b, _c, _d, _e;\n    const capCustomPlatform = win.CapacitorCustomPlatform || null;\n    const cap = win.Capacitor || {};\n    const Plugins = (cap.Plugins = cap.Plugins || {});\n    /**\n     * @deprecated Use `capCustomPlatform` instead, default functions like registerPlugin will function with the new object.\n     */\n    const capPlatforms = win.CapacitorPlatforms;\n    const defaultGetPlatform = () => {\n        return capCustomPlatform !== null\n            ? capCustomPlatform.name\n            : getPlatformId(win);\n    };\n    const getPlatform = ((_a = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _a === void 0 ? void 0 : _a.getPlatform) || defaultGetPlatform;\n    const defaultIsNativePlatform = () => getPlatform() !== 'web';\n    const isNativePlatform = ((_b = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _b === void 0 ? void 0 : _b.isNativePlatform) || defaultIsNativePlatform;\n    const defaultIsPluginAvailable = (pluginName) => {\n        const plugin = registeredPlugins.get(pluginName);\n        if (plugin === null || plugin === void 0 ? void 0 : plugin.platforms.has(getPlatform())) {\n            // JS implementation available for the current platform.\n            return true;\n        }\n        if (getPluginHeader(pluginName)) {\n            // Native implementation available.\n            return true;\n        }\n        return false;\n    };\n    const isPluginAvailable = ((_c = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _c === void 0 ? void 0 : _c.isPluginAvailable) ||\n        defaultIsPluginAvailable;\n    const defaultGetPluginHeader = (pluginName) => { var _a; return (_a = cap.PluginHeaders) === null || _a === void 0 ? void 0 : _a.find(h => h.name === pluginName); };\n    const getPluginHeader = ((_d = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _d === void 0 ? void 0 : _d.getPluginHeader) || defaultGetPluginHeader;\n    const handleError = (err) => win.console.error(err);\n    const pluginMethodNoop = (_target, prop, pluginName) => {\n        return Promise.reject(`${pluginName} does not have an implementation of \"${prop}\".`);\n    };\n    const registeredPlugins = new Map();\n    const defaultRegisterPlugin = (pluginName, jsImplementations = {}) => {\n        const registeredPlugin = registeredPlugins.get(pluginName);\n        if (registeredPlugin) {\n            console.warn(`Capacitor plugin \"${pluginName}\" already registered. Cannot register plugins twice.`);\n            return registeredPlugin.proxy;\n        }\n        const platform = getPlatform();\n        const pluginHeader = getPluginHeader(pluginName);\n        let jsImplementation;\n        const loadPluginImplementation = async () => {\n            if (!jsImplementation && platform in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations[platform] === 'function'\n                        ? (jsImplementation = await jsImplementations[platform]())\n                        : (jsImplementation = jsImplementations[platform]);\n            }\n            else if (capCustomPlatform !== null &&\n                !jsImplementation &&\n                'web' in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations['web'] === 'function'\n                        ? (jsImplementation = await jsImplementations['web']())\n                        : (jsImplementation = jsImplementations['web']);\n            }\n            return jsImplementation;\n        };\n        const createPluginMethod = (impl, prop) => {\n            var _a, _b;\n            if (pluginHeader) {\n                const methodHeader = pluginHeader === null || pluginHeader === void 0 ? void 0 : pluginHeader.methods.find(m => prop === m.name);\n                if (methodHeader) {\n                    if (methodHeader.rtype === 'promise') {\n                        return (options) => cap.nativePromise(pluginName, prop.toString(), options);\n                    }\n                    else {\n                        return (options, callback) => cap.nativeCallback(pluginName, prop.toString(), options, callback);\n                    }\n                }\n                else if (impl) {\n                    return (_a = impl[prop]) === null || _a === void 0 ? void 0 : _a.bind(impl);\n                }\n            }\n            else if (impl) {\n                return (_b = impl[prop]) === null || _b === void 0 ? void 0 : _b.bind(impl);\n            }\n            else {\n                throw new CapacitorException(`\"${pluginName}\" plugin is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n            }\n        };\n        const createPluginMethodWrapper = (prop) => {\n            let remove;\n            const wrapper = (...args) => {\n                const p = loadPluginImplementation().then(impl => {\n                    const fn = createPluginMethod(impl, prop);\n                    if (fn) {\n                        const p = fn(...args);\n                        remove = p === null || p === void 0 ? void 0 : p.remove;\n                        return p;\n                    }\n                    else {\n                        throw new CapacitorException(`\"${pluginName}.${prop}()\" is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n                    }\n                });\n                if (prop === 'addListener') {\n                    p.remove = async () => remove();\n                }\n                return p;\n            };\n            // Some flair ✨\n            wrapper.toString = () => `${prop.toString()}() { [capacitor code] }`;\n            Object.defineProperty(wrapper, 'name', {\n                value: prop,\n                writable: false,\n                configurable: false,\n            });\n            return wrapper;\n        };\n        const addListener = createPluginMethodWrapper('addListener');\n        const removeListener = createPluginMethodWrapper('removeListener');\n        const addListenerNative = (eventName, callback) => {\n            const call = addListener({ eventName }, callback);\n            const remove = async () => {\n                const callbackId = await call;\n                removeListener({\n                    eventName,\n                    callbackId,\n                }, callback);\n            };\n            const p = new Promise(resolve => call.then(() => resolve({ remove })));\n            p.remove = async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            };\n            return p;\n        };\n        const proxy = new Proxy({}, {\n            get(_, prop) {\n                switch (prop) {\n                    // https://github.com/facebook/react/issues/20030\n                    case '$$typeof':\n                        return undefined;\n                    case 'toJSON':\n                        return () => ({});\n                    case 'addListener':\n                        return pluginHeader ? addListenerNative : addListener;\n                    case 'removeListener':\n                        return removeListener;\n                    default:\n                        return createPluginMethodWrapper(prop);\n                }\n            },\n        });\n        Plugins[pluginName] = proxy;\n        registeredPlugins.set(pluginName, {\n            name: pluginName,\n            proxy,\n            platforms: new Set([\n                ...Object.keys(jsImplementations),\n                ...(pluginHeader ? [platform] : []),\n            ]),\n        });\n        return proxy;\n    };\n    const registerPlugin = ((_e = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _e === void 0 ? void 0 : _e.registerPlugin) || defaultRegisterPlugin;\n    // Add in convertFileSrc for web, it will already be available in native context\n    if (!cap.convertFileSrc) {\n        cap.convertFileSrc = filePath => filePath;\n    }\n    cap.getPlatform = getPlatform;\n    cap.handleError = handleError;\n    cap.isNativePlatform = isNativePlatform;\n    cap.isPluginAvailable = isPluginAvailable;\n    cap.pluginMethodNoop = pluginMethodNoop;\n    cap.registerPlugin = registerPlugin;\n    cap.Exception = CapacitorException;\n    cap.DEBUG = !!cap.DEBUG;\n    cap.isLoggingEnabled = !!cap.isLoggingEnabled;\n    // Deprecated props\n    cap.platform = cap.getPlatform();\n    cap.isNative = cap.isNativePlatform();\n    return cap;\n};\nexport const initCapacitorGlobal = (win) => (win.Capacitor = createCapacitor(win));\n//# sourceMappingURL=runtime.js.map","import { legacyRegisterWebPlugin } from './legacy/legacy-web-plugin-merge';\nimport { initCapacitorGlobal } from './runtime';\nexport const Capacitor = /*#__PURE__*/ initCapacitorGlobal(typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {});\nexport const registerPlugin = Capacitor.registerPlugin;\n/**\n * @deprecated Provided for backwards compatibility for Capacitor v2 plugins.\n * Capacitor v3 plugins should import the plugin directly. This \"Plugins\"\n * export is deprecated in v3, and will be removed in v4.\n */\nexport const Plugins = Capacitor.Plugins;\n/**\n * Provided for backwards compatibility. Use the registerPlugin() API\n * instead, and provide the web plugin as the \"web\" implmenetation.\n * For example\n *\n * export const Example = registerPlugin('Example', {\n *   web: () => import('./web').then(m => new m.Example())\n * })\n *\n * @deprecated Deprecated in v3, will be removed from v4.\n */\nexport const registerWebPlugin = (plugin) => legacyRegisterWebPlugin(Capacitor, plugin);\n//# sourceMappingURL=global.js.map","import { Capacitor } from './global';\nimport { ExceptionCode } from './util';\n/**\n * Base class web plugins should extend.\n */\nexport class WebPlugin {\n    constructor(config) {\n        this.listeners = {};\n        this.retainedEventArguments = {};\n        this.windowListeners = {};\n        if (config) {\n            // TODO: add link to upgrade guide\n            console.warn(`Capacitor WebPlugin \"${config.name}\" config object was deprecated in v3 and will be removed in v4.`);\n            this.config = config;\n        }\n    }\n    addListener(eventName, listenerFunc) {\n        let firstListener = false;\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            this.listeners[eventName] = [];\n            firstListener = true;\n        }\n        this.listeners[eventName].push(listenerFunc);\n        // If we haven't added a window listener for this event and it requires one,\n        // go ahead and add it\n        const windowListener = this.windowListeners[eventName];\n        if (windowListener && !windowListener.registered) {\n            this.addWindowListener(windowListener);\n        }\n        if (firstListener) {\n            this.sendRetainedArgumentsForEvent(eventName);\n        }\n        const remove = async () => this.removeListener(eventName, listenerFunc);\n        const p = Promise.resolve({ remove });\n        return p;\n    }\n    async removeAllListeners() {\n        this.listeners = {};\n        for (const listener in this.windowListeners) {\n            this.removeWindowListener(this.windowListeners[listener]);\n        }\n        this.windowListeners = {};\n    }\n    notifyListeners(eventName, data, retainUntilConsumed) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            if (retainUntilConsumed) {\n                let args = this.retainedEventArguments[eventName];\n                if (!args) {\n                    args = [];\n                }\n                args.push(data);\n                this.retainedEventArguments[eventName] = args;\n            }\n            return;\n        }\n        listeners.forEach(listener => listener(data));\n    }\n    hasListeners(eventName) {\n        return !!this.listeners[eventName].length;\n    }\n    registerWindowListener(windowEventName, pluginEventName) {\n        this.windowListeners[pluginEventName] = {\n            registered: false,\n            windowEventName,\n            pluginEventName,\n            handler: event => {\n                this.notifyListeners(pluginEventName, event);\n            },\n        };\n    }\n    unimplemented(msg = 'not implemented') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unimplemented);\n    }\n    unavailable(msg = 'not available') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unavailable);\n    }\n    async removeListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            return;\n        }\n        const index = listeners.indexOf(listenerFunc);\n        this.listeners[eventName].splice(index, 1);\n        // If there are no more listeners for this type of event,\n        // remove the window listener\n        if (!this.listeners[eventName].length) {\n            this.removeWindowListener(this.windowListeners[eventName]);\n        }\n    }\n    addWindowListener(handle) {\n        window.addEventListener(handle.windowEventName, handle.handler);\n        handle.registered = true;\n    }\n    removeWindowListener(handle) {\n        if (!handle) {\n            return;\n        }\n        window.removeEventListener(handle.windowEventName, handle.handler);\n        handle.registered = false;\n    }\n    sendRetainedArgumentsForEvent(eventName) {\n        const args = this.retainedEventArguments[eventName];\n        if (!args) {\n            return;\n        }\n        delete this.retainedEventArguments[eventName];\n        args.forEach(arg => {\n            this.notifyListeners(eventName, arg);\n        });\n    }\n}\n//# sourceMappingURL=web-plugin.js.map","import { registerPlugin } from './global';\nimport { WebPlugin } from './web-plugin';\nexport const WebView = /*#__PURE__*/ registerPlugin('WebView');\n/******** END WEB VIEW PLUGIN ********/\n/******** COOKIES PLUGIN ********/\n/**\n * Safely web encode a string value (inspired by js-cookie)\n * @param str The string value to encode\n */\nconst encode = (str) => encodeURIComponent(str)\n    .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n    .replace(/[()]/g, escape);\n/**\n * Safely web decode a string value (inspired by js-cookie)\n * @param str The string value to decode\n */\nconst decode = (str) => str.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\nexport class CapacitorCookiesPluginWeb extends WebPlugin {\n    async getCookies() {\n        const cookies = document.cookie;\n        const cookieMap = {};\n        cookies.split(';').forEach(cookie => {\n            if (cookie.length <= 0)\n                return;\n            // Replace first \"=\" with CAP_COOKIE to prevent splitting on additional \"=\"\n            let [key, value] = cookie.replace(/=/, 'CAP_COOKIE').split('CAP_COOKIE');\n            key = decode(key).trim();\n            value = decode(value).trim();\n            cookieMap[key] = value;\n        });\n        return cookieMap;\n    }\n    async setCookie(options) {\n        try {\n            // Safely Encoded Key/Value\n            const encodedKey = encode(options.key);\n            const encodedValue = encode(options.value);\n            // Clean & sanitize options\n            const expires = `; expires=${(options.expires || '').replace('expires=', '')}`; // Default is \"; expires=\"\n            const path = (options.path || '/').replace('path=', ''); // Default is \"path=/\"\n            const domain = options.url != null && options.url.length > 0\n                ? `domain=${options.url}`\n                : '';\n            document.cookie = `${encodedKey}=${encodedValue || ''}${expires}; path=${path}; ${domain};`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async deleteCookie(options) {\n        try {\n            document.cookie = `${options.key}=; Max-Age=0`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearCookies() {\n        try {\n            const cookies = document.cookie.split(';') || [];\n            for (const cookie of cookies) {\n                document.cookie = cookie\n                    .replace(/^ +/, '')\n                    .replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`);\n            }\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearAllCookies() {\n        try {\n            await this.clearCookies();\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n}\nexport const CapacitorCookies = registerPlugin('CapacitorCookies', {\n    web: () => new CapacitorCookiesPluginWeb(),\n});\n// UTILITY FUNCTIONS\n/**\n * Read in a Blob value and return it as a base64 string\n * @param blob The blob value to convert to a base64 string\n */\nexport const readBlobAsBase64 = async (blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        const base64String = reader.result;\n        // remove prefix \"data:application/pdf;base64,\"\n        resolve(base64String.indexOf(',') >= 0\n            ? base64String.split(',')[1]\n            : base64String);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(blob);\n});\n/**\n * Normalize an HttpHeaders map by lowercasing all of the values\n * @param headers The HttpHeaders object to normalize\n */\nconst normalizeHttpHeaders = (headers = {}) => {\n    const originalKeys = Object.keys(headers);\n    const loweredKeys = Object.keys(headers).map(k => k.toLocaleLowerCase());\n    const normalized = loweredKeys.reduce((acc, key, index) => {\n        acc[key] = headers[originalKeys[index]];\n        return acc;\n    }, {});\n    return normalized;\n};\n/**\n * Builds a string of url parameters that\n * @param params A map of url parameters\n * @param shouldEncode true if you should encodeURIComponent() the values (true by default)\n */\nconst buildUrlParams = (params, shouldEncode = true) => {\n    if (!params)\n        return null;\n    const output = Object.entries(params).reduce((accumulator, entry) => {\n        const [key, value] = entry;\n        let encodedValue;\n        let item;\n        if (Array.isArray(value)) {\n            item = '';\n            value.forEach(str => {\n                encodedValue = shouldEncode ? encodeURIComponent(str) : str;\n                item += `${key}=${encodedValue}&`;\n            });\n            // last character will always be \"&\" so slice it off\n            item.slice(0, -1);\n        }\n        else {\n            encodedValue = shouldEncode ? encodeURIComponent(value) : value;\n            item = `${key}=${encodedValue}`;\n        }\n        return `${accumulator}&${item}`;\n    }, '');\n    // Remove initial \"&\" from the reduce\n    return output.substr(1);\n};\n/**\n * Build the RequestInit object based on the options passed into the initial request\n * @param options The Http plugin options\n * @param extra Any extra RequestInit values\n */\nexport const buildRequestInit = (options, extra = {}) => {\n    const output = Object.assign({ method: options.method || 'GET', headers: options.headers }, extra);\n    // Get the content-type\n    const headers = normalizeHttpHeaders(options.headers);\n    const type = headers['content-type'] || '';\n    // If body is already a string, then pass it through as-is.\n    if (typeof options.data === 'string') {\n        output.body = options.data;\n    }\n    // Build request initializers based off of content-type\n    else if (type.includes('application/x-www-form-urlencoded')) {\n        const params = new URLSearchParams();\n        for (const [key, value] of Object.entries(options.data || {})) {\n            params.set(key, value);\n        }\n        output.body = params.toString();\n    }\n    else if (type.includes('multipart/form-data') ||\n        options.data instanceof FormData) {\n        const form = new FormData();\n        if (options.data instanceof FormData) {\n            options.data.forEach((value, key) => {\n                form.append(key, value);\n            });\n        }\n        else {\n            for (const key of Object.keys(options.data)) {\n                form.append(key, options.data[key]);\n            }\n        }\n        output.body = form;\n        const headers = new Headers(output.headers);\n        headers.delete('content-type'); // content-type will be set by `window.fetch` to includy boundary\n        output.headers = headers;\n    }\n    else if (type.includes('application/json') ||\n        typeof options.data === 'object') {\n        output.body = JSON.stringify(options.data);\n    }\n    return output;\n};\n// WEB IMPLEMENTATION\nexport class CapacitorHttpPluginWeb extends WebPlugin {\n    /**\n     * Perform an Http request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async request(options) {\n        const requestInit = buildRequestInit(options, options.webFetchExtra);\n        const urlParams = buildUrlParams(options.params, options.shouldEncodeUrlParams);\n        const url = urlParams ? `${options.url}?${urlParams}` : options.url;\n        const response = await fetch(url, requestInit);\n        const contentType = response.headers.get('content-type') || '';\n        // Default to 'text' responseType so no parsing happens\n        let { responseType = 'text' } = response.ok ? options : {};\n        // If the response content-type is json, force the response to be json\n        if (contentType.includes('application/json')) {\n            responseType = 'json';\n        }\n        let data;\n        let blob;\n        switch (responseType) {\n            case 'arraybuffer':\n            case 'blob':\n                blob = await response.blob();\n                data = await readBlobAsBase64(blob);\n                break;\n            case 'json':\n                data = await response.json();\n                break;\n            case 'document':\n            case 'text':\n            default:\n                data = await response.text();\n        }\n        // Convert fetch headers to Capacitor HttpHeaders\n        const headers = {};\n        response.headers.forEach((value, key) => {\n            headers[key] = value;\n        });\n        return {\n            data,\n            headers,\n            status: response.status,\n            url: response.url,\n        };\n    }\n    /**\n     * Perform an Http GET request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async get(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'GET' }));\n    }\n    /**\n     * Perform an Http POST request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async post(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'POST' }));\n    }\n    /**\n     * Perform an Http PUT request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async put(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PUT' }));\n    }\n    /**\n     * Perform an Http PATCH request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async patch(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PATCH' }));\n    }\n    /**\n     * Perform an Http DELETE request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async delete(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'DELETE' }));\n    }\n}\nexport const CapacitorHttp = registerPlugin('CapacitorHttp', {\n    web: () => new CapacitorHttpPluginWeb(),\n});\n/******** END HTTP PLUGIN ********/\n//# sourceMappingURL=core-plugins.js.map","/**\n * @license React\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),ca=require(\"scheduler\");function p(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var da=new Set,ea={};function fa(a,b){ha(a,b);ha(a+\"Capture\",b)}\nfunction ha(a,b){ea[a]=b;for(a=0;a<b.length;a++)da.add(b[a])}\nvar ia=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,la=\n{},ma={};function oa(a){if(ja.call(ma,a))return!0;if(ja.call(la,a))return!1;if(ka.test(a))return ma[a]=!0;la[a]=!0;return!1}function pa(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction qa(a,b,c,d){if(null===b||\"undefined\"===typeof b||pa(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function v(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var z={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){z[a]=new v(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];z[b]=new v(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){z[a]=new v(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){z[a]=new v(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){z[a]=new v(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){z[a]=new v(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){z[a]=new v(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){z[a]=new v(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){z[a]=new v(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(ra,\nsa);z[b]=new v(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!1,!1)});\nz.xlinkHref=new v(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction ta(a,b,c,d){var e=z.hasOwnProperty(b)?z[b]:null;if(null!==e?0!==e.type:d||!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1])qa(b,c,e,d)&&(c=null),d||null===e?oa(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c)))}\nvar ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for(\"react.element\"),wa=Symbol.for(\"react.portal\"),ya=Symbol.for(\"react.fragment\"),za=Symbol.for(\"react.strict_mode\"),Aa=Symbol.for(\"react.profiler\"),Ba=Symbol.for(\"react.provider\"),Ca=Symbol.for(\"react.context\"),Da=Symbol.for(\"react.forward_ref\"),Ea=Symbol.for(\"react.suspense\"),Fa=Symbol.for(\"react.suspense_list\"),Ga=Symbol.for(\"react.memo\"),Ha=Symbol.for(\"react.lazy\");Symbol.for(\"react.scope\");Symbol.for(\"react.debug_trace_mode\");\nvar Ia=Symbol.for(\"react.offscreen\");Symbol.for(\"react.legacy_hidden\");Symbol.for(\"react.cache\");Symbol.for(\"react.tracing_marker\");var Ja=Symbol.iterator;function Ka(a){if(null===a||\"object\"!==typeof a)return null;a=Ja&&a[Ja]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var A=Object.assign,La;function Ma(a){if(void 0===La)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);La=b&&b[1]||\"\"}return\"\\n\"+La+a}var Na=!1;\nfunction Oa(a,b){if(!a||Na)return\"\";Na=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(l){var d=l}Reflect.construct(a,[],b)}else{try{b.call()}catch(l){d=l}a.call(b.prototype)}else{try{throw Error();}catch(l){d=l}a()}}catch(l){if(l&&d&&\"string\"===typeof l.stack){for(var e=l.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h]){var k=\"\\n\"+e[g].replace(\" at new \",\" at \");a.displayName&&k.includes(\"<anonymous>\")&&(k=k.replace(\"<anonymous>\",a.displayName));return k}while(1<=g&&0<=h)}break}}}finally{Na=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Ma(a):\"\"}\nfunction Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma(\"Lazy\");case 13:return Ma(\"Suspense\");case 19:return Ma(\"SuspenseList\");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return\"\"}}\nfunction Qa(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ya:return\"Fragment\";case wa:return\"Portal\";case Aa:return\"Profiler\";case za:return\"StrictMode\";case Ea:return\"Suspense\";case Fa:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case Ca:return(a.displayName||\"Context\")+\".Consumer\";case Ba:return(a._context.displayName||\"Context\")+\".Provider\";case Da:var b=a.render;a=a.displayName;a||(a=b.displayName||\nb.name||\"\",a=\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");return a;case Ga:return b=a.displayName||null,null!==b?b:Qa(a.type)||\"Memo\";case Ha:b=a._payload;a=a._init;try{return Qa(a(b))}catch(c){}}return null}\nfunction Ra(a){var b=a.type;switch(a.tag){case 24:return\"Cache\";case 9:return(b.displayName||\"Context\")+\".Consumer\";case 10:return(b._context.displayName||\"Context\")+\".Provider\";case 18:return\"DehydratedFragment\";case 11:return a=b.render,a=a.displayName||a.name||\"\",b.displayName||(\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");case 7:return\"Fragment\";case 5:return b;case 4:return\"Portal\";case 3:return\"Root\";case 6:return\"Text\";case 16:return Qa(b);case 8:return b===za?\"StrictMode\":\"Mode\";case 22:return\"Offscreen\";\ncase 12:return\"Profiler\";case 21:return\"Scope\";case 13:return\"Suspense\";case 19:return\"SuspenseList\";case 25:return\"TracingMarker\";case 1:case 0:case 17:case 2:case 14:case 15:if(\"function\"===typeof b)return b.displayName||b.name||null;if(\"string\"===typeof b)return b}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"string\":case \"undefined\":return a;case \"object\":return a;default:return\"\"}}\nfunction Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return A({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function ab(a,b){b=b.checked;null!=b&&ta(a,\"checked\",b,!1)}\nfunction bb(a,b){ab(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?cb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&cb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction db(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction cb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}var eb=Array.isArray;\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(p(91));return A({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(p(92));if(eb(c)){if(1<c.length)throw Error(p(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}function kb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}\nfunction lb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?kb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar mb,nb=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(\"http://www.w3.org/2000/svg\"!==a.namespaceURI||\"innerHTML\"in a)a.innerHTML=b;else{mb=mb||document.createElement(\"div\");mb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction ob(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,\nzoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(pb).forEach(function(a){qb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);pb[b]=pb[a]})});function rb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||pb.hasOwnProperty(a)&&pb[a]?(\"\"+b).trim():b+\"px\"}\nfunction sb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=rb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction ub(a,b){if(b){if(tb[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(p(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(p(60));if(\"object\"!==typeof b.dangerouslySetInnerHTML||!(\"__html\"in b.dangerouslySetInnerHTML))throw Error(p(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(p(62));}}\nfunction vb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}var wb=null;function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(p(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(){}var Ib=!1;function Jb(a,b,c){if(Ib)return a(b,c);Ib=!0;try{return Gb(a,b,c)}finally{if(Ib=!1,null!==zb||null!==Ab)Hb(),Fb()}}\nfunction Kb(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(p(231,b,typeof c));return c}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,\"passive\",{get:function(){Lb=!0}});window.addEventListener(\"test\",Mb,Mb);window.removeEventListener(\"test\",Mb,Mb)}catch(a){Lb=!1}function Nb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0;Pb=a}};function Tb(a,b,c,d,e,f,g,h,k){Ob=!1;Pb=null;Nb.apply(Sb,arguments)}\nfunction Ub(a,b,c,d,e,f,g,h,k){Tb.apply(this,arguments);if(Ob){if(Ob){var l=Pb;Ob=!1;Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=l)}}function Vb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&4098)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Wb(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p(188));}\nfunction Yb(a){var b=a.alternate;if(!b){b=Vb(a);if(null===b)throw Error(p(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Xb(e),a;if(f===d)return Xb(e),b;f=f.sibling}throw Error(p(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(p(189));}}if(c.alternate!==d)throw Error(p(190));}if(3!==c.tag)throw Error(p(188));return c.stateNode.current===c?a:b}function Zb(a){a=Yb(a);return null!==a?$b(a):null}function $b(a){if(5===a.tag||6===a.tag)return a;for(a=a.child;null!==a;){var b=$b(a);if(null!==b)return b;a=a.sibling}return null}\nvar ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&\"function\"===typeof lc.onCommitFiberRoot)try{lc.onCommitFiberRoot(kc,a,void 0,128===(a.current.flags&128))}catch(b){}}\nvar oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){a>>>=0;return 0===a?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;\nfunction tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;\ndefault:return a}}function uc(a,b){var c=a.pendingLanes;if(0===c)return 0;var d=0,e=a.suspendedLanes,f=a.pingedLanes,g=c&268435455;if(0!==g){var h=g&~e;0!==h?d=tc(h):(f&=g,0!==f&&(d=tc(f)))}else g=c&~e,0!==g?d=tc(g):0!==f&&(d=tc(f));if(0===d)return 0;if(0!==b&&b!==d&&0===(b&e)&&(e=d&-d,f=b&-b,e>=f||16===e&&0!==(f&4194240)))return b;0!==(d&4)&&(d|=c&16);b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-oc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction vc(a,b){switch(a){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5E3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}\nfunction wc(a,b){for(var c=a.suspendedLanes,d=a.pingedLanes,e=a.expirationTimes,f=a.pendingLanes;0<f;){var g=31-oc(f),h=1<<g,k=e[g];if(-1===k){if(0===(h&c)||0!==(h&d))e[g]=vc(h,b)}else k<=b&&(a.expiredLanes|=h);f&=~h}}function xc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function yc(){var a=rc;rc<<=1;0===(rc&4194240)&&(rc=64);return a}function zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction Ac(a,b,c){a.pendingLanes|=b;536870912!==b&&(a.suspendedLanes=0,a.pingedLanes=0);a=a.eventTimes;b=31-oc(b);a[b]=c}function Bc(a,b){var c=a.pendingLanes&~b;a.pendingLanes=b;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=b;a.mutableReadLanes&=b;a.entangledLanes&=b;b=a.entanglements;var d=a.eventTimes;for(a=a.expirationTimes;0<c;){var e=31-oc(c),f=1<<e;b[e]=0;d[e]=-1;a[e]=-1;c&=~f}}\nfunction Cc(a,b){var c=a.entangledLanes|=b;for(a=a.entanglements;c;){var d=31-oc(c),e=1<<d;e&b|a[d]&b&&(a[d]|=b);c&=~e}}var C=0;function Dc(a){a&=-a;return 1<a?4<a?0!==(a&268435455)?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction Sc(a,b){switch(a){case \"focusin\":case \"focusout\":Lc=null;break;case \"dragenter\":case \"dragleave\":Mc=null;break;case \"mouseover\":case \"mouseout\":Nc=null;break;case \"pointerover\":case \"pointerout\":Oc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":Pc.delete(b.pointerId)}}\nfunction Tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a={blockedOn:b,domEventName:c,eventSystemFlags:d,nativeEvent:f,targetContainers:[e]},null!==b&&(b=Cb(b),null!==b&&Fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction Uc(a,b,c,d,e){switch(b){case \"focusin\":return Lc=Tc(Lc,a,b,c,d,e),!0;case \"dragenter\":return Mc=Tc(Mc,a,b,c,d,e),!0;case \"mouseover\":return Nc=Tc(Nc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;Oc.set(f,Tc(Oc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,Pc.set(f,Tc(Pc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction Vc(a){var b=Wc(a.target);if(null!==b){var c=Vb(b);if(null!==c)if(b=c.tag,13===b){if(b=Wb(c),null!==b){a.blockedOn=b;Ic(a.priority,function(){Gc(c)});return}}else if(3===b&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction Xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=Yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null===c){c=a.nativeEvent;var d=new c.constructor(c.type,c);wb=d;c.target.dispatchEvent(d);wb=null}else return b=Cb(c),null!==b&&Fc(b),a.blockedOn=c,!1;b.shift()}return!0}function Zc(a,b,c){Xc(a)&&c.delete(b)}function $c(){Jc=!1;null!==Lc&&Xc(Lc)&&(Lc=null);null!==Mc&&Xc(Mc)&&(Mc=null);null!==Nc&&Xc(Nc)&&(Nc=null);Oc.forEach(Zc);Pc.forEach(Zc)}\nfunction ad(a,b){a.blockedOn===b&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}\nfunction bd(a){function b(b){return ad(b,a)}if(0<Kc.length){ad(Kc[0],a);for(var c=1;c<Kc.length;c++){var d=Kc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==Lc&&ad(Lc,a);null!==Mc&&ad(Mc,a);null!==Nc&&ad(Nc,a);Oc.forEach(b);Pc.forEach(b);for(c=0;c<Qc.length;c++)d=Qc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<Qc.length&&(c=Qc[0],null===c.blockedOn);)Vc(c),null===c.blockedOn&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;\nfunction ed(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=1,fd(a,b,c,d)}finally{C=e,cd.transition=f}}function gd(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=4,fd(a,b,c,d)}finally{C=e,cd.transition=f}}\nfunction fd(a,b,c,d){if(dd){var e=Yc(a,b,c,d);if(null===e)hd(a,b,d,id,c),Sc(a,d);else if(Uc(e,a,b,c,d))d.stopPropagation();else if(Sc(a,d),b&4&&-1<Rc.indexOf(a)){for(;null!==e;){var f=Cb(e);null!==f&&Ec(f);f=Yc(a,b,c,d);null===f&&hd(a,b,d,id,c);if(f===e)break;e=f}null!==e&&d.stopPropagation()}else hd(a,b,d,null,c)}}var id=null;\nfunction Yc(a,b,c,d){id=null;a=xb(d);a=Wc(a);if(null!==a)if(b=Vb(a),null===b)a=null;else if(c=b.tag,13===c){a=Wb(b);if(null!==a)return a;a=null}else if(3===c){if(b.stateNode.current.memoizedState.isDehydrated)return 3===b.tag?b.stateNode.containerInfo:null;a=null}else b!==a&&(a=null);id=a;return null}\nfunction jd(a){switch(a){case \"cancel\":case \"click\":case \"close\":case \"contextmenu\":case \"copy\":case \"cut\":case \"auxclick\":case \"dblclick\":case \"dragend\":case \"dragstart\":case \"drop\":case \"focusin\":case \"focusout\":case \"input\":case \"invalid\":case \"keydown\":case \"keypress\":case \"keyup\":case \"mousedown\":case \"mouseup\":case \"paste\":case \"pause\":case \"play\":case \"pointercancel\":case \"pointerdown\":case \"pointerup\":case \"ratechange\":case \"reset\":case \"resize\":case \"seeked\":case \"submit\":case \"touchcancel\":case \"touchend\":case \"touchstart\":case \"volumechange\":case \"change\":case \"selectionchange\":case \"textInput\":case \"compositionstart\":case \"compositionend\":case \"compositionupdate\":case \"beforeblur\":case \"afterblur\":case \"beforeinput\":case \"blur\":case \"fullscreenchange\":case \"focus\":case \"hashchange\":case \"popstate\":case \"select\":case \"selectstart\":return 1;case \"drag\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"mousemove\":case \"mouseout\":case \"mouseover\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"scroll\":case \"toggle\":case \"touchmove\":case \"wheel\":case \"mouseenter\":case \"mouseleave\":case \"pointerenter\":case \"pointerleave\":return 4;\ncase \"message\":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}\nfunction od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}A(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=A({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&\"CompositionEvent\"in window,be=null;ia&&\"documentMode\"in document&&(be=document.documentMode);var ce=ia&&\"TextEvent\"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(ia){var xe;if(ia){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));Jb(re,b)}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge;\nfunction Ie(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var e=c[d];if(!ja.call(b,e)||!He(a[e],b[e]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Ke(a,b){var c=Je(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Je(c)}}function Le(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Le(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Me(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Ne(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nfunction Oe(a){var b=Me(),c=a.focusedElem,d=a.selectionRange;if(b!==c&&c&&c.ownerDocument&&Le(c.ownerDocument.documentElement,c)){if(null!==d&&Ne(c))if(b=d.start,a=d.end,void 0===a&&(a=b),\"selectionStart\"in c)c.selectionStart=b,c.selectionEnd=Math.min(a,c.value.length);else if(a=(b=c.ownerDocument||document)&&b.defaultView||window,a.getSelection){a=a.getSelection();var e=c.textContent.length,f=Math.min(d.start,e);d=void 0===d.end?f:Math.min(d.end,e);!a.extend&&f>d&&(e=d,d=f,f=e);e=Ke(c,f);var g=Ke(c,\nd);e&&g&&(1!==a.rangeCount||a.anchorNode!==e.node||a.anchorOffset!==e.offset||a.focusNode!==g.node||a.focusOffset!==g.offset)&&(b=b.createRange(),b.setStart(e.node,e.offset),a.removeAllRanges(),f>d?(a.addRange(b),a.extend(g.node,g.offset)):(b.setEnd(g.node,g.offset),a.addRange(b)))}b=[];for(a=c;a=a.parentNode;)1===a.nodeType&&b.push({element:a,left:a.scrollLeft,top:a.scrollTop});\"function\"===typeof c.focus&&c.focus();for(c=0;c<b.length;c++)a=b[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}\nvar Pe=ia&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nfunction Ve(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var We={animationend:Ve(\"Animation\",\"AnimationEnd\"),animationiteration:Ve(\"Animation\",\"AnimationIteration\"),animationstart:Ve(\"Animation\",\"AnimationStart\"),transitionend:Ve(\"Transition\",\"TransitionEnd\")},Xe={},Ye={};\nia&&(Ye=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),\"TransitionEvent\"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var b=We[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Ye)return Xe[a]=b[c];return a}var $e=Ze(\"animationend\"),af=Ze(\"animationiteration\"),bf=Ze(\"animationstart\"),cf=Ze(\"transitionend\"),df=new Map,ef=\"abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\" \");\nfunction ff(a,b){df.set(a,b);fa(b,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,\"on\"+kf)}ff($e,\"onAnimationEnd\");ff(af,\"onAnimationIteration\");ff(bf,\"onAnimationStart\");ff(\"dblclick\",\"onDoubleClick\");ff(\"focusin\",\"onFocus\");ff(\"focusout\",\"onBlur\");ff(cf,\"onTransitionEnd\");ha(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);ha(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ha(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);\nha(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);fa(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));fa(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));fa(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);fa(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));fa(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));\nfa(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var lf=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),mf=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(lf));\nfunction nf(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Ub(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a;}\nfunction D(a,b){var c=b[of];void 0===c&&(c=b[of]=new Set);var d=a+\"__bubble\";c.has(d)||(pf(b,a,2,!1),c.add(d))}function qf(a,b,c){var d=0;b&&(d|=4);pf(c,a,d,b)}var rf=\"_reactListening\"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0;da.forEach(function(b){\"selectionchange\"!==b&&(mf.has(b)||qf(b,!1,a),qf(b,!0,a))});var b=9===a.nodeType?a:a.ownerDocument;null===b||b[rf]||(b[rf]=!0,qf(\"selectionchange\",!1,b))}}\nfunction pf(a,b,c,d){switch(jd(b)){case 1:var e=ed;break;case 4:e=gd;break;default:e=fd}c=e.bind(null,b,c,a);e=void 0;!Lb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction hd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=Wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Jb(function(){var d=f,e=xb(c),g=[];\na:{var h=df.get(a);if(void 0!==h){var k=td,n=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":n=\"focus\";k=Fd;break;case \"focusout\":n=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case $e:case af:case bf:k=Hd;break;case cf:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var t=0!==(b&4),J=!t&&\"scroll\"===a,x=t?null!==h?h+\"Capture\":null:h;t=[];for(var w=d,u;null!==\nw;){u=w;var F=u.stateNode;5===u.tag&&null!==F&&(u=F,null!==x&&(F=Kb(w,x),null!=F&&t.push(tf(w,F,u))));if(J)break;w=w.return}0<t.length&&(h=new k(h,n,null,c,e),g.push({event:h,listeners:t}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&c!==wb&&(n=c.relatedTarget||c.fromElement)&&(Wc(n)||n[uf]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(n=c.relatedTarget||c.toElement,k=d,n=n?Wc(n):null,null!==\nn&&(J=Vb(n),n!==J||5!==n.tag&&6!==n.tag))n=null}else k=null,n=d;if(k!==n){t=Bd;F=\"onMouseLeave\";x=\"onMouseEnter\";w=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)t=Td,F=\"onPointerLeave\",x=\"onPointerEnter\",w=\"pointer\";J=null==k?h:ue(k);u=null==n?h:ue(n);h=new t(F,w+\"leave\",k,c,e);h.target=J;h.relatedTarget=u;F=null;Wc(e)===d&&(t=new t(x,w+\"enter\",n,c,e),t.target=u,t.relatedTarget=J,F=t);J=F;if(k&&n)b:{t=k;x=n;w=0;for(u=t;u;u=vf(u))w++;u=0;for(F=x;F;F=vf(F))u++;for(;0<w-u;)t=vf(t),w--;for(;0<u-w;)x=\nvf(x),u--;for(;w--;){if(t===x||null!==x&&t===x.alternate)break b;t=vf(t);x=vf(x)}t=null}else t=null;null!==k&&wf(g,h,k,t,!1);null!==n&&null!==J&&wf(g,J,n,t,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var na=ve;else if(me(h))if(we)na=Fe;else{na=De;var xa=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(na=Ee);if(na&&(na=na(a,d))){ne(g,na,c,e);break a}xa&&xa(a,h,d);\"focusout\"===a&&(xa=h._wrapperState)&&\nxa.controlled&&\"number\"===h.type&&cb(h,\"number\",h.value)}xa=d?ue(d):window;switch(a){case \"focusin\":if(me(xa)||\"true\"===xa.contentEditable)Qe=xa,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var $a;if(ae)b:{switch(a){case \"compositionstart\":var ba=\"onCompositionStart\";break b;case \"compositionend\":ba=\"onCompositionEnd\";\nbreak b;case \"compositionupdate\":ba=\"onCompositionUpdate\";break b}ba=void 0}else ie?ge(a,c)&&(ba=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(ba=\"onCompositionStart\");ba&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==ba?\"onCompositionEnd\"===ba&&ie&&($a=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),xa=oe(d,ba),0<xa.length&&(ba=new Ld(ba,a,null,c,e),g.push({event:ba,listeners:xa}),$a?ba.data=$a:($a=he(c),null!==$a&&(ba.data=$a))));if($a=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),\n0<d.length&&(e=new Ld(\"onBeforeInput\",\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=$a)}se(g,b)})}function tf(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Kb(a,c),null!=f&&d.unshift(tf(a,f,e)),f=Kb(a,b),null!=f&&d.push(tf(a,f,e)));a=a.return}return d}function vf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction wf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Kb(c,f),null!=k&&g.unshift(tf(c,k,h))):e||(k=Kb(c,f),null!=k&&g.push(tf(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}var xf=/\\r\\n?/g,yf=/\\u0000|\\uFFFD/g;function zf(a){return(\"string\"===typeof a?a:\"\"+a).replace(xf,\"\\n\").replace(yf,\"\")}function Af(a,b,c){b=zf(b);if(zf(a)!==b&&c)throw Error(p(425));}function Bf(){}\nvar Cf=null,Df=null;function Ef(a,b){return\"textarea\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}\nvar Ff=\"function\"===typeof setTimeout?setTimeout:void 0,Gf=\"function\"===typeof clearTimeout?clearTimeout:void 0,Hf=\"function\"===typeof Promise?Promise:void 0,Jf=\"function\"===typeof queueMicrotask?queueMicrotask:\"undefined\"!==typeof Hf?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a;})}\nfunction Kf(a,b){var c=b,d=0;do{var e=c.nextSibling;a.removeChild(c);if(e&&8===e.nodeType)if(c=e.data,\"/$\"===c){if(0===d){a.removeChild(e);bd(b);return}d--}else\"$\"!==c&&\"$?\"!==c&&\"$!\"!==c||d++;c=e}while(c);bd(b)}function Lf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break;if(8===b){b=a.data;if(\"$\"===b||\"$!\"===b||\"$?\"===b)break;if(\"/$\"===b)return null}}return a}\nfunction Mf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of=\"__reactFiber$\"+Nf,Pf=\"__reactProps$\"+Nf,uf=\"__reactContainer$\"+Nf,of=\"__reactEvents$\"+Nf,Qf=\"__reactListeners$\"+Nf,Rf=\"__reactHandles$\"+Nf;\nfunction Wc(a){var b=a[Of];if(b)return b;for(var c=a.parentNode;c;){if(b=c[uf]||c[Of]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=Mf(a);null!==a;){if(c=a[Of])return c;a=Mf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[Of]||a[uf];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(p(33));}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}\nfunction E(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(a,b){Tf++;Sf[Tf]=a.current;a.current=b}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,b){var c=a.type.contextTypes;if(!c)return Vf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}\nfunction Zf(a){a=a.childContextTypes;return null!==a&&void 0!==a}function $f(){E(Wf);E(H)}function ag(a,b,c){if(H.current!==Vf)throw Error(p(168));G(H,b);G(Wf,c)}function bg(a,b,c){var d=a.stateNode;b=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in b))throw Error(p(108,Ra(a)||\"Unknown\",e));return A({},c,d)}\nfunction cg(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf;Xf=H.current;G(H,a);G(Wf,Wf.current);return!0}function dg(a,b,c){var d=a.stateNode;if(!d)throw Error(p(169));c?(a=bg(a,b,Xf),d.__reactInternalMemoizedMergedChildContext=a,E(Wf),E(H),G(H,a)):E(Wf);G(Wf,c)}var eg=null,fg=!1,gg=!1;function hg(a){null===eg?eg=[a]:eg.push(a)}function ig(a){fg=!0;hg(a)}\nfunction jg(){if(!gg&&null!==eg){gg=!0;var a=0,b=C;try{var c=eg;for(C=1;a<c.length;a++){var d=c[a];do d=d(!0);while(null!==d)}eg=null;fg=!1}catch(e){throw null!==eg&&(eg=eg.slice(a+1)),ac(fc,jg),e;}finally{C=b,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg=\"\";function tg(a,b){kg[lg++]=ng;kg[lg++]=mg;mg=a;ng=b}\nfunction ug(a,b,c){og[pg++]=rg;og[pg++]=sg;og[pg++]=qg;qg=a;var d=rg;a=sg;var e=32-oc(d)-1;d&=~(1<<e);c+=1;var f=32-oc(b)+e;if(30<f){var g=e-e%5;f=(d&(1<<g)-1).toString(32);d>>=g;e-=g;rg=1<<32-oc(b)+e|c<<e|d;sg=f+a}else rg=1<<f|c<<e|d,sg=a}function vg(a){null!==a.return&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;\nfunction Ag(a,b){var c=Bg(5,null,null,0);c.elementType=\"DELETED\";c.stateNode=b;c.return=a;b=a.deletions;null===b?(a.deletions=[c],a.flags|=16):b.push(c)}\nfunction Cg(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,xg=a,yg=Lf(b.firstChild),!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,xg=a,yg=null,!0):!1;case 13:return b=8!==b.nodeType?null:b,null!==b?(c=null!==qg?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:b,treeContext:c,retryLane:1073741824},c=Bg(18,null,null,0),c.stateNode=b,c.return=a,a.child=c,xg=a,yg=\nnull,!0):!1;default:return!1}}function Dg(a){return 0!==(a.mode&1)&&0===(a.flags&128)}function Eg(a){if(I){var b=yg;if(b){var c=b;if(!Cg(a,b)){if(Dg(a))throw Error(p(418));b=Lf(c.nextSibling);var d=xg;b&&Cg(a,b)?Ag(d,c):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p(418));a.flags=a.flags&-4097|2;I=!1;xg=a}}}function Fg(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;xg=a}\nfunction Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var b;(b=3!==a.tag)&&!(b=5!==a.tag)&&(b=a.type,b=\"head\"!==b&&\"body\"!==b&&!Ef(a.type,a.memoizedProps));if(b&&(b=yg)){if(Dg(a))throw Hg(),Error(p(418));for(;b;)Ag(a,b),b=Lf(b.nextSibling)}Fg(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(p(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){yg=Lf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}yg=\nnull}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null;I=!1}function Jg(a){null===zg?zg=[a]:zg.push(a)}var Kg=ua.ReactCurrentBatchConfig;function Lg(a,b){if(a&&a.defaultProps){b=A({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(a){var b=Mg.current;E(Mg);a._currentValue=b}\nfunction Sg(a,b,c){for(;null!==a;){var d=a.alternate;(a.childLanes&b)!==b?(a.childLanes|=b,null!==d&&(d.childLanes|=b)):null!==d&&(d.childLanes&b)!==b&&(d.childLanes|=b);if(a===c)break;a=a.return}}function Tg(a,b){Ng=a;Pg=Og=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(Ug=!0),a.firstContext=null)}\nfunction Vg(a){var b=a._currentValue;if(Pg!==a)if(a={context:a,memoizedValue:b,next:null},null===Og){if(null===Ng)throw Error(p(308));Og=a;Ng.dependencies={lanes:0,firstContext:a}}else Og=Og.next=a;return b}var Wg=null;function Xg(a){null===Wg?Wg=[a]:Wg.push(a)}function Yg(a,b,c,d){var e=b.interleaved;null===e?(c.next=c,Xg(b)):(c.next=e.next,e.next=c);b.interleaved=c;return Zg(a,d)}\nfunction Zg(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}var $g=!1;function ah(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}\nfunction bh(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ch(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}\nfunction dh(a,b,c){var d=a.updateQueue;if(null===d)return null;d=d.shared;if(0!==(K&2)){var e=d.pending;null===e?b.next=b:(b.next=e.next,e.next=b);d.pending=b;return Zg(a,c)}e=d.interleaved;null===e?(b.next=b,Xg(d)):(b.next=e.next,e.next=b);d.interleaved=b;return Zg(a,c)}function eh(a,b,c){b=b.updateQueue;if(null!==b&&(b=b.shared,0!==(c&4194240))){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nfunction fh(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction gh(a,b,c,d){var e=a.updateQueue;$g=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var m=a.alternate;null!==m&&(m=m.updateQueue,h=m.lastBaseUpdate,h!==g&&(null===h?m.firstBaseUpdate=l:h.next=l,m.lastBaseUpdate=k))}if(null!==f){var q=e.baseState;g=0;m=l=k=null;h=f;do{var r=h.lane,y=h.eventTime;if((d&r)===r){null!==m&&(m=m.next={eventTime:y,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,\nnext:null});a:{var n=a,t=h;r=b;y=c;switch(t.tag){case 1:n=t.payload;if(\"function\"===typeof n){q=n.call(y,q,r);break a}q=n;break a;case 3:n.flags=n.flags&-65537|128;case 0:n=t.payload;r=\"function\"===typeof n?n.call(y,q,r):n;if(null===r||void 0===r)break a;q=A({},q,r);break a;case 2:$g=!0}}null!==h.callback&&0!==h.lane&&(a.flags|=64,r=e.effects,null===r?e.effects=[h]:r.push(h))}else y={eventTime:y,lane:r,tag:h.tag,payload:h.payload,callback:h.callback,next:null},null===m?(l=m=y,k=q):m=m.next=y,g|=r;\nh=h.next;if(null===h)if(h=e.shared.pending,null===h)break;else r=h,h=r.next,r.next=null,e.lastBaseUpdate=r,e.shared.pending=null}while(1);null===m&&(k=q);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=m;b=e.shared.interleaved;if(null!==b){e=b;do g|=e.lane,e=e.next;while(e!==b)}else null===f&&(e.shared.lanes=0);hh|=g;a.lanes=g;a.memoizedState=q}}\nfunction ih(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(p(191,e));e.call(d)}}}var jh=(new aa.Component).refs;function kh(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:A({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar nh={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=L(),e=lh(a),f=ch(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=dh(a,f,e);null!==b&&(mh(b,a,e,d),eh(b,a,e))},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=L(),e=lh(a),f=ch(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=dh(a,f,e);null!==b&&(mh(b,a,e,d),eh(b,a,e))},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=L(),d=\nlh(a),e=ch(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=b);b=dh(a,e,d);null!==b&&(mh(b,a,d,c),eh(b,a,d))}};function oh(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Ie(c,d)||!Ie(e,f):!0}\nfunction ph(a,b,c){var d=!1,e=Vf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=Vg(f):(e=Zf(b)?Xf:H.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Yf(a,e):Vf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=nh;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction qh(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&nh.enqueueReplaceState(b,b.state,null)}\nfunction rh(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=jh;ah(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=Vg(f):(f=Zf(b)?Xf:H.current,e.context=Yf(a,f));e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(kh(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||(b=e.state,\n\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&nh.enqueueReplaceState(e,e.state,null),gh(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4194308)}\nfunction sh(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(p(309));var d=c.stateNode}if(!d)throw Error(p(147,a));var e=d,f=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===f)return b.ref;b=function(a){var b=e.refs;b===jh&&(b=e.refs={});null===a?delete b[f]:b[f]=a};b._stringRef=f;return b}if(\"string\"!==typeof a)throw Error(p(284));if(!c._owner)throw Error(p(290,a));}return a}\nfunction th(a,b){a=Object.prototype.toString.call(b);throw Error(p(31,\"[object Object]\"===a?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":a));}function uh(a){var b=a._init;return b(a._payload)}\nfunction vh(a){function b(b,c){if(a){var d=b.deletions;null===d?(b.deletions=[c],b.flags|=16):d.push(c)}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=wh(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return b.flags|=1048576,c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags|=2,c):d;b.flags|=2;return c}function g(b){a&&\nnull===b.alternate&&(b.flags|=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=xh(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){var f=c.type;if(f===ya)return m(a,b,c.props.children,d,c.key);if(null!==b&&(b.elementType===f||\"object\"===typeof f&&null!==f&&f.$$typeof===Ha&&uh(f)===b.type))return d=e(b,c.props),d.ref=sh(a,b,c),d.return=a,d;d=yh(c.type,c.key,c.props,null,a.mode,d);d.ref=sh(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||\nb.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=zh(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function m(a,b,c,d,f){if(null===b||7!==b.tag)return b=Ah(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function q(a,b,c){if(\"string\"===typeof b&&\"\"!==b||\"number\"===typeof b)return b=xh(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case va:return c=yh(b.type,b.key,b.props,null,a.mode,c),\nc.ref=sh(a,null,b),c.return=a,c;case wa:return b=zh(b,a.mode,c),b.return=a,b;case Ha:var d=b._init;return q(a,d(b._payload),c)}if(eb(b)||Ka(b))return b=Ah(b,a.mode,c,null),b.return=a,b;th(a,b)}return null}function r(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c&&\"\"!==c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case va:return c.key===e?k(a,b,c,d):null;case wa:return c.key===e?l(a,b,c,d):null;case Ha:return e=c._init,r(a,\nb,e(c._payload),d)}if(eb(c)||Ka(c))return null!==e?null:m(a,b,c,d,null);th(a,c)}return null}function y(a,b,c,d,e){if(\"string\"===typeof d&&\"\"!==d||\"number\"===typeof d)return a=a.get(c)||null,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case va:return a=a.get(null===d.key?c:d.key)||null,k(b,a,d,e);case wa:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e);case Ha:var f=d._init;return y(a,b,c,f(d._payload),e)}if(eb(d)||Ka(d))return a=a.get(c)||null,m(b,a,d,e,null);th(b,d)}return null}\nfunction n(e,g,h,k){for(var l=null,m=null,u=g,w=g=0,x=null;null!==u&&w<h.length;w++){u.index>w?(x=u,u=null):x=u.sibling;var n=r(e,u,h[w],k);if(null===n){null===u&&(u=x);break}a&&u&&null===n.alternate&&b(e,u);g=f(n,g,w);null===m?l=n:m.sibling=n;m=n;u=x}if(w===h.length)return c(e,u),I&&tg(e,w),l;if(null===u){for(;w<h.length;w++)u=q(e,h[w],k),null!==u&&(g=f(u,g,w),null===m?l=u:m.sibling=u,m=u);I&&tg(e,w);return l}for(u=d(e,u);w<h.length;w++)x=y(u,e,w,h[w],k),null!==x&&(a&&null!==x.alternate&&u.delete(null===\nx.key?w:x.key),g=f(x,g,w),null===m?l=x:m.sibling=x,m=x);a&&u.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function t(e,g,h,k){var l=Ka(h);if(\"function\"!==typeof l)throw Error(p(150));h=l.call(h);if(null==h)throw Error(p(151));for(var u=l=null,m=g,w=g=0,x=null,n=h.next();null!==m&&!n.done;w++,n=h.next()){m.index>w?(x=m,m=null):x=m.sibling;var t=r(e,m,n.value,k);if(null===t){null===m&&(m=x);break}a&&m&&null===t.alternate&&b(e,m);g=f(t,g,w);null===u?l=t:u.sibling=t;u=t;m=x}if(n.done)return c(e,\nm),I&&tg(e,w),l;if(null===m){for(;!n.done;w++,n=h.next())n=q(e,n.value,k),null!==n&&(g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);I&&tg(e,w);return l}for(m=d(e,m);!n.done;w++,n=h.next())n=y(m,e,w,n.value,k),null!==n&&(a&&null!==n.alternate&&m.delete(null===n.key?w:n.key),g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);a&&m.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function J(a,d,f,h){\"object\"===typeof f&&null!==f&&f.type===ya&&null===f.key&&(f=f.props.children);if(\"object\"===typeof f&&null!==f){switch(f.$$typeof){case va:a:{for(var k=\nf.key,l=d;null!==l;){if(l.key===k){k=f.type;if(k===ya){if(7===l.tag){c(a,l.sibling);d=e(l,f.props.children);d.return=a;a=d;break a}}else if(l.elementType===k||\"object\"===typeof k&&null!==k&&k.$$typeof===Ha&&uh(k)===l.type){c(a,l.sibling);d=e(l,f.props);d.ref=sh(a,l,f);d.return=a;a=d;break a}c(a,l);break}else b(a,l);l=l.sibling}f.type===ya?(d=Ah(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=yh(f.type,f.key,f.props,null,a.mode,h),h.ref=sh(a,d,f),h.return=a,a=h)}return g(a);case wa:a:{for(l=f.key;null!==\nd;){if(d.key===l)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=zh(f,a.mode,h);d.return=a;a=d}return g(a);case Ha:return l=f._init,J(a,d,l(f._payload),h)}if(eb(f))return n(a,d,f,h);if(Ka(f))return t(a,d,f,h);th(a,f)}return\"string\"===typeof f&&\"\"!==f||\"number\"===typeof f?(f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):\n(c(a,d),d=xh(f,a.mode,h),d.return=a,a=d),g(a)):c(a,d)}return J}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(a){if(a===Dh)throw Error(p(174));return a}function Ih(a,b){G(Gh,b);G(Fh,a);G(Eh,Dh);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:lb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=lb(b,a)}E(Eh);G(Eh,b)}function Jh(){E(Eh);E(Fh);E(Gh)}\nfunction Kh(a){Hh(Gh.current);var b=Hh(Eh.current);var c=lb(b,a.type);b!==c&&(G(Fh,a),G(Eh,c))}function Lh(a){Fh.current===a&&(E(Eh),E(Fh))}var M=Uf(0);\nfunction Mh(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&128))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var Nh=[];\nfunction Oh(){for(var a=0;a<Nh.length;a++)Nh[a]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p(321));}function Wh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Xh(a,b,c,d,e,f){Rh=f;N=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;Ph.current=null===a||null===a.memoizedState?Yh:Zh;a=c(d,e);if(Th){f=0;do{Th=!1;Uh=0;if(25<=f)throw Error(p(301));f+=1;P=O=null;b.updateQueue=null;Ph.current=$h;a=c(d,e)}while(Th)}Ph.current=ai;b=null!==O&&null!==O.next;Rh=0;P=O=N=null;Sh=!1;if(b)throw Error(p(300));return a}function bi(){var a=0!==Uh;Uh=0;return a}\nfunction ci(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===P?N.memoizedState=P=a:P=P.next=a;return P}function di(){if(null===O){var a=N.alternate;a=null!==a?a.memoizedState:null}else a=O.next;var b=null===P?N.memoizedState:P.next;if(null!==b)P=b,O=a;else{if(null===a)throw Error(p(310));O=a;a={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null};null===P?N.memoizedState=P=a:P=P.next=a}return P}\nfunction ei(a,b){return\"function\"===typeof b?b(a):b}\nfunction fi(a){var b=di(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=O,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){f=e.next;d=d.baseState;var h=g=null,k=null,l=f;do{var m=l.lane;if((Rh&m)===m)null!==k&&(k=k.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),d=l.hasEagerState?l.eagerState:a(d,l.action);else{var q={lane:m,action:l.action,hasEagerState:l.hasEagerState,\neagerState:l.eagerState,next:null};null===k?(h=k=q,g=d):k=k.next=q;N.lanes|=m;hh|=m}l=l.next}while(null!==l&&l!==f);null===k?g=d:k.next=h;He(d,b.memoizedState)||(Ug=!0);b.memoizedState=d;b.baseState=g;b.baseQueue=k;c.lastRenderedState=d}a=c.interleaved;if(null!==a){e=a;do f=e.lane,N.lanes|=f,hh|=f,e=e.next;while(e!==a)}else null===e&&(c.lanes=0);return[b.memoizedState,c.dispatch]}\nfunction gi(a){var b=di(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(Ug=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function hi(){}\nfunction ii(a,b){var c=N,d=di(),e=b(),f=!He(d.memoizedState,e);f&&(d.memoizedState=e,Ug=!0);d=d.queue;ji(ki.bind(null,c,d,a),[a]);if(d.getSnapshot!==b||f||null!==P&&P.memoizedState.tag&1){c.flags|=2048;li(9,mi.bind(null,c,d,e,b),void 0,null);if(null===R)throw Error(p(349));0!==(Rh&30)||ni(c,b,e)}return e}function ni(a,b,c){a.flags|=16384;a={getSnapshot:b,value:c};b=N.updateQueue;null===b?(b={lastEffect:null,stores:null},N.updateQueue=b,b.stores=[a]):(c=b.stores,null===c?b.stores=[a]:c.push(a))}\nfunction mi(a,b,c,d){b.value=c;b.getSnapshot=d;oi(b)&&pi(a)}function ki(a,b,c){return c(function(){oi(b)&&pi(a)})}function oi(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!He(a,c)}catch(d){return!0}}function pi(a){var b=Zg(a,1);null!==b&&mh(b,a,1,-1)}\nfunction qi(a){var b=ci();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:a};b.queue=a;a=a.dispatch=ri.bind(null,N,a);return[b.memoizedState,a]}\nfunction li(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=N.updateQueue;null===b?(b={lastEffect:null,stores:null},N.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function si(){return di().memoizedState}function ti(a,b,c,d){var e=ci();N.flags|=a;e.memoizedState=li(1|b,c,void 0,void 0===d?null:d)}\nfunction ui(a,b,c,d){var e=di();d=void 0===d?null:d;var f=void 0;if(null!==O){var g=O.memoizedState;f=g.destroy;if(null!==d&&Wh(d,g.deps)){e.memoizedState=li(b,c,f,d);return}}N.flags|=a;e.memoizedState=li(1|b,c,f,d)}function vi(a,b){return ti(8390656,8,a,b)}function ji(a,b){return ui(2048,8,a,b)}function wi(a,b){return ui(4,2,a,b)}function xi(a,b){return ui(4,4,a,b)}\nfunction yi(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function zi(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ui(4,4,yi.bind(null,b,a),c)}function Ai(){}function Bi(a,b){var c=di();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Wh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}\nfunction Ci(a,b){var c=di();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Wh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Di(a,b,c){if(0===(Rh&21))return a.baseState&&(a.baseState=!1,Ug=!0),a.memoizedState=c;He(c,b)||(c=yc(),N.lanes|=c,hh|=c,a.baseState=!0);return b}function Ei(a,b){var c=C;C=0!==c&&4>c?c:4;a(!0);var d=Qh.transition;Qh.transition={};try{a(!1),b()}finally{C=c,Qh.transition=d}}function Fi(){return di().memoizedState}\nfunction Gi(a,b,c){var d=lh(a);c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(Hi(a))Ii(b,c);else if(c=Yg(a,b,c,d),null!==c){var e=L();mh(c,a,d,e);Ji(c,b,d)}}\nfunction ri(a,b,c){var d=lh(a),e={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(Hi(a))Ii(b,e);else{var f=a.alternate;if(0===a.lanes&&(null===f||0===f.lanes)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,h=f(g,c);e.hasEagerState=!0;e.eagerState=h;if(He(h,g)){var k=b.interleaved;null===k?(e.next=e,Xg(b)):(e.next=k.next,k.next=e);b.interleaved=e;return}}catch(l){}finally{}c=Yg(a,b,e,d);null!==c&&(e=L(),mh(c,a,d,e),Ji(c,b,d))}}\nfunction Hi(a){var b=a.alternate;return a===N||null!==b&&b===N}function Ii(a,b){Th=Sh=!0;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}function Ji(a,b,c){if(0!==(c&4194240)){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nvar ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(a,b){ci().memoizedState=[a,void 0===b?null:b];return a},useContext:Vg,useEffect:vi,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ti(4194308,\n4,yi.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ti(4194308,4,a,b)},useInsertionEffect:function(a,b){return ti(4,2,a,b)},useMemo:function(a,b){var c=ci();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=ci();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};d.queue=a;a=a.dispatch=Gi.bind(null,N,a);return[d.memoizedState,a]},useRef:function(a){var b=\nci();a={current:a};return b.memoizedState=a},useState:qi,useDebugValue:Ai,useDeferredValue:function(a){return ci().memoizedState=a},useTransition:function(){var a=qi(!1),b=a[0];a=Ei.bind(null,a[1]);ci().memoizedState=a;return[b,a]},useMutableSource:function(){},useSyncExternalStore:function(a,b,c){var d=N,e=ci();if(I){if(void 0===c)throw Error(p(407));c=c()}else{c=b();if(null===R)throw Error(p(349));0!==(Rh&30)||ni(d,b,c)}e.memoizedState=c;var f={value:c,getSnapshot:b};e.queue=f;vi(ki.bind(null,d,\nf,a),[a]);d.flags|=2048;li(9,mi.bind(null,d,f,c,b),void 0,null);return c},useId:function(){var a=ci(),b=R.identifierPrefix;if(I){var c=sg;var d=rg;c=(d&~(1<<32-oc(d)-1)).toString(32)+c;b=\":\"+b+\"R\"+c;c=Uh++;0<c&&(b+=\"H\"+c.toString(32));b+=\":\"}else c=Vh++,b=\":\"+b+\"r\"+c.toString(32)+\":\";return a.memoizedState=b},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},\nuseDebugValue:Ai,useDeferredValue:function(a){var b=di();return Di(b,O.memoizedState,a)},useTransition:function(){var a=fi(ei)[0],b=di().memoizedState;return[a,b]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(a){var b=di();return null===\nO?b.memoizedState=a:Di(b,O.memoizedState,a)},useTransition:function(){var a=gi(ei)[0],b=di().memoizedState;return[a,b]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(a,b){try{var c=\"\",d=b;do c+=Pa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e,digest:null}}function Li(a,b,c){return{value:a,source:null,stack:null!=c?c:null,digest:null!=b?b:null}}\nfunction Mi(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Ni=\"function\"===typeof WeakMap?WeakMap:Map;function Oi(a,b,c){c=ch(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Pi||(Pi=!0,Qi=d);Mi(a,b)};return c}\nfunction Ri(a,b,c){c=ch(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){return d(e)};c.callback=function(){Mi(a,b)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){Mi(a,b);\"function\"!==typeof d&&(null===Si?Si=new Set([this]):Si.add(this));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}\nfunction Ti(a,b,c){var d=a.pingCache;if(null===d){d=a.pingCache=new Ni;var e=new Set;d.set(b,e)}else e=d.get(b),void 0===e&&(e=new Set,d.set(b,e));e.has(c)||(e.add(c),a=Ui.bind(null,a,b,c),b.then(a,a))}function Vi(a){do{var b;if(b=13===a.tag)b=a.memoizedState,b=null!==b?null!==b.dehydrated?!0:!1:!0;if(b)return a;a=a.return}while(null!==a);return null}\nfunction Wi(a,b,c,d,e){if(0===(a.mode&1))return a===b?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:(b=ch(-1,1),b.tag=2,dh(c,b,1))),c.lanes|=1),a;a.flags|=65536;a.lanes=e;return a}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(a,b,c,d){b.child=null===a?Ch(b,null,c,d):Bh(b,a.child,c,d)}\nfunction Zi(a,b,c,d,e){c=c.render;var f=b.ref;Tg(b,e);d=Xh(a,b,c,d,f,e);c=bi();if(null!==a&&!Ug)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,$i(a,b,e);I&&c&&vg(b);b.flags|=1;Yi(a,b,d,e);return b.child}\nfunction aj(a,b,c,d,e){if(null===a){var f=c.type;if(\"function\"===typeof f&&!bj(f)&&void 0===f.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=f,cj(a,b,f,d,e);a=yh(c.type,null,d,b,b.mode,e);a.ref=b.ref;a.return=b;return b.child=a}f=a.child;if(0===(a.lanes&e)){var g=f.memoizedProps;c=c.compare;c=null!==c?c:Ie;if(c(g,d)&&a.ref===b.ref)return $i(a,b,e)}b.flags|=1;a=wh(f,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction cj(a,b,c,d,e){if(null!==a){var f=a.memoizedProps;if(Ie(f,d)&&a.ref===b.ref)if(Ug=!1,b.pendingProps=d=f,0!==(a.lanes&e))0!==(a.flags&131072)&&(Ug=!0);else return b.lanes=a.lanes,$i(a,b,e)}return dj(a,b,c,d,e)}\nfunction ej(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode)if(0===(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=c;else{if(0===(c&1073741824))return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a,cachePool:null,transitions:null},b.updateQueue=null,G(fj,gj),gj|=a,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null};d=null!==f?f.baseLanes:c;G(fj,gj);gj|=d}else null!==\nf?(d=f.baseLanes|c,b.memoizedState=null):d=c,G(fj,gj),gj|=d;Yi(a,b,e,c);return b.child}function hj(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=512,b.flags|=2097152}function dj(a,b,c,d,e){var f=Zf(c)?Xf:H.current;f=Yf(b,f);Tg(b,e);c=Xh(a,b,c,d,f,e);d=bi();if(null!==a&&!Ug)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,$i(a,b,e);I&&d&&vg(b);b.flags|=1;Yi(a,b,c,e);return b.child}\nfunction ij(a,b,c,d,e){if(Zf(c)){var f=!0;cg(b)}else f=!1;Tg(b,e);if(null===b.stateNode)jj(a,b),ph(b,c,d),rh(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=Vg(l):(l=Zf(c)?Xf:H.current,l=Yf(b,l));var m=c.getDerivedStateFromProps,q=\"function\"===typeof m||\"function\"===typeof g.getSnapshotBeforeUpdate;q||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||\n(h!==d||k!==l)&&qh(b,g,d,l);$g=!1;var r=b.memoizedState;g.state=r;gh(b,d,g,e);k=b.memoizedState;h!==d||r!==k||Wf.current||$g?(\"function\"===typeof m&&(kh(b,c,m,d),k=b.memoizedState),(h=$g||oh(b,c,h,d,r,k,l))?(q||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===typeof g.componentDidMount&&(b.flags|=4194308)):\n(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),d=!1)}else{g=b.stateNode;bh(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:Lg(b.type,h);g.props=l;q=b.pendingProps;r=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=Vg(k):(k=Zf(c)?Xf:H.current,k=Yf(b,k));var y=c.getDerivedStateFromProps;(m=\"function\"===typeof y||\"function\"===typeof g.getSnapshotBeforeUpdate)||\n\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==q||r!==k)&&qh(b,g,d,k);$g=!1;r=b.memoizedState;g.state=r;gh(b,d,g,e);var n=b.memoizedState;h!==q||r!==n||Wf.current||$g?(\"function\"===typeof y&&(kh(b,c,y,d),n=b.memoizedState),(l=$g||oh(b,c,l,d,r,n,k)||!1)?(m||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,n,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&\ng.UNSAFE_componentWillUpdate(d,n,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=1024)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),b.memoizedProps=d,b.memoizedState=n),g.props=d,g.state=n,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===\na.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),d=!1)}return kj(a,b,c,d,f,e)}\nfunction kj(a,b,c,d,e,f){hj(a,b);var g=0!==(b.flags&128);if(!d&&!g)return e&&dg(b,c,!1),$i(a,b,f);d=b.stateNode;Xi.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Bh(b,a.child,null,f),b.child=Bh(b,null,h,f)):Yi(a,b,h,f);b.memoizedState=d.state;e&&dg(b,c,!0);return b.child}function lj(a){var b=a.stateNode;b.pendingContext?ag(a,b.pendingContext,b.pendingContext!==b.context):b.context&&ag(a,b.context,!1);Ih(a,b.containerInfo)}\nfunction mj(a,b,c,d,e){Ig();Jg(e);b.flags|=256;Yi(a,b,c,d);return b.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(a){return{baseLanes:a,cachePool:null,transitions:null}}\nfunction pj(a,b,c){var d=b.pendingProps,e=M.current,f=!1,g=0!==(b.flags&128),h;(h=g)||(h=null!==a&&null===a.memoizedState?!1:0!==(e&2));if(h)f=!0,b.flags&=-129;else if(null===a||null!==a.memoizedState)e|=1;G(M,e&1);if(null===a){Eg(b);a=b.memoizedState;if(null!==a&&(a=a.dehydrated,null!==a))return 0===(b.mode&1)?b.lanes=1:\"$!\"===a.data?b.lanes=8:b.lanes=1073741824,null;g=d.children;a=d.fallback;return f?(d=b.mode,f=b.child,g={mode:\"hidden\",children:g},0===(d&1)&&null!==f?(f.childLanes=0,f.pendingProps=\ng):f=qj(g,d,0,null),a=Ah(a,d,c,null),f.return=b,a.return=b,f.sibling=a,b.child=f,b.child.memoizedState=oj(c),b.memoizedState=nj,a):rj(b,g)}e=a.memoizedState;if(null!==e&&(h=e.dehydrated,null!==h))return sj(a,b,g,d,h,e,c);if(f){f=d.fallback;g=b.mode;e=a.child;h=e.sibling;var k={mode:\"hidden\",children:d.children};0===(g&1)&&b.child!==e?(d=b.child,d.childLanes=0,d.pendingProps=k,b.deletions=null):(d=wh(e,k),d.subtreeFlags=e.subtreeFlags&14680064);null!==h?f=wh(h,f):(f=Ah(f,g,c,null),f.flags|=2);f.return=\nb;d.return=b;d.sibling=f;b.child=d;d=f;f=b.child;g=a.child.memoizedState;g=null===g?oj(c):{baseLanes:g.baseLanes|c,cachePool:null,transitions:g.transitions};f.memoizedState=g;f.childLanes=a.childLanes&~c;b.memoizedState=nj;return d}f=a.child;a=f.sibling;d=wh(f,{mode:\"visible\",children:d.children});0===(b.mode&1)&&(d.lanes=c);d.return=b;d.sibling=null;null!==a&&(c=b.deletions,null===c?(b.deletions=[a],b.flags|=16):c.push(a));b.child=d;b.memoizedState=null;return d}\nfunction rj(a,b){b=qj({mode:\"visible\",children:b},a.mode,0,null);b.return=a;return a.child=b}function tj(a,b,c,d){null!==d&&Jg(d);Bh(b,a.child,null,c);a=rj(b,b.pendingProps.children);a.flags|=2;b.memoizedState=null;return a}\nfunction sj(a,b,c,d,e,f,g){if(c){if(b.flags&256)return b.flags&=-257,d=Li(Error(p(422))),tj(a,b,g,d);if(null!==b.memoizedState)return b.child=a.child,b.flags|=128,null;f=d.fallback;e=b.mode;d=qj({mode:\"visible\",children:d.children},e,0,null);f=Ah(f,e,g,null);f.flags|=2;d.return=b;f.return=b;d.sibling=f;b.child=d;0!==(b.mode&1)&&Bh(b,a.child,null,g);b.child.memoizedState=oj(g);b.memoizedState=nj;return f}if(0===(b.mode&1))return tj(a,b,g,null);if(\"$!\"===e.data){d=e.nextSibling&&e.nextSibling.dataset;\nif(d)var h=d.dgst;d=h;f=Error(p(419));d=Li(f,d,void 0);return tj(a,b,g,d)}h=0!==(g&a.childLanes);if(Ug||h){d=R;if(null!==d){switch(g&-g){case 4:e=2;break;case 16:e=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:e=32;break;case 536870912:e=268435456;break;default:e=0}e=0!==(e&(d.suspendedLanes|g))?0:e;\n0!==e&&e!==f.retryLane&&(f.retryLane=e,Zg(a,e),mh(d,a,e,-1))}uj();d=Li(Error(p(421)));return tj(a,b,g,d)}if(\"$?\"===e.data)return b.flags|=128,b.child=a.child,b=vj.bind(null,a),e._reactRetry=b,null;a=f.treeContext;yg=Lf(e.nextSibling);xg=b;I=!0;zg=null;null!==a&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=b);b=rj(b,d.children);b.flags|=4096;return b}function wj(a,b,c){a.lanes|=b;var d=a.alternate;null!==d&&(d.lanes|=b);Sg(a.return,b,c)}\nfunction xj(a,b,c,d,e){var f=a.memoizedState;null===f?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e}:(f.isBackwards=b,f.rendering=null,f.renderingStartTime=0,f.last=d,f.tail=c,f.tailMode=e)}\nfunction yj(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;Yi(a,b,d.children,c);d=M.current;if(0!==(d&2))d=d&1|2,b.flags|=128;else{if(null!==a&&0!==(a.flags&128))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&wj(a,c,b);else if(19===a.tag)wj(a,c,b);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}G(M,d);if(0===(b.mode&1))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Mh(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);xj(b,!1,e,c,f);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Mh(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}xj(b,!0,c,null,f);break;case \"together\":xj(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}\nfunction jj(a,b){0===(b.mode&1)&&null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2)}function $i(a,b,c){null!==a&&(b.dependencies=a.dependencies);hh|=b.lanes;if(0===(c&b.childLanes))return null;if(null!==a&&b.child!==a.child)throw Error(p(153));if(null!==b.child){a=b.child;c=wh(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=wh(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}\nfunction zj(a,b,c){switch(b.tag){case 3:lj(b);Ig();break;case 5:Kh(b);break;case 1:Zf(b.type)&&cg(b);break;case 4:Ih(b,b.stateNode.containerInfo);break;case 10:var d=b.type._context,e=b.memoizedProps.value;G(Mg,d._currentValue);d._currentValue=e;break;case 13:d=b.memoizedState;if(null!==d){if(null!==d.dehydrated)return G(M,M.current&1),b.flags|=128,null;if(0!==(c&b.child.childLanes))return pj(a,b,c);G(M,M.current&1);a=$i(a,b,c);return null!==a?a.sibling:null}G(M,M.current&1);break;case 19:d=0!==(c&\nb.childLanes);if(0!==(a.flags&128)){if(d)return yj(a,b,c);b.flags|=128}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);G(M,M.current);if(d)break;else return null;case 22:case 23:return b.lanes=0,ej(a,b,c)}return $i(a,b,c)}var Aj,Bj,Cj,Dj;\nAj=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Bj=function(){};\nCj=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;Hh(Eh.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"select\":e=A({},e,{value:void 0});d=A({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=Bf)}ub(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===l){var h=e[l];for(g in h)h.hasOwnProperty(g)&&\n(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ea.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,\nc)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ea.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&D(\"scroll\",a),f||h===k||(f=[])):(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",c);var l=f;if(b.updateQueue=l)b.flags|=4}};Dj=function(a,b,c,d){c!==d&&(b.flags|=4)};\nfunction Ej(a,b){if(!I)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction S(a){var b=null!==a.alternate&&a.alternate.child===a.child,c=0,d=0;if(b)for(var e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags&14680064,d|=e.flags&14680064,e.return=a,e=e.sibling;else for(e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags,d|=e.flags,e.return=a,e=e.sibling;a.subtreeFlags|=d;a.childLanes=c;return b}\nfunction Fj(a,b,c){var d=b.pendingProps;wg(b);switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(b),null;case 1:return Zf(b.type)&&$f(),S(b),null;case 3:d=b.stateNode;Jh();E(Wf);E(H);Oh();d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)Gg(b)?b.flags|=4:null===a||a.memoizedState.isDehydrated&&0===(b.flags&256)||(b.flags|=1024,null!==zg&&(Gj(zg),zg=null));Bj(a,b);S(b);return null;case 5:Lh(b);var e=Hh(Gh.current);\nc=b.type;if(null!==a&&null!=b.stateNode)Cj(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!d){if(null===b.stateNode)throw Error(p(166));S(b);return null}a=Hh(Eh.current);if(Gg(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[Of]=b;d[Pf]=f;a=0!==(b.mode&1);switch(c){case \"dialog\":D(\"cancel\",d);D(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",d);break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],d);break;case \"source\":D(\"error\",d);break;case \"img\":case \"image\":case \"link\":D(\"error\",\nd);D(\"load\",d);break;case \"details\":D(\"toggle\",d);break;case \"input\":Za(d,f);D(\"invalid\",d);break;case \"select\":d._wrapperState={wasMultiple:!!f.multiple};D(\"invalid\",d);break;case \"textarea\":hb(d,f),D(\"invalid\",d)}ub(c,f);e=null;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];\"children\"===g?\"string\"===typeof h?d.textContent!==h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,h,a),e=[\"children\",h]):\"number\"===typeof h&&d.textContent!==\"\"+h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,\nh,a),e=[\"children\",\"\"+h]):ea.hasOwnProperty(g)&&null!=h&&\"onScroll\"===g&&D(\"scroll\",d)}switch(c){case \"input\":Va(d);db(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=Bf)}d=e;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;\"http://www.w3.org/1999/xhtml\"===a&&(a=kb(c));\"http://www.w3.org/1999/xhtml\"===a?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\n\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[Of]=b;a[Pf]=d;Aj(a,b,!1,!1);b.stateNode=a;a:{g=vb(c,d);switch(c){case \"dialog\":D(\"cancel\",a);D(\"close\",a);e=d;break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],a);e=d;break;case \"source\":D(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":D(\"error\",\na);D(\"load\",a);e=d;break;case \"details\":D(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);D(\"invalid\",a);break;case \"option\":e=d;break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=A({},d,{value:void 0});D(\"invalid\",a);break;case \"textarea\":hb(a,d);e=gb(a,d);D(\"invalid\",a);break;default:e=d}ub(c,e);h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?sb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&nb(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==\nc||\"\"!==k)&&ob(a,k):\"number\"===typeof k&&ob(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ea.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&D(\"scroll\",a):null!=k&&ta(a,f,k,g))}switch(c){case \"input\":Va(a);db(a,d,!1);break;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,\n!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=Bf)}switch(c){case \"button\":case \"input\":case \"select\":case \"textarea\":d=!!d.autoFocus;break a;case \"img\":d=!0;break a;default:d=!1}}d&&(b.flags|=4)}null!==b.ref&&(b.flags|=512,b.flags|=2097152)}S(b);return null;case 6:if(a&&null!=b.stateNode)Dj(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(p(166));c=Hh(Gh.current);Hh(Eh.current);if(Gg(b)){d=b.stateNode;c=b.memoizedProps;d[Of]=b;if(f=d.nodeValue!==c)if(a=\nxg,null!==a)switch(a.tag){case 3:Af(d.nodeValue,c,0!==(a.mode&1));break;case 5:!0!==a.memoizedProps.suppressHydrationWarning&&Af(d.nodeValue,c,0!==(a.mode&1))}f&&(b.flags|=4)}else d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[Of]=b,b.stateNode=d}S(b);return null;case 13:E(M);d=b.memoizedState;if(null===a||null!==a.memoizedState&&null!==a.memoizedState.dehydrated){if(I&&null!==yg&&0!==(b.mode&1)&&0===(b.flags&128))Hg(),Ig(),b.flags|=98560,f=!1;else if(f=Gg(b),null!==d&&null!==d.dehydrated){if(null===\na){if(!f)throw Error(p(318));f=b.memoizedState;f=null!==f?f.dehydrated:null;if(!f)throw Error(p(317));f[Of]=b}else Ig(),0===(b.flags&128)&&(b.memoizedState=null),b.flags|=4;S(b);f=!1}else null!==zg&&(Gj(zg),zg=null),f=!0;if(!f)return b.flags&65536?b:null}if(0!==(b.flags&128))return b.lanes=c,b;d=null!==d;d!==(null!==a&&null!==a.memoizedState)&&d&&(b.child.flags|=8192,0!==(b.mode&1)&&(null===a||0!==(M.current&1)?0===T&&(T=3):uj()));null!==b.updateQueue&&(b.flags|=4);S(b);return null;case 4:return Jh(),\nBj(a,b),null===a&&sf(b.stateNode.containerInfo),S(b),null;case 10:return Rg(b.type._context),S(b),null;case 17:return Zf(b.type)&&$f(),S(b),null;case 19:E(M);f=b.memoizedState;if(null===f)return S(b),null;d=0!==(b.flags&128);g=f.rendering;if(null===g)if(d)Ej(f,!1);else{if(0!==T||null!==a&&0!==(a.flags&128))for(a=b.child;null!==a;){g=Mh(a);if(null!==g){b.flags|=128;Ej(f,!1);d=g.updateQueue;null!==d&&(b.updateQueue=d,b.flags|=4);b.subtreeFlags=0;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=14680066,\ng=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,f.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;G(M,M.current&1|2);return b.child}a=\na.sibling}null!==f.tail&&B()>Hj&&(b.flags|=128,d=!0,Ej(f,!1),b.lanes=4194304)}else{if(!d)if(a=Mh(g),null!==a){if(b.flags|=128,d=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Ej(f,!0),null===f.tail&&\"hidden\"===f.tailMode&&!g.alternate&&!I)return S(b),null}else 2*B()-f.renderingStartTime>Hj&&1073741824!==c&&(b.flags|=128,d=!0,Ej(f,!1),b.lanes=4194304);f.isBackwards?(g.sibling=b.child,b.child=g):(c=f.last,null!==c?c.sibling=g:b.child=g,f.last=g)}if(null!==f.tail)return b=f.tail,f.rendering=\nb,f.tail=b.sibling,f.renderingStartTime=B(),b.sibling=null,c=M.current,G(M,d?c&1|2:c&1),b;S(b);return null;case 22:case 23:return Ij(),d=null!==b.memoizedState,null!==a&&null!==a.memoizedState!==d&&(b.flags|=8192),d&&0!==(b.mode&1)?0!==(gj&1073741824)&&(S(b),b.subtreeFlags&6&&(b.flags|=8192)):S(b),null;case 24:return null;case 25:return null}throw Error(p(156,b.tag));}\nfunction Jj(a,b){wg(b);switch(b.tag){case 1:return Zf(b.type)&&$f(),a=b.flags,a&65536?(b.flags=a&-65537|128,b):null;case 3:return Jh(),E(Wf),E(H),Oh(),a=b.flags,0!==(a&65536)&&0===(a&128)?(b.flags=a&-65537|128,b):null;case 5:return Lh(b),null;case 13:E(M);a=b.memoizedState;if(null!==a&&null!==a.dehydrated){if(null===b.alternate)throw Error(p(340));Ig()}a=b.flags;return a&65536?(b.flags=a&-65537|128,b):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(b.type._context),null;case 22:case 23:return Ij(),\nnull;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=\"function\"===typeof WeakSet?WeakSet:Set,V=null;function Mj(a,b){var c=a.ref;if(null!==c)if(\"function\"===typeof c)try{c(null)}catch(d){W(a,b,d)}else c.current=null}function Nj(a,b,c){try{c()}catch(d){W(a,b,d)}}var Oj=!1;\nfunction Pj(a,b){Cf=dd;a=Me();if(Ne(a)){if(\"selectionStart\"in a)var c={start:a.selectionStart,end:a.selectionEnd};else a:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&0!==d.rangeCount){c=d.anchorNode;var e=d.anchorOffset,f=d.focusNode;d=d.focusOffset;try{c.nodeType,f.nodeType}catch(F){c=null;break a}var g=0,h=-1,k=-1,l=0,m=0,q=a,r=null;b:for(;;){for(var y;;){q!==c||0!==e&&3!==q.nodeType||(h=g+e);q!==f||0!==d&&3!==q.nodeType||(k=g+d);3===q.nodeType&&(g+=\nq.nodeValue.length);if(null===(y=q.firstChild))break;r=q;q=y}for(;;){if(q===a)break b;r===c&&++l===e&&(h=g);r===f&&++m===d&&(k=g);if(null!==(y=q.nextSibling))break;q=r;r=q.parentNode}q=y}c=-1===h||-1===k?null:{start:h,end:k}}else c=null}c=c||{start:0,end:0}}else c=null;Df={focusedElem:a,selectionRange:c};dd=!1;for(V=b;null!==V;)if(b=V,a=b.child,0!==(b.subtreeFlags&1028)&&null!==a)a.return=b,V=a;else for(;null!==V;){b=V;try{var n=b.alternate;if(0!==(b.flags&1024))switch(b.tag){case 0:case 11:case 15:break;\ncase 1:if(null!==n){var t=n.memoizedProps,J=n.memoizedState,x=b.stateNode,w=x.getSnapshotBeforeUpdate(b.elementType===b.type?t:Lg(b.type,t),J);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var u=b.stateNode.containerInfo;1===u.nodeType?u.textContent=\"\":9===u.nodeType&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163));}}catch(F){W(b,b.return,F)}a=b.sibling;if(null!==a){a.return=b.return;V=a;break}V=b.return}n=Oj;Oj=!1;return n}\nfunction Qj(a,b,c){var d=b.updateQueue;d=null!==d?d.lastEffect:null;if(null!==d){var e=d=d.next;do{if((e.tag&a)===a){var f=e.destroy;e.destroy=void 0;void 0!==f&&Nj(b,c,f)}e=e.next}while(e!==d)}}function Rj(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function Sj(a){var b=a.ref;if(null!==b){var c=a.stateNode;switch(a.tag){case 5:a=c;break;default:a=c}\"function\"===typeof b?b(a):b.current=a}}\nfunction Tj(a){var b=a.alternate;null!==b&&(a.alternate=null,Tj(b));a.child=null;a.deletions=null;a.sibling=null;5===a.tag&&(b=a.stateNode,null!==b&&(delete b[Of],delete b[Pf],delete b[of],delete b[Qf],delete b[Rf]));a.stateNode=null;a.return=null;a.dependencies=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.stateNode=null;a.updateQueue=null}function Uj(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction Vj(a){a:for(;;){for(;null===a.sibling;){if(null===a.return||Uj(a.return))return null;a=a.return}a.sibling.return=a.return;for(a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(a.flags&2)continue a;if(null===a.child||4===a.tag)continue a;else a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}\nfunction Wj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=Bf));else if(4!==d&&(a=a.child,null!==a))for(Wj(a,b,c),a=a.sibling;null!==a;)Wj(a,b,c),a=a.sibling}\nfunction Xj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Xj(a,b,c),a=a.sibling;null!==a;)Xj(a,b,c),a=a.sibling}var X=null,Yj=!1;function Zj(a,b,c){for(c=c.child;null!==c;)ak(a,b,c),c=c.sibling}\nfunction ak(a,b,c){if(lc&&\"function\"===typeof lc.onCommitFiberUnmount)try{lc.onCommitFiberUnmount(kc,c)}catch(h){}switch(c.tag){case 5:U||Mj(c,b);case 6:var d=X,e=Yj;X=null;Zj(a,b,c);X=d;Yj=e;null!==X&&(Yj?(a=X,c=c.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):X.removeChild(c.stateNode));break;case 18:null!==X&&(Yj?(a=X,c=c.stateNode,8===a.nodeType?Kf(a.parentNode,c):1===a.nodeType&&Kf(a,c),bd(a)):Kf(X,c.stateNode));break;case 4:d=X;e=Yj;X=c.stateNode.containerInfo;Yj=!0;\nZj(a,b,c);X=d;Yj=e;break;case 0:case 11:case 14:case 15:if(!U&&(d=c.updateQueue,null!==d&&(d=d.lastEffect,null!==d))){e=d=d.next;do{var f=e,g=f.destroy;f=f.tag;void 0!==g&&(0!==(f&2)?Nj(c,b,g):0!==(f&4)&&Nj(c,b,g));e=e.next}while(e!==d)}Zj(a,b,c);break;case 1:if(!U&&(Mj(c,b),d=c.stateNode,\"function\"===typeof d.componentWillUnmount))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(h){W(c,b,h)}Zj(a,b,c);break;case 21:Zj(a,b,c);break;case 22:c.mode&1?(U=(d=U)||null!==\nc.memoizedState,Zj(a,b,c),U=d):Zj(a,b,c);break;default:Zj(a,b,c)}}function bk(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Lj);b.forEach(function(b){var d=ck.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction dk(a,b){var c=b.deletions;if(null!==c)for(var d=0;d<c.length;d++){var e=c[d];try{var f=a,g=b,h=g;a:for(;null!==h;){switch(h.tag){case 5:X=h.stateNode;Yj=!1;break a;case 3:X=h.stateNode.containerInfo;Yj=!0;break a;case 4:X=h.stateNode.containerInfo;Yj=!0;break a}h=h.return}if(null===X)throw Error(p(160));ak(f,g,e);X=null;Yj=!1;var k=e.alternate;null!==k&&(k.return=null);e.return=null}catch(l){W(e,b,l)}}if(b.subtreeFlags&12854)for(b=b.child;null!==b;)ek(b,a),b=b.sibling}\nfunction ek(a,b){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:dk(b,a);fk(a);if(d&4){try{Qj(3,a,a.return),Rj(3,a)}catch(t){W(a,a.return,t)}try{Qj(5,a,a.return)}catch(t){W(a,a.return,t)}}break;case 1:dk(b,a);fk(a);d&512&&null!==c&&Mj(c,c.return);break;case 5:dk(b,a);fk(a);d&512&&null!==c&&Mj(c,c.return);if(a.flags&32){var e=a.stateNode;try{ob(e,\"\")}catch(t){W(a,a.return,t)}}if(d&4&&(e=a.stateNode,null!=e)){var f=a.memoizedProps,g=null!==c?c.memoizedProps:f,h=a.type,k=a.updateQueue;\na.updateQueue=null;if(null!==k)try{\"input\"===h&&\"radio\"===f.type&&null!=f.name&&ab(e,f);vb(h,g);var l=vb(h,f);for(g=0;g<k.length;g+=2){var m=k[g],q=k[g+1];\"style\"===m?sb(e,q):\"dangerouslySetInnerHTML\"===m?nb(e,q):\"children\"===m?ob(e,q):ta(e,m,q,l)}switch(h){case \"input\":bb(e,f);break;case \"textarea\":ib(e,f);break;case \"select\":var r=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!f.multiple;var y=f.value;null!=y?fb(e,!!f.multiple,y,!1):r!==!!f.multiple&&(null!=f.defaultValue?fb(e,!!f.multiple,\nf.defaultValue,!0):fb(e,!!f.multiple,f.multiple?[]:\"\",!1))}e[Pf]=f}catch(t){W(a,a.return,t)}}break;case 6:dk(b,a);fk(a);if(d&4){if(null===a.stateNode)throw Error(p(162));e=a.stateNode;f=a.memoizedProps;try{e.nodeValue=f}catch(t){W(a,a.return,t)}}break;case 3:dk(b,a);fk(a);if(d&4&&null!==c&&c.memoizedState.isDehydrated)try{bd(b.containerInfo)}catch(t){W(a,a.return,t)}break;case 4:dk(b,a);fk(a);break;case 13:dk(b,a);fk(a);e=a.child;e.flags&8192&&(f=null!==e.memoizedState,e.stateNode.isHidden=f,!f||\nnull!==e.alternate&&null!==e.alternate.memoizedState||(gk=B()));d&4&&bk(a);break;case 22:m=null!==c&&null!==c.memoizedState;a.mode&1?(U=(l=U)||m,dk(b,a),U=l):dk(b,a);fk(a);if(d&8192){l=null!==a.memoizedState;if((a.stateNode.isHidden=l)&&!m&&0!==(a.mode&1))for(V=a,m=a.child;null!==m;){for(q=V=m;null!==V;){r=V;y=r.child;switch(r.tag){case 0:case 11:case 14:case 15:Qj(4,r,r.return);break;case 1:Mj(r,r.return);var n=r.stateNode;if(\"function\"===typeof n.componentWillUnmount){d=r;c=r.return;try{b=d,n.props=\nb.memoizedProps,n.state=b.memoizedState,n.componentWillUnmount()}catch(t){W(d,c,t)}}break;case 5:Mj(r,r.return);break;case 22:if(null!==r.memoizedState){hk(q);continue}}null!==y?(y.return=r,V=y):hk(q)}m=m.sibling}a:for(m=null,q=a;;){if(5===q.tag){if(null===m){m=q;try{e=q.stateNode,l?(f=e.style,\"function\"===typeof f.setProperty?f.setProperty(\"display\",\"none\",\"important\"):f.display=\"none\"):(h=q.stateNode,k=q.memoizedProps.style,g=void 0!==k&&null!==k&&k.hasOwnProperty(\"display\")?k.display:null,h.style.display=\nrb(\"display\",g))}catch(t){W(a,a.return,t)}}}else if(6===q.tag){if(null===m)try{q.stateNode.nodeValue=l?\"\":q.memoizedProps}catch(t){W(a,a.return,t)}}else if((22!==q.tag&&23!==q.tag||null===q.memoizedState||q===a)&&null!==q.child){q.child.return=q;q=q.child;continue}if(q===a)break a;for(;null===q.sibling;){if(null===q.return||q.return===a)break a;m===q&&(m=null);q=q.return}m===q&&(m=null);q.sibling.return=q.return;q=q.sibling}}break;case 19:dk(b,a);fk(a);d&4&&bk(a);break;case 21:break;default:dk(b,\na),fk(a)}}function fk(a){var b=a.flags;if(b&2){try{a:{for(var c=a.return;null!==c;){if(Uj(c)){var d=c;break a}c=c.return}throw Error(p(160));}switch(d.tag){case 5:var e=d.stateNode;d.flags&32&&(ob(e,\"\"),d.flags&=-33);var f=Vj(a);Xj(a,f,e);break;case 3:case 4:var g=d.stateNode.containerInfo,h=Vj(a);Wj(a,h,g);break;default:throw Error(p(161));}}catch(k){W(a,a.return,k)}a.flags&=-3}b&4096&&(a.flags&=-4097)}function ik(a,b,c){V=a;jk(a,b,c)}\nfunction jk(a,b,c){for(var d=0!==(a.mode&1);null!==V;){var e=V,f=e.child;if(22===e.tag&&d){var g=null!==e.memoizedState||Kj;if(!g){var h=e.alternate,k=null!==h&&null!==h.memoizedState||U;h=Kj;var l=U;Kj=g;if((U=k)&&!l)for(V=e;null!==V;)g=V,k=g.child,22===g.tag&&null!==g.memoizedState?kk(e):null!==k?(k.return=g,V=k):kk(e);for(;null!==f;)V=f,jk(f,b,c),f=f.sibling;V=e;Kj=h;U=l}lk(a,b,c)}else 0!==(e.subtreeFlags&8772)&&null!==f?(f.return=e,V=f):lk(a,b,c)}}\nfunction lk(a){for(;null!==V;){var b=V;if(0!==(b.flags&8772)){var c=b.alternate;try{if(0!==(b.flags&8772))switch(b.tag){case 0:case 11:case 15:U||Rj(5,b);break;case 1:var d=b.stateNode;if(b.flags&4&&!U)if(null===c)d.componentDidMount();else{var e=b.elementType===b.type?c.memoizedProps:Lg(b.type,c.memoizedProps);d.componentDidUpdate(e,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var f=b.updateQueue;null!==f&&ih(b,f,d);break;case 3:var g=b.updateQueue;if(null!==g){c=null;if(null!==b.child)switch(b.child.tag){case 5:c=\nb.child.stateNode;break;case 1:c=b.child.stateNode}ih(b,g,c)}break;case 5:var h=b.stateNode;if(null===c&&b.flags&4){c=h;var k=b.memoizedProps;switch(b.type){case \"button\":case \"input\":case \"select\":case \"textarea\":k.autoFocus&&c.focus();break;case \"img\":k.src&&(c.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(null===b.memoizedState){var l=b.alternate;if(null!==l){var m=l.memoizedState;if(null!==m){var q=m.dehydrated;null!==q&&bd(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;\ndefault:throw Error(p(163));}U||b.flags&512&&Sj(b)}catch(r){W(b,b.return,r)}}if(b===a){V=null;break}c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}function hk(a){for(;null!==V;){var b=V;if(b===a){V=null;break}var c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}\nfunction kk(a){for(;null!==V;){var b=V;try{switch(b.tag){case 0:case 11:case 15:var c=b.return;try{Rj(4,b)}catch(k){W(b,c,k)}break;case 1:var d=b.stateNode;if(\"function\"===typeof d.componentDidMount){var e=b.return;try{d.componentDidMount()}catch(k){W(b,e,k)}}var f=b.return;try{Sj(b)}catch(k){W(b,f,k)}break;case 5:var g=b.return;try{Sj(b)}catch(k){W(b,g,k)}}}catch(k){W(b,b.return,k)}if(b===a){V=null;break}var h=b.sibling;if(null!==h){h.return=b.return;V=h;break}V=b.return}}\nvar mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=Infinity,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return 0!==(K&6)?B():-1!==Bk?Bk:Bk=B()}\nfunction lh(a){if(0===(a.mode&1))return 1;if(0!==(K&2)&&0!==Z)return Z&-Z;if(null!==Kg.transition)return 0===Ck&&(Ck=yc()),Ck;a=C;if(0!==a)return a;a=window.event;a=void 0===a?16:jd(a.type);return a}function mh(a,b,c,d){if(50<zk)throw zk=0,Ak=null,Error(p(185));Ac(a,c,d);if(0===(K&2)||a!==R)a===R&&(0===(K&2)&&(rk|=c),4===T&&Dk(a,Z)),Ek(a,d),1===c&&0===K&&0===(b.mode&1)&&(Hj=B()+500,fg&&jg())}\nfunction Ek(a,b){var c=a.callbackNode;wc(a,b);var d=uc(a,a===R?Z:0);if(0===d)null!==c&&bc(c),a.callbackNode=null,a.callbackPriority=0;else if(b=d&-d,a.callbackPriority!==b){null!=c&&bc(c);if(1===b)0===a.tag?ig(Fk.bind(null,a)):hg(Fk.bind(null,a)),Jf(function(){0===(K&6)&&jg()}),c=null;else{switch(Dc(d)){case 1:c=fc;break;case 4:c=gc;break;case 16:c=hc;break;case 536870912:c=jc;break;default:c=hc}c=Gk(c,Hk.bind(null,a))}a.callbackPriority=b;a.callbackNode=c}}\nfunction Hk(a,b){Bk=-1;Ck=0;if(0!==(K&6))throw Error(p(327));var c=a.callbackNode;if(Ik()&&a.callbackNode!==c)return null;var d=uc(a,a===R?Z:0);if(0===d)return null;if(0!==(d&30)||0!==(d&a.expiredLanes)||b)b=Jk(a,d);else{b=d;var e=K;K|=2;var f=Kk();if(R!==a||Z!==b)vk=null,Hj=B()+500,Lk(a,b);do try{Mk();break}catch(h){Nk(a,h)}while(1);Qg();nk.current=f;K=e;null!==Y?b=0:(R=null,Z=0,b=T)}if(0!==b){2===b&&(e=xc(a),0!==e&&(d=e,b=Ok(a,e)));if(1===b)throw c=qk,Lk(a,0),Dk(a,d),Ek(a,B()),c;if(6===b)Dk(a,d);\nelse{e=a.current.alternate;if(0===(d&30)&&!Pk(e)&&(b=Jk(a,d),2===b&&(f=xc(a),0!==f&&(d=f,b=Ok(a,f))),1===b))throw c=qk,Lk(a,0),Dk(a,d),Ek(a,B()),c;a.finishedWork=e;a.finishedLanes=d;switch(b){case 0:case 1:throw Error(p(345));case 2:Qk(a,uk,vk);break;case 3:Dk(a,d);if((d&130023424)===d&&(b=gk+500-B(),10<b)){if(0!==uc(a,0))break;e=a.suspendedLanes;if((e&d)!==d){L();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),b);break}Qk(a,uk,vk);break;case 4:Dk(a,d);if((d&4194240)===\nd)break;b=a.eventTimes;for(e=-1;0<d;){var g=31-oc(d);f=1<<g;g=b[g];g>e&&(e=g);d&=~f}d=e;d=B()-d;d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*mk(d/1960))-d;if(10<d){a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),d);break}Qk(a,uk,vk);break;case 5:Qk(a,uk,vk);break;default:throw Error(p(329));}}}Ek(a,B());return a.callbackNode===c?Hk.bind(null,a):null}\nfunction Ok(a,b){var c=tk;a.current.memoizedState.isDehydrated&&(Lk(a,b).flags|=256);a=Jk(a,b);2!==a&&(b=uk,uk=c,null!==b&&Gj(b));return a}function Gj(a){null===uk?uk=a:uk.push.apply(uk,a)}\nfunction Pk(a){for(var b=a;;){if(b.flags&16384){var c=b.updateQueue;if(null!==c&&(c=c.stores,null!==c))for(var d=0;d<c.length;d++){var e=c[d],f=e.getSnapshot;e=e.value;try{if(!He(f(),e))return!1}catch(g){return!1}}}c=b.child;if(b.subtreeFlags&16384&&null!==c)c.return=b,b=c;else{if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return!0;b=b.return}b.sibling.return=b.return;b=b.sibling}}return!0}\nfunction Dk(a,b){b&=~sk;b&=~rk;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-oc(b),d=1<<c;a[c]=-1;b&=~d}}function Fk(a){if(0!==(K&6))throw Error(p(327));Ik();var b=uc(a,0);if(0===(b&1))return Ek(a,B()),null;var c=Jk(a,b);if(0!==a.tag&&2===c){var d=xc(a);0!==d&&(b=d,c=Ok(a,d))}if(1===c)throw c=qk,Lk(a,0),Dk(a,b),Ek(a,B()),c;if(6===c)throw Error(p(345));a.finishedWork=a.current.alternate;a.finishedLanes=b;Qk(a,uk,vk);Ek(a,B());return null}\nfunction Rk(a,b){var c=K;K|=1;try{return a(b)}finally{K=c,0===K&&(Hj=B()+500,fg&&jg())}}function Sk(a){null!==xk&&0===xk.tag&&0===(K&6)&&Ik();var b=K;K|=1;var c=pk.transition,d=C;try{if(pk.transition=null,C=1,a)return a()}finally{C=d,pk.transition=c,K=b,0===(K&6)&&jg()}}function Ij(){gj=fj.current;E(fj)}\nfunction Lk(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,Gf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;wg(d);switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&$f();break;case 3:Jh();E(Wf);E(H);Oh();break;case 5:Lh(d);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(d.type._context);break;case 22:case 23:Ij()}c=c.return}R=a;Y=a=wh(a.current,null);Z=gj=b;T=0;qk=null;sk=rk=hh=0;uk=tk=null;if(null!==Wg){for(b=\n0;b<Wg.length;b++)if(c=Wg[b],d=c.interleaved,null!==d){c.interleaved=null;var e=d.next,f=c.pending;if(null!==f){var g=f.next;f.next=e;d.next=g}c.pending=d}Wg=null}return a}\nfunction Nk(a,b){do{var c=Y;try{Qg();Ph.current=ai;if(Sh){for(var d=N.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}Sh=!1}Rh=0;P=O=N=null;Th=!1;Uh=0;ok.current=null;if(null===c||null===c.return){T=1;qk=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=Z;h.flags|=32768;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k,m=h,q=m.tag;if(0===(m.mode&1)&&(0===q||11===q||15===q)){var r=m.alternate;r?(m.updateQueue=r.updateQueue,m.memoizedState=r.memoizedState,\nm.lanes=r.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=Vi(g);if(null!==y){y.flags&=-257;Wi(y,g,h,f,b);y.mode&1&&Ti(f,l,b);b=y;k=l;var n=b.updateQueue;if(null===n){var t=new Set;t.add(k);b.updateQueue=t}else n.add(k);break a}else{if(0===(b&1)){Ti(f,l,b);uj();break a}k=Error(p(426))}}else if(I&&h.mode&1){var J=Vi(g);if(null!==J){0===(J.flags&65536)&&(J.flags|=256);Wi(J,g,h,f,b);Jg(Ki(k,h));break a}}f=k=Ki(k,h);4!==T&&(T=2);null===tk?tk=[f]:tk.push(f);f=g;do{switch(f.tag){case 3:f.flags|=65536;\nb&=-b;f.lanes|=b;var x=Oi(f,k,b);fh(f,x);break a;case 1:h=k;var w=f.type,u=f.stateNode;if(0===(f.flags&128)&&(\"function\"===typeof w.getDerivedStateFromError||null!==u&&\"function\"===typeof u.componentDidCatch&&(null===Si||!Si.has(u)))){f.flags|=65536;b&=-b;f.lanes|=b;var F=Ri(f,h,b);fh(f,F);break a}}f=f.return}while(null!==f)}Tk(c)}catch(na){b=na;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}function Kk(){var a=nk.current;nk.current=ai;return null===a?ai:a}\nfunction uj(){if(0===T||3===T||2===T)T=4;null===R||0===(hh&268435455)&&0===(rk&268435455)||Dk(R,Z)}function Jk(a,b){var c=K;K|=2;var d=Kk();if(R!==a||Z!==b)vk=null,Lk(a,b);do try{Uk();break}catch(e){Nk(a,e)}while(1);Qg();K=c;nk.current=d;if(null!==Y)throw Error(p(261));R=null;Z=0;return T}function Uk(){for(;null!==Y;)Vk(Y)}function Mk(){for(;null!==Y&&!cc();)Vk(Y)}function Vk(a){var b=Wk(a.alternate,a,gj);a.memoizedProps=a.pendingProps;null===b?Tk(a):Y=b;ok.current=null}\nfunction Tk(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&32768)){if(c=Fj(c,b,gj),null!==c){Y=c;return}}else{c=Jj(c,b);if(null!==c){c.flags&=32767;Y=c;return}if(null!==a)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T=6;Y=null;return}}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===T&&(T=5)}function Qk(a,b,c){var d=C,e=pk.transition;try{pk.transition=null,C=1,Xk(a,b,c,d)}finally{pk.transition=e,C=d}return null}\nfunction Xk(a,b,c,d){do Ik();while(null!==xk);if(0!==(K&6))throw Error(p(327));c=a.finishedWork;var e=a.finishedLanes;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(p(177));a.callbackNode=null;a.callbackPriority=0;var f=c.lanes|c.childLanes;Bc(a,f);a===R&&(Y=R=null,Z=0);0===(c.subtreeFlags&2064)&&0===(c.flags&2064)||wk||(wk=!0,Gk(hc,function(){Ik();return null}));f=0!==(c.flags&15990);if(0!==(c.subtreeFlags&15990)||f){f=pk.transition;pk.transition=null;\nvar g=C;C=1;var h=K;K|=4;ok.current=null;Pj(a,c);ek(c,a);Oe(Df);dd=!!Cf;Df=Cf=null;a.current=c;ik(c,a,e);dc();K=h;C=g;pk.transition=f}else a.current=c;wk&&(wk=!1,xk=a,yk=e);f=a.pendingLanes;0===f&&(Si=null);mc(c.stateNode,d);Ek(a,B());if(null!==b)for(d=a.onRecoverableError,c=0;c<b.length;c++)e=b[c],d(e.value,{componentStack:e.stack,digest:e.digest});if(Pi)throw Pi=!1,a=Qi,Qi=null,a;0!==(yk&1)&&0!==a.tag&&Ik();f=a.pendingLanes;0!==(f&1)?a===Ak?zk++:(zk=0,Ak=a):zk=0;jg();return null}\nfunction Ik(){if(null!==xk){var a=Dc(yk),b=pk.transition,c=C;try{pk.transition=null;C=16>a?16:a;if(null===xk)var d=!1;else{a=xk;xk=null;yk=0;if(0!==(K&6))throw Error(p(331));var e=K;K|=4;for(V=a.current;null!==V;){var f=V,g=f.child;if(0!==(V.flags&16)){var h=f.deletions;if(null!==h){for(var k=0;k<h.length;k++){var l=h[k];for(V=l;null!==V;){var m=V;switch(m.tag){case 0:case 11:case 15:Qj(8,m,f)}var q=m.child;if(null!==q)q.return=m,V=q;else for(;null!==V;){m=V;var r=m.sibling,y=m.return;Tj(m);if(m===\nl){V=null;break}if(null!==r){r.return=y;V=r;break}V=y}}}var n=f.alternate;if(null!==n){var t=n.child;if(null!==t){n.child=null;do{var J=t.sibling;t.sibling=null;t=J}while(null!==t)}}V=f}}if(0!==(f.subtreeFlags&2064)&&null!==g)g.return=f,V=g;else b:for(;null!==V;){f=V;if(0!==(f.flags&2048))switch(f.tag){case 0:case 11:case 15:Qj(9,f,f.return)}var x=f.sibling;if(null!==x){x.return=f.return;V=x;break b}V=f.return}}var w=a.current;for(V=w;null!==V;){g=V;var u=g.child;if(0!==(g.subtreeFlags&2064)&&null!==\nu)u.return=g,V=u;else b:for(g=w;null!==V;){h=V;if(0!==(h.flags&2048))try{switch(h.tag){case 0:case 11:case 15:Rj(9,h)}}catch(na){W(h,h.return,na)}if(h===g){V=null;break b}var F=h.sibling;if(null!==F){F.return=h.return;V=F;break b}V=h.return}}K=e;jg();if(lc&&\"function\"===typeof lc.onPostCommitFiberRoot)try{lc.onPostCommitFiberRoot(kc,a)}catch(na){}d=!0}return d}finally{C=c,pk.transition=b}}return!1}function Yk(a,b,c){b=Ki(c,b);b=Oi(a,b,1);a=dh(a,b,1);b=L();null!==a&&(Ac(a,1,b),Ek(a,b))}\nfunction W(a,b,c){if(3===a.tag)Yk(a,a,c);else for(;null!==b;){if(3===b.tag){Yk(b,a,c);break}else if(1===b.tag){var d=b.stateNode;if(\"function\"===typeof b.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Si||!Si.has(d))){a=Ki(c,a);a=Ri(b,a,1);b=dh(b,a,1);a=L();null!==b&&(Ac(b,1,a),Ek(b,a));break}}b=b.return}}\nfunction Ui(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=L();a.pingedLanes|=a.suspendedLanes&c;R===a&&(Z&c)===c&&(4===T||3===T&&(Z&130023424)===Z&&500>B()-gk?Lk(a,0):sk|=c);Ek(a,b)}function Zk(a,b){0===b&&(0===(a.mode&1)?b=1:(b=sc,sc<<=1,0===(sc&130023424)&&(sc=4194304)));var c=L();a=Zg(a,b);null!==a&&(Ac(a,b,c),Ek(a,c))}function vj(a){var b=a.memoizedState,c=0;null!==b&&(c=b.retryLane);Zk(a,c)}\nfunction ck(a,b){var c=0;switch(a.tag){case 13:var d=a.stateNode;var e=a.memoizedState;null!==e&&(c=e.retryLane);break;case 19:d=a.stateNode;break;default:throw Error(p(314));}null!==d&&d.delete(b);Zk(a,c)}var Wk;\nWk=function(a,b,c){if(null!==a)if(a.memoizedProps!==b.pendingProps||Wf.current)Ug=!0;else{if(0===(a.lanes&c)&&0===(b.flags&128))return Ug=!1,zj(a,b,c);Ug=0!==(a.flags&131072)?!0:!1}else Ug=!1,I&&0!==(b.flags&1048576)&&ug(b,ng,b.index);b.lanes=0;switch(b.tag){case 2:var d=b.type;jj(a,b);a=b.pendingProps;var e=Yf(b,H.current);Tg(b,c);e=Xh(null,b,d,a,e,c);var f=bi();b.flags|=1;\"object\"===typeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof?(b.tag=1,b.memoizedState=null,b.updateQueue=\nnull,Zf(d)?(f=!0,cg(b)):f=!1,b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,ah(b),e.updater=nh,b.stateNode=e,e._reactInternals=b,rh(b,d,a,c),b=kj(null,b,d,!0,f,c)):(b.tag=0,I&&f&&vg(b),Yi(null,b,e,c),b=b.child);return b;case 16:d=b.elementType;a:{jj(a,b);a=b.pendingProps;e=d._init;d=e(d._payload);b.type=d;e=b.tag=$k(d);a=Lg(d,a);switch(e){case 0:b=dj(null,b,d,a,c);break a;case 1:b=ij(null,b,d,a,c);break a;case 11:b=Zi(null,b,d,a,c);break a;case 14:b=aj(null,b,d,Lg(d.type,a),c);break a}throw Error(p(306,\nd,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Lg(d,e),dj(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Lg(d,e),ij(a,b,d,e,c);case 3:a:{lj(b);if(null===a)throw Error(p(387));d=b.pendingProps;f=b.memoizedState;e=f.element;bh(a,b);gh(b,d,null,c);var g=b.memoizedState;d=g.element;if(f.isDehydrated)if(f={element:d,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},b.updateQueue.baseState=\nf,b.memoizedState=f,b.flags&256){e=Ki(Error(p(423)),b);b=mj(a,b,d,c,e);break a}else if(d!==e){e=Ki(Error(p(424)),b);b=mj(a,b,d,c,e);break a}else for(yg=Lf(b.stateNode.containerInfo.firstChild),xg=b,I=!0,zg=null,c=Ch(b,null,d,c),b.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{Ig();if(d===e){b=$i(a,b,c);break a}Yi(a,b,d,c)}b=b.child}return b;case 5:return Kh(b),null===a&&Eg(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,Ef(d,e)?g=null:null!==f&&Ef(d,f)&&(b.flags|=32),\nhj(a,b),Yi(a,b,g,c),b.child;case 6:return null===a&&Eg(b),null;case 13:return pj(a,b,c);case 4:return Ih(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Bh(b,null,d,c):Yi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Lg(d,e),Zi(a,b,d,e,c);case 7:return Yi(a,b,b.pendingProps,c),b.child;case 8:return Yi(a,b,b.pendingProps.children,c),b.child;case 12:return Yi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;f=b.memoizedProps;\ng=e.value;G(Mg,d._currentValue);d._currentValue=g;if(null!==f)if(He(f.value,g)){if(f.children===e.children&&!Wf.current){b=$i(a,b,c);break a}}else for(f=b.child,null!==f&&(f.return=b);null!==f;){var h=f.dependencies;if(null!==h){g=f.child;for(var k=h.firstContext;null!==k;){if(k.context===d){if(1===f.tag){k=ch(-1,c&-c);k.tag=2;var l=f.updateQueue;if(null!==l){l=l.shared;var m=l.pending;null===m?k.next=k:(k.next=m.next,m.next=k);l.pending=k}}f.lanes|=c;k=f.alternate;null!==k&&(k.lanes|=c);Sg(f.return,\nc,b);h.lanes|=c;break}k=k.next}}else if(10===f.tag)g=f.type===b.type?null:f.child;else if(18===f.tag){g=f.return;if(null===g)throw Error(p(341));g.lanes|=c;h=g.alternate;null!==h&&(h.lanes|=c);Sg(g,c,b);g=f.sibling}else g=f.child;if(null!==g)g.return=f;else for(g=f;null!==g;){if(g===b){g=null;break}f=g.sibling;if(null!==f){f.return=g.return;g=f;break}g=g.return}f=g}Yi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,d=b.pendingProps.children,Tg(b,c),e=Vg(e),d=d(e),b.flags|=1,Yi(a,b,d,c),\nb.child;case 14:return d=b.type,e=Lg(d,b.pendingProps),e=Lg(d.type,e),aj(a,b,d,e,c);case 15:return cj(a,b,b.type,b.pendingProps,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Lg(d,e),jj(a,b),b.tag=1,Zf(d)?(a=!0,cg(b)):a=!1,Tg(b,c),ph(b,d,e),rh(b,d,e,c),kj(null,b,d,!0,a,c);case 19:return yj(a,b,c);case 22:return ej(a,b,c)}throw Error(p(156,b.tag));};function Gk(a,b){return ac(a,b)}\nfunction al(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function Bg(a,b,c,d){return new al(a,b,c,d)}function bj(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction $k(a){if(\"function\"===typeof a)return bj(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Da)return 11;if(a===Ga)return 14}return 2}\nfunction wh(a,b){var c=a.alternate;null===c?(c=Bg(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null);c.flags=a.flags&14680064;c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction yh(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)bj(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ya:return Ah(c.children,e,f,b);case za:g=8;e|=8;break;case Aa:return a=Bg(12,c,b,e|2),a.elementType=Aa,a.lanes=f,a;case Ea:return a=Bg(13,c,b,e),a.elementType=Ea,a.lanes=f,a;case Fa:return a=Bg(19,c,b,e),a.elementType=Fa,a.lanes=f,a;case Ia:return qj(c,e,f,b);default:if(\"object\"===typeof a&&null!==a)switch(a.$$typeof){case Ba:g=10;break a;case Ca:g=9;break a;case Da:g=11;\nbreak a;case Ga:g=14;break a;case Ha:g=16;d=null;break a}throw Error(p(130,null==a?a:typeof a,\"\"));}b=Bg(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Ah(a,b,c,d){a=Bg(7,a,d,b);a.lanes=c;return a}function qj(a,b,c,d){a=Bg(22,a,d,b);a.elementType=Ia;a.lanes=c;a.stateNode={isHidden:!1};return a}function xh(a,b,c){a=Bg(6,a,null,b);a.lanes=c;return a}\nfunction zh(a,b,c){b=Bg(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction bl(a,b,c,d,e){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=0;this.eventTimes=zc(0);this.expirationTimes=zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=zc(0);this.identifierPrefix=d;this.onRecoverableError=e;this.mutableSourceEagerHydrationData=\nnull}function cl(a,b,c,d,e,f,g,h,k){a=new bl(a,b,c,h,k);1===b?(b=1,!0===f&&(b|=8)):b=0;f=Bg(3,null,null,b);a.current=f;f.stateNode=a;f.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null};ah(f);return a}function dl(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:wa,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction el(a){if(!a)return Vf;a=a._reactInternals;a:{if(Vb(a)!==a||1!==a.tag)throw Error(p(170));var b=a;do{switch(b.tag){case 3:b=b.stateNode.context;break a;case 1:if(Zf(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break a}}b=b.return}while(null!==b);throw Error(p(171));}if(1===a.tag){var c=a.type;if(Zf(c))return bg(a,c,b)}return b}\nfunction fl(a,b,c,d,e,f,g,h,k){a=cl(c,d,!0,a,e,f,g,h,k);a.context=el(null);c=a.current;d=L();e=lh(c);f=ch(d,e);f.callback=void 0!==b&&null!==b?b:null;dh(c,f,e);a.current.lanes=e;Ac(a,e,d);Ek(a,d);return a}function gl(a,b,c,d){var e=b.current,f=L(),g=lh(e);c=el(c);null===b.context?b.context=c:b.pendingContext=c;b=ch(f,g);b.payload={element:a};d=void 0===d?null:d;null!==d&&(b.callback=d);a=dh(e,b,g);null!==a&&(mh(a,e,g,f),eh(a,e,g));return g}\nfunction hl(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function il(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function jl(a,b){il(a,b);(a=a.alternate)&&il(a,b)}function kl(){return null}var ll=\"function\"===typeof reportError?reportError:function(a){console.error(a)};function ml(a){this._internalRoot=a}\nnl.prototype.render=ml.prototype.render=function(a){var b=this._internalRoot;if(null===b)throw Error(p(409));gl(a,b,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var a=this._internalRoot;if(null!==a){this._internalRoot=null;var b=a.containerInfo;Sk(function(){gl(null,a,null,null)});b[uf]=null}};function nl(a){this._internalRoot=a}\nnl.prototype.unstable_scheduleHydration=function(a){if(a){var b=Hc();a={blockedOn:null,target:a,priority:b};for(var c=0;c<Qc.length&&0!==b&&b<Qc[c].priority;c++);Qc.splice(c,0,a);0===c&&Vc(a)}};function ol(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType)}function pl(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}function ql(){}\nfunction rl(a,b,c,d,e){if(e){if(\"function\"===typeof d){var f=d;d=function(){var a=hl(g);f.call(a)}}var g=fl(b,d,a,0,null,!1,!1,\"\",ql);a._reactRootContainer=g;a[uf]=g.current;sf(8===a.nodeType?a.parentNode:a);Sk();return g}for(;e=a.lastChild;)a.removeChild(e);if(\"function\"===typeof d){var h=d;d=function(){var a=hl(k);h.call(a)}}var k=cl(a,0,!1,null,null,!1,!1,\"\",ql);a._reactRootContainer=k;a[uf]=k.current;sf(8===a.nodeType?a.parentNode:a);Sk(function(){gl(b,k,c,d)});return k}\nfunction sl(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f;if(\"function\"===typeof e){var h=e;e=function(){var a=hl(g);h.call(a)}}gl(b,g,a,e)}else g=rl(c,b,a,e,d);return hl(g)}Ec=function(a){switch(a.tag){case 3:var b=a.stateNode;if(b.current.memoizedState.isDehydrated){var c=tc(b.pendingLanes);0!==c&&(Cc(b,c|1),Ek(b,B()),0===(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var b=Zg(a,1);if(null!==b){var c=L();mh(b,a,1,c)}}),jl(a,1)}};\nFc=function(a){if(13===a.tag){var b=Zg(a,134217728);if(null!==b){var c=L();mh(b,a,134217728,c)}jl(a,134217728)}};Gc=function(a){if(13===a.tag){var b=lh(a),c=Zg(a,b);if(null!==c){var d=L();mh(c,a,b,d)}jl(a,b)}};Hc=function(){return C};Ic=function(a,b){var c=C;try{return C=a,b()}finally{C=c}};\nyb=function(a,b,c){switch(b){case \"input\":bb(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(p(90));Wa(d);bb(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Rk;Hb=Sk;\nvar tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:\"18.2.0\",rendererPackageName:\"react-dom\"};\nvar vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Zb(a);return null===a?null:a.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||\nkl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:\"18.2.0-next-9e3b772b8-20220608\"};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;\nexports.createPortal=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ol(b))throw Error(p(200));return dl(a,b,null,c)};exports.createRoot=function(a,b){if(!ol(a))throw Error(p(299));var c=!1,d=\"\",e=ll;null!==b&&void 0!==b&&(!0===b.unstable_strictMode&&(c=!0),void 0!==b.identifierPrefix&&(d=b.identifierPrefix),void 0!==b.onRecoverableError&&(e=b.onRecoverableError));b=cl(a,1,!1,null,null,c,!1,d,e);a[uf]=b.current;sf(8===a.nodeType?a.parentNode:a);return new ml(b)};\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(p(188));a=Object.keys(a).join(\",\");throw Error(p(268,a));}a=Zb(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a){return Sk(a)};exports.hydrate=function(a,b,c){if(!pl(b))throw Error(p(200));return sl(null,a,b,!0,c)};\nexports.hydrateRoot=function(a,b,c){if(!ol(a))throw Error(p(405));var d=null!=c&&c.hydratedSources||null,e=!1,f=\"\",g=ll;null!==c&&void 0!==c&&(!0===c.unstable_strictMode&&(e=!0),void 0!==c.identifierPrefix&&(f=c.identifierPrefix),void 0!==c.onRecoverableError&&(g=c.onRecoverableError));b=fl(b,null,a,1,null!=c?c:null,e,!1,f,g);a[uf]=b.current;sf(a);if(d)for(a=0;a<d.length;a++)c=d[a],e=c._getVersion,e=e(c._source),null==b.mutableSourceEagerHydrationData?b.mutableSourceEagerHydrationData=[c,e]:b.mutableSourceEagerHydrationData.push(c,\ne);return new nl(b)};exports.render=function(a,b,c){if(!pl(b))throw Error(p(200));return sl(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!pl(a))throw Error(p(40));return a._reactRootContainer?(Sk(function(){sl(null,null,a,!1,function(){a._reactRootContainer=null;a[uf]=null})}),!0):!1};exports.unstable_batchedUpdates=Rk;\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!pl(c))throw Error(p(200));if(null==a||void 0===a._reactInternals)throw Error(p(38));return sl(a,b,c,!1,d)};exports.version=\"18.2.0-next-9e3b772b8-20220608\";\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","/**\n * @license React\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=Symbol.for(\"react.element\"),n=Symbol.for(\"react.portal\"),p=Symbol.for(\"react.fragment\"),q=Symbol.for(\"react.strict_mode\"),r=Symbol.for(\"react.profiler\"),t=Symbol.for(\"react.provider\"),u=Symbol.for(\"react.context\"),v=Symbol.for(\"react.forward_ref\"),w=Symbol.for(\"react.suspense\"),x=Symbol.for(\"react.memo\"),y=Symbol.for(\"react.lazy\"),z=Symbol.iterator;function A(a){if(null===a||\"object\"!==typeof a)return null;a=z&&a[z]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}\nvar B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function E(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}E.prototype.isReactComponent={};\nE.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(\"setState(...): takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,a,b,\"setState\")};E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function F(){}F.prototype=E.prototype;function G(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}var H=G.prototype=new F;\nH.constructor=G;C(H,E.prototype);H.isPureReactComponent=!0;var I=Array.isArray,J=Object.prototype.hasOwnProperty,K={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,e){var d,c={},k=null,h=null;if(null!=b)for(d in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)J.call(b,d)&&!L.hasOwnProperty(d)&&(c[d]=b[d]);var g=arguments.length-2;if(1===g)c.children=e;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];c.children=f}if(a&&a.defaultProps)for(d in g=a.defaultProps,g)void 0===c[d]&&(c[d]=g[d]);return{$$typeof:l,type:a,key:k,ref:h,props:c,_owner:K.current}}\nfunction N(a,b){return{$$typeof:l,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===l}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var P=/\\/+/g;function Q(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction R(a,b,e,d,c){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case l:case n:h=!0}}if(h)return h=a,c=c(h),a=\"\"===d?\".\"+Q(h,0):d,I(c)?(e=\"\",null!=a&&(e=a.replace(P,\"$&/\")+\"/\"),R(c,b,e,\"\",function(a){return a})):null!=c&&(O(c)&&(c=N(c,e+(!c.key||h&&h.key===c.key?\"\":(\"\"+c.key).replace(P,\"$&/\")+\"/\")+a)),b.push(c)),1;h=0;d=\"\"===d?\".\":d+\":\";if(I(a))for(var g=0;g<a.length;g++){k=\na[g];var f=d+Q(k,g);h+=R(k,b,e,f,c)}else if(f=A(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=d+Q(k,g++),h+=R(k,b,e,f,c);else if(\"object\"===k)throw b=String(a),Error(\"Objects are not valid as a React child (found: \"+(\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b)+\"). If you meant to render a collection of children, use an array instead.\");return h}\nfunction S(a,b,e){if(null==a)return a;var d=[],c=0;R(a,d,\"\",\"\",function(a){return b.call(e,a,c++)});return d}function T(a){if(-1===a._status){var b=a._result;b=b();b.then(function(b){if(0===a._status||-1===a._status)a._status=1,a._result=b},function(b){if(0===a._status||-1===a._status)a._status=2,a._result=b});-1===a._status&&(a._status=0,a._result=b)}if(1===a._status)return a._result.default;throw a._result;}\nvar U={current:null},V={transition:null},W={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:V,ReactCurrentOwner:K};exports.Children={map:S,forEach:function(a,b,e){S(a,function(){b.apply(this,arguments)},e)},count:function(a){var b=0;S(a,function(){b++});return b},toArray:function(a){return S(a,function(a){return a})||[]},only:function(a){if(!O(a))throw Error(\"React.Children.only expected to receive a single React element child.\");return a}};exports.Component=E;exports.Fragment=p;\nexports.Profiler=r;exports.PureComponent=G;exports.StrictMode=q;exports.Suspense=w;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W;\nexports.cloneElement=function(a,b,e){if(null===a||void 0===a)throw Error(\"React.cloneElement(...): The argument must be a React element, but you passed \"+a+\".\");var d=C({},a.props),c=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=K.current);void 0!==b.key&&(c=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)J.call(b,f)&&!L.hasOwnProperty(f)&&(d[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){g=Array(f);\nfor(var m=0;m<f;m++)g[m]=arguments[m+2];d.children=g}return{$$typeof:l,type:a.type,key:c,ref:k,props:d,_owner:h}};exports.createContext=function(a){a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};a.Provider={$$typeof:t,_context:a};return a.Consumer=a};exports.createElement=M;exports.createFactory=function(a){var b=M.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};\nexports.forwardRef=function(a){return{$$typeof:v,render:a}};exports.isValidElement=O;exports.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T}};exports.memo=function(a,b){return{$$typeof:x,type:a,compare:void 0===b?null:b}};exports.startTransition=function(a){var b=V.transition;V.transition={};try{a()}finally{V.transition=b}};exports.unstable_act=function(){throw Error(\"act(...) is not supported in production builds of React.\");};\nexports.useCallback=function(a,b){return U.current.useCallback(a,b)};exports.useContext=function(a){return U.current.useContext(a)};exports.useDebugValue=function(){};exports.useDeferredValue=function(a){return U.current.useDeferredValue(a)};exports.useEffect=function(a,b){return U.current.useEffect(a,b)};exports.useId=function(){return U.current.useId()};exports.useImperativeHandle=function(a,b,e){return U.current.useImperativeHandle(a,b,e)};\nexports.useInsertionEffect=function(a,b){return U.current.useInsertionEffect(a,b)};exports.useLayoutEffect=function(a,b){return U.current.useLayoutEffect(a,b)};exports.useMemo=function(a,b){return U.current.useMemo(a,b)};exports.useReducer=function(a,b,e){return U.current.useReducer(a,b,e)};exports.useRef=function(a){return U.current.useRef(a)};exports.useState=function(a){return U.current.useState(a)};exports.useSyncExternalStore=function(a,b,e){return U.current.useSyncExternalStore(a,b,e)};\nexports.useTransition=function(){return U.current.useTransition()};exports.version=\"18.2.0\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';function f(a,b){var c=a.length;a.push(b);a:for(;0<c;){var d=c-1>>>1,e=a[d];if(0<g(e,b))a[d]=b,a[c]=e,c=d;else break a}}function h(a){return 0===a.length?null:a[0]}function k(a){if(0===a.length)return null;var b=a[0],c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length,w=e>>>1;d<w;){var m=2*(d+1)-1,C=a[m],n=m+1,x=a[n];if(0>g(C,c))n<e&&0>g(x,C)?(a[d]=x,a[n]=c,d=n):(a[d]=C,a[m]=c,d=m);else if(n<e&&0>g(x,c))a[d]=x,a[n]=c,d=n;else break a}}return b}\nfunction g(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}var r=[],t=[],u=1,v=null,y=3,z=!1,A=!1,B=!1,D=\"function\"===typeof setTimeout?setTimeout:null,E=\"function\"===typeof clearTimeout?clearTimeout:null,F=\"undefined\"!==typeof setImmediate?setImmediate:null;\n\"undefined\"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(a){for(var b=h(t);null!==b;){if(null===b.callback)k(t);else if(b.startTime<=a)k(t),b.sortIndex=b.expirationTime,f(r,b);else break;b=h(t)}}function H(a){B=!1;G(a);if(!A)if(null!==h(r))A=!0,I(J);else{var b=h(t);null!==b&&K(H,b.startTime-a)}}\nfunction J(a,b){A=!1;B&&(B=!1,E(L),L=-1);z=!0;var c=y;try{G(b);for(v=h(r);null!==v&&(!(v.expirationTime>b)||a&&!M());){var d=v.callback;if(\"function\"===typeof d){v.callback=null;y=v.priorityLevel;var e=d(v.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?v.callback=e:v===h(r)&&k(r);G(b)}else k(r);v=h(r)}if(null!==v)var w=!0;else{var m=h(t);null!==m&&K(H,m.startTime-b);w=!1}return w}finally{v=null,y=c,z=!1}}var N=!1,O=null,L=-1,P=5,Q=-1;\nfunction M(){return exports.unstable_now()-Q<P?!1:!0}function R(){if(null!==O){var a=exports.unstable_now();Q=a;var b=!0;try{b=O(!0,a)}finally{b?S():(N=!1,O=null)}}else N=!1}var S;if(\"function\"===typeof F)S=function(){F(R)};else if(\"undefined\"!==typeof MessageChannel){var T=new MessageChannel,U=T.port2;T.port1.onmessage=R;S=function(){U.postMessage(null)}}else S=function(){D(R,0)};function I(a){O=a;N||(N=!0,S())}function K(a,b){L=D(function(){a(exports.unstable_now())},b)}\nexports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){A||z||(A=!0,I(J))};\nexports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):P=0<a?Math.floor(1E3/a):5};exports.unstable_getCurrentPriorityLevel=function(){return y};exports.unstable_getFirstCallbackNode=function(){return h(r)};exports.unstable_next=function(a){switch(y){case 1:case 2:case 3:var b=3;break;default:b=y}var c=y;y=b;try{return a()}finally{y=c}};exports.unstable_pauseExecution=function(){};\nexports.unstable_requestPaint=function(){};exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=y;y=a;try{return b()}finally{y=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:u++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,f(t,a),null===h(r)&&a===h(t)&&(B?(E(L),L=-1):B=!0,K(H,c-d))):(a.sortIndex=e,f(r,a),A||z||(A=!0,I(J)));return a};\nexports.unstable_shouldYield=M;exports.unstable_wrapCallback=function(a){var b=y;return function(){var c=y;y=b;try{return a.apply(this,arguments)}finally{y=c}}};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"453\":\"b53a8b75\",\"484\":\"909a92b8\",\"551\":\"13c46e85\",\"707\":\"6cb81d88\",\"828\":\"6ac05289\",\"849\":\"13f74440\",\"950\":\"5c30d757\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"castle-coders:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/castle-coders-alpha/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkcastle_coders\"] = self[\"webpackChunkcastle_coders\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","export function unsafeGenerateN(rng, num) {\n    var out = [];\n    for (var idx = 0; idx != num; ++idx) {\n        out.push(rng.unsafeNext());\n    }\n    return out;\n}\nexport function generateN(rng, num) {\n    var nextRng = rng.clone();\n    var out = unsafeGenerateN(nextRng, num);\n    return [out, nextRng];\n}\nexport function unsafeSkipN(rng, num) {\n    for (var idx = 0; idx != num; ++idx) {\n        rng.unsafeNext();\n    }\n}\nexport function skipN(rng, num) {\n    var nextRng = rng.clone();\n    unsafeSkipN(nextRng, num);\n    return nextRng;\n}\n","var MULTIPLIER = 0x000343fd;\nvar INCREMENT = 0x00269ec3;\nvar MASK = 0xffffffff;\nvar MASK_2 = (1 << 31) - 1;\nvar computeNextSeed = function (seed) {\n    return (seed * MULTIPLIER + INCREMENT) & MASK;\n};\nvar computeValueFromNextSeed = function (nextseed) {\n    return (nextseed & MASK_2) >> 16;\n};\nvar LinearCongruential32 = (function () {\n    function LinearCongruential32(seed) {\n        this.seed = seed;\n    }\n    LinearCongruential32.prototype.clone = function () {\n        return new LinearCongruential32(this.seed);\n    };\n    LinearCongruential32.prototype.next = function () {\n        var nextRng = new LinearCongruential32(this.seed);\n        var out = nextRng.unsafeNext();\n        return [out, nextRng];\n    };\n    LinearCongruential32.prototype.unsafeNext = function () {\n        var s1 = computeNextSeed(this.seed);\n        var v1 = computeValueFromNextSeed(s1);\n        var s2 = computeNextSeed(s1);\n        var v2 = computeValueFromNextSeed(s2);\n        this.seed = computeNextSeed(s2);\n        var v3 = computeValueFromNextSeed(this.seed);\n        var vnext = v3 + ((v2 + (v1 << 15)) << 15);\n        return vnext | 0;\n    };\n    LinearCongruential32.prototype.getState = function () {\n        return [this.seed];\n    };\n    return LinearCongruential32;\n}());\nfunction fromState(state) {\n    var valid = state.length === 1;\n    if (!valid) {\n        throw new Error('The state must have been produced by a congruential32 RandomGenerator');\n    }\n    return new LinearCongruential32(state[0]);\n}\nexport var congruential32 = Object.assign(function (seed) {\n    return new LinearCongruential32(seed);\n}, { fromState: fromState });\n","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar MersenneTwister = (function () {\n    function MersenneTwister(states, index) {\n        this.states = states;\n        this.index = index;\n    }\n    MersenneTwister.twist = function (prev) {\n        var mt = prev.slice();\n        for (var idx = 0; idx !== MersenneTwister.N - MersenneTwister.M; ++idx) {\n            var y_1 = (mt[idx] & MersenneTwister.MASK_UPPER) + (mt[idx + 1] & MersenneTwister.MASK_LOWER);\n            mt[idx] = mt[idx + MersenneTwister.M] ^ (y_1 >>> 1) ^ (-(y_1 & 1) & MersenneTwister.A);\n        }\n        for (var idx = MersenneTwister.N - MersenneTwister.M; idx !== MersenneTwister.N - 1; ++idx) {\n            var y_2 = (mt[idx] & MersenneTwister.MASK_UPPER) + (mt[idx + 1] & MersenneTwister.MASK_LOWER);\n            mt[idx] = mt[idx + MersenneTwister.M - MersenneTwister.N] ^ (y_2 >>> 1) ^ (-(y_2 & 1) & MersenneTwister.A);\n        }\n        var y = (mt[MersenneTwister.N - 1] & MersenneTwister.MASK_UPPER) + (mt[0] & MersenneTwister.MASK_LOWER);\n        mt[MersenneTwister.N - 1] = mt[MersenneTwister.M - 1] ^ (y >>> 1) ^ (-(y & 1) & MersenneTwister.A);\n        return mt;\n    };\n    MersenneTwister.seeded = function (seed) {\n        var out = Array(MersenneTwister.N);\n        out[0] = seed;\n        for (var idx = 1; idx !== MersenneTwister.N; ++idx) {\n            var xored = out[idx - 1] ^ (out[idx - 1] >>> 30);\n            out[idx] = (Math.imul(MersenneTwister.F, xored) + idx) | 0;\n        }\n        return out;\n    };\n    MersenneTwister.from = function (seed) {\n        return new MersenneTwister(MersenneTwister.twist(MersenneTwister.seeded(seed)), 0);\n    };\n    MersenneTwister.prototype.clone = function () {\n        return new MersenneTwister(this.states, this.index);\n    };\n    MersenneTwister.prototype.next = function () {\n        var nextRng = new MersenneTwister(this.states, this.index);\n        var out = nextRng.unsafeNext();\n        return [out, nextRng];\n    };\n    MersenneTwister.prototype.unsafeNext = function () {\n        var y = this.states[this.index];\n        y ^= this.states[this.index] >>> MersenneTwister.U;\n        y ^= (y << MersenneTwister.S) & MersenneTwister.B;\n        y ^= (y << MersenneTwister.T) & MersenneTwister.C;\n        y ^= y >>> MersenneTwister.L;\n        if (++this.index >= MersenneTwister.N) {\n            this.states = MersenneTwister.twist(this.states);\n            this.index = 0;\n        }\n        return y;\n    };\n    MersenneTwister.prototype.getState = function () {\n        return __spreadArray([this.index], __read(this.states), false);\n    };\n    MersenneTwister.fromState = function (state) {\n        var valid = state.length === MersenneTwister.N + 1 && state[0] >= 0 && state[0] < MersenneTwister.N;\n        if (!valid) {\n            throw new Error('The state must have been produced by a mersenne RandomGenerator');\n        }\n        return new MersenneTwister(state.slice(1), state[0]);\n    };\n    MersenneTwister.N = 624;\n    MersenneTwister.M = 397;\n    MersenneTwister.R = 31;\n    MersenneTwister.A = 0x9908b0df;\n    MersenneTwister.F = 1812433253;\n    MersenneTwister.U = 11;\n    MersenneTwister.S = 7;\n    MersenneTwister.B = 0x9d2c5680;\n    MersenneTwister.T = 15;\n    MersenneTwister.C = 0xefc60000;\n    MersenneTwister.L = 18;\n    MersenneTwister.MASK_LOWER = Math.pow(2, MersenneTwister.R) - 1;\n    MersenneTwister.MASK_UPPER = Math.pow(2, MersenneTwister.R);\n    return MersenneTwister;\n}());\nfunction fromState(state) {\n    return MersenneTwister.fromState(state);\n}\nexport default Object.assign(function (seed) {\n    return MersenneTwister.from(seed);\n}, { fromState: fromState });\n","var XorShift128Plus = (function () {\n    function XorShift128Plus(s01, s00, s11, s10) {\n        this.s01 = s01;\n        this.s00 = s00;\n        this.s11 = s11;\n        this.s10 = s10;\n    }\n    XorShift128Plus.prototype.clone = function () {\n        return new XorShift128Plus(this.s01, this.s00, this.s11, this.s10);\n    };\n    XorShift128Plus.prototype.next = function () {\n        var nextRng = new XorShift128Plus(this.s01, this.s00, this.s11, this.s10);\n        var out = nextRng.unsafeNext();\n        return [out, nextRng];\n    };\n    XorShift128Plus.prototype.unsafeNext = function () {\n        var a0 = this.s00 ^ (this.s00 << 23);\n        var a1 = this.s01 ^ ((this.s01 << 23) | (this.s00 >>> 9));\n        var b0 = a0 ^ this.s10 ^ ((a0 >>> 18) | (a1 << 14)) ^ ((this.s10 >>> 5) | (this.s11 << 27));\n        var b1 = a1 ^ this.s11 ^ (a1 >>> 18) ^ (this.s11 >>> 5);\n        var out = (this.s00 + this.s10) | 0;\n        this.s01 = this.s11;\n        this.s00 = this.s10;\n        this.s11 = b1;\n        this.s10 = b0;\n        return out;\n    };\n    XorShift128Plus.prototype.jump = function () {\n        var nextRng = new XorShift128Plus(this.s01, this.s00, this.s11, this.s10);\n        nextRng.unsafeJump();\n        return nextRng;\n    };\n    XorShift128Plus.prototype.unsafeJump = function () {\n        var ns01 = 0;\n        var ns00 = 0;\n        var ns11 = 0;\n        var ns10 = 0;\n        var jump = [0x635d2dff, 0x8a5cd789, 0x5c472f96, 0x121fd215];\n        for (var i = 0; i !== 4; ++i) {\n            for (var mask = 1; mask; mask <<= 1) {\n                if (jump[i] & mask) {\n                    ns01 ^= this.s01;\n                    ns00 ^= this.s00;\n                    ns11 ^= this.s11;\n                    ns10 ^= this.s10;\n                }\n                this.unsafeNext();\n            }\n        }\n        this.s01 = ns01;\n        this.s00 = ns00;\n        this.s11 = ns11;\n        this.s10 = ns10;\n    };\n    XorShift128Plus.prototype.getState = function () {\n        return [this.s01, this.s00, this.s11, this.s10];\n    };\n    return XorShift128Plus;\n}());\nfunction fromState(state) {\n    var valid = state.length === 4;\n    if (!valid) {\n        throw new Error('The state must have been produced by a xorshift128plus RandomGenerator');\n    }\n    return new XorShift128Plus(state[0], state[1], state[2], state[3]);\n}\nexport var xorshift128plus = Object.assign(function (seed) {\n    return new XorShift128Plus(-1, ~seed, seed | 0, 0);\n}, { fromState: fromState });\n","var XoroShiro128Plus = (function () {\n    function XoroShiro128Plus(s01, s00, s11, s10) {\n        this.s01 = s01;\n        this.s00 = s00;\n        this.s11 = s11;\n        this.s10 = s10;\n    }\n    XoroShiro128Plus.prototype.clone = function () {\n        return new XoroShiro128Plus(this.s01, this.s00, this.s11, this.s10);\n    };\n    XoroShiro128Plus.prototype.next = function () {\n        var nextRng = new XoroShiro128Plus(this.s01, this.s00, this.s11, this.s10);\n        var out = nextRng.unsafeNext();\n        return [out, nextRng];\n    };\n    XoroShiro128Plus.prototype.unsafeNext = function () {\n        var out = (this.s00 + this.s10) | 0;\n        var a0 = this.s10 ^ this.s00;\n        var a1 = this.s11 ^ this.s01;\n        var s00 = this.s00;\n        var s01 = this.s01;\n        this.s00 = (s00 << 24) ^ (s01 >>> 8) ^ a0 ^ (a0 << 16);\n        this.s01 = (s01 << 24) ^ (s00 >>> 8) ^ a1 ^ ((a1 << 16) | (a0 >>> 16));\n        this.s10 = (a1 << 5) ^ (a0 >>> 27);\n        this.s11 = (a0 << 5) ^ (a1 >>> 27);\n        return out;\n    };\n    XoroShiro128Plus.prototype.jump = function () {\n        var nextRng = new XoroShiro128Plus(this.s01, this.s00, this.s11, this.s10);\n        nextRng.unsafeJump();\n        return nextRng;\n    };\n    XoroShiro128Plus.prototype.unsafeJump = function () {\n        var ns01 = 0;\n        var ns00 = 0;\n        var ns11 = 0;\n        var ns10 = 0;\n        var jump = [0xd8f554a5, 0xdf900294, 0x4b3201fc, 0x170865df];\n        for (var i = 0; i !== 4; ++i) {\n            for (var mask = 1; mask; mask <<= 1) {\n                if (jump[i] & mask) {\n                    ns01 ^= this.s01;\n                    ns00 ^= this.s00;\n                    ns11 ^= this.s11;\n                    ns10 ^= this.s10;\n                }\n                this.unsafeNext();\n            }\n        }\n        this.s01 = ns01;\n        this.s00 = ns00;\n        this.s11 = ns11;\n        this.s10 = ns10;\n    };\n    XoroShiro128Plus.prototype.getState = function () {\n        return [this.s01, this.s00, this.s11, this.s10];\n    };\n    return XoroShiro128Plus;\n}());\nfunction fromState(state) {\n    var valid = state.length === 4;\n    if (!valid) {\n        throw new Error('The state must have been produced by a xoroshiro128plus RandomGenerator');\n    }\n    return new XoroShiro128Plus(state[0], state[1], state[2], state[3]);\n}\nexport var xoroshiro128plus = Object.assign(function (seed) {\n    return new XoroShiro128Plus(-1, ~seed, seed | 0, 0);\n}, { fromState: fromState });\n","export function addArrayIntToNew(arrayIntA, arrayIntB) {\n    if (arrayIntA.sign !== arrayIntB.sign) {\n        return substractArrayIntToNew(arrayIntA, { sign: -arrayIntB.sign, data: arrayIntB.data });\n    }\n    var data = [];\n    var reminder = 0;\n    var dataA = arrayIntA.data;\n    var dataB = arrayIntB.data;\n    for (var indexA = dataA.length - 1, indexB = dataB.length - 1; indexA >= 0 || indexB >= 0; --indexA, --indexB) {\n        var vA = indexA >= 0 ? dataA[indexA] : 0;\n        var vB = indexB >= 0 ? dataB[indexB] : 0;\n        var current = vA + vB + reminder;\n        data.push(current >>> 0);\n        reminder = ~~(current / 0x100000000);\n    }\n    if (reminder !== 0) {\n        data.push(reminder);\n    }\n    return { sign: arrayIntA.sign, data: data.reverse() };\n}\nexport function addOneToPositiveArrayInt(arrayInt) {\n    arrayInt.sign = 1;\n    var data = arrayInt.data;\n    for (var index = data.length - 1; index >= 0; --index) {\n        if (data[index] === 0xffffffff) {\n            data[index] = 0;\n        }\n        else {\n            data[index] += 1;\n            return arrayInt;\n        }\n    }\n    data.unshift(1);\n    return arrayInt;\n}\nfunction isStrictlySmaller(dataA, dataB) {\n    var maxLength = Math.max(dataA.length, dataB.length);\n    for (var index = 0; index < maxLength; ++index) {\n        var indexA = index + dataA.length - maxLength;\n        var indexB = index + dataB.length - maxLength;\n        var vA = indexA >= 0 ? dataA[indexA] : 0;\n        var vB = indexB >= 0 ? dataB[indexB] : 0;\n        if (vA < vB)\n            return true;\n        if (vA > vB)\n            return false;\n    }\n    return false;\n}\nexport function substractArrayIntToNew(arrayIntA, arrayIntB) {\n    if (arrayIntA.sign !== arrayIntB.sign) {\n        return addArrayIntToNew(arrayIntA, { sign: -arrayIntB.sign, data: arrayIntB.data });\n    }\n    var dataA = arrayIntA.data;\n    var dataB = arrayIntB.data;\n    if (isStrictlySmaller(dataA, dataB)) {\n        var out = substractArrayIntToNew(arrayIntB, arrayIntA);\n        out.sign = -out.sign;\n        return out;\n    }\n    var data = [];\n    var reminder = 0;\n    for (var indexA = dataA.length - 1, indexB = dataB.length - 1; indexA >= 0 || indexB >= 0; --indexA, --indexB) {\n        var vA = indexA >= 0 ? dataA[indexA] : 0;\n        var vB = indexB >= 0 ? dataB[indexB] : 0;\n        var current = vA - vB - reminder;\n        data.push(current >>> 0);\n        reminder = current < 0 ? 1 : 0;\n    }\n    return { sign: arrayIntA.sign, data: data.reverse() };\n}\nexport function trimArrayIntInplace(arrayInt) {\n    var data = arrayInt.data;\n    var firstNonZero = 0;\n    for (; firstNonZero !== data.length && data[firstNonZero] === 0; ++firstNonZero) { }\n    if (firstNonZero === data.length) {\n        arrayInt.sign = 1;\n        arrayInt.data = [0];\n        return arrayInt;\n    }\n    data.splice(0, firstNonZero);\n    return arrayInt;\n}\nexport function fromNumberToArrayInt64(out, n) {\n    if (n < 0) {\n        var posN = -n;\n        out.sign = -1;\n        out.data[0] = ~~(posN / 0x100000000);\n        out.data[1] = posN >>> 0;\n    }\n    else {\n        out.sign = 1;\n        out.data[0] = ~~(n / 0x100000000);\n        out.data[1] = n >>> 0;\n    }\n    return out;\n}\nexport function substractArrayInt64(out, arrayIntA, arrayIntB) {\n    var lowA = arrayIntA.data[1];\n    var highA = arrayIntA.data[0];\n    var signA = arrayIntA.sign;\n    var lowB = arrayIntB.data[1];\n    var highB = arrayIntB.data[0];\n    var signB = arrayIntB.sign;\n    out.sign = 1;\n    if (signA === 1 && signB === -1) {\n        var low_1 = lowA + lowB;\n        var high = highA + highB + (low_1 > 0xffffffff ? 1 : 0);\n        out.data[0] = high >>> 0;\n        out.data[1] = low_1 >>> 0;\n        return out;\n    }\n    var lowFirst = lowA;\n    var highFirst = highA;\n    var lowSecond = lowB;\n    var highSecond = highB;\n    if (signA === -1) {\n        lowFirst = lowB;\n        highFirst = highB;\n        lowSecond = lowA;\n        highSecond = highA;\n    }\n    var reminderLow = 0;\n    var low = lowFirst - lowSecond;\n    if (low < 0) {\n        reminderLow = 1;\n        low = low >>> 0;\n    }\n    out.data[0] = highFirst - highSecond - reminderLow;\n    out.data[1] = low;\n    return out;\n}\n","export function unsafeUniformIntDistributionInternal(rangeSize, rng) {\n    var MaxAllowed = rangeSize > 2 ? ~~(0x100000000 / rangeSize) * rangeSize : 0x100000000;\n    var deltaV = rng.unsafeNext() + 0x80000000;\n    while (deltaV >= MaxAllowed) {\n        deltaV = rng.unsafeNext() + 0x80000000;\n    }\n    return deltaV % rangeSize;\n}\n","import { unsafeUniformIntDistributionInternal } from './UnsafeUniformIntDistributionInternal.js';\nexport function unsafeUniformArrayIntDistributionInternal(out, rangeSize, rng) {\n    var rangeLength = rangeSize.length;\n    while (true) {\n        for (var index = 0; index !== rangeLength; ++index) {\n            var indexRangeSize = index === 0 ? rangeSize[0] + 1 : 0x100000000;\n            var g = unsafeUniformIntDistributionInternal(indexRangeSize, rng);\n            out[index] = g;\n        }\n        for (var index = 0; index !== rangeLength; ++index) {\n            var current = out[index];\n            var currentInRange = rangeSize[index];\n            if (current < currentInRange) {\n                return out;\n            }\n            else if (current > currentInRange) {\n                break;\n            }\n        }\n    }\n}\n","import { addArrayIntToNew, addOneToPositiveArrayInt, substractArrayIntToNew, trimArrayIntInplace, } from './internals/ArrayInt.js';\nimport { unsafeUniformArrayIntDistributionInternal } from './internals/UnsafeUniformArrayIntDistributionInternal.js';\nexport function unsafeUniformArrayIntDistribution(from, to, rng) {\n    var rangeSize = trimArrayIntInplace(addOneToPositiveArrayInt(substractArrayIntToNew(to, from)));\n    var emptyArrayIntData = rangeSize.data.slice(0);\n    var g = unsafeUniformArrayIntDistributionInternal(emptyArrayIntData, rangeSize.data, rng);\n    return trimArrayIntInplace(addArrayIntToNew({ sign: 1, data: g }, from));\n}\n","import { unsafeUniformArrayIntDistribution } from './UnsafeUniformArrayIntDistribution.js';\nfunction uniformArrayIntDistribution(from, to, rng) {\n    if (rng != null) {\n        var nextRng = rng.clone();\n        return [unsafeUniformArrayIntDistribution(from, to, nextRng), nextRng];\n    }\n    return function (rng) {\n        var nextRng = rng.clone();\n        return [unsafeUniformArrayIntDistribution(from, to, nextRng), nextRng];\n    };\n}\nexport { uniformArrayIntDistribution };\n","var SBigInt = typeof BigInt !== 'undefined' ? BigInt : undefined;\nexport function unsafeUniformBigIntDistribution(from, to, rng) {\n    var diff = to - from + SBigInt(1);\n    var MinRng = SBigInt(-0x80000000);\n    var NumValues = SBigInt(0x100000000);\n    var FinalNumValues = NumValues;\n    var NumIterations = 1;\n    while (FinalNumValues < diff) {\n        FinalNumValues *= NumValues;\n        ++NumIterations;\n    }\n    var MaxAcceptedRandom = FinalNumValues - (FinalNumValues % diff);\n    while (true) {\n        var value = SBigInt(0);\n        for (var num = 0; num !== NumIterations; ++num) {\n            var out = rng.unsafeNext();\n            value = NumValues * value + (SBigInt(out) - MinRng);\n        }\n        if (value < MaxAcceptedRandom) {\n            var inDiff = value % diff;\n            return inDiff + from;\n        }\n    }\n}\n","import { unsafeUniformBigIntDistribution } from './UnsafeUniformBigIntDistribution.js';\nfunction uniformBigIntDistribution(from, to, rng) {\n    if (rng != null) {\n        var nextRng = rng.clone();\n        return [unsafeUniformBigIntDistribution(from, to, nextRng), nextRng];\n    }\n    return function (rng) {\n        var nextRng = rng.clone();\n        return [unsafeUniformBigIntDistribution(from, to, nextRng), nextRng];\n    };\n}\nexport { uniformBigIntDistribution };\n","import { unsafeUniformIntDistributionInternal } from './internals/UnsafeUniformIntDistributionInternal.js';\nimport { fromNumberToArrayInt64, substractArrayInt64 } from './internals/ArrayInt.js';\nimport { unsafeUniformArrayIntDistributionInternal } from './internals/UnsafeUniformArrayIntDistributionInternal.js';\nvar safeNumberMaxSafeInteger = Number.MAX_SAFE_INTEGER;\nvar sharedA = { sign: 1, data: [0, 0] };\nvar sharedB = { sign: 1, data: [0, 0] };\nvar sharedC = { sign: 1, data: [0, 0] };\nvar sharedData = [0, 0];\nfunction uniformLargeIntInternal(from, to, rangeSize, rng) {\n    var rangeSizeArrayIntValue = rangeSize <= safeNumberMaxSafeInteger\n        ? fromNumberToArrayInt64(sharedC, rangeSize)\n        : substractArrayInt64(sharedC, fromNumberToArrayInt64(sharedA, to), fromNumberToArrayInt64(sharedB, from));\n    if (rangeSizeArrayIntValue.data[1] === 0xffffffff) {\n        rangeSizeArrayIntValue.data[0] += 1;\n        rangeSizeArrayIntValue.data[1] = 0;\n    }\n    else {\n        rangeSizeArrayIntValue.data[1] += 1;\n    }\n    unsafeUniformArrayIntDistributionInternal(sharedData, rangeSizeArrayIntValue.data, rng);\n    return sharedData[0] * 0x100000000 + sharedData[1] + from;\n}\nexport function unsafeUniformIntDistribution(from, to, rng) {\n    var rangeSize = to - from;\n    if (rangeSize <= 0xffffffff) {\n        var g = unsafeUniformIntDistributionInternal(rangeSize + 1, rng);\n        return g + from;\n    }\n    return uniformLargeIntInternal(from, to, rangeSize, rng);\n}\n","import { unsafeUniformIntDistribution } from './UnsafeUniformIntDistribution.js';\nfunction uniformIntDistribution(from, to, rng) {\n    if (rng != null) {\n        var nextRng = rng.clone();\n        return [unsafeUniformIntDistribution(from, to, nextRng), nextRng];\n    }\n    return function (rng) {\n        var nextRng = rng.clone();\n        return [unsafeUniformIntDistribution(from, to, nextRng), nextRng];\n    };\n}\nexport { uniformIntDistribution };\n","import { generateN, skipN, unsafeGenerateN, unsafeSkipN } from './generator/RandomGenerator.js';\nimport { congruential32 } from './generator/LinearCongruential.js';\nimport mersenne from './generator/MersenneTwister.js';\nimport { xorshift128plus } from './generator/XorShift.js';\nimport { xoroshiro128plus } from './generator/XoroShiro.js';\nimport { uniformArrayIntDistribution } from './distribution/UniformArrayIntDistribution.js';\nimport { uniformBigIntDistribution } from './distribution/UniformBigIntDistribution.js';\nimport { uniformIntDistribution } from './distribution/UniformIntDistribution.js';\nimport { unsafeUniformArrayIntDistribution } from './distribution/UnsafeUniformArrayIntDistribution.js';\nimport { unsafeUniformBigIntDistribution } from './distribution/UnsafeUniformBigIntDistribution.js';\nimport { unsafeUniformIntDistribution } from './distribution/UnsafeUniformIntDistribution.js';\nvar __type = 'module';\nvar __version = '6.1.0';\nvar __commitHash = 'a413dd2b721516be2ef29adffb515c5ae67bfbad';\nexport { __type, __version, __commitHash, generateN, skipN, unsafeGenerateN, unsafeSkipN, congruential32, mersenne, xorshift128plus, xoroshiro128plus, uniformArrayIntDistribution, uniformBigIntDistribution, uniformIntDistribution, unsafeUniformArrayIntDistribution, unsafeUniformBigIntDistribution, unsafeUniformIntDistribution, };\n","import * as prand from './pure-rand-default.js';\nexport default prand;\nexport * from './pure-rand-default.js';\n","import { Color32, Rectangle } from \"../BlockEditor\";\nimport castle_interior from \"./castle_interior.jpg\";\nimport green_goblin from \"./green_goblin.png\";\nimport purple_goblin from \"./purple_goblin.png\";\nimport hero from \"./hero.png\";\nimport heart_mark from \"./heart_mark.png\";\nimport empty_heart_mark from \"./empty_heart_mark.png\";\nimport witch_idle from \"./witch_idle.png\";\nimport witch_wand_raised from \"./witch_wand_raised.png\";\nimport witch_wand_lowered from \"./witch_wand_lowered.png\";\nimport home_screen_start_button from \"./buttons/home_screen/start.png\";\nimport home_screen_shop_button from \"./buttons/home_screen/shop.png\";\nimport home_screen_settings_button from \"./buttons/home_screen/settings.png\";\nimport puzzle_screen_edit_button from \"./buttons/puzzle_screen/edit.png\";\nimport puzzle_screen_view_button from \"./buttons/puzzle_screen/view.png\";\nimport puzzle_screen_play_button from \"./buttons/puzzle_screen/play.png\";\nimport puzzle_screen_pause_button from \"./buttons/puzzle_screen/pause.png\";\nimport puzzle_screen_home_button from \"./buttons/puzzle_screen/home.png\";\nimport language_button from \"./buttons/settings_screen/language.png\";\nimport credits_button from \"./buttons/settings_screen/credits.png\";\nimport reset_to_level_one_button from \"./buttons/settings_screen/reset_to_level_one.png\";\nimport settings_screen_close_button from \"./buttons/settings_screen/close.png\";\nimport extended_home_background from \"./extended_home_background.png\";\nimport settings_box from \"./settings_box.png\";\nimport language_dropdown_arrow from \"./language_dropdown_arrow.png\";\nimport finger from \"./tutorial/finger.png\";\nimport short_instructions_box from \"./tutorial/short_instructions_box.png\";\nimport tall_instructions_box from \"./tutorial/tall_instructions_box.png\";\nimport loading_screen_castle_coders_text from \"./loading_screen_castle_coders_text.png\";\n\nimport { Dimensions } from \"../miscTypes\";\n\nexport const images = {\n  castle_interior: loadImage(castle_interior),\n  green_goblin: loadImage(green_goblin),\n  purple_goblin: loadImage(purple_goblin),\n  hero: loadImage(hero),\n  heart_mark: loadImage(heart_mark),\n  empty_heart_mark: loadImage(empty_heart_mark),\n  witch_idle: loadImage(witch_idle),\n  witch_wand_raised: loadImage(witch_wand_raised),\n  witch_wand_lowered: loadImage(witch_wand_lowered),\n  extended_home_background: loadImage(extended_home_background),\n  settings_box: loadImage(settings_box),\n  language_dropdown_arrow: loadImage(language_dropdown_arrow),\n  loading_screen_castle_coders_text: loadImage(\n    loading_screen_castle_coders_text\n  ),\n  buttons: {\n    home: {\n      start: loadImage(home_screen_start_button),\n      shop: loadImage(home_screen_shop_button),\n      settings: loadImage(home_screen_settings_button),\n    },\n    puzzle: {\n      edit: loadImage(puzzle_screen_edit_button),\n      view: loadImage(puzzle_screen_view_button),\n      play: loadImage(puzzle_screen_play_button),\n      pause: loadImage(puzzle_screen_pause_button),\n      home: loadImage(puzzle_screen_home_button),\n    },\n    settings: {\n      language: loadImage(language_button),\n      credits: loadImage(credits_button),\n      reset_to_level_one: loadImage(reset_to_level_one_button),\n      close: loadImage(settings_screen_close_button),\n    },\n  },\n  tutorial: {\n    finger: loadImage(finger),\n    short_instructions_box: loadImage(short_instructions_box),\n    tall_instructions_box: loadImage(tall_instructions_box),\n  },\n} as const;\n\nexport const buttonOverlays = {\n  home: {\n    start: whiteOverlay(images.buttons.home.start),\n    shop: whiteOverlay(images.buttons.home.shop),\n    settings: whiteOverlay(images.buttons.home.settings),\n  },\n  puzzle: {\n    all_purpose: whiteOverlay(images.buttons.puzzle.home),\n  },\n  settings: {\n    language: whiteOverlay(images.buttons.settings.language),\n    credits: whiteOverlay(images.buttons.settings.credits),\n    reset_to_level_one: whiteOverlay(\n      images.buttons.settings.reset_to_level_one\n    ),\n    close: whiteOverlay(images.buttons.settings.close),\n  },\n} as const;\n\nexport const damageOverlays = {\n  hero: redOverlay(images.hero),\n  goblin: redOverlay(images.green_goblin),\n  witch_idle: redOverlay(images.witch_idle),\n  heart_mark: blackOverlay(images.heart_mark),\n} as const;\n\nexport const NONEXTENDED_HOME_BACKGROUND_DIMENSIONS: Dimensions = {\n  width: 2039,\n  height: 1447,\n};\n\nexport const EXTENDED_HOME_BACKGROUND_DIMENSIONS: Dimensions = {\n  width: 4096,\n  height: 1938,\n};\n\nconst MAIN_AREA_DIMENSIONS_IN_EXTENDED_HOME_COORDS = {\n  width: EXTENDED_HOME_BACKGROUND_DIMENSIONS.width / 3,\n  height: EXTENDED_HOME_BACKGROUND_DIMENSIONS.height / 2,\n};\n\nexport const START_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS: Rectangle = {\n  topLeft: { x: 1038, y: 134 },\n  dimensions: { width: 935, height: 348 },\n};\n\nexport const SHOP_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS: Rectangle = {\n  topLeft: { x: 1104, y: 599 },\n  dimensions: { width: 684, height: 279 },\n};\n\nexport const SETTINGS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS: Rectangle = {\n  topLeft: { x: 1097, y: 906 },\n  dimensions: { width: 647, height: 312 },\n};\n\nconst JAPANESE_FROM_BEGINNING_TEXT_BBOX_IN_EXTENDED_HOME_COORDS: Rectangle = {\n  topLeft: { x: 1135 * 2, y: 577 * 2 },\n  dimensions: { width: 130 * 2, height: 24 * 2 },\n};\n\nconst JAPANESE_FROM_LAST_SAVED_TEXT_BBOX_IN_EXTENDED_HOME_COORDS: Rectangle = {\n  topLeft: { x: 1137 * 2, y: 577 * 2 },\n  dimensions: { width: 127 * 2, height: 24 * 2 },\n};\n\nconst JAPANESE_SHOP_TEXT_BBOX_IN_EXTENDED_HOME_COORDS: Rectangle = {\n  topLeft: { x: 1131 * 2, y: 721 * 2 },\n  dimensions: { width: 98 * 2, height: 24 * 2 },\n};\n\nconst JAPANESE_SETTINGS_TEXT_BBOX_IN_EXTENDED_HOME_COORDS: Rectangle = {\n  topLeft: { x: 1139 * 2, y: 835 * 2 },\n  dimensions: { width: 58 * 2, height: 26 * 2 },\n};\n\nconst JAPANESE_SETTINGS_BOX_ALL_TEXT_BBOX_IN_NONEXTENDED_HOME_COORDS: Rectangle =\n  {\n    topLeft: { x: 600, y: 523 },\n    dimensions: { width: 640, height: 337 },\n  };\n\nexport const JAPANESE_TEXT_BBOX_IN_EXTENDED_HOME_COORDS = {\n  fromBeginning: JAPANESE_FROM_BEGINNING_TEXT_BBOX_IN_EXTENDED_HOME_COORDS,\n  fromLastSaved: JAPANESE_FROM_LAST_SAVED_TEXT_BBOX_IN_EXTENDED_HOME_COORDS,\n  shop: JAPANESE_SHOP_TEXT_BBOX_IN_EXTENDED_HOME_COORDS,\n  settings: JAPANESE_SETTINGS_TEXT_BBOX_IN_EXTENDED_HOME_COORDS,\n} as const;\n\nexport const JAPANESE_TEXT_BBOX_IN_NONEXTENDED_HOME_COORDS = {\n  settings_box_all:\n    JAPANESE_SETTINGS_BOX_ALL_TEXT_BBOX_IN_NONEXTENDED_HOME_COORDS,\n} as const;\n\nexport const SETTINGS_BOX_BBOX_IN_NONEXTENDED_HOME_COORDS: Rectangle = {\n  topLeft: { x: 0, y: 0 },\n  dimensions: { width: 2039, height: 1447 },\n};\n\nexport const LANGUAGE_DROPDOWN_ARROW_BBOX_IN_NONEXTENDED_HOME_COORDS: Rectangle =\n  {\n    topLeft: { x: 1075, y: 523 },\n    dimensions: { width: 59, height: 59 },\n  };\n\nexport const JAPAN_FLAG_BBOX_IN_NONEXTENDED_HOME_COORDS: Rectangle = {\n  topLeft: { x: 653, y: 527 },\n  dimensions: { width: 71, height: 51 },\n};\n\nexport const LANGUAGE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS: Rectangle = {\n  topLeft: { x: 501, y: 490 },\n  dimensions: { width: 719, height: 120 },\n};\n\nexport const CREDITS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS: Rectangle = {\n  topLeft: { x: 504, y: 626 },\n  dimensions: { width: 715, height: 121 },\n};\n\nexport const RESET_TO_LEVEL_ONE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS: Rectangle =\n  {\n    topLeft: { x: 505, y: 757 },\n    dimensions: { width: 714, height: 126 },\n  };\n\nexport const SETTINGS_SCREEN_CLOSE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS: Rectangle =\n  {\n    topLeft: { x: 1375, y: 506 },\n    dimensions: { width: 157, height: 137 },\n  };\n\nexport const LOADING_SCREEN_CASTLE_CODERS_TEXT_BBOX_IN_EXTENDED_HOME_COORDS: Rectangle =\n  {\n    topLeft: { x: 2107, y: 1097 },\n    dimensions: { width: 442, height: 231 },\n  };\n\nexport function convertRectangleFromExtendedHomeCoordsToNonextendedHomeCoords(\n  extended: Rectangle\n): Rectangle {\n  const x =\n    ((extended.topLeft.x - MAIN_AREA_DIMENSIONS_IN_EXTENDED_HOME_COORDS.width) /\n      MAIN_AREA_DIMENSIONS_IN_EXTENDED_HOME_COORDS.width) *\n    NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.width;\n\n  const y =\n    ((extended.topLeft.y -\n      MAIN_AREA_DIMENSIONS_IN_EXTENDED_HOME_COORDS.height) /\n      MAIN_AREA_DIMENSIONS_IN_EXTENDED_HOME_COORDS.height) *\n    NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.height;\n\n  const width =\n    (extended.dimensions.width /\n      MAIN_AREA_DIMENSIONS_IN_EXTENDED_HOME_COORDS.width) *\n    NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.width;\n\n  const height =\n    (extended.dimensions.height /\n      MAIN_AREA_DIMENSIONS_IN_EXTENDED_HOME_COORDS.height) *\n    NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.height;\n\n  return { topLeft: { x, y }, dimensions: { width, height } };\n}\n\nfunction loadImage(src: string): Loading<HTMLImageElement> {\n  const i = new Image() as HTMLImageElement & {\n    ready: Promise<HTMLImageElement>;\n    hasLoaded: boolean;\n  };\n\n  i.hasLoaded = false;\n  i.ready = new Promise((resolve, reject) => {\n    i.addEventListener(\"load\", () => {\n      i.hasLoaded = true;\n      resolve(i);\n    });\n    i.addEventListener(\"error\", reject);\n  });\n  i.src = src;\n\n  return i;\n}\n\nfunction whiteOverlay(\n  loadingImg: Loading<HTMLImageElement>\n): Loading<HTMLCanvasElement> {\n  return getOverlay(loadingImg, { r: 255, g: 255, b: 255, a: 255 });\n}\n\nfunction blackOverlay(\n  loadingImg: Loading<HTMLImageElement>\n): Loading<HTMLCanvasElement> {\n  return getOverlay(loadingImg, { r: 0, g: 0, b: 0, a: 255 });\n}\n\nfunction redOverlay(\n  loadingImg: Loading<HTMLImageElement>\n): Loading<HTMLCanvasElement> {\n  return getOverlay(loadingImg, { r: 255, g: 0, b: 0, a: 255 });\n}\n\nfunction getOverlay(\n  loadingImg: Loading<HTMLImageElement>,\n  color: Color32\n): Loading<HTMLCanvasElement> {\n  const canvas = document.createElement(\"canvas\") as HTMLCanvasElement & {\n    ready: Promise<HTMLCanvasElement>;\n    hasLoaded: boolean;\n  };\n  const ctx = canvas.getContext(\"2d\")!;\n\n  canvas.hasLoaded = false;\n  canvas.ready = loadingImg.ready.then((img) => {\n    const width = img.naturalWidth;\n    const height = img.naturalHeight;\n\n    canvas.width = width;\n    canvas.height = height;\n\n    ctx.drawImage(img, 0, 0);\n\n    const imgData = ctx.getImageData(0, 0, width, height);\n    const bytes = imgData.data;\n    for (let i = 0; i < bytes.length; i += 4) {\n      if (bytes[i + 3] > 0) {\n        bytes[i] = color.r;\n        bytes[i + 1] = color.g;\n        bytes[i + 2] = color.b;\n        bytes[i + 3] = color.a;\n      }\n    }\n\n    ctx.clearRect(0, 0, width, height);\n    ctx.putImageData(imgData, 0, 0);\n\n    return canvas;\n  });\n\n  return canvas;\n}\n\nexport type Loading<T> = T & {\n  readonly ready: Promise<T>;\n  readonly hasLoaded: boolean;\n};\n","import { typecheckedAssertNever } from \"../App\";\nimport \"./fonts.css\";\n\nexport const fonts = {\n  checkpoint: waitForFont(\"Checkpoint\"),\n  notoSans: waitForFont(\"Noto Sans JP\"),\n  twemojiCountryFlags: waitForFont(\"Twemoji Country Flags\"),\n} as const;\n\nfunction waitForFont(fontFamily: string): Promise<FontFace> {\n  return new Promise((resolve, reject) => {\n    pollForFont(fontFamily, resolve, reject);\n  });\n}\n\nfunction pollForFont(\n  fontFamily: string,\n  resolve: (f: FontFace) => void,\n  reject: (e: unknown) => void\n): void {\n  document.fonts.ready.then((fontSet): void | Promise<void> => {\n    const targetFont = Array.from(fontSet.values()).find(\n      (font) => font.family === fontFamily\n    );\n    if (targetFont === undefined) {\n      requestAnimationFrame(() => {\n        pollForFont(fontFamily, resolve, reject);\n      });\n      return;\n    }\n\n    switch (targetFont.status) {\n      case \"unloaded\":\n        targetFont.load().then(resolve, reject);\n        return;\n      case \"error\":\n        reject(new Error(`Failed to load ${JSON.stringify(fontFamily)}.`));\n        return;\n      case \"loaded\":\n      case \"loading\":\n        targetFont.loaded.then(resolve, reject);\n        return;\n      default:\n        typecheckedAssertNever(targetFont.status);\n    }\n  });\n}\n","export interface Vec2 {\n  readonly x: number;\n  readonly y: number;\n}\n\nexport function addVec(a: Vec2, b: Vec2): Vec2 {\n  return { x: a.x + b.x, y: a.y + b.y };\n}\n\nexport function subVec(a: Vec2, b: Vec2): Vec2 {\n  return { x: a.x - b.x, y: a.y - b.y };\n}\n\nexport function invertY(a: Vec2): Vec2 {\n  return { x: a.x, y: -a.y };\n}\n\nexport function scaleVec(v: Vec2, s: number): Vec2 {\n  return { x: v.x * s, y: v.y * s };\n}\n\nexport function areVecsEqual(a: Vec2, b: Vec2): boolean {\n  return a.x === b.x && a.y === b.y;\n}\n","const radius = 3;\nconst cornerTangentDistance = radius * Math.sqrt(3);\nconst sideLength = 30;\nconst height = (Math.sqrt(3) * sideLength) / 2;\nconst legTangentOffsetY = (Math.sqrt(3) / 2) * cornerTangentDistance;\nconst legTangentOffsetX = 0.5 * cornerTangentDistance;\n\nconst path = `M${cornerTangentDistance} 0\n\nL${sideLength - cornerTangentDistance} 0\n\nA${radius} ${radius} 0 0 1 ${\n  sideLength - legTangentOffsetX\n} ${legTangentOffsetY}\n\nL${sideLength / 2 + legTangentOffsetX} ${height - legTangentOffsetY}\n\nA${radius} ${radius} 0 0 1 ${sideLength / 2 - legTangentOffsetX} ${\n  height - legTangentOffsetY\n}\n\nL${legTangentOffsetX} ${legTangentOffsetY}\n\nA${radius} ${radius} 0 0 1 ${cornerTangentDistance} 0`;\n\nexport const DROPDOWN_ARROW = {\n  path,\n  width: sideLength,\n  height,\n  radius,\n  cornerTangentDistance,\n} as const;\n","// Based on https://www.svgviewer.dev/s/412909/trashcan\n// License: MIT.\n// Made by xivapi: https://github.com/xivapi/\n\nexport const TRASH_CAN = {\n  path: \"M767 336H233q-12 0-21 9t-9 21l38 505q1 13 12 21.5t30 8.5h434q18 0 29-8.5t13-21.5l38-505q0-12-9-21t-21-9zM344 841q-10 0-18-9t-8-21l-26-386q0-12 9-20.5t21-8.5 21 8.5 9 20.5l18 386q0 12-7.5 21t-18.5 9zm182-31q0 13-7.5 22t-18.5 9-18.5-9-7.5-22l-4-385q0-12 9-20.5t21-8.5 21 8.5 9 20.5zm156 1q0 12-8 21t-18 9q-11 0-18.5-9t-7.5-21l18-386q0-12 9-20.5t21-8.5 21 8.5 9 20.5zm101-605l-179-30q-12-2-15-15l-8-33q-4-20-14-26-6-3-22-3h-90q-16 0-23 3-10 6-13 26l-8 33q-2 13-15 15l-179 30q-19 3-31.5 14.5T173 249v28q0 9 6.5 15t15.5 6h610q9 0 15.5-6t6.5-15v-28q0-17-12.5-28.5T783 206z\",\n  bbox: {\n    topLeft: { x: 173, y: 99 },\n    dimensions: { width: 654, height: 802 },\n  },\n} as const;\n","import React from \"react\";\nimport { Dimensions } from \"./miscTypes\";\nimport { Vec2, addVec, subVec, invertY } from \"./vec2\";\nimport { DROPDOWN_ARROW } from \"./icons/dropdownArrow\";\nimport { TRASH_CAN } from \"./icons/trash_can\";\n\nexport enum BlockDefKind {\n  Command = \"Command\",\n  Query = \"Query\",\n}\n\nexport enum BlockSignaturePartKind {\n  Label = \"Label\",\n  Dropdown = \"Dropdown\",\n  Expression = \"Expression\",\n  CommandSequence = \"CommandSequence\",\n}\n\nexport enum RenderSpecKind {\n  Block = \"Block\",\n  BlockSequence = \"BlockSequence\",\n  Label = \"Label\",\n  Dropdown = \"Dropdown\",\n  Literal = \"Literal\",\n}\n\nexport enum UiTouchStateKind {\n  BlockDrag = \"BlockDrag\",\n  Dropdown = \"Dropdown\",\n  Literal = \"Literal\",\n  DropdownMenuChoice = \"DropdownMenuChoice\",\n  DropdownMenuScroll = \"DropdownMenuScroll\",\n}\n\nexport type BlockEditorCursor =\n  | \"default\"\n  | \"grab\"\n  | \"grabbing\"\n  | \"text\"\n  | \"pointer\";\n\nenum BlockPartKind {\n  Label = \"Label\",\n  Dropdown = \"Dropdown\",\n  Literal = \"Literal\",\n  Block = \"Block\",\n  CommandSequence = \"CommandSequence\",\n}\n\nexport const CANVAS_ADDRESS_PART = \"canvas\";\nexport const PALETTE_ADDRESS_PART = \"palette\";\nexport const DRAGGEE_ADDRESS_PART = \"draggee\";\nexport const ARG_DROPDOWN_ADDRESS_PART = \"argDropdown\";\nexport const ARG_EXPRESSION_ADDRESS_PART = \"argExpression\";\nexport const ARG_COMMAND_SEQUENCE_ADDRESS_PART = \"argCommandSequence\";\nexport const INSERTION_MARK_ADDRESS_PART = \"insertionMark\";\n\nconst NODE_ADDRESS_PART_STRINGS: Record<NodeAddressPartString, true> = {\n  [CANVAS_ADDRESS_PART]: true,\n  [PALETTE_ADDRESS_PART]: true,\n  [DRAGGEE_ADDRESS_PART]: true,\n  [ARG_DROPDOWN_ADDRESS_PART]: true,\n  [ARG_EXPRESSION_ADDRESS_PART]: true,\n  [ARG_COMMAND_SEQUENCE_ADDRESS_PART]: true,\n  [INSERTION_MARK_ADDRESS_PART]: true,\n};\n\nconst COMMAND_INSERTION_MARK_SENTINEL = \"COMMAND_INSERTION_MARK_SENTINEL\";\n\nconst MINIMAL_LOREM_IPSUM_TEXT_FOR_FONT_MEASUREMENT = \"M\";\n\nconst DATA_TOUCH_ROLES = {\n  canvasBackground: \"CanvasBackground\",\n  paletteBackground: \"PaletteBackground\",\n  blockAddressPrefix: \"BlockAddress_\",\n  dropdownAddressPrefix: \"DropdownAddress_\",\n  literalAddressPrefix: \"LiteralAddress_\",\n  dropdownChoicePrefix: \"DropdownChoice_\",\n} as const;\nconst DOM_ID_SUFFIXES = {\n  root: \"_Root\",\n  editorClipPath: \"_EditorClipPath\",\n  backgroundDotPattern: \"_BackgroundDotPattern\",\n  paletteClipPath: \"_PaletteClipPath\",\n  dropdownMenuClipPath: \"_DropdownMenuClipPath\",\n  canvasBackground: \"_CanvasBackground\",\n} as const;\n\nconst TRANSPARENT: Color32 = { r: 0, g: 0, b: 0, a: 0 };\n\nexport interface BlockEditorTypeParams {\n  readonly BlockKind: string | number | symbol;\n  readonly DropdownValueKind: string | number | symbol;\n}\n\nexport interface BlockEditorProps<B extends BlockEditorTypeParams> {\n  readonly config: BlockEditorConfig<B>;\n  readonly state: BlockEditorState<B>;\n\n  readonly measureText: (\n    text: string,\n    font: string,\n    fontSizePx: number\n  ) => Dimensions;\n  readonly setState: (\n    updater: (oldState: BlockEditorState<B>) => BlockEditorState<B>,\n    callback?: (newState: BlockEditorState<B>) => void\n  ) => void;\n}\n\nexport interface BlockEditorConfig<B extends BlockEditorTypeParams> {\n  readonly componentInstanceUid: string;\n  readonly sizing: BlockEditorSizingProps;\n  readonly colors: BlockEditorColorProps<B>;\n  readonly fonts: BlockEditorFontProps;\n  readonly blockDefs: BlockDefs<B>;\n  readonly dropdownTexts: ReadonlyRecord<B[\"DropdownValueKind\"], string>;\n}\n\nexport interface BlockEditorSizingProps {\n  readonly editorBounds: Rectangle;\n  readonly paletteBounds: Rectangle;\n  readonly canvasBounds: Rectangle;\n\n  readonly blockDropdownMenuDimensions: Dimensions;\n\n  readonly dividers: readonly Rectangle[];\n\n  readonly blockBorder: number;\n  readonly blockLiteralBorder: number;\n  readonly blockDropdownBorder: number;\n  readonly blockBorderRadius: number;\n  readonly paletteLeftPadding: number;\n  readonly paletteRightPadding: number;\n  readonly paletteTopPadding: number;\n  readonly paletteBottomPadding: number;\n  readonly paletteInterblockMargin: number;\n  readonly paletteTrashCanHorizontalMargin: number;\n  readonly paletteTrashCanVerticalMargin: number;\n  readonly snapVerticalRange: number;\n  readonly snapHorizontalRange: number;\n  readonly backgroundDotRadius: number;\n  readonly blockLabelTextSizePx: number;\n  readonly blockDropdownTextSizePx: number;\n  readonly blockDropdownHorizontalPadding: number;\n  readonly blockDropdownVerticalPadding: number;\n  readonly blockDropdownArrowWidth: number;\n  readonly blockDropdownArrowLeftMargin: number;\n  readonly blockDropdownArrowVerticalMargin: number;\n  readonly blockLiteralTextSizePx: number;\n  readonly blockLiteralHorizontalPadding: number;\n  readonly blockLiteralVerticalPadding: number;\n  readonly queryInsertionMarkHaloRadius: number;\n  readonly blockDropdownMenuTextSizePx: number;\n  readonly blockDropdownMenuBorder: number;\n  readonly blockDropdownMenuBorderRadius: number;\n  readonly blockDropdownMenuHorizontalPadding: number;\n  readonly blockDropdownMenuChoiceVerticalMargin: number;\n  readonly blockDropdownMenuInterChoiceDividerHeight: number;\n\n  readonly commandSocket: {\n    readonly indent: number;\n    readonly majorBase: number;\n    readonly minorBase: number;\n    readonly height: number;\n  };\n\n  readonly commandSequenceArgIndent: number;\n  readonly interBlockPartHorizontalMargin: number;\n  readonly commandBlockHorizontalPadding: number;\n  readonly commandBlockVerticalPadding: number;\n  readonly queryBlockVerticalPadding: number;\n}\n\nexport interface BlockEditorColorProps<B extends BlockEditorTypeParams> {\n  readonly background: Color32;\n  readonly paletteBackground: Color32;\n  readonly paletteTrashCan: Color32;\n  readonly backgroundDot: Color32;\n  readonly divider: Color32;\n  readonly blocks: ReadonlyRecord<B[\"BlockKind\"], ColorTriplet>;\n  readonly unreachableBlocks: ReadonlyRecord<B[\"BlockKind\"], ColorTriplet>;\n  readonly blockLabelText: Color32;\n  readonly blockLiteralText: Color32;\n  readonly blockDropdownText: Color32;\n  readonly blockLiteralBackground: Color32;\n  readonly commandInsertionMark: Color32;\n  readonly queryInsertionMarkHalo: Color32;\n}\n\nexport interface BlockEditorFontProps {\n  readonly blockLabelFont: string;\n  readonly blockDropdownFont: string;\n  readonly blockLiteralFont: string;\n  readonly blockDropdownMenuFont: string;\n}\n\nexport type BlockDefs<B extends BlockEditorTypeParams> = ReadonlyRecord<\n  B[\"BlockKind\"],\n  BlockDef<B>\n>;\n\nexport type BlockDef<B extends BlockEditorTypeParams> =\n  | CommandBlockDef<B>\n  | QueryBlockDef<B>;\n\nexport interface CommandBlockDef<B extends BlockEditorTypeParams> {\n  readonly kind: BlockDefKind.Command;\n  readonly isDeletable: boolean;\n  readonly isEntryPoint: boolean;\n  readonly hasFemaleSocket: boolean;\n  readonly hasMaleSocket: boolean;\n  readonly signature: readonly CommandSignaturePart<B>[];\n  readonly defaultArgs: BlockArgs<B>;\n}\n\nexport type CommandSignaturePart<B extends BlockEditorTypeParams> =\n  | BlockSignatureLabel\n  | BlockSignatureDropdown<B>\n  | BlockSignatureExpression\n  | BlockSignatureCommandSequence;\n\nexport interface QueryBlockDef<B extends BlockEditorTypeParams> {\n  readonly kind: BlockDefKind.Query;\n  readonly isDeletable: boolean;\n  readonly signature: readonly QuerySignaturePart<B>[];\n  readonly defaultArgs: BlockArgs<B>;\n}\n\nexport type QuerySignaturePart<B extends BlockEditorTypeParams> =\n  | BlockSignatureLabel\n  | BlockSignatureDropdown<B>\n  | BlockSignatureExpression;\n\nexport interface BlockSignatureLabel {\n  readonly kind: BlockSignaturePartKind.Label;\n  readonly text: string;\n}\n\nexport interface BlockSignatureDropdown<B extends BlockEditorTypeParams> {\n  readonly kind: BlockSignaturePartKind.Dropdown;\n  readonly choices: readonly B[\"DropdownValueKind\"][];\n}\n\nexport interface BlockSignatureExpression {\n  readonly kind: BlockSignaturePartKind.Expression;\n}\n\nexport interface BlockSignatureCommandSequence {\n  readonly kind: BlockSignaturePartKind.CommandSequence;\n}\n\nexport interface BlockEditorState<B extends BlockEditorTypeParams> {\n  readonly palette: BlockPaletteState<B>;\n  readonly uiTouch: null | UiTouchState;\n  readonly literalEditor: null | LiteralEditorState;\n  readonly dropdownMenu: null | DropdownMenuState<B>;\n  readonly canvas: BlockCanvasState<B>;\n  readonly cursor: BlockEditorCursor;\n}\n\nexport interface BlockPaletteState<B extends BlockEditorTypeParams> {\n  readonly blockKinds: readonly B[\"BlockKind\"][];\n  readonly scroll: Vec2;\n  readonly scrollInProgress: null | ScrollInProgressState;\n}\n\nexport interface ScrollInProgressState {\n  readonly startClientPosition: Vec2;\n  readonly currentClientPosition: Vec2;\n}\n\nexport type UiTouchState =\n  | BlockDragState\n  | DropdownTouchState\n  | LiteralTouchState\n  | DropdownMenuChoiceTouchState\n  | DropdownMenuScrollState;\n\nexport interface BlockDragState {\n  readonly kind: UiTouchStateKind.BlockDrag;\n  readonly hasPositionChangedSinceDragStart: boolean;\n  readonly draggeeOriginalAddress: NodeAddress;\n  readonly insertionMarkAddress: null | NodeAddress;\n  readonly startClientPosition: Vec2;\n  readonly currentClientPosition: Vec2;\n}\n\nexport interface DropdownTouchState {\n  readonly kind: UiTouchStateKind.Dropdown;\n  readonly dropdownAddress: NodeAddress;\n  readonly startClientPosition: Vec2;\n}\n\nexport interface LiteralTouchState {\n  readonly kind: UiTouchStateKind.Literal;\n  readonly literalAddress: NodeAddress;\n  readonly startClientPosition: Vec2;\n}\n\nexport interface DropdownMenuChoiceTouchState {\n  readonly kind: UiTouchStateKind.DropdownMenuChoice;\n  readonly choiceIndex: number;\n  readonly startClientPosition: Vec2;\n}\n\nexport interface DropdownMenuScrollState {\n  readonly kind: UiTouchStateKind.DropdownMenuScroll;\n  readonly startClientPosition: Vec2;\n  readonly currentClientPosition: Vec2;\n}\n\nexport interface LiteralEditorState {\n  readonly literalAddress: NodeAddress;\n  readonly literalSource: string;\n}\n\nexport interface DropdownMenuState<B extends BlockEditorTypeParams> {\n  readonly dropdownAddress: NodeAddress;\n  readonly value: B[\"DropdownValueKind\"];\n  readonly choices: readonly B[\"DropdownValueKind\"][];\n  readonly scroll: Vec2;\n}\n\nexport type NodeAddress = readonly NodeAddressPart[];\n\nexport type NodeAddressPart = number | NodeAddressPartString;\n\nexport type NodeAddressPartString =\n  | typeof CANVAS_ADDRESS_PART\n  | typeof PALETTE_ADDRESS_PART\n  | typeof DRAGGEE_ADDRESS_PART\n  | typeof INSERTION_MARK_ADDRESS_PART\n  | typeof ARG_DROPDOWN_ADDRESS_PART\n  | typeof ARG_EXPRESSION_ADDRESS_PART\n  | typeof ARG_COMMAND_SEQUENCE_ADDRESS_PART;\n\nexport interface BlockCanvasState<B extends BlockEditorTypeParams> {\n  readonly items: readonly CanvasItem<B>[];\n  readonly scroll: Vec2;\n  readonly scrollInProgress: null | ScrollInProgressState;\n}\n\nexport interface CanvasItem<B extends BlockEditorTypeParams> {\n  readonly position: Vec2;\n  readonly content: BlockSequence<B>;\n}\n\nexport type BlockSequence<B extends BlockEditorTypeParams> =\n  readonly Block<B>[];\n\nexport interface Block<B extends BlockEditorTypeParams> {\n  readonly isLiteral: false;\n  readonly kind: B[\"BlockKind\"];\n  readonly args: BlockArgs<B>;\n}\n\nexport interface BlockArgs<B extends BlockEditorTypeParams> {\n  readonly expressions: readonly Expression<B>[];\n  readonly dropdowns: readonly B[\"DropdownValueKind\"][];\n  readonly sequences: readonly BlockSequence<B>[];\n}\n\nexport type Expression<B extends BlockEditorTypeParams> = Block<B> | Literal;\n\nexport interface Literal {\n  readonly isLiteral: true;\n  readonly source: string;\n}\n\nexport interface Rectangle {\n  topLeft: Vec2;\n  dimensions: Dimensions;\n}\n\nexport interface ColorTriplet {\n  readonly primary: Color32;\n  readonly secondary: Color32;\n  readonly tertiary: Color32;\n}\n\nexport interface Color32 {\n  readonly r: number;\n  readonly g: number;\n  readonly b: number;\n  readonly a: number;\n}\n\nexport type ReadonlyRecord<K extends string | number | symbol, T> = {\n  readonly [P in K]: T;\n};\n\ninterface BlockViewProps<B extends BlockEditorTypeParams> {\n  readonly spec: BlockRenderSpec<B>;\n  readonly editor: BlockEditor<B>;\n}\n\ninterface CommandBlockBodyProps {\n  readonly teeth: readonly CommandBlockTooth[];\n  readonly editorSizing: BlockEditorSizingProps;\n  readonly outerColor: Color32;\n  readonly innerColor: Color32;\n}\n\ninterface CommandBlockTooth {\n  readonly rbox: Rectangle;\n  readonly hasFemaleSocket: boolean;\n  readonly hasMaleSocket: boolean;\n}\n\ninterface QueryBlockBodyProps {\n  readonly rbox: Rectangle;\n  readonly editorSizing: BlockEditorSizingProps;\n  readonly outerColor: Color32;\n  readonly innerColor: Color32;\n}\n\ninterface DropdownViewProps<B extends BlockEditorTypeParams> {\n  readonly spec: DropdownRenderSpec<B>;\n  readonly editor: BlockEditor<B>;\n}\n\ninterface LiteralViewProps<B extends BlockEditorTypeParams> {\n  readonly spec: LiteralRenderSpec<B>;\n  readonly editor: BlockEditor<B>;\n}\n\ninterface BlockSequenceViewProps<B extends BlockEditorTypeParams> {\n  readonly spec: BlockSequenceRenderSpec<B>;\n  readonly editor: BlockEditor<B>;\n}\n\nexport interface BlockRenderSpec<B extends BlockEditorTypeParams> {\n  readonly kind: RenderSpecKind.Block;\n  readonly block: Block<B>;\n  readonly address: NodeAddress;\n  readonly isUnreachable: boolean;\n  readonly rbox: Rectangle;\n  readonly labelSpecs: readonly LabelRenderSpec[];\n  readonly subexpressionSpecs: readonly ExpressionRenderSpec<B>[];\n  readonly subsequenceSpecs: readonly BlockSequenceRenderSpec<B>[];\n  readonly dropdownSpecs: readonly DropdownRenderSpec<B>[];\n  /** `teeth` is an empty array if and only if `block` is a query. */\n  readonly teeth: readonly CommandBlockTooth[];\n}\n\ntype ExpressionRenderSpec<B extends BlockEditorTypeParams> =\n  | BlockRenderSpec<B>\n  | LiteralRenderSpec<B>;\n\nexport interface BlockSequenceRenderSpec<B extends BlockEditorTypeParams> {\n  readonly kind: RenderSpecKind.BlockSequence;\n  readonly sequence: BlockSequence<B>;\n  readonly address: NodeAddress;\n  readonly blockSpecs: readonly BlockRenderSpec<B>[];\n  readonly rbox: Rectangle;\n}\n\ninterface LabelRenderSpec {\n  readonly kind: RenderSpecKind.Label;\n  readonly text: string;\n  readonly rbox: Rectangle;\n}\n\ninterface LiteralRenderSpec<B extends BlockEditorTypeParams> {\n  readonly kind: RenderSpecKind.Literal;\n  readonly parentBlockKind: B[\"BlockKind\"];\n  readonly source: string;\n  readonly hasQueryInsertionMark: boolean;\n  readonly address: NodeAddress;\n  readonly isUnreachable: boolean;\n  readonly rbox: Rectangle;\n}\n\ninterface DropdownRenderSpec<B extends BlockEditorTypeParams> {\n  readonly kind: RenderSpecKind.Dropdown;\n  readonly parentBlockKind: B[\"BlockKind\"];\n  readonly value: B[\"DropdownValueKind\"];\n  readonly hasPendingEditMark: boolean;\n  readonly address: NodeAddress;\n  readonly isUnreachable: boolean;\n  readonly rbox: Rectangle;\n}\n\ninterface CommandBlockFemaleSocketPathPoints {\n  readonly ofTLs: Vec2;\n  readonly ofTLe: Vec2;\n  readonly ofBLs: Vec2;\n  readonly ofBLe: Vec2;\n  readonly ofBRs: Vec2;\n  readonly ofBRe: Vec2;\n  readonly ofTRs: Vec2;\n  readonly ofTRe: Vec2;\n\n  readonly ifTLs: Vec2;\n  readonly ifTLe: Vec2;\n  readonly ifBLs: Vec2;\n  readonly ifBLe: Vec2;\n  readonly ifBRs: Vec2;\n  readonly ifBRe: Vec2;\n  readonly ifTRs: Vec2;\n  readonly ifTRe: Vec2;\n}\n\ninterface InsertionMark<B extends BlockEditorTypeParams> {\n  readonly address: NodeAddress;\n  readonly draggee: BlockSequence<B>;\n}\n\ntype BlockPart<B extends BlockEditorTypeParams> =\n  | BlockPartLabel\n  | BlockPartDropdown<B>\n  | BlockPartLiteral\n  | BlockPartBlock<B>\n  | BlockPartCommandSequence<B>;\n\ninterface BlockPartLabel {\n  readonly kind: BlockPartKind.Label;\n  readonly text: string;\n}\n\ninterface BlockPartDropdown<B extends BlockEditorTypeParams> {\n  readonly kind: BlockPartKind.Dropdown;\n  readonly value: B[\"DropdownValueKind\"];\n}\n\ninterface BlockPartLiteral {\n  readonly kind: BlockPartKind.Literal;\n  readonly source: string;\n}\n\ninterface BlockPartBlock<B extends BlockEditorTypeParams> {\n  readonly kind: BlockPartKind.Block;\n  readonly block: Block<B>;\n}\n\ninterface BlockPartCommandSequence<B extends BlockEditorTypeParams> {\n  readonly kind: BlockPartKind.CommandSequence;\n  readonly sequence: BlockSequence<B>;\n}\n\ninterface CommandInsertionMarkCandidate {\n  readonly topAddress: null | NodeAddress;\n  readonly bottomAddress: null | NodeAddress;\n  readonly rbox: Rectangle;\n}\n\ninterface QueryInsertionMarkCandidate {\n  readonly address: NodeAddress;\n  readonly rbox: Rectangle;\n}\n\ninterface DropdownMenuRenderSpec {\n  readonly choiceSpecs: readonly DropdownMenuChoiceRenderSpec[];\n  readonly rbox: Rectangle;\n}\n\ninterface DropdownMenuChoiceRenderSpec {\n  readonly text: string;\n  readonly textRbox: Rectangle;\n  readonly rbox: Rectangle;\n}\n\nexport class BlockEditor<\n  B extends BlockEditorTypeParams\n> extends React.Component<BlockEditorProps<B>> {\n  public static generateComponentInstanceUid(): string {\n    return `BlockEditor_${Date.now().toString(36)}_${Math.random()\n      .toString(36)\n      .replace(\"0.\", \"\")}`;\n  }\n\n  constructor(props: BlockEditorProps<B>) {\n    super(props);\n\n    this.bindMethods();\n  }\n\n  bindMethods(): void {\n    this.onEditorOverlayTouchStart = this.onEditorOverlayTouchStart.bind(this);\n    this.onEditorOverlayMouseDown = this.onEditorOverlayMouseDown.bind(this);\n    this.onWindowTouchMove = this.onWindowTouchMove.bind(this);\n    this.onWindowMouseMove = this.onWindowMouseMove.bind(this);\n    this.onWindowTouchEnd = this.onWindowTouchEnd.bind(this);\n    this.onWindowMouseUp = this.onWindowMouseUp.bind(this);\n  }\n\n  addEventListeners(): void {\n    window.addEventListener(\"touchmove\", this.onWindowTouchMove);\n    window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n\n    window.addEventListener(\"touchend\", this.onWindowTouchEnd);\n    window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n  }\n\n  componentDidMount(): void {\n    this.addEventListeners();\n  }\n\n  componentWillUnmount(): void {\n    this.removeEventListeners();\n  }\n\n  removeEventListeners(): void {\n    window.removeEventListener(\"touchmove\", this.onWindowTouchMove);\n    window.removeEventListener(\"mousemove\", this.onWindowMouseMove);\n\n    window.removeEventListener(\"touchend\", this.onWindowTouchEnd);\n    window.removeEventListener(\"mouseup\", this.onWindowMouseUp);\n  }\n\n  render(): React.ReactElement {\n    const { props } = this;\n    const { state, config } = props;\n    const { colors, sizing, componentInstanceUid } = config;\n    const { dropdownMenu, canvas, uiTouch } = state;\n    const totalScroll =\n      canvas.scrollInProgress === null\n        ? canvas.scroll\n        : {\n            x:\n              canvas.scroll.x +\n              canvas.scrollInProgress.currentClientPosition.x -\n              canvas.scrollInProgress.startClientPosition.x,\n            y:\n              canvas.scroll.y +\n              canvas.scrollInProgress.currentClientPosition.y -\n              canvas.scrollInProgress.startClientPosition.y,\n          };\n    const draggeeSpec = getDraggeeSpecOrNull(props);\n\n    const showTrashCan =\n      uiTouch !== null &&\n      uiTouch.kind === UiTouchStateKind.BlockDrag &&\n      uiTouch.hasPositionChangedSinceDragStart &&\n      !isPointInBlockCanvasDomElement(\n        uiTouch.currentClientPosition,\n        componentInstanceUid\n      );\n    const trashCanScale = Math.min(\n      (sizing.paletteBounds.dimensions.width -\n        2 * sizing.paletteTrashCanHorizontalMargin) /\n        TRASH_CAN.bbox.dimensions.width,\n      (sizing.paletteBounds.dimensions.height -\n        2 * sizing.paletteTrashCanVerticalMargin) /\n        TRASH_CAN.bbox.dimensions.height\n    );\n    const trashCanOffset = {\n      x:\n        trashCanScale * TRASH_CAN.bbox.dimensions.width <\n        sizing.paletteBounds.dimensions.width\n          ? 0.5 *\n            (sizing.paletteBounds.dimensions.width -\n              trashCanScale * TRASH_CAN.bbox.dimensions.width)\n          : 0,\n      y:\n        trashCanScale * TRASH_CAN.bbox.dimensions.height <\n        sizing.paletteBounds.dimensions.height\n          ? 0.5 *\n            (sizing.paletteBounds.dimensions.height -\n              trashCanScale * TRASH_CAN.bbox.dimensions.height)\n          : 0,\n    };\n    const trashCanPosition = addVec(\n      sizing.paletteBounds.topLeft,\n      trashCanOffset\n    );\n    const trashCan = (\n      <path\n        transform={`scale(${trashCanScale}) translate(${\n          -TRASH_CAN.bbox.topLeft.x + trashCanPosition.x / trashCanScale\n        } ${-TRASH_CAN.bbox.topLeft.y + trashCanPosition.y / trashCanScale})`}\n        d={TRASH_CAN.path}\n        fill={stringifyColor(colors.paletteTrashCan)}\n      />\n    );\n\n    return (\n      <g\n        id={componentInstanceUid + DOM_ID_SUFFIXES.root}\n        style={{ cursor: state.cursor, userSelect: \"none\" }}\n      >\n        <defs>\n          <pattern\n            id={componentInstanceUid + DOM_ID_SUFFIXES.backgroundDotPattern}\n            x={totalScroll.x}\n            y={totalScroll.y}\n            width=\"50\"\n            height=\"50\"\n            patternUnits=\"userSpaceOnUse\"\n          >\n            <circle\n              cx=\"25\"\n              cy=\"25\"\n              r={sizing.backgroundDotRadius}\n              fill={stringifyColor(colors.backgroundDot)}\n            />\n          </pattern>\n\n          <clipPath id={componentInstanceUid + DOM_ID_SUFFIXES.paletteClipPath}>\n            <rect\n              x={sizing.paletteBounds.topLeft.x}\n              y={sizing.paletteBounds.topLeft.y}\n              width={sizing.paletteBounds.dimensions.width}\n              height={sizing.paletteBounds.dimensions.height}\n            />\n          </clipPath>\n\n          <clipPath id={componentInstanceUid + DOM_ID_SUFFIXES.editorClipPath}>\n            <rect\n              x={sizing.editorBounds.topLeft.x}\n              y={sizing.editorBounds.topLeft.y}\n              width={sizing.editorBounds.dimensions.width}\n              height={sizing.editorBounds.dimensions.height}\n            />\n          </clipPath>\n        </defs>\n\n        <g\n          clipPath={`url(#${componentInstanceUid}${DOM_ID_SUFFIXES.editorClipPath})`}\n        >\n          <rect\n            x={sizing.editorBounds.topLeft.x}\n            y={sizing.editorBounds.topLeft.y}\n            width={sizing.editorBounds.dimensions.width}\n            height={sizing.editorBounds.dimensions.height}\n            fill={stringifyColor(colors.background)}\n          />\n          <rect\n            x={sizing.editorBounds.topLeft.x}\n            y={sizing.editorBounds.topLeft.y}\n            width={sizing.editorBounds.dimensions.width}\n            height={sizing.editorBounds.dimensions.height}\n            fill={`url(#${componentInstanceUid}${DOM_ID_SUFFIXES.backgroundDotPattern})`}\n          />\n          <rect\n            id={componentInstanceUid + DOM_ID_SUFFIXES.canvasBackground}\n            data-touch-role={DATA_TOUCH_ROLES.canvasBackground}\n            x={sizing.canvasBounds.topLeft.x}\n            y={sizing.canvasBounds.topLeft.y}\n            width={sizing.canvasBounds.dimensions.width}\n            height={sizing.canvasBounds.dimensions.height}\n            fill={stringifyColor(TRANSPARENT)}\n          />\n          <g transform={`translate(${totalScroll.x} ${totalScroll.y})`}>\n            {getCanvasItemRenderSpecs(props).map((spec) => (\n              <BlockSequenceView<B>\n                key={spec.address.map(stringifyNodeAddressPart).join(\"_\")}\n                spec={spec}\n                editor={this}\n              />\n            ))}\n          </g>\n          <rect\n            data-touch-role={DATA_TOUCH_ROLES.paletteBackground}\n            x={sizing.paletteBounds.topLeft.x}\n            y={sizing.paletteBounds.topLeft.y}\n            width={sizing.paletteBounds.dimensions.width}\n            height={sizing.paletteBounds.dimensions.height}\n            fill={stringifyColor(colors.paletteBackground)}\n          />\n          <g\n            clipPath={`url(#${componentInstanceUid}${DOM_ID_SUFFIXES.paletteClipPath})`}\n          >\n            {showTrashCan\n              ? trashCan\n              : getPaletteBlockRenderSpecs(props).map((spec) => (\n                  <BlockView\n                    key={spec.address.map(stringifyNodeAddressPart).join(\"_\")}\n                    spec={spec}\n                    editor={this}\n                  />\n                ))}\n          </g>\n          {sizing.dividers.map((divider, dividerIndex) => (\n            <rect\n              key={dividerIndex}\n              x={divider.topLeft.x}\n              y={divider.topLeft.y}\n              width={divider.dimensions.width}\n              height={divider.dimensions.height}\n              fill={stringifyColor(colors.divider)}\n            />\n          ))}\n          {draggeeSpec !== null && (\n            <g transform={`translate(${totalScroll.x} ${totalScroll.y})`}>\n              <BlockSequenceView spec={draggeeSpec} editor={this} />\n            </g>\n          )}\n          {dropdownMenu !== null && (\n            <DropdownMenu menu={dropdownMenu} editorProps={props} />\n          )}\n          <rect\n            onTouchStart={this.onEditorOverlayTouchStart}\n            onMouseDown={this.onEditorOverlayMouseDown}\n            x={sizing.editorBounds.topLeft.x}\n            y={sizing.editorBounds.topLeft.y}\n            width={sizing.editorBounds.dimensions.width}\n            height={sizing.editorBounds.dimensions.height}\n            fill=\"transparent\"\n          />\n        </g>\n      </g>\n    );\n  }\n\n  setState(): void {\n    throw new Error(\n      \"BlockEditor does not manage its own state. It defers state management to its parent. Thus, this.setState should never be called. You most likely meant to call this.props.setState.\"\n    );\n  }\n\n  onEditorOverlayTouchStart(event: React.TouchEvent): void {\n    // TODO: Properly handle multi-touch events.\n    if (event.touches.length > 1) {\n      return;\n    }\n\n    this.onEditorOverlayPointerDown({\n      x: event.touches[0].clientX,\n      y: event.touches[0].clientY,\n    });\n  }\n\n  onEditorOverlayMouseDown(event: React.MouseEvent): void {\n    this.onEditorOverlayPointerDown({\n      x: event.clientX,\n      y: event.clientY,\n    });\n  }\n\n  onEditorOverlayPointerDown(pointerClientPosition: Vec2): void {\n    const touchRole = getTouchRoleAtClientPosition(\n      pointerClientPosition,\n      this.props.config.componentInstanceUid\n    );\n\n    if (touchRole === null) {\n      return;\n    }\n\n    if (touchRole === DATA_TOUCH_ROLES.canvasBackground) {\n      this.onBlockCanvasBackgroundPointerDown(pointerClientPosition);\n      return;\n    }\n\n    if (touchRole === DATA_TOUCH_ROLES.paletteBackground) {\n      this.onBlockPaletteBackgroundPointerDown(pointerClientPosition);\n      return;\n    }\n\n    const blockAddress = getBlockAddressFromDataTouchRole(touchRole);\n    if (blockAddress !== null) {\n      this.onBlockPointerDown(pointerClientPosition, blockAddress);\n      return;\n    }\n\n    const literalAddress = getLiteralAddressFromDataTouchRole(touchRole);\n    if (literalAddress !== null) {\n      this.onLiteralPointerDown(pointerClientPosition, literalAddress);\n      return;\n    }\n\n    const dropdownAddress = getDropdownAddressFromDataTouchRole(touchRole);\n    if (dropdownAddress !== null) {\n      this.onDropdownPointerDown(pointerClientPosition, dropdownAddress);\n      return;\n    }\n\n    const dropdownChoiceIndex =\n      getDropdownChoiceIndexFromDataTouchRole(touchRole);\n    if (dropdownChoiceIndex !== null) {\n      this.onDropdownMenuChoicePointerDown(\n        pointerClientPosition,\n        dropdownChoiceIndex\n      );\n      return;\n    }\n  }\n\n  onWindowTouchMove(event: TouchEvent): void {\n    if (event.touches.length !== 1) {\n      return;\n    }\n\n    this.onWindowPointerMove({\n      x: event.touches[0].clientX,\n      y: event.touches[0].clientY,\n    });\n  }\n\n  onWindowMouseMove(event: MouseEvent): void {\n    this.onWindowPointerMove({\n      x: event.clientX,\n      y: event.clientY,\n    });\n  }\n\n  onWindowPointerMove(pointerClientPosition: Vec2): void {\n    const { props } = this;\n\n    props.setState((oldState) => {\n      let state = oldState;\n\n      if (state.canvas.scrollInProgress !== null) {\n        state = {\n          ...state,\n          canvas: {\n            ...state.canvas,\n            scrollInProgress: {\n              ...state.canvas.scrollInProgress,\n              currentClientPosition: pointerClientPosition,\n            },\n          },\n        };\n      }\n\n      if (\n        state.palette.scrollInProgress !== null &&\n        state.palette.blockKinds.length > 0\n      ) {\n        const { sizing, blockDefs: defs } = props.config;\n        const paletteSpecs = getPaletteBlockRenderSpecs({\n          ...props,\n          state,\n        });\n        const scrollDisplacement = subVec(\n          pointerClientPosition,\n          state.palette.scrollInProgress.startClientPosition\n        );\n        const totalScroll = addVec(state.palette.scroll, scrollDisplacement);\n        const paletteSpecMaxWidth = Math.max(\n          ...paletteSpecs.map((spec) => spec.rbox.dimensions.width)\n        );\n        const minScrollX = -Math.max(\n          0,\n          paletteSpecMaxWidth -\n            (sizing.paletteBounds.dimensions.width -\n              (sizing.paletteLeftPadding + sizing.paletteRightPadding))\n        );\n        const lastPaletteSpec = paletteSpecs[paletteSpecs.length - 1];\n        const lastPaletteSpecDef = defs[lastPaletteSpec.block.kind];\n        const maleSocketBonusHeight =\n          lastPaletteSpecDef.kind === BlockDefKind.Command &&\n          lastPaletteSpecDef.hasMaleSocket\n            ? sizing.commandSocket.height\n            : 0;\n        const paletteSpecTotalHeight =\n          lastPaletteSpec.rbox.topLeft.y +\n          lastPaletteSpec.rbox.dimensions.height -\n          paletteSpecs[0].rbox.topLeft.y +\n          maleSocketBonusHeight;\n        const minScrollY = -Math.max(\n          0,\n          paletteSpecTotalHeight -\n            (sizing.paletteBounds.dimensions.height -\n              (sizing.paletteTopPadding + sizing.paletteBottomPadding))\n        );\n        const startClientPositionAdjustment = {\n          x:\n            totalScroll.x > 0\n              ? totalScroll.x\n              : totalScroll.x < minScrollX\n              ? totalScroll.x - minScrollX\n              : 0,\n          y:\n            totalScroll.y > 0\n              ? totalScroll.y\n              : totalScroll.y < minScrollY\n              ? totalScroll.y - minScrollY\n              : 0,\n        };\n        state = {\n          ...state,\n          palette: {\n            ...state.palette,\n            scrollInProgress: {\n              startClientPosition: addVec(\n                state.palette.scrollInProgress.startClientPosition,\n                startClientPositionAdjustment\n              ),\n              currentClientPosition: pointerClientPosition,\n            },\n          },\n        };\n      }\n\n      if (\n        state.uiTouch !== null &&\n        state.uiTouch.kind === UiTouchStateKind.BlockDrag\n      ) {\n        const hypotheticalCanvasItemSpecsAssumingDragPositionMovedSinceDragStart =\n          getCanvasItemRenderSpecs({\n            ...props,\n            state: {\n              ...state,\n              uiTouch: {\n                ...state.uiTouch,\n                hasPositionChangedSinceDragStart: true,\n              },\n            },\n          });\n        const draggeeSpec = getDraggeeSpec({ ...props, state }, state.uiTouch);\n\n        const isDisplacementZero = areVectorsEqual(\n          pointerClientPosition,\n          state.uiTouch.startClientPosition\n        );\n\n        state = {\n          ...state,\n          uiTouch: {\n            ...state.uiTouch,\n            hasPositionChangedSinceDragStart:\n              state.uiTouch.hasPositionChangedSinceDragStart ||\n              !isDisplacementZero,\n            currentClientPosition: pointerClientPosition,\n            insertionMarkAddress: getInsertionMarkAddressBasedOnDraggee(\n              props,\n              hypotheticalCanvasItemSpecsAssumingDragPositionMovedSinceDragStart,\n              draggeeSpec,\n              state.uiTouch.draggeeOriginalAddress,\n              pointerClientPosition\n            ),\n          },\n        };\n      }\n\n      if (\n        state.uiTouch !== null &&\n        (state.uiTouch.kind === UiTouchStateKind.Literal ||\n          state.uiTouch.kind === UiTouchStateKind.Dropdown) &&\n        !areVectorsEqual(\n          state.uiTouch.startClientPosition,\n          pointerClientPosition\n        )\n      ) {\n        const dropdownOrLiteralParentBlockAddress =\n          state.uiTouch.kind === UiTouchStateKind.Literal\n            ? state.uiTouch.literalAddress.slice(0, -2)\n            : state.uiTouch.dropdownAddress.slice(0, -2);\n        const hypotheticalPropsAssumingDragPositionMovedSinceDragStart: BlockEditorProps<B> & {\n          state: { uiTouch: BlockDragState };\n        } = {\n          ...props,\n          state: {\n            ...state,\n            uiTouch: {\n              kind: UiTouchStateKind.BlockDrag,\n              draggeeOriginalAddress: dropdownOrLiteralParentBlockAddress,\n              insertionMarkAddress: null,\n              hasPositionChangedSinceDragStart: true,\n              startClientPosition: state.uiTouch.startClientPosition,\n              currentClientPosition: pointerClientPosition,\n            },\n          },\n        };\n        const hypotheticalCanvasItemSpecsAssumingDragPositionMovedSinceDragStart =\n          getCanvasItemRenderSpecs(\n            hypotheticalPropsAssumingDragPositionMovedSinceDragStart\n          );\n        const hypotheticalDraggeeSpec = getDraggeeSpec(\n          hypotheticalPropsAssumingDragPositionMovedSinceDragStart,\n          hypotheticalPropsAssumingDragPositionMovedSinceDragStart.state.uiTouch\n        );\n\n        state = {\n          ...state,\n          uiTouch: {\n            kind: UiTouchStateKind.BlockDrag,\n            draggeeOriginalAddress: dropdownOrLiteralParentBlockAddress,\n            insertionMarkAddress: getInsertionMarkAddressBasedOnDraggee(\n              hypotheticalPropsAssumingDragPositionMovedSinceDragStart,\n              hypotheticalCanvasItemSpecsAssumingDragPositionMovedSinceDragStart,\n              hypotheticalDraggeeSpec,\n              dropdownOrLiteralParentBlockAddress,\n              pointerClientPosition\n            ),\n            hasPositionChangedSinceDragStart: true,\n            startClientPosition: state.uiTouch.startClientPosition,\n            currentClientPosition: pointerClientPosition,\n          },\n        };\n      }\n\n      if (\n        state.uiTouch !== null &&\n        (state.uiTouch.kind === UiTouchStateKind.DropdownMenuScroll ||\n          state.uiTouch.kind === UiTouchStateKind.DropdownMenuChoice) &&\n        state.dropdownMenu !== null\n      ) {\n        const dropdownMenuSpec = getDropdownMenuRenderSpec({\n          menu: state.dropdownMenu,\n          editorProps: { ...props, state },\n        });\n        const displacement = subVec(\n          pointerClientPosition,\n          state.uiTouch.startClientPosition\n        );\n        const totalScroll = addVec(state.dropdownMenu.scroll, displacement);\n        const minScrollX = -Math.max(\n          0,\n          Math.max(\n            ...dropdownMenuSpec.choiceSpecs.map(\n              (choiceSpec) => choiceSpec.rbox.dimensions.width\n            )\n          ) -\n            (dropdownMenuSpec.rbox.dimensions.width -\n              2 * props.config.sizing.blockDropdownMenuBorder)\n        );\n        const choiceTotalHeight =\n          dropdownMenuSpec.choiceSpecs[dropdownMenuSpec.choiceSpecs.length - 1]\n            .rbox.topLeft.y +\n          dropdownMenuSpec.choiceSpecs[dropdownMenuSpec.choiceSpecs.length - 1]\n            .rbox.dimensions.height -\n          dropdownMenuSpec.choiceSpecs[0].rbox.topLeft.y;\n        const minScrollY = -Math.max(\n          0,\n          choiceTotalHeight - dropdownMenuSpec.rbox.dimensions.height\n        );\n        const startClientPositionAdjustment = {\n          x:\n            totalScroll.x > 0\n              ? totalScroll.x\n              : totalScroll.x < minScrollX\n              ? totalScroll.x - minScrollX\n              : 0,\n          y:\n            totalScroll.y > 0\n              ? totalScroll.y\n              : totalScroll.y < minScrollY\n              ? totalScroll.y - minScrollY\n              : 0,\n        };\n        state = {\n          ...state,\n          uiTouch: {\n            kind: UiTouchStateKind.DropdownMenuScroll,\n            startClientPosition: addVec(\n              state.uiTouch.startClientPosition,\n              startClientPositionAdjustment\n            ),\n            currentClientPosition: pointerClientPosition,\n          },\n        };\n      }\n\n      state = {\n        ...state,\n        cursor: getBlockEditorCursorBasedOnMousePosition(\n          pointerClientPosition,\n          this.props.config.componentInstanceUid,\n          state\n        ),\n      };\n\n      // TODO: Handle other logic\n\n      return state;\n    });\n  }\n\n  onWindowTouchEnd(event: TouchEvent): void {\n    this.onWindowPointerUp({\n      x: event.changedTouches[0].clientX,\n      y: event.changedTouches[0].clientY,\n    });\n  }\n\n  onWindowMouseUp(event: MouseEvent): void {\n    this.onWindowPointerUp({ x: event.clientX, y: event.clientY });\n  }\n\n  onWindowPointerUp(pointerClientPosition: Vec2): void {\n    const { props } = this;\n    props.setState((oldState) => {\n      let state = oldState;\n\n      if (state.canvas.scrollInProgress !== null) {\n        state = {\n          ...state,\n          canvas: {\n            ...state.canvas,\n            scroll: addVec(\n              state.canvas.scroll,\n              subVec(\n                state.canvas.scrollInProgress.currentClientPosition,\n                state.canvas.scrollInProgress.startClientPosition\n              )\n            ),\n            scrollInProgress: null,\n          },\n        };\n      }\n\n      if (state.palette.scrollInProgress !== null) {\n        state = {\n          ...state,\n          palette: {\n            ...state.palette,\n            scroll: addVec(\n              state.palette.scroll,\n              subVec(\n                state.palette.scrollInProgress.currentClientPosition,\n                state.palette.scrollInProgress.startClientPosition\n              )\n            ),\n            scrollInProgress: null,\n          },\n        };\n      }\n\n      if (\n        state.uiTouch !== null &&\n        state.uiTouch.kind === UiTouchStateKind.BlockDrag &&\n        !state.uiTouch.hasPositionChangedSinceDragStart\n      ) {\n        state = { ...state, uiTouch: null };\n      }\n\n      if (\n        state.uiTouch !== null &&\n        state.uiTouch.kind === UiTouchStateKind.BlockDrag\n      ) {\n        const draggeeSpec = getDraggeeSpec(props, state.uiTouch);\n\n        state = {\n          ...state,\n          canvas: {\n            ...state.canvas,\n            items: applyDragToCanvasItems({\n              editorProps: props,\n              canvasItems: state.canvas.items,\n              draggeeSpec,\n              draggeeOriginalAddress: state.uiTouch.draggeeOriginalAddress,\n              insertionAddress: state.uiTouch.insertionMarkAddress,\n            }),\n          },\n          uiTouch: null,\n        };\n      }\n\n      if (\n        state.uiTouch !== null &&\n        state.uiTouch.kind === UiTouchStateKind.Literal &&\n        state.uiTouch.literalAddress[0] !== CANVAS_ADDRESS_PART\n      ) {\n        state = {\n          ...state,\n          uiTouch: null,\n        };\n      }\n\n      if (\n        state.uiTouch !== null &&\n        state.uiTouch.kind === UiTouchStateKind.Dropdown &&\n        state.uiTouch.dropdownAddress[0] !== CANVAS_ADDRESS_PART\n      ) {\n        state = {\n          ...state,\n          uiTouch: null,\n        };\n      }\n\n      if (\n        state.uiTouch !== null &&\n        state.uiTouch.kind === UiTouchStateKind.Literal &&\n        state.uiTouch.literalAddress[0] === CANVAS_ADDRESS_PART\n      ) {\n        const { literalAddress } = state.uiTouch;\n        const literalParentBlock = getSubexpressionParentBlockSpec(\n          {\n            ...props,\n            state,\n          },\n          literalAddress\n        ).block;\n\n        const literalIndex = expectNumericAddressPart(\n          literalAddress[literalAddress.length - 1]\n        );\n        const literal = literalParentBlock.args.expressions[literalIndex];\n        if (!literal.isLiteral) {\n          throw new Error(\n            \"state.uiTouch.literalAddress points to a non-literal node.\"\n          );\n        }\n        state = {\n          ...state,\n          uiTouch: null,\n          literalEditor: {\n            literalAddress,\n            literalSource: literal.source,\n          },\n        };\n      }\n\n      if (\n        state.uiTouch !== null &&\n        state.uiTouch.kind === UiTouchStateKind.Dropdown &&\n        state.uiTouch.dropdownAddress[0] === CANVAS_ADDRESS_PART\n      ) {\n        const { dropdownAddress } = state.uiTouch;\n        const dropdownParentBlock = getDropdownParentBlockSpec(\n          {\n            ...props,\n            state,\n          },\n          dropdownAddress\n        ).block;\n\n        const dropdownIndex = expectNumericAddressPart(\n          dropdownAddress[dropdownAddress.length - 1]\n        );\n        const dropdownValue = dropdownParentBlock.args.dropdowns[dropdownIndex];\n        const dropdownParentBlockSignature: readonly (\n          | CommandSignaturePart<B>\n          | QuerySignaturePart<B>\n        )[] = props.config.blockDefs[dropdownParentBlock.kind].signature;\n        const dropdownChoices = dropdownParentBlockSignature.filter(\n          (part): part is BlockSignatureDropdown<B> =>\n            part.kind === BlockSignaturePartKind.Dropdown\n        )[dropdownIndex].choices;\n        state = {\n          ...state,\n          uiTouch: null,\n          dropdownMenu: {\n            dropdownAddress,\n            value: dropdownValue,\n            choices: dropdownChoices,\n            scroll: { x: 0, y: 0 },\n          },\n        };\n      }\n\n      if (\n        state.uiTouch !== null &&\n        state.uiTouch.kind === UiTouchStateKind.DropdownMenuScroll\n      ) {\n        if (state.dropdownMenu !== null) {\n          state = {\n            ...state,\n            dropdownMenu: {\n              ...state.dropdownMenu,\n              scroll: addVec(\n                state.dropdownMenu.scroll,\n                subVec(\n                  state.uiTouch.currentClientPosition,\n                  state.uiTouch.startClientPosition\n                )\n              ),\n            },\n          };\n        }\n\n        state = { ...state, uiTouch: null };\n      }\n\n      if (\n        state.uiTouch !== null &&\n        state.uiTouch.kind === UiTouchStateKind.DropdownMenuChoice\n      ) {\n        if (state.dropdownMenu !== null) {\n          const { dropdownAddress } = state.dropdownMenu;\n          const dropdownValue =\n            state.dropdownMenu.choices[state.uiTouch.choiceIndex];\n          state = {\n            ...state,\n            literalEditor: null,\n            dropdownMenu: null,\n            canvas: updateDropdownValueInCanvas(\n              state.canvas,\n              dropdownAddress,\n              dropdownValue\n            ),\n          };\n        }\n\n        state = { ...state, uiTouch: null };\n      }\n\n      state = {\n        ...state,\n        cursor: getBlockEditorCursorBasedOnMousePosition(\n          pointerClientPosition,\n          this.props.config.componentInstanceUid,\n          state\n        ),\n      };\n\n      // TODO: Handle other logic\n\n      return state;\n    });\n  }\n\n  onBlockCanvasBackgroundPointerDown(pointerClientPosition: Vec2): void {\n    this.props.setState((oldState) => ({\n      ...oldState,\n      literalEditor: null,\n      dropdownMenu: null,\n      canvas: {\n        ...oldState.canvas,\n        scrollInProgress: {\n          startClientPosition: pointerClientPosition,\n          currentClientPosition: pointerClientPosition,\n        },\n      },\n    }));\n  }\n\n  onBlockPaletteBackgroundPointerDown(pointerClientPosition: Vec2): void {\n    this.props.setState((oldState) => ({\n      ...oldState,\n      literalEditor: null,\n      dropdownMenu: null,\n      palette: {\n        ...oldState.palette,\n        scrollInProgress: {\n          startClientPosition: pointerClientPosition,\n          currentClientPosition: pointerClientPosition,\n        },\n      },\n    }));\n  }\n\n  onBlockPointerDown(pointerClientPosition: Vec2, address: NodeAddress): void {\n    this.props.setState((oldState) => {\n      let state = oldState;\n\n      state = {\n        ...state,\n        literalEditor: null,\n        dropdownMenu: null,\n      };\n\n      if (\n        address[0] === PALETTE_ADDRESS_PART ||\n        (address[0] === CANVAS_ADDRESS_PART &&\n          isPointInBlockCanvasDomElement(\n            pointerClientPosition,\n            this.props.config.componentInstanceUid\n          ))\n      ) {\n        state = {\n          ...state,\n          uiTouch: {\n            kind: UiTouchStateKind.BlockDrag,\n            hasPositionChangedSinceDragStart: false,\n            draggeeOriginalAddress: address,\n            insertionMarkAddress: null,\n            startClientPosition: pointerClientPosition,\n            currentClientPosition: pointerClientPosition,\n          },\n        };\n      }\n\n      state = {\n        ...state,\n        cursor: getBlockEditorCursorBasedOnMousePosition(\n          pointerClientPosition,\n          this.props.config.componentInstanceUid,\n          state\n        ),\n      };\n\n      return state;\n    });\n  }\n\n  onLiteralPointerDown(\n    pointerClientPosition: Vec2,\n    address: NodeAddress\n  ): void {\n    this.props.setState((oldState) => {\n      let state = oldState;\n\n      state = {\n        ...state,\n        literalEditor: null,\n        dropdownMenu: null,\n      };\n\n      state = {\n        ...state,\n        uiTouch: {\n          kind: UiTouchStateKind.Literal,\n          literalAddress: address,\n          startClientPosition: pointerClientPosition,\n        },\n      };\n\n      state = {\n        ...state,\n        cursor: getBlockEditorCursorBasedOnMousePosition(\n          pointerClientPosition,\n          this.props.config.componentInstanceUid,\n          state\n        ),\n      };\n\n      return state;\n    });\n  }\n\n  onDropdownPointerDown(\n    pointerClientPosition: Vec2,\n    address: NodeAddress\n  ): void {\n    this.props.setState((oldState) => {\n      let state = oldState;\n\n      state = {\n        ...state,\n        literalEditor: null,\n        dropdownMenu: null,\n      };\n\n      if (\n        address[0] === PALETTE_ADDRESS_PART ||\n        (address[0] === CANVAS_ADDRESS_PART &&\n          isPointInBlockCanvasDomElement(\n            pointerClientPosition,\n            this.props.config.componentInstanceUid\n          ))\n      ) {\n        state = {\n          ...state,\n          uiTouch: {\n            kind: UiTouchStateKind.Dropdown,\n            dropdownAddress: address,\n            startClientPosition: pointerClientPosition,\n          },\n        };\n      }\n\n      state = {\n        ...state,\n        cursor: getBlockEditorCursorBasedOnMousePosition(\n          pointerClientPosition,\n          this.props.config.componentInstanceUid,\n          state\n        ),\n      };\n\n      return state;\n    });\n  }\n\n  onDropdownMenuChoicePointerDown(\n    currentClientPosition: Vec2,\n    dropdownChoiceIndex: number\n  ): void {\n    this.props.setState((oldState) => {\n      let state = oldState;\n\n      if (state.dropdownMenu === null) {\n        throw new Error(\n          \"Impossible: a dropdown menu choice was touched, but there is no dropdown menu.\"\n        );\n      }\n\n      state = {\n        ...state,\n        uiTouch: {\n          kind: UiTouchStateKind.DropdownMenuChoice,\n          choiceIndex: dropdownChoiceIndex,\n          startClientPosition: currentClientPosition,\n        },\n      };\n\n      return state;\n    });\n  }\n}\n\nexport function updateCanvasToMatchLiteralEditor<\n  B extends BlockEditorTypeParams\n>(\n  canvas: BlockCanvasState<B>,\n  literalEditor: LiteralEditorState\n): BlockCanvasState<B> {\n  return {\n    items: canvas.items.map((item, itemIndex) => ({\n      position: item.position,\n      content: updateBlockSequenceToMatchLiteralEditor(\n        item.content,\n        [CANVAS_ADDRESS_PART, itemIndex],\n        literalEditor\n      ),\n    })),\n    scroll: canvas.scroll,\n    scrollInProgress: canvas.scrollInProgress,\n  };\n}\n\nfunction updateBlockSequenceToMatchLiteralEditor<\n  B extends BlockEditorTypeParams\n>(\n  sequence: BlockSequence<B>,\n  address: NodeAddress,\n  literalEditor: LiteralEditorState\n): BlockSequence<B> {\n  return sequence.map((block, blockIndex) =>\n    updateBlockToMatchLiteralEditor(\n      block,\n      address.concat([blockIndex]),\n      literalEditor\n    )\n  );\n}\n\nfunction updateBlockToMatchLiteralEditor<B extends BlockEditorTypeParams>(\n  block: Block<B>,\n  address: NodeAddress,\n  literalEditor: LiteralEditorState\n): Block<B> {\n  return {\n    isLiteral: block.isLiteral,\n    kind: block.kind,\n    args: {\n      expressions: block.args.expressions.map(\n        (expression, expressionIndex): Expression<B> => {\n          const expressionAddress = address.concat([\n            ARG_EXPRESSION_ADDRESS_PART,\n            expressionIndex,\n          ]);\n\n          if (\n            areNodeAddressesEqual(\n              expressionAddress,\n              literalEditor.literalAddress\n            )\n          ) {\n            return {\n              isLiteral: true,\n              source: literalEditor.literalSource,\n            };\n          }\n\n          if (expression.isLiteral) {\n            return expression;\n          }\n\n          return updateBlockToMatchLiteralEditor(\n            expression,\n            expressionAddress,\n            literalEditor\n          );\n        }\n      ),\n      dropdowns: block.args.dropdowns,\n      sequences: block.args.sequences.map((sequence, sequenceIndex) =>\n        updateBlockSequenceToMatchLiteralEditor(\n          sequence,\n          address.concat([ARG_COMMAND_SEQUENCE_ADDRESS_PART, sequenceIndex]),\n          literalEditor\n        )\n      ),\n    },\n  };\n}\n\nfunction stringifyColor(color: Color32): string {\n  if (!isValidColor(color)) {\n    throw new Error(\n      `Cannot stringify color because it is invalid. color: ${JSON.stringify(\n        color\n      )}.`\n    );\n  }\n\n  return (\n    \"#\" +\n    leftpadWithZero(color.r.toString(16), 2) +\n    leftpadWithZero(color.g.toString(16), 2) +\n    leftpadWithZero(color.b.toString(16), 2) +\n    leftpadWithZero(color.a.toString(16), 2)\n  );\n}\n\nfunction isValidColor(color: Color32): boolean {\n  const { r, g, b, a } = color;\n  return (\n    Number.isInteger(r) &&\n    0 <= r &&\n    r <= 255 &&\n    Number.isInteger(g) &&\n    0 <= g &&\n    g <= 255 &&\n    Number.isInteger(b) &&\n    0 <= b &&\n    b <= 255 &&\n    Number.isInteger(a) &&\n    0 <= a &&\n    a <= 255\n  );\n}\n\nfunction leftpadWithZero(s: string, desiredLength: number): string {\n  if (!Number.isInteger(desiredLength)) {\n    throw new Error(\n      `Cannot leftpad because desiredLength is not an integer. desiredLength: ${desiredLength}.`\n    );\n  }\n\n  if (s.length > desiredLength) {\n    throw new Error(\n      `Cannot leftpad because string is too long to pad. desiredLength: ${desiredLength}. Actual length: ${\n        s.length\n      }. String: ${JSON.stringify(s)}`\n    );\n  }\n\n  return \"0\".repeat(desiredLength - s.length) + s;\n}\n\nfunction BlockView<B extends BlockEditorTypeParams>({\n  spec,\n  editor,\n}: BlockViewProps<B>): React.ReactElement {\n  const { colors } = editor.props.config;\n  const blockColorTriplet =\n    spec.address[0] === INSERTION_MARK_ADDRESS_PART\n      ? {\n          primary: colors.commandInsertionMark,\n          secondary: TRANSPARENT,\n          tertiary: TRANSPARENT,\n        }\n      : spec.isUnreachable\n      ? colors.unreachableBlocks[spec.block.kind]\n      : colors.blocks[spec.block.kind];\n  const blockDef = editor.props.config.blockDefs[spec.block.kind];\n  const blockBody =\n    blockDef.kind === BlockDefKind.Command ? (\n      <CommandBlockBody\n        teeth={spec.teeth}\n        editorSizing={editor.props.config.sizing}\n        outerColor={blockColorTriplet.tertiary}\n        innerColor={blockColorTriplet.primary}\n      />\n    ) : (\n      <QueryBlockBody\n        rbox={spec.rbox}\n        editorSizing={editor.props.config.sizing}\n        outerColor={blockColorTriplet.tertiary}\n        innerColor={blockColorTriplet.primary}\n      />\n    );\n\n  const labelViews = spec.labelSpecs.map((labelSpec, i) => (\n    <text\n      key={i}\n      x={labelSpec.rbox.topLeft.x}\n      y={labelSpec.rbox.topLeft.y}\n      fontSize={editor.props.config.sizing.blockLabelTextSizePx}\n      fontFamily={editor.props.config.fonts.blockLabelFont}\n      dominantBaseline=\"middle\"\n      fill={stringifyColor(editor.props.config.colors.blockLabelText)}\n    >\n      {labelSpec.text}\n    </text>\n  ));\n\n  const dropdownViews = spec.dropdownSpecs.map((dropdownSpec, i) => (\n    <DropdownView key={i} spec={dropdownSpec} editor={editor} />\n  ));\n\n  return (\n    <>\n      <g data-touch-role={getDataTouchRoleFromBlockAddress(spec.address)}>\n        {blockBody}\n        {labelViews}\n      </g>\n\n      {dropdownViews}\n\n      {spec.subexpressionSpecs.map((subSpec) =>\n        subSpec.kind === RenderSpecKind.Block ? (\n          <BlockView\n            key={subSpec.address.map(stringifyNodeAddressPart).join(\"_\")}\n            spec={subSpec}\n            editor={editor}\n          />\n        ) : (\n          <LiteralView\n            key={subSpec.address.map(stringifyNodeAddressPart).join(\"_\")}\n            spec={subSpec}\n            editor={editor}\n          />\n        )\n      )}\n\n      {spec.subsequenceSpecs.map((subsequenceSpec) => (\n        <BlockSequenceView\n          key={subsequenceSpec.address.map(stringifyNodeAddressPart).join(\"_\")}\n          spec={subsequenceSpec}\n          editor={editor}\n        />\n      ))}\n    </>\n  );\n}\n\nfunction CommandBlockBody({\n  teeth,\n  editorSizing,\n  outerColor,\n  innerColor,\n}: CommandBlockBodyProps): React.ReactElement {\n  if (teeth.length === 0) {\n    throw new Error(\"Attemped to render a CommandBlockBody with no teeth.\");\n  }\n\n  const outerPath = getCommandBlockOuterBodyPath(teeth, editorSizing);\n  const innerPath = getCommandBlockInnerBodyPath(teeth, editorSizing);\n\n  return (\n    <>\n      <path d={outerPath} fill={stringifyColor(outerColor)} />\n      <path d={innerPath} fill={stringifyColor(innerColor)} />\n    </>\n  );\n}\n\nfunction getCommandBlockOuterBodyPath(\n  teeth: readonly CommandBlockTooth[],\n  editorSizing: BlockEditorSizingProps\n): string {\n  if (teeth.length === 0) {\n    throw new Error(\n      \"Called getCommandBlockOuterBodyPath with an empty `teeth` argument.\"\n    );\n  }\n\n  const innerRadius = editorSizing.blockBorderRadius;\n  const outerRadius = innerRadius + editorSizing.blockBorder;\n\n  let outerPath = `M${teeth[0].rbox.topLeft.x + outerRadius} ${\n    teeth[0].rbox.topLeft.y\n  }`;\n\n  for (let toothIndex = 0; toothIndex < teeth.length; ++toothIndex) {\n    const isLastTooth = toothIndex === teeth.length - 1;\n\n    if (isLastTooth) {\n      const blockTLe_to_mTLe = get_blockTLe_to_omTLe_path(\n        teeth,\n        toothIndex,\n        editorSizing\n      );\n\n      const mTLe_to_firstToothBlockTLe = get_omTLe_to_firstToothBlockTLe_path(\n        teeth,\n        toothIndex,\n        editorSizing\n      );\n\n      outerPath += \"\\n\\n\" + blockTLe_to_mTLe;\n      outerPath += \"\\n\\n\" + mTLe_to_firstToothBlockTLe;\n\n      break;\n    }\n\n    const blockTLe_to_mTLe = get_blockTLe_to_omTLe_path(\n      teeth,\n      toothIndex,\n      editorSizing\n    );\n\n    const mTLe_to_nextToothBlockTLe_assumingSequenceArgIndent =\n      get_omTLe_to_nextToothBlockTLe_assumingSequenceArgIndent_path(\n        teeth,\n        toothIndex,\n        editorSizing\n      );\n\n    outerPath += \"\\n\\n\" + blockTLe_to_mTLe;\n    outerPath += \"\\n\\n\" + mTLe_to_nextToothBlockTLe_assumingSequenceArgIndent;\n  }\n\n  return outerPath;\n}\n\nfunction getCommandBlockInnerBodyPath(\n  teeth: readonly CommandBlockTooth[],\n  editorSizing: BlockEditorSizingProps\n): string {\n  if (teeth.length === 0) {\n    throw new Error(\n      \"Called getCommandBlockInnerBodyPath with an empty `teeth` argument.\"\n    );\n  }\n\n  const borderWidth = editorSizing.blockBorder;\n  const innerRadius = editorSizing.blockBorderRadius;\n\n  let innerPath = `M${teeth[0].rbox.topLeft.x + borderWidth + innerRadius} ${\n    teeth[0].rbox.topLeft.y + borderWidth\n  }`;\n\n  for (let toothIndex = 0; toothIndex < teeth.length; ++toothIndex) {\n    const isLastTooth = toothIndex === teeth.length - 1;\n\n    if (isLastTooth) {\n      const blockTLe_to_mTLe = get_blockTLe_to_imTLe_path(\n        teeth,\n        toothIndex,\n        editorSizing\n      );\n\n      const mTLe_to_firstToothBlockTLe = get_imTLe_to_firstToothBlockTLe_path(\n        teeth,\n        toothIndex,\n        editorSizing\n      );\n\n      innerPath += \"\\n\\n\" + blockTLe_to_mTLe;\n      innerPath += \"\\n\\n\" + mTLe_to_firstToothBlockTLe;\n\n      break;\n    }\n\n    const blockTLe_to_mTLe = get_blockTLe_to_imTLe_path(\n      teeth,\n      toothIndex,\n      editorSizing\n    );\n\n    const mTLe_to_nextToothBlockTLe_assumingSequenceArgIndent =\n      get_imTLe_to_nextToothBlockTLe_assumingSequenceArgIndent_path(\n        teeth,\n        toothIndex,\n        editorSizing\n      );\n\n    innerPath += \"\\n\\n\" + blockTLe_to_mTLe;\n    innerPath += \"\\n\\n\" + mTLe_to_nextToothBlockTLe_assumingSequenceArgIndent;\n  }\n\n  return innerPath;\n}\n\nfunction get_blockTLe_to_omTLe_path(\n  teeth: readonly CommandBlockTooth[],\n  toothIndex: number,\n  editorSizing: BlockEditorSizingProps\n): string {\n  return (\n    get_blockTLe_to_ofTRe_path(teeth, toothIndex, editorSizing) +\n    \"\\n\\n\" +\n    get_ofTRe_to_blockBRe_path(teeth, toothIndex, editorSizing) +\n    \"\\n\\n\" +\n    get_blockBRe_to_omTLe_path(teeth, toothIndex, editorSizing)\n  );\n}\n\nfunction get_blockTLe_to_imTLe_path(\n  teeth: readonly CommandBlockTooth[],\n  toothIndex: number,\n  editorSizing: BlockEditorSizingProps\n): string {\n  return (\n    get_blockTLe_to_ifTRe_path(teeth, toothIndex, editorSizing) +\n    \"\\n\\n\" +\n    get_ifTRe_to_blockBRe_path(teeth, toothIndex, editorSizing) +\n    \"\\n\\n\" +\n    get_blockBRe_to_imTLe_path(teeth, toothIndex, editorSizing)\n  );\n}\n\nfunction get_blockTLe_to_ofTRe_path(\n  teeth: readonly CommandBlockTooth[],\n  toothIndex: number,\n  editorSizing: BlockEditorSizingProps\n): string {\n  const tooth = teeth[toothIndex];\n\n  if (!tooth.hasFemaleSocket) {\n    return \"\";\n  }\n\n  const toothX = tooth.rbox.topLeft.x;\n  const toothY = tooth.rbox.topLeft.y;\n  const points = getCommandBlockFemaleSocketPathPoints(editorSizing);\n  const innerRadius = editorSizing.blockBorderRadius;\n  const outerRadius = innerRadius + editorSizing.blockBorder;\n  const femaleSocketIndent =\n    toothIndex === 0\n      ? 0\n      : editorSizing.commandSequenceArgIndent - editorSizing.blockBorder;\n\n  return `L${toothX + femaleSocketIndent + points.ofTLs.x} ${\n    toothY + points.ofTLs.y\n  }\n\n    A${outerRadius} ${outerRadius} 0 0 1 ${\n    toothX + femaleSocketIndent + points.ofTLe.x\n  } ${toothY + points.ofTLe.y}\n\n    L${toothX + femaleSocketIndent + points.ofBLs.x} ${toothY + points.ofBLs.y}\n\n    A${innerRadius} ${innerRadius} 0 0 0 ${\n    toothX + femaleSocketIndent + points.ofBLe.x\n  } ${toothY + points.ofBLe.y}\n\n    L${toothX + femaleSocketIndent + points.ofBRs.x} ${toothY + points.ofBRs.y}\n\n    A${innerRadius} ${innerRadius} 0 0 0 ${\n    toothX + femaleSocketIndent + points.ofBRe.x\n  } ${toothY + points.ofBRe.y}\n\n    L${toothX + femaleSocketIndent + points.ofTRs.x} ${toothY + points.ofTRs.y}\n\n    A${outerRadius} ${outerRadius} 0 0 1 ${\n    toothX + femaleSocketIndent + points.ofTRe.x\n  } ${toothY + points.ofTRe.y}`;\n}\n\nfunction get_blockTLe_to_ifTRe_path(\n  teeth: readonly CommandBlockTooth[],\n  toothIndex: number,\n  editorSizing: BlockEditorSizingProps\n): string {\n  const tooth = teeth[toothIndex];\n\n  if (!tooth.hasFemaleSocket) {\n    return \"\";\n  }\n\n  const toothX = tooth.rbox.topLeft.x;\n  const toothY = tooth.rbox.topLeft.y;\n  const points = getCommandBlockFemaleSocketPathPoints(editorSizing);\n  const innerRadius = editorSizing.blockBorderRadius;\n  const outerRadius = innerRadius + editorSizing.blockBorder;\n  const femaleSocketIndent =\n    toothIndex === 0\n      ? 0\n      : editorSizing.commandSequenceArgIndent - editorSizing.blockBorder;\n\n  return `L${toothX + femaleSocketIndent + points.ifTLs.x} ${\n    toothY + points.ifTLs.y\n  }\n\n    A${innerRadius} ${innerRadius} 0 0 1 ${\n    toothX + femaleSocketIndent + points.ifTLe.x\n  } ${toothY + points.ifTLe.y}\n\n    L${toothX + femaleSocketIndent + points.ifBLs.x} ${toothY + points.ifBLs.y}\n\n    A${outerRadius} ${outerRadius} 0 0 0 ${\n    toothX + femaleSocketIndent + points.ifBLe.x\n  } ${toothY + points.ifBLe.y}\n\n    L${toothX + femaleSocketIndent + points.ifBRs.x} ${toothY + points.ifBRs.y}\n\n    A${outerRadius} ${outerRadius} 0 0 0 ${\n    toothX + femaleSocketIndent + points.ifBRe.x\n  } ${toothY + points.ifBRe.y}\n\n    L${toothX + femaleSocketIndent + points.ifTRs.x} ${toothY + points.ifTRs.y}\n\n    A${innerRadius} ${innerRadius} 0 0 1 ${\n    toothX + femaleSocketIndent + points.ifTRe.x\n  } ${toothY + points.ifTRe.y}`;\n}\n\nfunction get_ofTRe_to_blockBRe_path(\n  teeth: readonly CommandBlockTooth[],\n  toothIndex: number,\n  editorSizing: BlockEditorSizingProps\n): string {\n  const tooth = teeth[toothIndex];\n  const toothX = tooth.rbox.topLeft.x;\n  const toothY = tooth.rbox.topLeft.y;\n  const toothWidth = tooth.rbox.dimensions.width;\n  const toothHeight = tooth.rbox.dimensions.height;\n  const innerRadius = editorSizing.blockBorderRadius;\n  const outerRadius = innerRadius + editorSizing.blockBorder;\n\n  return `L${toothX + toothWidth - outerRadius} ${toothY}\n      \n  A${outerRadius} ${outerRadius} 0 0 1 ${toothX + toothWidth} ${\n    toothY + outerRadius\n  }\n\n  L${toothX + toothWidth} ${toothY + toothHeight - outerRadius}\n\n  A${outerRadius} ${outerRadius} 0 0 1 ${toothX + toothWidth - outerRadius} ${\n    toothY + toothHeight\n  }`;\n}\n\nfunction get_ifTRe_to_blockBRe_path(\n  teeth: readonly CommandBlockTooth[],\n  toothIndex: number,\n  editorSizing: BlockEditorSizingProps\n): string {\n  const tooth = teeth[toothIndex];\n  const toothX = tooth.rbox.topLeft.x;\n  const toothY = tooth.rbox.topLeft.y;\n  const toothWidth = tooth.rbox.dimensions.width;\n  const toothHeight = tooth.rbox.dimensions.height;\n  const borderWidth = editorSizing.blockBorder;\n  const innerRadius = editorSizing.blockBorderRadius;\n\n  return `L${toothX + toothWidth - borderWidth - innerRadius} ${\n    toothY + borderWidth\n  }\n      \n  A${innerRadius} ${innerRadius} 0 0 1 ${toothX + toothWidth - borderWidth} ${\n    toothY + borderWidth + innerRadius\n  }\n\n  L${toothX + toothWidth - borderWidth} ${\n    toothY + toothHeight - borderWidth - innerRadius\n  }\n\n  A${innerRadius} ${innerRadius} 0 0 1 ${\n    toothX + toothWidth - borderWidth - innerRadius\n  } ${toothY + toothHeight - borderWidth}`;\n}\n\nfunction get_blockBRe_to_omTLe_path(\n  teeth: readonly CommandBlockTooth[],\n  toothIndex: number,\n  editorSizing: BlockEditorSizingProps\n): string {\n  const tooth = teeth[toothIndex];\n\n  if (!tooth.hasMaleSocket) {\n    return \"\";\n  }\n\n  const toothX = tooth.rbox.topLeft.x;\n  const toothY = tooth.rbox.topLeft.y;\n  const toothHeight = tooth.rbox.dimensions.height;\n  const points = getCommandBlockFemaleSocketPathPoints(editorSizing);\n  const innerRadius = editorSizing.blockBorderRadius;\n  const outerRadius = innerRadius + editorSizing.blockBorder;\n  const maleOffsetY = toothHeight - editorSizing.blockBorder;\n  const maleSocketIndent =\n    toothIndex === teeth.length - 1\n      ? 0\n      : editorSizing.commandSequenceArgIndent - editorSizing.blockBorder;\n\n  return `L${toothX + maleSocketIndent + points.ifTRe.x} ${\n    toothY + points.ifTRe.y + maleOffsetY\n  }\n\n  A${innerRadius} ${innerRadius} 0 0 0 ${\n    toothX + maleSocketIndent + points.ifTRs.x\n  } ${toothY + points.ifTRs.y + maleOffsetY}\n\n  L${toothX + maleSocketIndent + points.ifBRe.x} ${\n    toothY + points.ifBRe.y + maleOffsetY\n  }\n\n  A${outerRadius} ${outerRadius} 0 0 1 ${\n    toothX + maleSocketIndent + points.ifBRs.x\n  } ${toothY + points.ifBRs.y + maleOffsetY}\n\n  L${toothX + maleSocketIndent + points.ifBLe.x} ${\n    toothY + points.ifBLe.y + maleOffsetY\n  }\n\n  A${outerRadius} ${outerRadius} 0 0 1 ${\n    toothX + maleSocketIndent + points.ifBLs.x\n  } ${toothY + points.ifBLs.y + maleOffsetY}\n\n  L${toothX + maleSocketIndent + points.ifTLe.x} ${\n    toothY + points.ifTLe.y + maleOffsetY\n  }\n\n  A${innerRadius} ${innerRadius} 0 0 0 ${\n    toothX + maleSocketIndent + points.ifTLs.x\n  } ${toothY + points.ifTLs.y + maleOffsetY}`;\n}\n\nfunction get_blockBRe_to_imTLe_path(\n  teeth: readonly CommandBlockTooth[],\n  toothIndex: number,\n  editorSizing: BlockEditorSizingProps\n): string {\n  const tooth = teeth[toothIndex];\n\n  if (!tooth.hasMaleSocket) {\n    return \"\";\n  }\n\n  const toothX = tooth.rbox.topLeft.x;\n  const toothY = tooth.rbox.topLeft.y;\n  const toothHeight = tooth.rbox.dimensions.height;\n  const points = getCommandBlockFemaleSocketPathPoints(editorSizing);\n  const innerRadius = editorSizing.blockBorderRadius;\n  const outerRadius = innerRadius + editorSizing.blockBorder;\n  const maleOffsetY = toothHeight - editorSizing.blockBorder;\n  const maleSocketIndent =\n    toothIndex === teeth.length - 1\n      ? 0\n      : editorSizing.commandSequenceArgIndent - editorSizing.blockBorder;\n\n  return `L${toothX + maleSocketIndent + points.ofTRe.x} ${\n    toothY + points.ofTRe.y + maleOffsetY\n  }\n\n  A${outerRadius} ${outerRadius} 0 0 0 ${\n    toothX + maleSocketIndent + points.ofTRs.x\n  } ${toothY + points.ofTRs.y + maleOffsetY}\n\n  L${toothX + maleSocketIndent + points.ofBRe.x} ${\n    toothY + points.ofBRe.y + maleOffsetY\n  }\n\n  A${innerRadius} ${innerRadius} 0 0 1 ${\n    toothX + maleSocketIndent + points.ofBRs.x\n  } ${toothY + points.ofBRs.y + maleOffsetY}\n\n  L${toothX + maleSocketIndent + points.ofBLe.x} ${\n    toothY + points.ofBLe.y + maleOffsetY\n  }\n\n  A${innerRadius} ${innerRadius} 0 0 1 ${\n    toothX + maleSocketIndent + points.ofBLs.x\n  } ${toothY + points.ofBLs.y + maleOffsetY}\n\n  L${toothX + maleSocketIndent + points.ofTLe.x} ${\n    toothY + points.ofTLe.y + maleOffsetY\n  }\n\n  A${outerRadius} ${outerRadius} 0 0 0 ${\n    toothX + maleSocketIndent + points.ofTLs.x\n  } ${toothY + points.ofTLs.y + maleOffsetY}`;\n}\n\nfunction get_omTLe_to_firstToothBlockTLe_path(\n  teeth: readonly CommandBlockTooth[],\n  toothIndex: number,\n  editorSizing: BlockEditorSizingProps\n): string {\n  const tooth = teeth[toothIndex];\n  const toothX = tooth.rbox.topLeft.x;\n  const toothY = tooth.rbox.topLeft.y;\n  const toothHeight = tooth.rbox.dimensions.height;\n\n  const firstTooth = teeth[0];\n  const firstToothX = firstTooth.rbox.topLeft.x;\n  const firstToothY = firstTooth.rbox.topLeft.y;\n\n  const innerRadius = editorSizing.blockBorderRadius;\n  const outerRadius = innerRadius + editorSizing.blockBorder;\n\n  return `L${toothX + outerRadius} ${toothY + toothHeight}\n    \n    A${outerRadius} ${outerRadius} 0 0 1 ${toothX} ${\n    toothY + toothHeight - outerRadius\n  }\n    \n    L${firstToothX} ${firstToothY + outerRadius}\n    \n    A${outerRadius} ${outerRadius} 0 0 1 ${\n    firstToothX + outerRadius\n  } ${firstToothY}`;\n}\n\nfunction get_imTLe_to_firstToothBlockTLe_path(\n  teeth: readonly CommandBlockTooth[],\n  toothIndex: number,\n  editorSizing: BlockEditorSizingProps\n): string {\n  const tooth = teeth[toothIndex];\n  const toothX = tooth.rbox.topLeft.x;\n  const toothY = tooth.rbox.topLeft.y;\n  const toothHeight = tooth.rbox.dimensions.height;\n\n  const firstTooth = teeth[0];\n  const firstToothX = firstTooth.rbox.topLeft.x;\n  const firstToothY = firstTooth.rbox.topLeft.y;\n\n  const borderWidth = editorSizing.blockBorder;\n  const innerRadius = editorSizing.blockBorderRadius;\n\n  return `L${toothX + borderWidth + innerRadius} ${\n    toothY + toothHeight - borderWidth\n  }\n    \n    A${innerRadius} ${innerRadius} 0 0 1 ${toothX + borderWidth} ${\n    toothY + toothHeight - borderWidth - innerRadius\n  }\n    \n    L${firstToothX + borderWidth} ${firstToothY + borderWidth + innerRadius}\n    \n    A${innerRadius} ${innerRadius} 0 0 1 ${\n    firstToothX + borderWidth + innerRadius\n  } ${firstToothY + borderWidth}`;\n}\n\nfunction get_omTLe_to_nextToothBlockTLe_assumingSequenceArgIndent_path(\n  teeth: readonly CommandBlockTooth[],\n  toothIndex: number,\n  editorSizing: BlockEditorSizingProps\n): string {\n  if (toothIndex >= teeth.length - 1) {\n    throw new Error(\n      \"Called get_omTLe_to_nextToothBlockTLe_assumingSequenceArgIndent_path when there was no next tooth.\"\n    );\n  }\n\n  const tooth = teeth[toothIndex];\n  const toothX = tooth.rbox.topLeft.x;\n  const toothY = tooth.rbox.topLeft.y;\n  const toothHeight = tooth.rbox.dimensions.height;\n\n  const nextTooth = teeth[toothIndex + 1];\n  const nextToothY = nextTooth.rbox.topLeft.y;\n  const innerRadius = editorSizing.blockBorderRadius;\n  const commandSequenceArgIndent = editorSizing.commandSequenceArgIndent;\n\n  return `L${toothX + commandSequenceArgIndent + innerRadius} ${\n    toothY + toothHeight\n  }\n    \n    A${innerRadius} ${innerRadius} 0 0 0 ${toothX + commandSequenceArgIndent} ${\n    toothY + toothHeight + innerRadius\n  }\n    \n    L${toothX + commandSequenceArgIndent} ${nextToothY - innerRadius}\n    \n    A${innerRadius} ${innerRadius} 0 0 0 ${\n    toothX + commandSequenceArgIndent + innerRadius\n  } ${nextToothY}`;\n}\n\nfunction get_imTLe_to_nextToothBlockTLe_assumingSequenceArgIndent_path(\n  teeth: readonly CommandBlockTooth[],\n  toothIndex: number,\n  editorSizing: BlockEditorSizingProps\n): string {\n  if (toothIndex >= teeth.length - 1) {\n    throw new Error(\n      \"Called get_imTLe_to_nextToothBlockTLe_assumingSequenceArgIndent_path when there was no next tooth.\"\n    );\n  }\n\n  const tooth = teeth[toothIndex];\n  const toothX = tooth.rbox.topLeft.x;\n  const toothY = tooth.rbox.topLeft.y;\n  const toothHeight = tooth.rbox.dimensions.height;\n\n  const nextTooth = teeth[toothIndex + 1];\n  const nextToothY = nextTooth.rbox.topLeft.y;\n  const borderWidth = editorSizing.blockBorder;\n  const innerRadius = editorSizing.blockBorderRadius;\n  const outerRadius = innerRadius + borderWidth;\n  const commandSequenceArgIndent = editorSizing.commandSequenceArgIndent;\n\n  return `L${toothX + commandSequenceArgIndent - borderWidth + outerRadius} ${\n    toothY + toothHeight - borderWidth\n  }\n    \n    A${outerRadius} ${outerRadius} 0 0 0 ${\n    toothX + commandSequenceArgIndent - borderWidth\n  } ${toothY + toothHeight - borderWidth + outerRadius}\n    \n    L${toothX + commandSequenceArgIndent - borderWidth} ${\n    nextToothY + borderWidth - outerRadius\n  }\n    \n    A${outerRadius} ${outerRadius} 0 0 0 ${\n    toothX + commandSequenceArgIndent - borderWidth + outerRadius\n  } ${nextToothY + borderWidth}`;\n}\n\nfunction QueryBlockBody({\n  rbox,\n  editorSizing,\n  outerColor,\n  innerColor,\n}: QueryBlockBodyProps): React.ReactElement {\n  const { outerPath, innerPath } =\n    getLandscapePillOuterAndInnerPathsFromBoundingBox(\n      rbox,\n      editorSizing.blockBorder\n    );\n  return (\n    <>\n      <path d={outerPath} fill={stringifyColor(outerColor)} />\n      <path d={innerPath} fill={stringifyColor(innerColor)} />\n    </>\n  );\n}\n\nfunction getLandscapePillOuterAndInnerPathsFromBoundingBox(\n  bbox: Rectangle,\n  borderWidth: number\n): { outerPath: string; innerPath: string } {\n  const outerPath = getLandscapePillPathFromBoundingBox(bbox);\n\n  const { x, y } = bbox.topLeft;\n  const { width, height } = bbox.dimensions;\n  const innerPathBbox = {\n    topLeft: {\n      x: x + borderWidth,\n      y: y + borderWidth,\n    },\n    dimensions: {\n      width: width - 2 * borderWidth,\n      height: height - 2 * borderWidth,\n    },\n  };\n  const innerPath = getLandscapePillPathFromBoundingBox(innerPathBbox);\n\n  return { outerPath, innerPath };\n}\n\nfunction getLandscapePillPathFromBoundingBox(bbox: Rectangle): string {\n  const { x, y } = bbox.topLeft;\n  const { width, height } = bbox.dimensions;\n  const radius = height / 2;\n\n  if (height > width) {\n    throw new Error(\"The width must be greater than or equal to the height.\");\n  }\n\n  return `M${x + radius} ${y}\n\n  L${x + width - radius} ${y}\n\n  A${radius} ${radius} 0 0 1 ${x + width - radius} ${y + height}\n  \n  L${x + radius} ${y + height}\n  \n  A${radius} ${radius} 0 0 1 ${x + radius} ${y}`;\n}\n\nfunction DropdownView<B extends BlockEditorTypeParams>({\n  spec,\n  editor,\n}: DropdownViewProps<B>): React.ReactElement {\n  const editorProps = editor.props;\n  const { sizing, fonts, colors, dropdownTexts } = editorProps.config;\n\n  const { x, y } = spec.rbox.topLeft;\n  const dropdownDimensions = spec.rbox.dimensions;\n\n  const blockColorTriplet = spec.isUnreachable\n    ? colors.unreachableBlocks[spec.parentBlockKind]\n    : colors.blocks[spec.parentBlockKind];\n\n  const { outerPath, innerPath } =\n    getLandscapePillOuterAndInnerPathsFromBoundingBox(\n      spec.rbox,\n      sizing.blockDropdownBorder\n    );\n\n  const borderRadius = 0.5 * spec.rbox.dimensions.height;\n\n  const dropdownText = dropdownTexts[spec.value];\n  const naiveTextDimensions = editor.props.measureText(\n    dropdownText,\n    fonts.blockDropdownFont,\n    sizing.blockDropdownTextSizePx\n  );\n  const minimumTextDimensions = editor.props.measureText(\n    MINIMAL_LOREM_IPSUM_TEXT_FOR_FONT_MEASUREMENT,\n    fonts.blockDropdownFont,\n    sizing.blockDropdownTextSizePx\n  );\n  const textDimensions = {\n    width: Math.max(naiveTextDimensions.width, minimumTextDimensions.width),\n    height: Math.max(naiveTextDimensions.height, minimumTextDimensions.height),\n  };\n\n  const arrowScale = sizing.blockDropdownArrowWidth / DROPDOWN_ARROW.width;\n\n  const haloRbox = {\n    topLeft: subVec(spec.rbox.topLeft, {\n      x: sizing.queryInsertionMarkHaloRadius,\n      y: sizing.queryInsertionMarkHaloRadius,\n    }),\n    dimensions: {\n      width:\n        spec.rbox.dimensions.width + 2 * sizing.queryInsertionMarkHaloRadius,\n      height:\n        spec.rbox.dimensions.height + 2 * sizing.queryInsertionMarkHaloRadius,\n    },\n  };\n  const haloBody = getLandscapePillOuterAndInnerPathsFromBoundingBox(\n    haloRbox,\n    0\n  );\n\n  return (\n    <g data-touch-role={getDataTouchRoleFromDropdownAddress(spec.address)}>\n      {spec.hasPendingEditMark && (\n        <path\n          d={haloBody.outerPath}\n          fill={stringifyColor(colors.queryInsertionMarkHalo)}\n        />\n      )}\n\n      <path d={outerPath} fill={stringifyColor(blockColorTriplet.tertiary)} />\n\n      <path d={innerPath} fill={stringifyColor(blockColorTriplet.secondary)} />\n\n      <text\n        x={x + sizing.blockDropdownHorizontalPadding + borderRadius}\n        y={y + 0.5 * dropdownDimensions.height}\n        fontSize={sizing.blockDropdownTextSizePx}\n        fontFamily={fonts.blockDropdownFont}\n        dominantBaseline=\"middle\"\n        fill={stringifyColor(colors.blockDropdownText)}\n      >\n        {dropdownText}\n      </text>\n\n      <path\n        transform={`scale(${arrowScale}) translate(${\n          (1 / arrowScale) *\n          (x +\n            sizing.blockDropdownHorizontalPadding +\n            borderRadius +\n            textDimensions.width +\n            sizing.blockDropdownArrowLeftMargin)\n        } ${\n          (1 / arrowScale) *\n          (y +\n            0.5 * dropdownDimensions.height -\n            0.5 * arrowScale * DROPDOWN_ARROW.height)\n        })`}\n        d={DROPDOWN_ARROW.path}\n        fill={stringifyColor(editor.props.config.colors.blockDropdownText)}\n      />\n    </g>\n  );\n}\n\nfunction LiteralView<B extends BlockEditorTypeParams>({\n  spec,\n  editor,\n}: LiteralViewProps<B>): React.ReactElement {\n  const editorProps = editor.props;\n  const { sizing, colors, fonts } = editorProps.config;\n\n  const { x, y } = spec.rbox.topLeft;\n  const literalDimensions = spec.rbox.dimensions;\n\n  const haloRbox = {\n    topLeft: subVec(spec.rbox.topLeft, {\n      x: sizing.queryInsertionMarkHaloRadius,\n      y: sizing.queryInsertionMarkHaloRadius,\n    }),\n    dimensions: {\n      width:\n        spec.rbox.dimensions.width + 2 * sizing.queryInsertionMarkHaloRadius,\n      height:\n        spec.rbox.dimensions.height + 2 * sizing.queryInsertionMarkHaloRadius,\n    },\n  };\n  const haloBody = getLandscapePillOuterAndInnerPathsFromBoundingBox(\n    haloRbox,\n    0\n  );\n\n  const literalBody = getLandscapePillOuterAndInnerPathsFromBoundingBox(\n    spec.rbox,\n    sizing.blockLiteralBorder\n  );\n\n  const borderRadius = 0.5 * spec.rbox.dimensions.height;\n\n  const blockColorTriplet = spec.isUnreachable\n    ? colors.unreachableBlocks[spec.parentBlockKind]\n    : colors.blocks[spec.parentBlockKind];\n\n  return (\n    <g data-touch-role={getDataTouchRoleFromLiteralAddress(spec.address)}>\n      {spec.hasQueryInsertionMark && (\n        <path\n          d={haloBody.outerPath}\n          fill={stringifyColor(colors.queryInsertionMarkHalo)}\n        />\n      )}\n\n      <path\n        d={literalBody.outerPath}\n        fill={stringifyColor(blockColorTriplet.tertiary)}\n      />\n\n      <path\n        d={literalBody.innerPath}\n        fill={stringifyColor(colors.blockLiteralBackground)}\n      />\n\n      <text\n        x={x + sizing.blockLiteralHorizontalPadding + borderRadius}\n        y={y + 0.5 * literalDimensions.height}\n        fontSize={sizing.blockLiteralTextSizePx}\n        fontFamily={fonts.blockLiteralFont}\n        dominantBaseline=\"middle\"\n        fill={stringifyColor(colors.blockLiteralText)}\n      >\n        {spec.source}\n      </text>\n    </g>\n  );\n}\n\nfunction BlockSequenceView<B extends BlockEditorTypeParams>({\n  spec,\n  editor,\n}: BlockSequenceViewProps<B>): React.ReactElement {\n  return (\n    <>\n      {spec.blockSpecs.map((blockSpec) => (\n        <BlockView<B>\n          key={blockSpec.address.map(stringifyNodeAddressPart).join(\"_\")}\n          spec={blockSpec}\n          editor={editor}\n        />\n      ))}\n    </>\n  );\n}\n\nfunction getCanvasItemRenderSpec<B extends BlockEditorTypeParams>({\n  editorProps,\n  item,\n  address,\n  insertionMark,\n  draggeeOriginalAddress,\n  hasDragPositionChangedSinceDragStart,\n  dropdownMenuDropdownAddress,\n}: {\n  editorProps: BlockEditorProps<B>;\n  item: CanvasItem<B>;\n  address: NodeAddress;\n  insertionMark: null | InsertionMark<B>;\n  draggeeOriginalAddress: null | NodeAddress;\n  hasDragPositionChangedSinceDragStart: boolean;\n  dropdownMenuDropdownAddress: null | NodeAddress;\n}): BlockSequenceRenderSpec<B> {\n  const { position, content } = item;\n  return getBlockSequenceRenderSpec({\n    editorProps,\n    position,\n    sequence: content,\n    address,\n    insertionMark,\n    draggeeOriginalAddress,\n    hasDragPositionChangedSinceDragStart,\n    dropdownMenuDropdownAddress,\n    isUnreachable: !isFirstCommandEntryPoint(\n      editorProps.config.blockDefs,\n      content\n    ),\n  });\n}\n\nexport function getBlockSequenceRenderSpec<B extends BlockEditorTypeParams>({\n  editorProps,\n  position: rawPosition,\n  sequence,\n  address,\n  insertionMark,\n  draggeeOriginalAddress,\n  hasDragPositionChangedSinceDragStart,\n  dropdownMenuDropdownAddress,\n  isUnreachable,\n}: {\n  editorProps: BlockEditorProps<B>;\n  position: Vec2;\n  sequence: BlockSequence<B>;\n  address: NodeAddress;\n  insertionMark: null | InsertionMark<B>;\n  draggeeOriginalAddress: null | NodeAddress;\n  hasDragPositionChangedSinceDragStart: boolean;\n  dropdownMenuDropdownAddress: null | NodeAddress;\n  isUnreachable: boolean;\n}): BlockSequenceRenderSpec<B> {\n  const { sizing } = editorProps.config;\n\n  const localDraggeeAddress =\n    draggeeOriginalAddress === null\n      ? null\n      : withoutPrefix(address, draggeeOriginalAddress);\n  const commandsAfterRemovingDraggee =\n    localDraggeeAddress !== null &&\n    localDraggeeAddress.length === 1 &&\n    hasDragPositionChangedSinceDragStart\n      ? sequence.slice(0, expectNumericAddressPart(localDraggeeAddress[0]))\n      : sequence;\n\n  const localInsertionMarkAddress =\n    insertionMark === null\n      ? null\n      : withoutPrefix(address, insertionMark.address);\n  const adjustedPosition = {\n    x: rawPosition.x,\n    y:\n      rawPosition.y +\n      (insertionMark !== null &&\n      insertionMark.address.length === 3 &&\n      localInsertionMarkAddress !== null &&\n      localInsertionMarkAddress.length === 1 &&\n      localInsertionMarkAddress[0] === 0\n        ? -(getDefaultCommandBlockHeight(editorProps) - sizing.blockBorder)\n        : 0),\n  };\n  type Commandlike = Block<B> | typeof COMMAND_INSERTION_MARK_SENTINEL;\n  const commandlikes: readonly Commandlike[] =\n    localInsertionMarkAddress !== null &&\n    localInsertionMarkAddress.length === 1 &&\n    expectNumericAddressPart(localInsertionMarkAddress[0]) <=\n      commandsAfterRemovingDraggee.length\n      ? identityFunctionToForceTypesafeCast<readonly Commandlike[]>(\n          commandsAfterRemovingDraggee\n        )\n          .slice(0, expectNumericAddressPart(localInsertionMarkAddress[0]))\n          .concat(\n            [COMMAND_INSERTION_MARK_SENTINEL],\n            commandsAfterRemovingDraggee.slice(\n              expectNumericAddressPart(localInsertionMarkAddress[0])\n            )\n          )\n      : commandsAfterRemovingDraggee;\n  const blockSpecs: BlockRenderSpec<B>[] = [];\n  let y = adjustedPosition.y;\n  let nonInsertionMarkIndex = 0;\n  for (let i = 0; i < commandlikes.length; ++i) {\n    const commandlike = commandlikes[i];\n    if (commandlike === COMMAND_INSERTION_MARK_SENTINEL) {\n      if (insertionMark === null) {\n        throw new Error(\n          \"Impossible: insertionMark is null but reached command insertion mark sentinel.\"\n        );\n      }\n      const spec = getBlockRenderSpec({\n        editorProps,\n        position: { x: adjustedPosition.x, y },\n        block: getInsertionMarkCommand(\n          insertionMark.draggee,\n          editorProps.config.blockDefs\n        ),\n        address: [INSERTION_MARK_ADDRESS_PART],\n        insertionMark,\n        draggeeOriginalAddress,\n        hasDragPositionChangedSinceDragStart,\n        dropdownMenuDropdownAddress,\n        isUnreachable,\n      });\n      blockSpecs.push(spec);\n\n      y += spec.rbox.dimensions.height - sizing.blockBorder;\n      continue;\n    }\n\n    const spec = getBlockRenderSpec({\n      editorProps,\n      position: { x: adjustedPosition.x, y },\n      block: commandlike,\n      address: address.concat([nonInsertionMarkIndex]),\n      insertionMark,\n      draggeeOriginalAddress,\n      hasDragPositionChangedSinceDragStart,\n      dropdownMenuDropdownAddress,\n      isUnreachable,\n    });\n    blockSpecs.push(spec);\n\n    ++nonInsertionMarkIndex;\n\n    y += spec.rbox.dimensions.height - sizing.blockBorder;\n  }\n\n  const dimensions =\n    blockSpecs.length === 0\n      ? {\n          width: 0,\n          height: getMinimumCommandBlockHeight(editorProps),\n        }\n      : {\n          width: Math.max(\n            ...blockSpecs.map((command) => command.rbox.dimensions.width)\n          ),\n          height: y - adjustedPosition.y,\n        };\n\n  return {\n    kind: RenderSpecKind.BlockSequence,\n    sequence,\n    address,\n    rbox: {\n      topLeft: { x: adjustedPosition.x, y: adjustedPosition.y },\n      dimensions,\n    },\n    blockSpecs,\n  };\n}\n\nfunction getBlockRenderSpec<B extends BlockEditorTypeParams>({\n  editorProps,\n  position,\n  block,\n  address,\n  insertionMark,\n  draggeeOriginalAddress,\n  hasDragPositionChangedSinceDragStart,\n  dropdownMenuDropdownAddress,\n  isUnreachable,\n}: {\n  editorProps: BlockEditorProps<B>;\n  position: Vec2;\n  block: Block<B>;\n  address: NodeAddress;\n  insertionMark: null | InsertionMark<B>;\n  draggeeOriginalAddress: null | NodeAddress;\n  hasDragPositionChangedSinceDragStart: boolean;\n  dropdownMenuDropdownAddress: null | NodeAddress;\n  isUnreachable: boolean;\n}): BlockRenderSpec<B> {\n  const blockDef = editorProps.config.blockDefs[block.kind];\n\n  if (blockDef.kind === BlockDefKind.Command) {\n    return getCommandBlockRenderSpec({\n      editorProps,\n      position,\n      block,\n      blockDef,\n      address,\n      insertionMark,\n      draggeeOriginalAddress,\n      hasDragPositionChangedSinceDragStart,\n      dropdownMenuDropdownAddress,\n      isUnreachable,\n    });\n  }\n\n  return getQueryBlockRenderSpec({\n    editorProps,\n    position,\n    block,\n    blockDef,\n    address,\n    insertionMark,\n    draggeeOriginalAddress,\n    hasDragPositionChangedSinceDragStart,\n    dropdownMenuDropdownAddress,\n    isUnreachable,\n  });\n}\n\nfunction getCommandBlockRenderSpec<B extends BlockEditorTypeParams>({\n  editorProps,\n  position,\n  block,\n  blockDef,\n  address,\n  insertionMark,\n  draggeeOriginalAddress,\n  hasDragPositionChangedSinceDragStart,\n  dropdownMenuDropdownAddress,\n  isUnreachable,\n}: {\n  editorProps: BlockEditorProps<B>;\n  position: Vec2;\n  block: Block<B>;\n  blockDef: CommandBlockDef<B>;\n  address: NodeAddress;\n  insertionMark: null | InsertionMark<B>;\n  draggeeOriginalAddress: null | NodeAddress;\n  hasDragPositionChangedSinceDragStart: boolean;\n  dropdownMenuDropdownAddress: null | NodeAddress;\n  isUnreachable: boolean;\n}): BlockRenderSpec<B> {\n  if (address.length === 1 && address[0] === INSERTION_MARK_ADDRESS_PART) {\n    const dummyAddress: NodeAddress = [CANVAS_ADDRESS_PART, 0];\n    const insertionMarkCommandSpec = getCommandBlockRenderSpec({\n      editorProps,\n      position,\n      block,\n      blockDef,\n      address: dummyAddress,\n      insertionMark,\n      draggeeOriginalAddress,\n      hasDragPositionChangedSinceDragStart,\n      dropdownMenuDropdownAddress,\n      isUnreachable,\n    });\n\n    const rbox = {\n      topLeft: position,\n      dimensions: {\n        width: insertionMarkCommandSpec.rbox.dimensions.width,\n        height: getDefaultCommandBlockHeight(editorProps),\n      },\n    };\n    const teeth = [\n      {\n        rbox,\n        hasFemaleSocket: blockDef.hasFemaleSocket,\n        hasMaleSocket: blockDef.hasMaleSocket,\n      },\n    ];\n    return {\n      kind: RenderSpecKind.Block,\n      block,\n      address,\n      isUnreachable,\n      rbox,\n      teeth,\n      labelSpecs: [],\n      dropdownSpecs: [],\n      subexpressionSpecs: [],\n      subsequenceSpecs: [],\n    };\n  }\n\n  const { sizing, blockDefs } = editorProps.config;\n  const minimumNonLabelNonSequencePartX =\n    position.x + getCommandBlockFemaleSocketPathPoints(sizing).ofTRe.x;\n\n  const localDraggeeAddress =\n    draggeeOriginalAddress === null\n      ? null\n      : withoutPrefix(address, draggeeOriginalAddress);\n\n  const parts = getBlockParts(blockDef, block);\n  const toothPartLists = groupBlockPartsByTooth(parts);\n  const sequences: readonly BlockPartCommandSequence<B>[] = parts.filter(\n    (p): p is BlockPartCommandSequence<B> =>\n      p.kind === BlockPartKind.CommandSequence\n  );\n\n  const teeth: CommandBlockTooth[] = [];\n  const labelSpecs: LabelRenderSpec[] = [];\n  const dropdownSpecs: DropdownRenderSpec<B>[] = [];\n  const subexpressionSpecs: ExpressionRenderSpec<B>[] = [];\n  const subsequenceSpecs: BlockSequenceRenderSpec<B>[] = [];\n  let currentY = position.y;\n  let previousSequence: null | BlockSequence<B> = null;\n  let sequenceIndex = 0;\n  let dropdownIndex = 0;\n  let expressionIndex = 0;\n\n  for (let toothIndex = 0; toothIndex < toothPartLists.length; ++toothIndex) {\n    const toothParts = toothPartLists[toothIndex];\n    const toothDimensions = getCommandToothDimensionsFromParts(\n      toothParts,\n      address,\n      expressionIndex,\n      draggeeOriginalAddress,\n      hasDragPositionChangedSinceDragStart,\n      dropdownMenuDropdownAddress,\n      editorProps\n    );\n\n    let currentX = position.x + sizing.interBlockPartHorizontalMargin;\n\n    for (const part of toothParts) {\n      if (part.kind === BlockPartKind.Label) {\n        const dimensions = editorProps.measureText(\n          part.text,\n          editorProps.config.fonts.blockLabelFont,\n          editorProps.config.sizing.blockLabelTextSizePx\n        );\n        labelSpecs.push({\n          kind: RenderSpecKind.Label,\n          text: part.text,\n          rbox: {\n            topLeft: {\n              x: currentX,\n              y: currentY + 0.5 * toothDimensions.height,\n            },\n            dimensions,\n          },\n        });\n        currentX += dimensions.width + sizing.interBlockPartHorizontalMargin;\n        continue;\n      }\n\n      if (part.kind === BlockPartKind.Dropdown) {\n        currentX = Math.max(currentX, minimumNonLabelNonSequencePartX);\n\n        const dropdownDimensions = getDropdownDimensions(\n          part.value,\n          editorProps\n        );\n\n        const dropdownAddress = address.concat([\n          ARG_DROPDOWN_ADDRESS_PART,\n          dropdownIndex,\n        ]);\n\n        dropdownSpecs.push({\n          kind: RenderSpecKind.Dropdown,\n          parentBlockKind: block.kind,\n          value: part.value,\n          hasPendingEditMark:\n            dropdownMenuDropdownAddress !== null &&\n            areNodeAddressesEqual(dropdownAddress, dropdownMenuDropdownAddress),\n          address: dropdownAddress,\n          isUnreachable,\n          rbox: {\n            topLeft: {\n              x: currentX,\n              y:\n                currentY +\n                0.5 * toothDimensions.height -\n                0.5 * dropdownDimensions.height,\n            },\n            dimensions: dropdownDimensions,\n          },\n        });\n        ++dropdownIndex;\n        currentX +=\n          dropdownDimensions.width + sizing.interBlockPartHorizontalMargin;\n        continue;\n      }\n\n      if (part.kind === BlockPartKind.Literal) {\n        currentX = Math.max(currentX, minimumNonLabelNonSequencePartX);\n\n        const literalDimensions = getLiteralDimensions(\n          part.source,\n          editorProps\n        );\n        const literalAddress = address.concat([\n          ARG_EXPRESSION_ADDRESS_PART,\n          expressionIndex,\n        ]);\n\n        subexpressionSpecs.push({\n          kind: RenderSpecKind.Literal,\n          parentBlockKind: block.kind,\n          source: part.source,\n          hasQueryInsertionMark:\n            insertionMark !== null &&\n            areNodeAddressesEqual(literalAddress, insertionMark.address),\n          address: literalAddress,\n          isUnreachable,\n          rbox: {\n            topLeft: {\n              x: currentX,\n              y:\n                currentY +\n                0.5 * toothDimensions.height -\n                0.5 * literalDimensions.height,\n            },\n            dimensions: literalDimensions,\n          },\n        });\n        ++expressionIndex;\n        currentX +=\n          literalDimensions.width + sizing.interBlockPartHorizontalMargin;\n        continue;\n      }\n\n      if (part.kind === BlockPartKind.Block) {\n        currentX = Math.max(currentX, minimumNonLabelNonSequencePartX);\n\n        if (\n          localDraggeeAddress !== null &&\n          localDraggeeAddress.length === 2 &&\n          localDraggeeAddress[0] === ARG_EXPRESSION_ADDRESS_PART &&\n          localDraggeeAddress[1] === expressionIndex &&\n          hasDragPositionChangedSinceDragStart\n        ) {\n          const literalDimensions = getLiteralDimensions(\"\", editorProps);\n          const literalAddress = address.concat([\n            ARG_EXPRESSION_ADDRESS_PART,\n            expressionIndex,\n          ]);\n\n          subexpressionSpecs.push({\n            kind: RenderSpecKind.Literal,\n            parentBlockKind: block.kind,\n            source: \"\",\n            hasQueryInsertionMark:\n              insertionMark !== null &&\n              areNodeAddressesEqual(literalAddress, insertionMark.address),\n            address: literalAddress,\n            isUnreachable,\n            rbox: {\n              topLeft: {\n                x: currentX,\n                y:\n                  currentY +\n                  0.5 * toothDimensions.height -\n                  0.5 * literalDimensions.height,\n              },\n              dimensions: literalDimensions,\n            },\n          });\n          ++expressionIndex;\n          currentX +=\n            literalDimensions.width + sizing.interBlockPartHorizontalMargin;\n          continue;\n        }\n\n        const misplacedButCorrectlySizedSpec = getBlockRenderSpec({\n          editorProps,\n          position: { x: 0, y: 0 },\n          block: part.block,\n          address: address.concat([\n            ARG_EXPRESSION_ADDRESS_PART,\n            expressionIndex,\n          ]),\n          insertionMark,\n          draggeeOriginalAddress,\n          hasDragPositionChangedSinceDragStart,\n          dropdownMenuDropdownAddress,\n          isUnreachable,\n        });\n        const spec = getBlockRenderSpec({\n          editorProps,\n          position: {\n            x: currentX,\n            y:\n              currentY +\n              0.5 *\n                (toothDimensions.height -\n                  misplacedButCorrectlySizedSpec.rbox.dimensions.height),\n          },\n          block: part.block,\n          address: address.concat([\n            ARG_EXPRESSION_ADDRESS_PART,\n            expressionIndex,\n          ]),\n          insertionMark,\n          draggeeOriginalAddress,\n          hasDragPositionChangedSinceDragStart,\n          dropdownMenuDropdownAddress,\n          isUnreachable,\n        });\n        subexpressionSpecs.push(spec);\n        currentX +=\n          spec.rbox.dimensions.width + sizing.interBlockPartHorizontalMargin;\n        ++expressionIndex;\n        continue;\n      }\n    }\n\n    const isLastTooth = toothIndex === toothPartLists.length - 1;\n    teeth.push({\n      rbox: {\n        topLeft: { x: position.x, y: currentY },\n        dimensions: {\n          width: toothDimensions.width,\n          // Ensure that empty teeth have a non-zero height.\n          height: Math.max(\n            toothDimensions.height,\n            getMinimumCommandBlockHeight(editorProps)\n          ),\n        },\n      },\n      hasFemaleSocket:\n        previousSequence === null\n          ? blockDef.hasFemaleSocket\n          : previousSequence.length === 0\n          ? true\n          : (\n              blockDefs[\n                previousSequence[previousSequence.length - 1].kind\n              ] as CommandBlockDef<B>\n            ).hasMaleSocket,\n      hasMaleSocket: isLastTooth ? blockDef.hasMaleSocket : true,\n    });\n    currentY += toothDimensions.height - sizing.blockBorder;\n\n    if (sequenceIndex < sequences.length) {\n      const sequence = sequences[sequenceIndex];\n      const originalSequenceIndex = sequenceIndex;\n      ++sequenceIndex;\n\n      const spec = getBlockSequenceRenderSpec<B>({\n        editorProps,\n        position: {\n          x: position.x + sizing.commandSequenceArgIndent - sizing.blockBorder,\n          y: currentY,\n        },\n        sequence: sequence.sequence,\n        address: address.concat([\n          ARG_COMMAND_SEQUENCE_ADDRESS_PART,\n          originalSequenceIndex,\n        ]),\n        insertionMark,\n        draggeeOriginalAddress,\n        hasDragPositionChangedSinceDragStart,\n        dropdownMenuDropdownAddress,\n        isUnreachable,\n      });\n      subsequenceSpecs.push(spec);\n      currentY += spec.rbox.dimensions.height;\n      previousSequence = sequence.sequence;\n    }\n  }\n\n  const lastTooth = teeth[teeth.length - 1];\n  const lastToothBottom =\n    lastTooth.rbox.topLeft.y + lastTooth.rbox.dimensions.height;\n  const maxToothWidth = Math.max(\n    ...teeth.map((tooth) => tooth.rbox.dimensions.width)\n  );\n  const rbox = {\n    topLeft: position,\n    dimensions: {\n      width: maxToothWidth,\n      height: lastToothBottom - position.y,\n    },\n  };\n\n  const teethWithAdjustedWidth = teeth.map((tooth) => ({\n    ...tooth,\n    rbox: {\n      ...tooth.rbox,\n      dimensions: { ...tooth.rbox.dimensions, width: maxToothWidth },\n    },\n  }));\n\n  return {\n    kind: RenderSpecKind.Block,\n    block,\n    address,\n    isUnreachable,\n    rbox,\n    teeth: teethWithAdjustedWidth,\n    labelSpecs,\n    dropdownSpecs,\n    subexpressionSpecs,\n    subsequenceSpecs,\n  };\n}\n\nfunction groupBlockPartsByTooth<B extends BlockEditorTypeParams>(\n  parts: readonly BlockPart<B>[]\n): readonly (readonly BlockPart<B>[])[] {\n  const toothPartLists: (readonly BlockPart<B>[])[] = [];\n  const currentToothParts: BlockPart<B>[] = [];\n\n  for (const part of parts) {\n    if (\n      part.kind === BlockPartKind.Label ||\n      part.kind === BlockPartKind.Dropdown ||\n      part.kind === BlockPartKind.Literal ||\n      part.kind === BlockPartKind.Block\n    ) {\n      currentToothParts.push(part);\n      continue;\n    }\n\n    if (part.kind === BlockPartKind.CommandSequence) {\n      toothPartLists.push(currentToothParts.slice());\n      currentToothParts.splice(0, currentToothParts.length);\n      continue;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const _exhaustivenessCheck: never = part;\n  }\n\n  toothPartLists.push(currentToothParts.slice());\n  return toothPartLists;\n}\n\nfunction getCommandToothDimensionsFromParts<B extends BlockEditorTypeParams>(\n  toothParts: readonly BlockPart<B>[],\n  commandAddress: NodeAddress,\n  totalExpressionsInPreviousTeeth: number,\n  draggeeOriginalAddress: null | NodeAddress,\n  hasDragPositionChangedSinceDragStart: boolean,\n  dropdownMenuDropdownAddress: null | NodeAddress,\n  editorProps: BlockEditorProps<B>\n): Dimensions {\n  const { sizing } = editorProps.config;\n\n  const minimumNonLabelNonSequencePartX =\n    getCommandBlockFemaleSocketPathPoints(sizing).ofTRe.x;\n\n  let expressionIndex = totalExpressionsInPreviousTeeth;\n\n  let currentX = sizing.commandBlockHorizontalPadding;\n  let maxHeight = 0;\n  for (let partIndex = 0; partIndex < toothParts.length; ++partIndex) {\n    const part = toothParts[partIndex];\n    const leftMargin =\n      partIndex === 0 ? 0 : sizing.interBlockPartHorizontalMargin;\n    if (part.kind === BlockPartKind.Label) {\n      const dimensions = editorProps.measureText(\n        part.text,\n        editorProps.config.fonts.blockLabelFont,\n        editorProps.config.sizing.blockLabelTextSizePx\n      );\n      currentX += leftMargin + dimensions.width;\n      maxHeight = Math.max(maxHeight, dimensions.height);\n      continue;\n    }\n\n    if (part.kind === BlockPartKind.Dropdown) {\n      currentX = Math.max(currentX, minimumNonLabelNonSequencePartX);\n      const dimensions = getDropdownDimensions(part.value, editorProps);\n      currentX += leftMargin + dimensions.width;\n      maxHeight = Math.max(maxHeight, dimensions.height);\n      continue;\n    }\n\n    if (part.kind === BlockPartKind.Literal) {\n      currentX = Math.max(currentX, minimumNonLabelNonSequencePartX);\n      ++expressionIndex;\n      const dimensions = getLiteralDimensions(part.source, editorProps);\n      currentX += leftMargin + dimensions.width;\n      maxHeight = Math.max(maxHeight, dimensions.height);\n      continue;\n    }\n\n    if (part.kind === BlockPartKind.Block) {\n      currentX = Math.max(currentX, minimumNonLabelNonSequencePartX);\n\n      const localDraggeeAddress =\n        draggeeOriginalAddress === null\n          ? null\n          : withoutPrefix(commandAddress, draggeeOriginalAddress);\n      if (\n        localDraggeeAddress !== null &&\n        localDraggeeAddress.length === 2 &&\n        localDraggeeAddress[0] === ARG_EXPRESSION_ADDRESS_PART &&\n        localDraggeeAddress[1] === expressionIndex &&\n        hasDragPositionChangedSinceDragStart\n      ) {\n        ++expressionIndex;\n        const dimensions = getLiteralDimensions(\"\", editorProps);\n        currentX += leftMargin + dimensions.width;\n        maxHeight = Math.max(maxHeight, dimensions.height);\n        continue;\n      }\n\n      // We only need to calculate the dimensions of the block spec,\n      // and can ignore the rest of the spec.\n      // Therefore, we can use dummy values for the arguments that will not\n      // affect the dimensions of the block spec.\n      const dummyPosition = { x: 0, y: 0 };\n      const dummyAddress: NodeAddress = [DRAGGEE_ADDRESS_PART];\n      const dummyInsertionMark = null;\n      const dummyIsUnreachable = false;\n\n      const spec = getBlockRenderSpec({\n        editorProps,\n        position: dummyPosition,\n        block: part.block,\n        address: dummyAddress,\n        insertionMark: dummyInsertionMark,\n        draggeeOriginalAddress,\n        hasDragPositionChangedSinceDragStart,\n        dropdownMenuDropdownAddress,\n        isUnreachable: dummyIsUnreachable,\n      });\n      ++expressionIndex;\n      const { dimensions } = spec.rbox;\n      currentX += leftMargin + dimensions.width;\n      maxHeight = Math.max(maxHeight, dimensions.height);\n      continue;\n    }\n\n    if (part.kind === BlockPartKind.CommandSequence) {\n      throw new Error(\n        \"Impossible: A tooth should never contain a command sequence.\"\n      );\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const _exhaustivenessCheck: never = part;\n  }\n\n  const minToothWidth =\n    getCommandBlockFemaleSocketPathPoints(sizing).ofTRe.x +\n    sizing.commandSocket.indent;\n\n  return {\n    width: Math.max(\n      currentX + sizing.commandBlockHorizontalPadding,\n      minToothWidth\n    ),\n    height:\n      maxHeight +\n      sizing.commandSocket.height +\n      2 * sizing.commandBlockVerticalPadding,\n  };\n}\n\nfunction getQueryRboxDimensionsFromParts<B extends BlockEditorTypeParams>(\n  blockParts: readonly BlockPart<B>[],\n  queryAddress: NodeAddress,\n  draggeeOriginalAddress: null | NodeAddress,\n  hasDragPositionChangedSinceDragStart: boolean,\n  dropdownMenuDropdownAddress: null | NodeAddress,\n  editorProps: BlockEditorProps<B>\n): Dimensions {\n  const { sizing, fonts } = editorProps.config;\n\n  let expressionIndex = 0;\n\n  const partDimensions: Dimensions[] = blockParts.map((part): Dimensions => {\n    if (part.kind === BlockPartKind.Label) {\n      return editorProps.measureText(\n        part.text,\n        fonts.blockLabelFont,\n        sizing.blockLabelTextSizePx\n      );\n    }\n\n    if (part.kind === BlockPartKind.Dropdown) {\n      return getDropdownDimensions(part.value, editorProps);\n    }\n\n    if (part.kind === BlockPartKind.Literal) {\n      ++expressionIndex;\n      return getLiteralDimensions(part.source, editorProps);\n    }\n\n    if (part.kind === BlockPartKind.Block) {\n      const localDraggeeAddress =\n        draggeeOriginalAddress === null\n          ? null\n          : withoutPrefix(queryAddress, draggeeOriginalAddress);\n      if (\n        localDraggeeAddress !== null &&\n        localDraggeeAddress.length === 2 &&\n        localDraggeeAddress[0] === ARG_EXPRESSION_ADDRESS_PART &&\n        localDraggeeAddress[1] === expressionIndex &&\n        hasDragPositionChangedSinceDragStart\n      ) {\n        ++expressionIndex;\n        return getLiteralDimensions(\"\", editorProps);\n      }\n\n      // We only need to calculate the dimensions of the block spec,\n      // and can ignore the rest of the spec.\n      // Therefore, we can use dummy values for the arguments that will not\n      // affect the dimensions of the block spec.\n      const dummyPosition = { x: 0, y: 0 };\n      const dummyAddress: NodeAddress = [DRAGGEE_ADDRESS_PART];\n      const dummyInsertionMark = null;\n      const dummyIsUnreachable = false;\n\n      const spec = getBlockRenderSpec({\n        editorProps,\n        position: dummyPosition,\n        block: part.block,\n        address: dummyAddress,\n        insertionMark: dummyInsertionMark,\n        draggeeOriginalAddress,\n        hasDragPositionChangedSinceDragStart,\n        dropdownMenuDropdownAddress,\n        isUnreachable: dummyIsUnreachable,\n      });\n      ++expressionIndex;\n      return spec.rbox.dimensions;\n    }\n\n    if (part.kind === BlockPartKind.CommandSequence) {\n      throw new Error(\n        \"Impossible: A query should never contain a command sequence.\"\n      );\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const exhaustivenessCheck: never = part;\n    return exhaustivenessCheck;\n  });\n\n  const totalWidth = sumArray(partDimensions.map((d) => d.width));\n  const maxHeight = Math.max(...partDimensions.map((d) => d.height));\n  const rboxHeight = maxHeight + 2 * sizing.queryBlockVerticalPadding;\n\n  const radius = 0.5 * rboxHeight;\n\n  const totalInterBlockPartHorizontalMargin =\n    sizing.interBlockPartHorizontalMargin * (partDimensions.length - 1);\n\n  const leftPadding =\n    blockParts[0].kind === BlockPartKind.Label\n      ? radius\n      : sizing.queryBlockVerticalPadding;\n  const rightPadding =\n    blockParts[blockParts.length - 1].kind === BlockPartKind.Label\n      ? radius\n      : sizing.queryBlockVerticalPadding;\n\n  return {\n    width:\n      totalWidth +\n      totalInterBlockPartHorizontalMargin +\n      leftPadding +\n      rightPadding,\n    height: rboxHeight,\n  };\n}\n\nfunction getDropdownDimensions<B extends BlockEditorTypeParams>(\n  dropdownValue: B[\"DropdownValueKind\"],\n  editorProps: BlockEditorProps<B>\n): Dimensions {\n  const { sizing, fonts, dropdownTexts } = editorProps.config;\n  const dropdownText = dropdownTexts[dropdownValue];\n  const naiveTextDimensions = editorProps.measureText(\n    dropdownText,\n    fonts.blockDropdownFont,\n    sizing.blockDropdownTextSizePx\n  );\n  const minimumTextDimensions = editorProps.measureText(\n    MINIMAL_LOREM_IPSUM_TEXT_FOR_FONT_MEASUREMENT,\n    fonts.blockDropdownFont,\n    sizing.blockDropdownTextSizePx\n  );\n  const textDimensions = {\n    width: Math.max(naiveTextDimensions.width, minimumTextDimensions.width),\n    height: Math.max(naiveTextDimensions.height, minimumTextDimensions.height),\n  };\n  const textDimensionsWithPadding = {\n    width: textDimensions.width + 2 * sizing.blockDropdownHorizontalPadding,\n    height: textDimensions.height + 2 * sizing.blockDropdownVerticalPadding,\n  };\n  const arrowDimensions = {\n    width: sizing.blockDropdownArrowWidth,\n    height:\n      (DROPDOWN_ARROW.height * sizing.blockDropdownArrowWidth) /\n      DROPDOWN_ARROW.width,\n  };\n  const arrowDimensionsWithMargin = {\n    width: arrowDimensions.width + sizing.blockDropdownArrowLeftMargin,\n    height: arrowDimensions.height + sizing.blockDropdownArrowVerticalMargin,\n  };\n  const dropdownRadius = 0.5 * textDimensionsWithPadding.height;\n  return {\n    width:\n      textDimensionsWithPadding.width +\n      arrowDimensionsWithMargin.width +\n      2 * dropdownRadius,\n    height: Math.max(\n      textDimensionsWithPadding.height,\n      arrowDimensionsWithMargin.height\n    ),\n  };\n}\n\nfunction getLiteralDimensions<B extends BlockEditorTypeParams>(\n  literalSource: string,\n  editorProps: BlockEditorProps<B>\n): Dimensions {\n  const { sizing, fonts } = editorProps.config;\n  const naiveTextDimensions = editorProps.measureText(\n    literalSource,\n    fonts.blockDropdownFont,\n    sizing.blockDropdownTextSizePx\n  );\n  const minimumTextDimensions = editorProps.measureText(\n    MINIMAL_LOREM_IPSUM_TEXT_FOR_FONT_MEASUREMENT,\n    fonts.blockDropdownFont,\n    sizing.blockDropdownTextSizePx\n  );\n  const textDimensions = {\n    width: Math.max(naiveTextDimensions.width, minimumTextDimensions.width),\n    height: Math.max(naiveTextDimensions.height, minimumTextDimensions.height),\n  };\n  const textDimensionsWithPadding = {\n    width: textDimensions.width + 2 * sizing.blockLiteralHorizontalPadding,\n    height: textDimensions.height + 2 * sizing.blockLiteralVerticalPadding,\n  };\n  const literalRadius = 0.5 * textDimensionsWithPadding.height;\n  return {\n    width: textDimensionsWithPadding.width + 2 * literalRadius,\n    height: textDimensionsWithPadding.height,\n  };\n}\n\nfunction sumArray(arr: readonly number[]): number {\n  return arr.reduce((acc, x) => acc + x, 0);\n}\n\nfunction getQueryBlockRenderSpec<B extends BlockEditorTypeParams>({\n  editorProps,\n  position,\n  block,\n  blockDef,\n  address,\n  insertionMark,\n  draggeeOriginalAddress,\n  hasDragPositionChangedSinceDragStart,\n  dropdownMenuDropdownAddress,\n  isUnreachable,\n}: {\n  editorProps: BlockEditorProps<B>;\n  position: Vec2;\n  block: Block<B>;\n  blockDef: QueryBlockDef<B>;\n  address: NodeAddress;\n  insertionMark: null | InsertionMark<B>;\n  draggeeOriginalAddress: null | NodeAddress;\n  hasDragPositionChangedSinceDragStart: boolean;\n  dropdownMenuDropdownAddress: null | NodeAddress;\n  isUnreachable: boolean;\n}): BlockRenderSpec<B> {\n  const { sizing, fonts } = editorProps.config;\n\n  const localDraggeeAddress =\n    draggeeOriginalAddress === null\n      ? null\n      : withoutPrefix(address, draggeeOriginalAddress);\n\n  const parts = getBlockParts(blockDef, block);\n\n  const labelSpecs: LabelRenderSpec[] = [];\n  const dropdownSpecs: DropdownRenderSpec<B>[] = [];\n  const subexpressionSpecs: ExpressionRenderSpec<B>[] = [];\n  let currentY = position.y;\n\n  const rboxDimensions = getQueryRboxDimensionsFromParts(\n    parts,\n    address,\n    draggeeOriginalAddress,\n    hasDragPositionChangedSinceDragStart,\n    dropdownMenuDropdownAddress,\n    editorProps\n  );\n  const queryRadius = 0.5 * rboxDimensions.height;\n\n  const leftPadding =\n    parts[0].kind === BlockPartKind.Label\n      ? queryRadius\n      : sizing.queryBlockVerticalPadding;\n\n  let currentX = position.x + leftPadding;\n  let dropdownIndex = 0;\n  let expressionIndex = 0;\n\n  for (const part of parts) {\n    if (part.kind === BlockPartKind.Label) {\n      const dimensions = editorProps.measureText(\n        part.text,\n        fonts.blockLabelFont,\n        sizing.blockLabelTextSizePx\n      );\n      labelSpecs.push({\n        kind: RenderSpecKind.Label,\n        text: part.text,\n        rbox: {\n          topLeft: {\n            x: currentX,\n            y: currentY + 0.5 * rboxDimensions.height,\n          },\n          dimensions,\n        },\n      });\n      currentX += dimensions.width + sizing.interBlockPartHorizontalMargin;\n      continue;\n    }\n\n    if (part.kind === BlockPartKind.Dropdown) {\n      const dropdownDimensions = getDropdownDimensions(part.value, editorProps);\n\n      const dropdownAddress = address.concat([\n        ARG_DROPDOWN_ADDRESS_PART,\n        dropdownIndex,\n      ]);\n\n      dropdownSpecs.push({\n        kind: RenderSpecKind.Dropdown,\n        parentBlockKind: block.kind,\n        value: part.value,\n        hasPendingEditMark:\n          dropdownMenuDropdownAddress !== null &&\n          areNodeAddressesEqual(dropdownAddress, dropdownMenuDropdownAddress),\n        address: dropdownAddress,\n        isUnreachable,\n        rbox: {\n          topLeft: {\n            x: currentX,\n            y:\n              currentY +\n              0.5 * rboxDimensions.height -\n              0.5 * dropdownDimensions.height,\n          },\n          dimensions: dropdownDimensions,\n        },\n      });\n      ++dropdownIndex;\n      currentX +=\n        dropdownDimensions.width + sizing.interBlockPartHorizontalMargin;\n      continue;\n    }\n\n    if (part.kind === BlockPartKind.Literal) {\n      const literalDimensions = getLiteralDimensions(part.source, editorProps);\n      const literalAddress = address.concat([\n        ARG_EXPRESSION_ADDRESS_PART,\n        expressionIndex,\n      ]);\n\n      subexpressionSpecs.push({\n        kind: RenderSpecKind.Literal,\n        parentBlockKind: block.kind,\n        source: part.source,\n        address: literalAddress,\n        isUnreachable,\n        hasQueryInsertionMark:\n          insertionMark !== null &&\n          areNodeAddressesEqual(literalAddress, insertionMark.address),\n        rbox: {\n          topLeft: {\n            x: currentX,\n            y:\n              currentY +\n              0.5 * rboxDimensions.height -\n              0.5 * literalDimensions.height,\n          },\n          dimensions: literalDimensions,\n        },\n      });\n      ++expressionIndex;\n      currentX +=\n        literalDimensions.width + sizing.interBlockPartHorizontalMargin;\n      continue;\n    }\n\n    if (part.kind === BlockPartKind.Block) {\n      if (\n        localDraggeeAddress !== null &&\n        localDraggeeAddress.length === 2 &&\n        localDraggeeAddress[0] === ARG_EXPRESSION_ADDRESS_PART &&\n        localDraggeeAddress[1] === expressionIndex &&\n        hasDragPositionChangedSinceDragStart\n      ) {\n        const literalDimensions = getLiteralDimensions(\"\", editorProps);\n        const literalAddress = address.concat([\n          ARG_EXPRESSION_ADDRESS_PART,\n          expressionIndex,\n        ]);\n\n        subexpressionSpecs.push({\n          kind: RenderSpecKind.Literal,\n          parentBlockKind: block.kind,\n          source: \"\",\n          hasQueryInsertionMark:\n            insertionMark !== null &&\n            areNodeAddressesEqual(literalAddress, insertionMark.address),\n          address: literalAddress,\n          isUnreachable,\n          rbox: {\n            topLeft: {\n              x: currentX,\n              y:\n                currentY +\n                0.5 * rboxDimensions.height -\n                0.5 * literalDimensions.height,\n            },\n            dimensions: literalDimensions,\n          },\n        });\n        ++expressionIndex;\n        currentX +=\n          literalDimensions.width + sizing.interBlockPartHorizontalMargin;\n        continue;\n      }\n\n      const misplacedButCorrectlySizedSpec = getBlockRenderSpec({\n        editorProps,\n        position: { x: 0, y: 0 },\n        block: part.block,\n        address: address.concat([ARG_EXPRESSION_ADDRESS_PART, expressionIndex]),\n        insertionMark,\n        draggeeOriginalAddress,\n        hasDragPositionChangedSinceDragStart,\n        dropdownMenuDropdownAddress,\n        isUnreachable,\n      });\n      const spec = getBlockRenderSpec({\n        editorProps,\n        position: {\n          x: currentX,\n          y:\n            currentY +\n            0.5 *\n              (rboxDimensions.height -\n                misplacedButCorrectlySizedSpec.rbox.dimensions.height),\n        },\n        block: part.block,\n        address: address.concat([ARG_EXPRESSION_ADDRESS_PART, expressionIndex]),\n        insertionMark,\n        draggeeOriginalAddress,\n        hasDragPositionChangedSinceDragStart,\n        dropdownMenuDropdownAddress,\n        isUnreachable,\n      });\n      subexpressionSpecs.push(spec);\n      currentX +=\n        spec.rbox.dimensions.width + sizing.interBlockPartHorizontalMargin;\n      ++expressionIndex;\n      continue;\n    }\n  }\n\n  const rbox = {\n    topLeft: position,\n    dimensions: rboxDimensions,\n  };\n\n  return {\n    kind: RenderSpecKind.Block,\n    block,\n    address,\n    isUnreachable,\n    rbox,\n    teeth: [],\n    labelSpecs,\n    dropdownSpecs,\n    subexpressionSpecs,\n    subsequenceSpecs: [],\n  };\n}\n\nfunction getBlockParts<B extends BlockEditorTypeParams>(\n  blockDef: BlockDef<B>,\n  block: Block<B>\n): readonly BlockPart<B>[] {\n  const { dropdowns, expressions, sequences } = block.args;\n\n  const parts: BlockPart<B>[] = [];\n  let dropdownIndex = 0;\n  let expressionIndex = 0;\n  let sequenceIndex = 0;\n\n  for (const signaturePart of blockDef.signature) {\n    if (signaturePart.kind === BlockSignaturePartKind.Label) {\n      parts.push({\n        kind: BlockPartKind.Label,\n        text: signaturePart.text,\n      });\n      continue;\n    }\n\n    if (signaturePart.kind === BlockSignaturePartKind.Dropdown) {\n      parts.push({\n        kind: BlockPartKind.Dropdown,\n        value: dropdowns[dropdownIndex],\n      });\n      ++dropdownIndex;\n      continue;\n    }\n\n    if (signaturePart.kind === BlockSignaturePartKind.Expression) {\n      const expression = expressions[expressionIndex];\n      ++expressionIndex;\n\n      if (expression.isLiteral) {\n        parts.push({\n          kind: BlockPartKind.Literal,\n          source: expression.source,\n        });\n        continue;\n      }\n\n      parts.push({\n        kind: BlockPartKind.Block,\n        block: expression,\n      });\n      continue;\n    }\n\n    if (signaturePart.kind === BlockSignaturePartKind.CommandSequence) {\n      const sequence = sequences[sequenceIndex];\n      ++sequenceIndex;\n\n      parts.push({\n        kind: BlockPartKind.CommandSequence,\n        sequence,\n      });\n      continue;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const _exhaustivenessCheck: never = signaturePart;\n  }\n\n  return parts;\n}\n\nfunction getCommandBlockFemaleSocketPathPoints(\n  sizing: BlockEditorSizingProps\n): CommandBlockFemaleSocketPathPoints {\n  const border = sizing.blockBorder;\n  const bmin = sizing.commandSocket.minorBase;\n  const bmaj = sizing.commandSocket.majorBase;\n  const h = sizing.commandSocket.height;\n  const halfDiff = (bmaj - bmin) / 2;\n  const theta = Math.atan(halfDiff / h);\n  const k = h / halfDiff;\n  const { indent } = sizing.commandSocket;\n  /** Outer corner radius */\n  const ro = sizing.blockBorderRadius + sizing.blockBorder;\n  /** Inner corner radius */\n  const ri = sizing.blockBorderRadius;\n\n  const ofTLs = { x: indent, y: 0 };\n  const fTLc = { x: indent, y: -ro };\n  const ofTLe = addVec(fTLc, {\n    x: ro * Math.cos(theta),\n    y: ro * Math.sin(theta),\n  });\n  const ofTLt = addVec(ofTLe, { x: ofTLe.y / k, y: -ofTLe.y });\n  const ofBLt = addVec(ofTLt, { x: h / k, y: -h });\n  const ofBLf = addVec(ofBLt, { x: -ri / k, y: ri });\n  const fBLc = addVec(ofBLf, { x: ri / Math.cos(theta), y: 0 });\n  const ofBLs = subVec(fBLc, {\n    x: ri * Math.cos(theta),\n    y: ri * Math.sin(theta),\n  });\n  const ofBLe = addVec(fBLc, { x: 0, y: -ri });\n  const ofBRt = addVec(ofBLt, { x: bmin, y: 0 });\n  const ofBRf = addVec(ofBRt, { x: ri / k, y: ri });\n  const fBRc = subVec(ofBRf, { x: ri / Math.cos(theta), y: 0 });\n  const ofBRs = addVec(fBRc, { x: 0, y: -ri });\n  const ofBRe = addVec(fBRc, {\n    x: ri * Math.cos(theta),\n    y: ri * -Math.sin(theta),\n  });\n  const ofTRt = addVec(ofTLt, { x: bmaj, y: 0 });\n  const ofTRe = addVec(ofTRt, subVec(ofTLt, ofTLs));\n  const fTRc = addVec(ofTRe, { x: 0, y: -ro });\n  const ofTRs = addVec(fTRc, {\n    x: -ro * Math.cos(theta),\n    y: ro * Math.sin(theta),\n  });\n  const ifTLs = addVec(ofTLs, { x: 0, y: -border });\n  const ifTLe = addVec(fTLc, {\n    x: ri * Math.cos(theta),\n    y: ri * Math.sin(theta),\n  });\n  const ifBLs = subVec(fBLc, {\n    x: ro * Math.cos(theta),\n    y: ro * Math.sin(theta),\n  });\n  const ifBLe = addVec(fBLc, { x: 0, y: -ro });\n  const ifBRs = addVec(fBRc, { x: 0, y: -ro });\n  const ifBRe = addVec(fBRc, {\n    x: ro * Math.cos(theta),\n    y: -ro * Math.sin(theta),\n  });\n  const ifTRs = addVec(fTRc, {\n    x: -ri * Math.cos(theta),\n    y: ri * Math.sin(theta),\n  });\n  const ifTRe = addVec(fTRc, { x: 0, y: ri });\n\n  return {\n    ofTLs: invertY(ofTLs),\n    ofTLe: invertY(ofTLe),\n    ofBLs: invertY(ofBLs),\n    ofBLe: invertY(ofBLe),\n    ofBRs: invertY(ofBRs),\n    ofBRe: invertY(ofBRe),\n    ofTRs: invertY(ofTRs),\n    ofTRe: invertY(ofTRe),\n\n    ifTLs: invertY(ifTLs),\n    ifTLe: invertY(ifTLe),\n    ifBLs: invertY(ifBLs),\n    ifBLe: invertY(ifBLe),\n    ifBRs: invertY(ifBRs),\n    ifBRe: invertY(ifBRe),\n    ifTRs: invertY(ifTRs),\n    ifTRe: invertY(ifTRe),\n  };\n}\n\nfunction getMinimumCommandBlockHeight<B extends BlockEditorTypeParams>(\n  editorProps: BlockEditorProps<B>\n): number {\n  const { sizing } = editorProps.config;\n  return (\n    0 + sizing.commandSocket.height + 2 * sizing.commandBlockVerticalPadding\n  );\n}\n\nfunction getDefaultCommandBlockHeight<B extends BlockEditorTypeParams>(\n  editorProps: BlockEditorProps<B>\n): number {\n  const { sizing, fonts } = editorProps.config;\n  const textDimensions = editorProps.measureText(\n    MINIMAL_LOREM_IPSUM_TEXT_FOR_FONT_MEASUREMENT,\n    fonts.blockLabelFont,\n    sizing.blockLabelTextSizePx\n  );\n  return (\n    textDimensions.height +\n    sizing.commandSocket.height +\n    2 * sizing.commandBlockVerticalPadding\n  );\n}\n\nfunction identityFunctionToForceTypesafeCast<T>(x: T): T {\n  return x;\n}\n\nfunction expectNumericAddressPart(part: NodeAddressPart): number {\n  if (Number.isInteger(part) && (part as number) >= 0) {\n    return part as number;\n  }\n\n  throw new Error(\n    `Expected numeric address part (i.e., a non-negative integer) but got the address part: ${String(\n      part\n    )}.`\n  );\n}\n\nfunction isFirstCommandEntryPoint<B extends BlockEditorTypeParams>(\n  defs: BlockDefs<B>,\n  commands: readonly Block<B>[]\n): boolean {\n  if (commands.length === 0) {\n    return false;\n  }\n\n  const def = defs[commands[0].kind];\n  return def.kind === BlockDefKind.Command && def.isEntryPoint;\n}\n\n/**\n * If `list` starts with `prefix`, returns `list` without `prefix`.\n * Otherwise, returns `null`.\n */\nfunction withoutPrefix<T>(\n  prefix: readonly T[],\n  list: readonly T[]\n): null | readonly T[] {\n  if (prefix.length > list.length) {\n    return null;\n  }\n\n  for (let i = 0; i < prefix.length; ++i) {\n    if (prefix[i] !== list[i]) {\n      return null;\n    }\n  }\n\n  return list.slice(prefix.length);\n}\n\nfunction getInsertionMarkCommand<B extends BlockEditorTypeParams>(\n  draggee: BlockSequence<B>,\n  defs: BlockDefs<B>\n): Block<B> {\n  if (draggee.length === 0) {\n    throw new Error(\n      \"Cannot get insertion mark command for empty command sequence.\"\n    );\n  }\n\n  const topCommand = draggee[0];\n  const topDef = defs[topCommand.kind];\n  if (topDef.kind !== BlockDefKind.Command) {\n    throw new Error(\"Expected top command to be a command block.\");\n  }\n\n  if (!topDef.hasFemaleSocket) {\n    return draggee[draggee.length - 1];\n  }\n\n  return topCommand;\n}\n\nfunction translateBlockSpec<B extends BlockEditorTypeParams>(\n  spec: BlockRenderSpec<B>,\n  displacement: Vec2\n): BlockRenderSpec<B> {\n  const rbox = {\n    topLeft: addVec(spec.rbox.topLeft, displacement),\n    dimensions: spec.rbox.dimensions,\n  };\n\n  const teeth = spec.teeth.map((tooth) => ({\n    rbox: {\n      topLeft: addVec(tooth.rbox.topLeft, displacement),\n      dimensions: tooth.rbox.dimensions,\n    },\n    hasFemaleSocket: tooth.hasFemaleSocket,\n    hasMaleSocket: tooth.hasMaleSocket,\n  }));\n\n  const labelSpecs = spec.labelSpecs.map((s) =>\n    translateLabelSpec(s, displacement)\n  );\n  const dropdownSpecs = spec.dropdownSpecs.map((s) =>\n    translateDropdownSpec(s, displacement)\n  );\n  const subexpressionSpecs = spec.subexpressionSpecs.map((s) =>\n    translateExpressionSpec(s, displacement)\n  );\n  const subsequenceSpecs = spec.subsequenceSpecs.map((s) =>\n    translateBlockSequenceSpec(s, displacement)\n  );\n\n  return {\n    kind: RenderSpecKind.Block,\n    block: spec.block,\n    address: spec.address,\n    isUnreachable: spec.isUnreachable,\n    rbox,\n    teeth,\n    labelSpecs,\n    dropdownSpecs,\n    subexpressionSpecs,\n    subsequenceSpecs,\n  };\n}\n\nfunction translateBlockSequenceSpec<B extends BlockEditorTypeParams>(\n  spec: BlockSequenceRenderSpec<B>,\n  displacement: Vec2\n): BlockSequenceRenderSpec<B> {\n  const rbox = {\n    topLeft: addVec(spec.rbox.topLeft, displacement),\n    dimensions: spec.rbox.dimensions,\n  };\n\n  const blockSpecs = spec.blockSpecs.map((s) =>\n    translateBlockSpec(s, displacement)\n  );\n\n  return {\n    kind: RenderSpecKind.BlockSequence,\n    sequence: spec.sequence,\n    address: spec.address,\n    rbox,\n    blockSpecs,\n  };\n}\n\nfunction translateExpressionSpec<B extends BlockEditorTypeParams>(\n  spec: ExpressionRenderSpec<B>,\n  displacement: Vec2\n): ExpressionRenderSpec<B> {\n  if (spec.kind === RenderSpecKind.Literal) {\n    return translateLiteralSpec(spec, displacement);\n  }\n\n  return translateBlockSpec(spec, displacement);\n}\n\nfunction translateLiteralSpec<B extends BlockEditorTypeParams>(\n  spec: LiteralRenderSpec<B>,\n  displacement: Vec2\n): LiteralRenderSpec<B> {\n  const rbox = {\n    topLeft: addVec(spec.rbox.topLeft, displacement),\n    dimensions: spec.rbox.dimensions,\n  };\n\n  return {\n    kind: RenderSpecKind.Literal,\n    parentBlockKind: spec.parentBlockKind,\n    source: spec.source,\n    hasQueryInsertionMark: spec.hasQueryInsertionMark,\n    address: spec.address,\n    isUnreachable: spec.isUnreachable,\n    rbox,\n  };\n}\n\nfunction translateDropdownSpec<B extends BlockEditorTypeParams>(\n  spec: DropdownRenderSpec<B>,\n  displacement: Vec2\n): DropdownRenderSpec<B> {\n  const rbox = {\n    topLeft: addVec(spec.rbox.topLeft, displacement),\n    dimensions: spec.rbox.dimensions,\n  };\n\n  return {\n    kind: RenderSpecKind.Dropdown,\n    parentBlockKind: spec.parentBlockKind,\n    value: spec.value,\n    hasPendingEditMark: spec.hasPendingEditMark,\n    address: spec.address,\n    isUnreachable: spec.isUnreachable,\n    rbox,\n  };\n}\n\nfunction translateLabelSpec(\n  spec: LabelRenderSpec,\n  displacement: Vec2\n): LabelRenderSpec {\n  const rbox = {\n    topLeft: addVec(spec.rbox.topLeft, displacement),\n    dimensions: spec.rbox.dimensions,\n  };\n\n  return {\n    kind: RenderSpecKind.Label,\n    text: spec.text,\n    rbox,\n  };\n}\n\nfunction readdressBlockSpecAndMarkAsReachableAndRemovePendingEditMark<\n  B extends BlockEditorTypeParams\n>(spec: BlockRenderSpec<B>, newAddress: NodeAddress): BlockRenderSpec<B> {\n  return {\n    kind: RenderSpecKind.Block,\n    block: spec.block,\n    address: newAddress,\n    isUnreachable: false,\n    rbox: spec.rbox,\n    teeth: spec.teeth,\n    labelSpecs: spec.labelSpecs,\n    dropdownSpecs: spec.dropdownSpecs.map((s, i) =>\n      readdressDropdownSpecAndMarkAsReachableAndRemovePendingEditMark(\n        s,\n        newAddress.concat([ARG_DROPDOWN_ADDRESS_PART, i])\n      )\n    ),\n    subexpressionSpecs: spec.subexpressionSpecs.map((s, i) =>\n      readdressExpressionSpecAndMarkAsReachableAndRemovePendingEditMark(\n        s,\n        newAddress.concat([ARG_EXPRESSION_ADDRESS_PART, i])\n      )\n    ),\n    subsequenceSpecs: spec.subsequenceSpecs.map((s, i) =>\n      readdressBlockSequenceSpecAndMarkAsReachableAndRemovePendingEditMark(\n        s,\n        newAddress.concat([ARG_COMMAND_SEQUENCE_ADDRESS_PART, i])\n      )\n    ),\n  };\n}\n\nfunction readdressBlockSequenceSpecAndMarkAsReachableAndRemovePendingEditMark<\n  B extends BlockEditorTypeParams\n>(\n  spec: BlockSequenceRenderSpec<B>,\n  newAddress: NodeAddress\n): BlockSequenceRenderSpec<B> {\n  return {\n    kind: RenderSpecKind.BlockSequence,\n    sequence: spec.sequence,\n    address: newAddress,\n    rbox: spec.rbox,\n    blockSpecs: spec.blockSpecs.map((s, i) =>\n      readdressBlockSpecAndMarkAsReachableAndRemovePendingEditMark(\n        s,\n        newAddress.concat([i])\n      )\n    ),\n  };\n}\n\nfunction readdressExpressionSpecAndMarkAsReachableAndRemovePendingEditMark<\n  B extends BlockEditorTypeParams\n>(\n  spec: ExpressionRenderSpec<B>,\n  newAddress: NodeAddress\n): ExpressionRenderSpec<B> {\n  if (spec.kind === RenderSpecKind.Literal) {\n    return readdressLiteralSpecAndMarkAsReachableAndRemovePendingEditMark(\n      spec,\n      newAddress\n    );\n  }\n\n  return readdressBlockSpecAndMarkAsReachableAndRemovePendingEditMark(\n    spec,\n    newAddress\n  );\n}\n\nfunction readdressLiteralSpecAndMarkAsReachableAndRemovePendingEditMark<\n  B extends BlockEditorTypeParams\n>(spec: LiteralRenderSpec<B>, newAddress: NodeAddress): LiteralRenderSpec<B> {\n  return {\n    kind: RenderSpecKind.Literal,\n    parentBlockKind: spec.parentBlockKind,\n    source: spec.source,\n    hasQueryInsertionMark: spec.hasQueryInsertionMark,\n    address: newAddress,\n    isUnreachable: false,\n    rbox: spec.rbox,\n  };\n}\n\nfunction readdressDropdownSpecAndMarkAsReachableAndRemovePendingEditMark<\n  B extends BlockEditorTypeParams\n>(spec: DropdownRenderSpec<B>, newAddress: NodeAddress): DropdownRenderSpec<B> {\n  return {\n    kind: RenderSpecKind.Dropdown,\n    parentBlockKind: spec.parentBlockKind,\n    value: spec.value,\n    hasPendingEditMark: false,\n    address: newAddress,\n    isUnreachable: false,\n    rbox: spec.rbox,\n  };\n}\n\nfunction getDraggeeFromBlockSequenceUsingLocalAddress<\n  B extends BlockEditorTypeParams\n>(\n  spec: BlockSequenceRenderSpec<B>,\n  dragDisplacement: Vec2,\n  localAddress: NodeAddress\n): BlockSequenceRenderSpec<B> {\n  const rawSpec =\n    getLongestPossibleSubsequenceSpecFromSequenceSpecStartingAtLocalAddress(\n      spec,\n      localAddress\n    );\n  const translated = translateBlockSequenceSpec(rawSpec, dragDisplacement);\n  return readdressBlockSequenceSpecAndMarkAsReachableAndRemovePendingEditMark(\n    translated,\n    [DRAGGEE_ADDRESS_PART]\n  );\n}\n\nfunction getLongestPossibleSubsequenceSpecFromSequenceSpecStartingAtLocalAddress<\n  B extends BlockEditorTypeParams\n>(\n  spec: BlockSequenceRenderSpec<B>,\n  localAddress: NodeAddress\n): BlockSequenceRenderSpec<B> {\n  if (localAddress.length === 0) {\n    return spec;\n  }\n\n  if (localAddress.length > 1) {\n    const commandIndex = expectNumericAddressPart(localAddress[0]);\n    return getLongestPossibleSubsequenceSpecFromBlockSpecStartingAtLocalAddress(\n      spec.blockSpecs[commandIndex],\n      localAddress.slice(1)\n    );\n  }\n\n  if (localAddress.length === 1) {\n    const dragIndex = expectNumericAddressPart(localAddress[0]);\n    const slicedSpecs = spec.blockSpecs.slice(dragIndex);\n    const lastSlicedSpec = slicedSpecs[slicedSpecs.length - 1];\n    const dummyAddress: NodeAddress = [DRAGGEE_ADDRESS_PART];\n    return {\n      kind: RenderSpecKind.BlockSequence,\n      sequence: spec.sequence.slice(dragIndex),\n      address: dummyAddress,\n      rbox: {\n        topLeft: slicedSpecs[0].rbox.topLeft,\n        dimensions: {\n          width: Math.max(...slicedSpecs.map((s) => s.rbox.dimensions.width)),\n          height:\n            lastSlicedSpec.rbox.topLeft.y +\n            lastSlicedSpec.rbox.dimensions.height -\n            slicedSpecs[0].rbox.topLeft.y,\n        },\n      },\n      blockSpecs: slicedSpecs,\n    };\n  }\n\n  console.error(\"Invalid local address.\", { spec, localAddress });\n  throw new Error(\"Invalid local address.\");\n}\n\nfunction getLongestPossibleSubsequenceSpecFromBlockSpecStartingAtLocalAddress<\n  B extends BlockEditorTypeParams\n>(\n  spec: BlockRenderSpec<B>,\n  localAddress: NodeAddress\n): BlockSequenceRenderSpec<B> {\n  if (localAddress.length === 0) {\n    const dummySequenceAddress: NodeAddress = spec.address.slice(0, -1);\n    return {\n      kind: RenderSpecKind.BlockSequence,\n      sequence: [spec.block],\n      address: dummySequenceAddress,\n      blockSpecs: [spec],\n      rbox: spec.rbox,\n    };\n  }\n\n  if (localAddress[0] === ARG_EXPRESSION_ADDRESS_PART) {\n    const subexpressionIndex = expectNumericAddressPart(localAddress[1]);\n    const subexpression = spec.subexpressionSpecs[subexpressionIndex];\n\n    if (subexpression.kind === RenderSpecKind.Literal) {\n      throw new Error(\n        \"Impossible: a block literal node is on the draggee path.\"\n      );\n    }\n\n    return getLongestPossibleSubsequenceSpecFromBlockSpecStartingAtLocalAddress(\n      subexpression,\n      localAddress.slice(2)\n    );\n  }\n\n  if (localAddress[0] === ARG_COMMAND_SEQUENCE_ADDRESS_PART) {\n    const subsequenceIndex = expectNumericAddressPart(localAddress[1]);\n    const subsequenceSpec = spec.subsequenceSpecs[subsequenceIndex];\n    return getLongestPossibleSubsequenceSpecFromSequenceSpecStartingAtLocalAddress(\n      subsequenceSpec,\n      localAddress.slice(2)\n    );\n  }\n\n  console.error(\"Invalid local address.\", { spec, localAddress });\n  throw new Error(\"Invalid local address.\");\n}\n\nfunction getDataTouchRoleFromBlockAddress(address: NodeAddress): string {\n  return (\n    DATA_TOUCH_ROLES.blockAddressPrefix +\n    address.map(stringifyNodeAddressPart).join(\"_\")\n  );\n}\n\nfunction getDataTouchRoleFromDropdownAddress(address: NodeAddress): string {\n  return (\n    DATA_TOUCH_ROLES.dropdownAddressPrefix +\n    address.map(stringifyNodeAddressPart).join(\"_\")\n  );\n}\n\nfunction getDataTouchRoleFromLiteralAddress(address: NodeAddress): string {\n  return (\n    DATA_TOUCH_ROLES.literalAddressPrefix +\n    address.map(stringifyNodeAddressPart).join(\"_\")\n  );\n}\n\nfunction stringifyNodeAddressPart(part: NodeAddressPart): string {\n  if (typeof part === \"string\" && isNodeAddressPartString(part)) {\n    return part;\n  }\n\n  if (Number.isInteger(part) && part >= 0) {\n    return String(part);\n  }\n\n  throw new Error(\n    `Expected address part to be a non-negative integer or a NodeAddressPartString, but got: ${String(\n      part\n    )}.`\n  );\n}\n\nfunction getBlockAddressFromDataTouchRole(role: string): null | NodeAddress {\n  if (!role.startsWith(DATA_TOUCH_ROLES.blockAddressPrefix)) {\n    return null;\n  }\n\n  const parts = role\n    .slice(DATA_TOUCH_ROLES.blockAddressPrefix.length)\n    .split(\"_\");\n  const parsed = parts.map(parseNodeAddressPart);\n  if (parsed.some((part) => part === null)) {\n    return null;\n  }\n\n  return parsed as NodeAddress;\n}\n\nfunction getLiteralAddressFromDataTouchRole(role: string): null | NodeAddress {\n  if (!role.startsWith(DATA_TOUCH_ROLES.literalAddressPrefix)) {\n    return null;\n  }\n\n  const parts = role\n    .slice(DATA_TOUCH_ROLES.literalAddressPrefix.length)\n    .split(\"_\");\n  const parsed = parts.map(parseNodeAddressPart);\n  if (parsed.some((part) => part === null)) {\n    return null;\n  }\n\n  return parsed as NodeAddress;\n}\n\nfunction getDropdownAddressFromDataTouchRole(role: string): null | NodeAddress {\n  if (!role.startsWith(DATA_TOUCH_ROLES.dropdownAddressPrefix)) {\n    return null;\n  }\n\n  const parts = role\n    .slice(DATA_TOUCH_ROLES.dropdownAddressPrefix.length)\n    .split(\"_\");\n  const parsed = parts.map(parseNodeAddressPart);\n  if (parsed.some((part) => part === null)) {\n    return null;\n  }\n\n  return parsed as NodeAddress;\n}\n\nfunction parseNodeAddressPart(part: string): null | NodeAddressPart {\n  if (isNodeAddressPartString(part)) {\n    return part;\n  }\n\n  const asNumber = Number.parseInt(part, 10);\n  if (Number.isInteger(asNumber) && asNumber >= 0) {\n    return asNumber;\n  }\n\n  return null;\n}\n\nfunction isNodeAddressPartString(s: string): s is NodeAddressPartString {\n  return Boolean(NODE_ADDRESS_PART_STRINGS[s as NodeAddressPartString]);\n}\n\nfunction getTouchRoleAtClientPosition(\n  clientPosition: Vec2,\n  editorComponentInstanceUid: string\n): null | string {\n  const root = document.getElementById(\n    editorComponentInstanceUid + DOM_ID_SUFFIXES.root\n  );\n  if (root === null) {\n    return null;\n  }\n\n  const elements = document.elementsFromPoint(\n    clientPosition.x,\n    clientPosition.y\n  );\n  for (const element of elements) {\n    const role = getTouchRoleOrNearestAncestorTouchRole(element);\n    if (role !== null && root.contains(element)) {\n      return role;\n    }\n  }\n  return null;\n}\n\nfunction getTouchRoleOrNearestAncestorTouchRole(\n  element: Element\n): null | string {\n  let current: Element | null = element;\n  while (current !== null) {\n    const role = current.getAttribute(\"data-touch-role\");\n    if (role !== null && role.length > 0) {\n      return role;\n    }\n\n    current = current.parentElement;\n  }\n\n  return null;\n}\n\nexport function getCanvasItemRenderSpecs<B extends BlockEditorTypeParams>(\n  editorProps: BlockEditorProps<B>\n): readonly BlockSequenceRenderSpec<B>[] {\n  const { state } = editorProps;\n  const draggeeSpec = getDraggeeSpecOrNull(editorProps);\n  const { uiTouch: nodeTouch } = state;\n  const insertionMark: null | InsertionMark<B> =\n    nodeTouch !== null &&\n    nodeTouch.kind === UiTouchStateKind.BlockDrag &&\n    nodeTouch.hasPositionChangedSinceDragStart &&\n    nodeTouch.insertionMarkAddress !== null &&\n    draggeeSpec !== null\n      ? {\n          address: nodeTouch.insertionMarkAddress,\n          draggee: draggeeSpec.sequence,\n        }\n      : null;\n  const draggeeOriginalAddress =\n    nodeTouch !== null && nodeTouch.kind === UiTouchStateKind.BlockDrag\n      ? nodeTouch.draggeeOriginalAddress\n      : null;\n  const hasDragPositionChangedSinceDragStart =\n    nodeTouch !== null && nodeTouch.kind === UiTouchStateKind.BlockDrag\n      ? nodeTouch.hasPositionChangedSinceDragStart\n      : false;\n  const dropdownMenuDropdownAddress =\n    state.dropdownMenu === null ? null : state.dropdownMenu.dropdownAddress;\n\n  return editorProps.state.canvas.items.map((item, i) =>\n    getCanvasItemRenderSpec({\n      editorProps,\n      item,\n      address: [CANVAS_ADDRESS_PART, i],\n      insertionMark,\n      draggeeOriginalAddress,\n      hasDragPositionChangedSinceDragStart,\n      dropdownMenuDropdownAddress,\n    })\n  );\n}\n\nfunction getDraggeeSpecOrNull<B extends BlockEditorTypeParams>(\n  editorProps: BlockEditorProps<B>\n): null | BlockSequenceRenderSpec<B> {\n  const { uiTouch: nodeTouch } = editorProps.state;\n  if (!(nodeTouch !== null && nodeTouch.kind === UiTouchStateKind.BlockDrag)) {\n    return null;\n  }\n\n  return getDraggeeSpec(editorProps, nodeTouch);\n}\n\nfunction getDraggeeSpec<B extends BlockEditorTypeParams>(\n  editorProps: BlockEditorProps<B>,\n  drag: BlockDragState\n): BlockSequenceRenderSpec<B> {\n  const { canvas } = editorProps.state;\n\n  const { draggeeOriginalAddress } = drag;\n  const dragDisplacement = subVec(\n    drag.currentClientPosition,\n    drag.startClientPosition\n  );\n\n  if (draggeeOriginalAddress[0] === PALETTE_ADDRESS_PART) {\n    const scrollDisplacement =\n      canvas.scrollInProgress === null\n        ? canvas.scroll\n        : addVec(\n            canvas.scroll,\n            subVec(\n              canvas.scrollInProgress.currentClientPosition,\n              canvas.scrollInProgress.startClientPosition\n            )\n          );\n    const totalDisplacement = subVec(dragDisplacement, scrollDisplacement);\n    const draggeeSpecInOriginalPosition =\n      getPaletteBlockRenderSpecs(editorProps)[\n        expectNumericAddressPart(draggeeOriginalAddress[1])\n      ];\n    const translatedSpec = translateBlockSpec(\n      draggeeSpecInOriginalPosition,\n      totalDisplacement\n    );\n\n    const dummyAddress: NodeAddress = [DRAGGEE_ADDRESS_PART];\n    return readdressBlockSequenceSpecAndMarkAsReachableAndRemovePendingEditMark(\n      {\n        kind: RenderSpecKind.BlockSequence,\n        sequence: [translatedSpec.block],\n        address: dummyAddress,\n        blockSpecs: [translatedSpec],\n        rbox: translatedSpec.rbox,\n      },\n      [DRAGGEE_ADDRESS_PART]\n    );\n  }\n\n  if (draggeeOriginalAddress[0] === CANVAS_ADDRESS_PART) {\n    const { state } = editorProps;\n    const itemIndex = expectNumericAddressPart(draggeeOriginalAddress[1]);\n    const canvasItemSpec = getCanvasItemRenderSpec({\n      editorProps,\n      item: state.canvas.items[itemIndex],\n      address: [CANVAS_ADDRESS_PART, itemIndex],\n      insertionMark: null,\n      draggeeOriginalAddress: null,\n      hasDragPositionChangedSinceDragStart: false,\n      dropdownMenuDropdownAddress: null,\n    });\n    const totalDisplacement = dragDisplacement;\n    return getDraggeeFromBlockSequenceUsingLocalAddress(\n      canvasItemSpec,\n      totalDisplacement,\n      draggeeOriginalAddress.slice(2)\n    );\n  }\n\n  throw new Error(\n    `Impossible draggee address: [${draggeeOriginalAddress\n      .map(String)\n      .join(\", \")}]`\n  );\n}\n\nexport function getPaletteBlockRenderSpecs<B extends BlockEditorTypeParams>(\n  editorProps: BlockEditorProps<B>\n): readonly BlockRenderSpec<B>[] {\n  const { state } = editorProps;\n  const { sizing, blockDefs } = editorProps.config;\n  const { blockKinds, scroll, scrollInProgress } = state.palette;\n  const totalScroll =\n    scrollInProgress === null\n      ? scroll\n      : addVec(\n          scroll,\n          subVec(\n            scrollInProgress.currentClientPosition,\n            scrollInProgress.startClientPosition\n          )\n        );\n  let y = totalScroll.y + sizing.paletteTopPadding;\n  const specs: BlockRenderSpec<B>[] = [];\n  for (let i = 0; i < blockKinds.length; ++i) {\n    const blockKind = blockKinds[i];\n    const spec = getBlockRenderSpec({\n      editorProps,\n      position: { x: totalScroll.x + sizing.paletteLeftPadding, y },\n      block: {\n        isLiteral: false,\n        kind: blockKind,\n        args: blockDefs[blockKind].defaultArgs,\n      },\n      address: [PALETTE_ADDRESS_PART, i],\n      insertionMark: null,\n      draggeeOriginalAddress:\n        state.uiTouch !== null &&\n        state.uiTouch.kind === UiTouchStateKind.BlockDrag\n          ? state.uiTouch.draggeeOriginalAddress\n          : null,\n      hasDragPositionChangedSinceDragStart:\n        state.uiTouch !== null &&\n        state.uiTouch.kind === UiTouchStateKind.BlockDrag\n          ? state.uiTouch.hasPositionChangedSinceDragStart\n          : false,\n      dropdownMenuDropdownAddress: null,\n      isUnreachable: false,\n    });\n    specs.push(spec);\n\n    y += spec.rbox.dimensions.height + sizing.paletteInterblockMargin;\n  }\n  return specs;\n}\n\nfunction getInsertionMarkAddressBasedOnDraggee<B extends BlockEditorTypeParams>(\n  editorProps: BlockEditorProps<B>,\n  canvasItemSpecs: readonly BlockSequenceRenderSpec<B>[],\n  draggeeSpec: BlockSequenceRenderSpec<B>,\n  draggeeOriginalAddress: NodeAddress,\n  dragCurrentClientPosition: Vec2\n): null | NodeAddress {\n  if (\n    !isPointInBlockCanvasDomElement(\n      dragCurrentClientPosition,\n      editorProps.config.componentInstanceUid\n    )\n  ) {\n    return null;\n  }\n\n  const { blockDefs: defs } = editorProps.config;\n  const isQuery =\n    defs[draggeeSpec.sequence[0].kind].kind === BlockDefKind.Query;\n\n  if (isQuery) {\n    return getQueryInsertionMarkAddressBasedOnDraggeeAssumingDragIsInBlockCanvas(\n      editorProps,\n      canvasItemSpecs,\n      draggeeSpec\n    );\n  }\n\n  return getCommandInsertionMarkAddressBasedOnDraggeeAssumingDragIsInBlockCanvas(\n    editorProps,\n    canvasItemSpecs,\n    draggeeSpec,\n    draggeeOriginalAddress\n  );\n}\n\nfunction getQueryInsertionMarkAddressBasedOnDraggeeAssumingDragIsInBlockCanvas<\n  B extends BlockEditorTypeParams\n>(\n  editorProps: BlockEditorProps<B>,\n  canvasItemSpecs: readonly BlockSequenceRenderSpec<B>[],\n  draggeeSpec: BlockSequenceRenderSpec<B>\n): null | NodeAddress {\n  const { snapHorizontalRange, snapVerticalRange } = editorProps.config.sizing;\n\n  const candidates = canvasItemSpecs.flatMap(\n    getQueryInsertionMarkCandidatesFromBlockSequenceSpec\n  );\n\n  let closest = null;\n  let minSquareDistance = Infinity;\n  for (const candidate of candidates) {\n    const displacement = getDisplacementBetweenQueryBodyLeftCircleCenters(\n      candidate.rbox,\n      draggeeSpec.rbox\n    );\n    const squareDistance =\n      displacement.x * displacement.x + displacement.y * displacement.y;\n    if (\n      squareDistance < minSquareDistance &&\n      Math.abs(displacement.x) <= snapHorizontalRange &&\n      Math.abs(displacement.y) <= snapVerticalRange\n    ) {\n      closest = candidate.address;\n      minSquareDistance = squareDistance;\n    }\n  }\n\n  return closest;\n}\n\nfunction getQueryInsertionMarkCandidatesFromBlockSpec<\n  B extends BlockEditorTypeParams\n>(spec: BlockRenderSpec<B>): readonly QueryInsertionMarkCandidate[] {\n  const candidates: QueryInsertionMarkCandidate[] = [];\n\n  for (const subSpec of spec.subexpressionSpecs) {\n    if (subSpec.kind === RenderSpecKind.Literal) {\n      const literalSpec: LiteralRenderSpec<B> = subSpec;\n      candidates.push({\n        address: literalSpec.address,\n        rbox: literalSpec.rbox,\n      });\n      continue;\n    }\n\n    candidates.push(...getQueryInsertionMarkCandidatesFromBlockSpec(subSpec));\n  }\n\n  for (const subSpec of spec.subsequenceSpecs) {\n    candidates.push(\n      ...getQueryInsertionMarkCandidatesFromBlockSequenceSpec(subSpec)\n    );\n  }\n\n  return candidates;\n}\n\nfunction getQueryInsertionMarkCandidatesFromBlockSequenceSpec<\n  B extends BlockEditorTypeParams\n>(spec: BlockSequenceRenderSpec<B>): readonly QueryInsertionMarkCandidate[] {\n  return spec.blockSpecs.flatMap(getQueryInsertionMarkCandidatesFromBlockSpec);\n}\n\nfunction getDisplacementBetweenQueryBodyLeftCircleCenters(\n  a: Rectangle,\n  b: Rectangle\n): Vec2 {\n  const aRadius = 0.5 * a.dimensions.height;\n  const aCenterX = a.topLeft.x + aRadius;\n  const aCenterY = a.topLeft.y + aRadius;\n\n  const bRadius = 0.5 * b.dimensions.height;\n  const bCenterX = b.topLeft.x + bRadius;\n  const bCenterY = b.topLeft.y + bRadius;\n\n  const dx = aCenterX - bCenterX;\n  const dy = aCenterY - bCenterY;\n\n  return { x: dx, y: dy };\n}\n\nfunction getCommandInsertionMarkAddressBasedOnDraggeeAssumingDragIsInBlockCanvas<\n  B extends BlockEditorTypeParams\n>(\n  editorProps: BlockEditorProps<B>,\n  canvasItemSpecs: readonly BlockSequenceRenderSpec<B>[],\n  draggeeSpec: BlockSequenceRenderSpec<B>,\n  draggeeOriginalAddress: NodeAddress\n): null | NodeAddress {\n  const naiveAddress =\n    getCommandInsertionMarkAddressBasedOnDraggeeIgnoringSocketFit(\n      editorProps,\n      canvasItemSpecs,\n      draggeeSpec,\n      draggeeOriginalAddress\n    );\n  if (naiveAddress === null) {\n    return null;\n  }\n\n  const afterInsertion = applyDragToCanvasItems({\n    editorProps,\n    canvasItems: canvasItemSpecs.map(getCanvasItemFromSpec),\n    draggeeSpec,\n    draggeeOriginalAddress,\n    insertionAddress: naiveAddress,\n  });\n  if (\n    doCanvasItemsContainIllegalSocketMatches(\n      afterInsertion,\n      editorProps.config.blockDefs\n    )\n  ) {\n    return null;\n  }\n\n  const { canvas } = editorProps.state;\n  const totalScroll =\n    canvas.scrollInProgress === null\n      ? canvas.scroll\n      : addVec(\n          canvas.scroll,\n          subVec(\n            canvas.scrollInProgress.currentClientPosition,\n            canvas.scrollInProgress.startClientPosition\n          )\n        );\n  const { canvasBounds } = editorProps.config.sizing;\n  const translatedCanvasBounds = {\n    topLeft: subVec(canvasBounds.topLeft, totalScroll),\n    dimensions: canvasBounds.dimensions,\n  };\n  if (!doRectanglesOverlap(draggeeSpec.rbox, translatedCanvasBounds)) {\n    return null;\n  }\n\n  return naiveAddress;\n}\n\nfunction getCanvasItemFromSpec<B extends BlockEditorTypeParams>(\n  spec: BlockSequenceRenderSpec<B>\n): CanvasItem<B> {\n  return {\n    position: spec.rbox.topLeft,\n    content: spec.sequence,\n  };\n}\n\nfunction applyDragToCanvasItems<B extends BlockEditorTypeParams>({\n  editorProps,\n  canvasItems: originalCanvasItems,\n  draggeeSpec,\n  draggeeOriginalAddress,\n  insertionAddress,\n}: {\n  editorProps: BlockEditorProps<B>;\n  canvasItems: readonly CanvasItem<B>[];\n  draggeeSpec: BlockSequenceRenderSpec<B>;\n  draggeeOriginalAddress: NodeAddress;\n  insertionAddress: null | NodeAddress;\n}): readonly CanvasItem<B>[] {\n  // We don't prune empty block sequences until right before we return,\n  // since doing so could invalidate the insertion address.\n  const afterRemoval =\n    draggeeOriginalAddress[0] === CANVAS_ADDRESS_PART\n      ? applyRemovalToCanvasItemsWithoutPruningEmptyBlockSequences(\n          originalCanvasItems,\n          draggeeOriginalAddress\n        )\n      : originalCanvasItems;\n\n  // If the dropped block is outside the canvas bounds, we simply discard it.\n  const { uiTouch } = editorProps.state;\n  const isBlockDragOutsideCanvas =\n    uiTouch !== null &&\n    uiTouch.kind === UiTouchStateKind.BlockDrag &&\n    !isPointInBlockCanvasDomElement(\n      uiTouch.currentClientPosition,\n      editorProps.config.componentInstanceUid\n    );\n  if (isBlockDragOutsideCanvas) {\n    return doesBlockSequenceContainUndeletableBlock(\n      draggeeSpec.sequence,\n      editorProps.config.blockDefs\n    )\n      ? originalCanvasItems\n      : afterRemoval.filter((item) => item.content.length > 0);\n  }\n\n  // We either _insert_ the draggee, or we simply _release_ it as-is.\n\n  const draggee = draggeeSpec.sequence;\n  const afterInsertionOrDisplacement =\n    // If the draggee is close to a compatible block,\n    // we insert it there.\n    insertionAddress !== null\n      ? applyInsertionToCanvasItems(\n          editorProps,\n          afterRemoval,\n          draggee,\n          insertionAddress\n        )\n      : // Otherwise, we release it.\n        afterRemoval.concat([getCanvasItemFromSpec(draggeeSpec)]);\n\n  return afterInsertionOrDisplacement.filter((item) => item.content.length > 0);\n}\n\nfunction applyRemovalToCanvasItemsWithoutPruningEmptyBlockSequences<\n  B extends BlockEditorTypeParams\n>(\n  canvasItems: readonly CanvasItem<B>[],\n  removalAddress: NodeAddress\n): readonly CanvasItem<B>[] {\n  return canvasItems.map((originalItem, itemIndex) => {\n    const localAddress: null | NodeAddress = withoutPrefix(\n      [CANVAS_ADDRESS_PART, itemIndex],\n      removalAddress\n    );\n    const updatedContent = removeNodeAtLocalAddressFromBlockSequence(\n      originalItem.content,\n      localAddress\n    );\n    return { position: originalItem.position, content: updatedContent };\n  });\n}\n\nfunction removeNodeAtLocalAddressFromBlock<B extends BlockEditorTypeParams>(\n  block: Block<B>,\n  localAddress: null | NodeAddress\n): Block<B> {\n  if (localAddress === null) {\n    return block;\n  }\n\n  if (localAddress.length < 2) {\n    throw new Error(\n      \"Illegal localAddress passed to removeNodeAtLocalAddressFromBlock.\"\n    );\n  }\n\n  if (\n    localAddress.length === 2 &&\n    localAddress[0] === ARG_EXPRESSION_ADDRESS_PART\n  ) {\n    const removalIndex = expectNumericAddressPart(localAddress[1]);\n    return {\n      ...block,\n      args: {\n        ...block.args,\n        expressions: block.args.expressions.map((original, i) =>\n          i === removalIndex ? { isLiteral: true, source: \"\" } : original\n        ),\n      },\n    };\n  }\n\n  return {\n    isLiteral: false,\n    kind: block.kind,\n    args: {\n      dropdowns: block.args.dropdowns,\n      expressions: block.args.expressions.map((expression, expressionIndex) =>\n        expression.isLiteral\n          ? expression\n          : removeNodeAtLocalAddressFromBlock(\n              expression,\n              withoutPrefix(\n                [ARG_EXPRESSION_ADDRESS_PART, expressionIndex],\n                localAddress\n              )\n            )\n      ),\n      sequences: block.args.sequences.map((sequence, sequenceIndex) =>\n        removeNodeAtLocalAddressFromBlockSequence(\n          sequence,\n          withoutPrefix(\n            [ARG_COMMAND_SEQUENCE_ADDRESS_PART, sequenceIndex],\n            localAddress\n          )\n        )\n      ),\n    },\n  };\n}\n\nfunction removeNodeAtLocalAddressFromBlockSequence<\n  B extends BlockEditorTypeParams\n>(\n  sequence: BlockSequence<B>,\n  localAddress: null | NodeAddress\n): BlockSequence<B> {\n  if (localAddress === null) {\n    return sequence;\n  }\n\n  if (localAddress.length < 1) {\n    throw new Error(\n      \"Illegal localAddress passed to removeNodeAtLocalAddressFromBlockSequence.\"\n    );\n  }\n\n  if (localAddress.length === 1) {\n    const removalIndex = expectNumericAddressPart(localAddress[0]);\n    return sequence.slice(0, removalIndex);\n  }\n\n  return sequence.map((original, i) =>\n    removeNodeAtLocalAddressFromBlock(\n      original,\n      withoutPrefix([i], localAddress)\n    )\n  );\n}\n\nfunction applyInsertionToCanvasItems<B extends BlockEditorTypeParams>(\n  editorProps: BlockEditorProps<B>,\n  canvasItems: readonly CanvasItem<B>[],\n  draggee: BlockSequence<B>,\n  insertionAddress: NodeAddress\n): readonly CanvasItem<B>[] {\n  return canvasItems.map((originalItem, itemIndex) => {\n    const localAddress: null | NodeAddress = withoutPrefix(\n      [CANVAS_ADDRESS_PART, itemIndex],\n      insertionAddress\n    );\n    const updatedContent = insertNodeAtLocalAddressIntoBlockSequence(\n      originalItem.content,\n      draggee,\n      localAddress\n    );\n\n    const adjustedPosition =\n      localAddress !== null &&\n      localAddress.length === 1 &&\n      localAddress[0] === 0\n        ? subVec(originalItem.position, {\n            x: 0,\n            y: getBlockSequenceRenderSpec({\n              editorProps,\n              position: { x: 0, y: 0 },\n              address: insertionAddress,\n              insertionMark: null,\n              draggeeOriginalAddress: null,\n              hasDragPositionChangedSinceDragStart: false,\n              dropdownMenuDropdownAddress: null,\n              isUnreachable: false,\n              sequence: draggee,\n            }).rbox.dimensions.height,\n          })\n        : originalItem.position;\n    return { position: adjustedPosition, content: updatedContent };\n  });\n}\n\nfunction insertNodeAtLocalAddressIntoBlock<B extends BlockEditorTypeParams>(\n  block: Block<B>,\n  draggee: BlockSequence<B>,\n  localAddress: null | NodeAddress\n): Block<B> {\n  if (localAddress === null) {\n    return block;\n  }\n\n  if (localAddress.length < 2) {\n    throw new Error(\n      \"Illegal localAddress passed to insertNodeAtLocalAddressIntoBlock.\"\n    );\n  }\n\n  if (\n    localAddress.length === 2 &&\n    localAddress[0] === ARG_EXPRESSION_ADDRESS_PART\n  ) {\n    if (draggee.length > 1) {\n      throw new Error(\n        \"Impossible: a block sequence with more than one block is being inserted into an expression slot.\"\n      );\n    }\n\n    const insertionIndex = expectNumericAddressPart(localAddress[1]);\n    return {\n      ...block,\n      args: {\n        ...block.args,\n        expressions: block.args.expressions.map((original, index) =>\n          index === insertionIndex ? draggee[0] : original\n        ),\n      },\n    };\n  }\n\n  return {\n    isLiteral: false,\n    kind: block.kind,\n    args: {\n      dropdowns: block.args.dropdowns,\n      expressions: block.args.expressions.map((expression, expressionIndex) =>\n        expression.isLiteral\n          ? expression\n          : insertNodeAtLocalAddressIntoBlock(\n              expression,\n              draggee,\n              withoutPrefix(\n                [ARG_EXPRESSION_ADDRESS_PART, expressionIndex],\n                localAddress\n              )\n            )\n      ),\n      sequences: block.args.sequences.map((sequence, sequenceIndex) =>\n        insertNodeAtLocalAddressIntoBlockSequence(\n          sequence,\n          draggee,\n          withoutPrefix(\n            [ARG_COMMAND_SEQUENCE_ADDRESS_PART, sequenceIndex],\n            localAddress\n          )\n        )\n      ),\n    },\n  };\n}\n\nfunction insertNodeAtLocalAddressIntoBlockSequence<\n  B extends BlockEditorTypeParams\n>(\n  sequence: BlockSequence<B>,\n  draggee: BlockSequence<B>,\n  localAddress: null | NodeAddress\n): BlockSequence<B> {\n  if (localAddress === null) {\n    return sequence;\n  }\n\n  if (localAddress.length < 1) {\n    throw new Error(\n      \"Illegal localAddress passed to insertNodeAtLocalAddressIntoBlockSequence.\"\n    );\n  }\n\n  if (localAddress.length === 1) {\n    const insertionIndex = expectNumericAddressPart(localAddress[0]);\n    return [\n      ...sequence.slice(0, insertionIndex),\n      ...draggee,\n      ...sequence.slice(insertionIndex),\n    ];\n  }\n\n  return sequence.map((original, i) =>\n    insertNodeAtLocalAddressIntoBlock(\n      original,\n      draggee,\n      withoutPrefix([i], localAddress)\n    )\n  );\n}\n\nfunction doCanvasItemsContainIllegalSocketMatches<\n  B extends BlockEditorTypeParams\n>(canvasItems: readonly CanvasItem<B>[], defs: BlockDefs<B>): boolean {\n  return canvasItems.some((item) => {\n    const blocks = item.content;\n    if (\n      blocks.length === 0 ||\n      defs[blocks[0].kind].kind === BlockDefKind.Query\n    ) {\n      return false;\n    }\n    const firstCommand = blocks[0];\n    if (blocks.length === 1) {\n      return doBlockSubsequencesContainMaleOrNonFinalFemaleSocket(\n        firstCommand,\n        defs\n      );\n    }\n\n    const firstCommandDef = defs[firstCommand.kind];\n    const isFirstCommandIllegal =\n      (firstCommandDef.kind === BlockDefKind.Command &&\n        !firstCommandDef.hasMaleSocket) ||\n      doBlockSubsequencesContainMaleOrNonFinalFemaleSocket(firstCommand, defs);\n    if (isFirstCommandIllegal) {\n      return true;\n    }\n\n    const { length } = blocks;\n\n    return blocks.slice(1).some((command, commandIndexMinusOne) => {\n      const def = defs[command.kind];\n      if (def.kind !== BlockDefKind.Command) {\n        return false;\n      }\n\n      const commandIndex = commandIndexMinusOne + 1;\n      const isMale = def.hasMaleSocket && !def.hasFemaleSocket;\n      const isNonFinalFemaleSocket =\n        !def.hasMaleSocket &&\n        def.hasFemaleSocket &&\n        commandIndex !== length - 1;\n      return (\n        isMale ||\n        isNonFinalFemaleSocket ||\n        doBlockSubsequencesContainMaleOrNonFinalFemaleSocket(command, defs)\n      );\n    });\n  });\n}\n\nfunction doBlockSubsequencesContainMaleOrNonFinalFemaleSocket<\n  B extends BlockEditorTypeParams\n>(block: Block<B>, defs: BlockDefs<B>): boolean {\n  return block.args.sequences.some((sequence) =>\n    doesBlockSequenceContainMaleOrNonFinalFemaleSocket(sequence, defs)\n  );\n}\n\nfunction doesBlockSequenceContainMaleOrNonFinalFemaleSocket<\n  B extends BlockEditorTypeParams\n>(sequence: BlockSequence<B>, defs: BlockDefs<B>): boolean {\n  const { length } = sequence;\n  return sequence.some((command, commandIndex) => {\n    const def = defs[command.kind];\n    if (def.kind !== BlockDefKind.Command) {\n      return false;\n    }\n\n    // The code below has some seemingly unnecessary type annotations.\n    // However, at the time of writing, if I remove them,\n    // the linter will trigger a @typescript-eslint/strict-boolean-expressions warning.\n    // I believe this is a false positive (i.e., bug).\n    // But until it gets fixed, I'll keep the type annotations.\n    const { hasFemaleSocket, hasMaleSocket } =\n      identityFunctionToForceTypesafeCast<{\n        hasFemaleSocket: boolean;\n        hasMaleSocket: boolean;\n      }>(def);\n    const isMale: boolean = hasMaleSocket && !hasFemaleSocket;\n    const isNonFinalFemaleSocket =\n      !hasMaleSocket && hasFemaleSocket && commandIndex !== length - 1;\n    return (\n      isMale ||\n      isNonFinalFemaleSocket ||\n      doBlockSubsequencesContainMaleOrNonFinalFemaleSocket(command, defs)\n    );\n  });\n}\n\nfunction getCommandInsertionMarkAddressBasedOnDraggeeIgnoringSocketFit<\n  B extends BlockEditorTypeParams\n>(\n  editorProps: BlockEditorProps<B>,\n  canvasItemSpecs: readonly BlockSequenceRenderSpec<B>[],\n  draggeeSpec: BlockSequenceRenderSpec<B>,\n  draggeeOriginalAddress: NodeAddress\n): null | NodeAddress {\n  for (let i = canvasItemSpecs.length - 1; i >= 0; --i) {\n    const address =\n      getCommandInsertionMarkAddressBasedOnDraggeeWithinBlocklikeSpec(\n        editorProps,\n        canvasItemSpecs[i],\n        draggeeSpec,\n        canvasItemSpecs,\n        draggeeOriginalAddress\n      );\n    if (address !== null) {\n      return address;\n    }\n  }\n\n  return null;\n}\n\nfunction getCommandInsertionMarkAddressBasedOnDraggeeWithinBlocklikeSpec<\n  B extends BlockEditorTypeParams\n>(\n  editorProps: BlockEditorProps<B>,\n  spec: BlockSequenceRenderSpec<B>,\n  draggeeSpec: BlockSequenceRenderSpec<B>,\n  canvasItemRenderSpecs: readonly BlockSequenceRenderSpec<B>[],\n  draggeeOriginalAddress: NodeAddress\n): null | NodeAddress {\n  const sortedCandidates =\n    getCommandInsertionMarkCandidatesFromBlockSequenceSpec(\n      spec,\n      draggeeSpec,\n      canvasItemRenderSpecs,\n      draggeeOriginalAddress\n    )\n      .slice()\n      .sort((a, b) => a.rbox.topLeft.y - b.rbox.topLeft.y);\n\n  if (sortedCandidates.length === 0) {\n    return null;\n  }\n\n  const { snapHorizontalRange, snapVerticalRange } = editorProps.config.sizing;\n\n  const draggeeLeft = draggeeSpec.rbox.topLeft.x;\n  const draggeeTop = draggeeSpec.rbox.topLeft.y;\n  const draggeeBottom = draggeeTop + draggeeSpec.rbox.dimensions.height;\n\n  const topCandidate = sortedCandidates[0];\n  const topCandidateLeft = topCandidate.rbox.topLeft.x;\n  const topCandidateTop = topCandidate.rbox.topLeft.y;\n  const xDistanceFromTopCandidate = Math.abs(draggeeLeft - topCandidateLeft);\n  if (\n    draggeeTop <= topCandidateTop &&\n    Math.max(0, topCandidateTop - draggeeBottom) <= snapVerticalRange &&\n    xDistanceFromTopCandidate <= snapHorizontalRange\n  ) {\n    return topCandidate.topAddress;\n  }\n\n  const bottomCandidate = sortedCandidates[sortedCandidates.length - 1];\n  const bottomCandidateLeft = bottomCandidate.rbox.topLeft.x;\n  const bottomCandidateTop = bottomCandidate.rbox.topLeft.y;\n  const bottomCandidateBottom =\n    bottomCandidateTop + bottomCandidate.rbox.dimensions.height;\n  const xDistanceFromBottomCandidate = Math.abs(\n    draggeeLeft - bottomCandidateLeft\n  );\n  if (\n    draggeeTop >= bottomCandidateTop &&\n    Math.max(0, draggeeTop - bottomCandidateBottom) <= snapVerticalRange &&\n    xDistanceFromBottomCandidate <= snapHorizontalRange\n  ) {\n    return bottomCandidate.bottomAddress;\n  }\n\n  for (\n    let currentIndex = 1;\n    currentIndex < sortedCandidates.length;\n    ++currentIndex\n  ) {\n    const current = sortedCandidates[currentIndex];\n    const currentLeft = current.rbox.topLeft.x;\n    const currentTop = current.rbox.topLeft.y;\n    const previous = sortedCandidates[currentIndex - 1];\n    const previousLeft = previous.rbox.topLeft.x;\n    const previousTop = previous.rbox.topLeft.y;\n    const xDistance = Math.min(\n      Math.abs(draggeeLeft - currentLeft),\n      Math.abs(draggeeLeft - previousLeft)\n    );\n    if (\n      previousTop <= draggeeTop &&\n      draggeeTop <= currentTop &&\n      xDistance <= snapHorizontalRange\n    ) {\n      if (current.topAddress !== null) {\n        return current.topAddress;\n      }\n      return previous.bottomAddress;\n    }\n  }\n\n  return null;\n}\n\nfunction getCommandInsertionMarkCandidatesFromBlockSpec<\n  B extends BlockEditorTypeParams\n>(\n  spec: BlockRenderSpec<B>,\n  draggeeeSpec: BlockSequenceRenderSpec<B>,\n  canvasItemContents: readonly BlockSequenceRenderSpec<B>[],\n  draggeeOriginalAddress: NodeAddress\n): readonly CommandInsertionMarkCandidate[] {\n  if (\n    spec.address.length === 1 &&\n    spec.address[0] === INSERTION_MARK_ADDRESS_PART\n  ) {\n    return [];\n  }\n\n  const candidates: CommandInsertionMarkCandidate[] = [];\n\n  for (let toothIndex = 0; toothIndex < spec.teeth.length; ++toothIndex) {\n    const tooth = spec.teeth[toothIndex];\n    const topAddress = getToothTopAddress(\n      spec.address,\n      toothIndex,\n      canvasItemContents\n    );\n    const bottomAddress = getToothBottomAddress(\n      spec.address,\n      toothIndex,\n      toothIndex === spec.teeth.length - 1\n    );\n    candidates.push({ topAddress, bottomAddress, rbox: tooth.rbox });\n  }\n\n  for (const subSpec of spec.subsequenceSpecs) {\n    candidates.push(\n      ...getCommandInsertionMarkCandidatesFromBlockSequenceSpec(\n        subSpec,\n        draggeeeSpec,\n        canvasItemContents,\n        draggeeOriginalAddress\n      )\n    );\n  }\n\n  return candidates;\n}\n\nfunction getCommandInsertionMarkCandidatesFromBlockSequenceSpec<\n  B extends BlockEditorTypeParams\n>(\n  sequenceSpec: BlockSequenceRenderSpec<B>,\n  draggeeSpec: BlockSequenceRenderSpec<B>,\n  canvasItemRenderSpecs: readonly BlockSequenceRenderSpec<B>[],\n  draggeeOriginalAddress: NodeAddress\n): readonly CommandInsertionMarkCandidate[] {\n  return sequenceSpec.blockSpecs.flatMap((commandSpec) => {\n    return getCommandInsertionMarkCandidatesFromBlockSpec(\n      commandSpec,\n      draggeeSpec,\n      canvasItemRenderSpecs,\n      draggeeOriginalAddress\n    );\n  });\n}\n\nfunction getToothTopAddress<B extends BlockEditorTypeParams>(\n  commandAddress: NodeAddress,\n  toothIndex: number,\n  canvasItemRenderSpecs: readonly BlockSequenceRenderSpec<B>[]\n): null | NodeAddress {\n  if (toothIndex === 0) {\n    return commandAddress;\n  }\n\n  const sequenceAboveThisToothAddress = commandAddress.concat([\n    ARG_COMMAND_SEQUENCE_ADDRESS_PART,\n    toothIndex - 1,\n  ]);\n  const specForSequenceAboveThisTooth =\n    getBlockSequenceSpecFromAncestorBlockSequenceSpecAndLocalAddress(\n      canvasItemRenderSpecs[expectNumericAddressPart(commandAddress[1])],\n      sequenceAboveThisToothAddress.slice(2)\n    );\n\n  return sequenceAboveThisToothAddress.concat([\n    specForSequenceAboveThisTooth.blockSpecs.filter((spec) => {\n      const isInsertionMark =\n        spec.address.length === 1 &&\n        spec.address[0] === INSERTION_MARK_ADDRESS_PART;\n      return !isInsertionMark;\n    }).length,\n  ]);\n}\n\nfunction getBlockSequenceSpecFromAncestorBlockSequenceSpecAndLocalAddress<\n  B extends BlockEditorTypeParams\n>(\n  spec: BlockSequenceRenderSpec<B>,\n  localAddress: NodeAddress\n): BlockSequenceRenderSpec<B> {\n  if (localAddress.length === 0) {\n    return spec;\n  }\n\n  const subSpec = spec.blockSpecs.filter(\n    (spec) =>\n      !(\n        spec.address.length === 1 &&\n        spec.address[0] === INSERTION_MARK_ADDRESS_PART\n      )\n  )[expectNumericAddressPart(localAddress[0])];\n  return getBlockSequenceSpecFromAncestorBlockSpecAndLocalAddress(\n    subSpec,\n    localAddress.slice(1)\n  );\n}\n\nfunction getBlockSequenceSpecFromAncestorBlockSpecAndLocalAddress<\n  B extends BlockEditorTypeParams\n>(\n  spec: BlockRenderSpec<B>,\n  localAddress: NodeAddress\n): BlockSequenceRenderSpec<B> {\n  if (localAddress.length === 0) {\n    throw new Error(\"Invalid local address.\");\n  }\n\n  if (localAddress[0] === ARG_EXPRESSION_ADDRESS_PART) {\n    const subSpec =\n      spec.subexpressionSpecs[expectNumericAddressPart(localAddress[1])];\n    if (subSpec.kind === RenderSpecKind.Block) {\n      return getBlockSequenceSpecFromAncestorBlockSpecAndLocalAddress(\n        subSpec,\n        localAddress.slice(2)\n      );\n    }\n  }\n\n  if (localAddress[0] === ARG_COMMAND_SEQUENCE_ADDRESS_PART) {\n    const subSpec =\n      spec.subsequenceSpecs[expectNumericAddressPart(localAddress[1])];\n\n    return getBlockSequenceSpecFromAncestorBlockSequenceSpecAndLocalAddress(\n      subSpec,\n      localAddress.slice(2)\n    );\n  }\n\n  throw new Error(\"Invalid local address.\");\n}\n\nfunction getToothBottomAddress(\n  commandAddress: NodeAddress,\n  toothIndex: number,\n  isLastTooth: boolean\n): null | NodeAddress {\n  if (isLastTooth) {\n    const lastPart = expectNumericAddressPart(\n      commandAddress[commandAddress.length - 1]\n    );\n    return commandAddress.slice(0, -1).concat(lastPart + 1);\n  }\n\n  return commandAddress.concat([\n    ARG_COMMAND_SEQUENCE_ADDRESS_PART,\n    toothIndex,\n    0,\n  ]);\n}\n\nfunction doRectanglesOverlap(a: Rectangle, b: Rectangle): boolean {\n  const aLeft = a.topLeft.x;\n  const aRight = aLeft + a.dimensions.width;\n  const aTop = a.topLeft.y;\n  const aBottom = aTop + a.dimensions.height;\n\n  const bLeft = b.topLeft.x;\n  const bRight = bLeft + b.dimensions.width;\n  const bTop = b.topLeft.y;\n  const bBottom = bTop + b.dimensions.height;\n\n  return aLeft < bRight && aRight > bLeft && aTop < bBottom && aBottom > bTop;\n}\n\nexport function areNodeAddressesEqual(a: NodeAddress, b: NodeAddress): boolean {\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (let i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction doesBlockSequenceContainUndeletableBlock<\n  B extends BlockEditorTypeParams\n>(sequence: BlockSequence<B>, defs: BlockDefs<B>): boolean {\n  return sequence.some((block) =>\n    isBlockOrAnyDescendantUndeletable(block, defs)\n  );\n}\n\nfunction isBlockOrAnyDescendantUndeletable<B extends BlockEditorTypeParams>(\n  block: Block<B>,\n  defs: BlockDefs<B>\n): boolean {\n  const isUndeletable = !defs[block.kind].isDeletable;\n  if (isUndeletable) {\n    return true;\n  }\n\n  for (const expression of block.args.expressions) {\n    if (expression.isLiteral) {\n      continue;\n    }\n\n    if (isBlockOrAnyDescendantUndeletable(expression, defs)) {\n      return true;\n    }\n  }\n\n  for (const sequence of block.args.sequences) {\n    if (doesBlockSequenceContainUndeletableBlock(sequence, defs)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction areVectorsEqual(a: Vec2, b: Vec2): boolean {\n  return a.x === b.x && a.y === b.y;\n}\n\nfunction getSubexpressionParentBlockSpec<B extends BlockEditorTypeParams>(\n  props: BlockEditorProps<B>,\n  subexpressionAddress: NodeAddress\n): BlockRenderSpec<B> {\n  return getLongestPossibleSubsequenceSpecFromSequenceSpecStartingAtLocalAddress(\n    getCanvasItemRenderSpecs(props)[\n      expectNumericAddressPart(subexpressionAddress[1])\n    ],\n    subexpressionAddress.slice(2, -2)\n  ).blockSpecs[0];\n}\n\nfunction getDropdownParentBlockSpec<B extends BlockEditorTypeParams>(\n  props: BlockEditorProps<B>,\n  dropdownAddress: NodeAddress\n): BlockRenderSpec<B> {\n  return getLongestPossibleSubsequenceSpecFromSequenceSpecStartingAtLocalAddress(\n    getCanvasItemRenderSpecs(props)[\n      expectNumericAddressPart(dropdownAddress[1])\n    ],\n    dropdownAddress.slice(2, -2)\n  ).blockSpecs[0];\n}\n\nfunction DropdownMenu<B extends BlockEditorTypeParams>({\n  menu,\n  editorProps,\n}: {\n  menu: DropdownMenuState<B>;\n  editorProps: BlockEditorProps<B>;\n}): React.ReactElement {\n  const { sizing, colors, fonts } = editorProps.config;\n  const { dropdownAddress } = menu;\n  const dropdownParentBlockSpec = getDropdownParentBlockSpec(\n    editorProps,\n    dropdownAddress\n  );\n\n  const menuSpec = getDropdownMenuRenderSpec({ menu, editorProps });\n\n  const blockColorTriplet = dropdownParentBlockSpec.isUnreachable\n    ? colors.unreachableBlocks[dropdownParentBlockSpec.block.kind]\n    : colors.blocks[dropdownParentBlockSpec.block.kind];\n\n  const clipPath = {\n    topLeft: addVec(menuSpec.rbox.topLeft, {\n      x: sizing.blockDropdownMenuBorder,\n      y: sizing.blockDropdownMenuBorder,\n    }),\n    dimensions: {\n      width:\n        menuSpec.rbox.dimensions.width - 2 * sizing.blockDropdownMenuBorder,\n      height:\n        menuSpec.rbox.dimensions.height - 2 * sizing.blockDropdownMenuBorder,\n    },\n  };\n\n  return (\n    <>\n      <defs>\n        <clipPath\n          id={\n            editorProps.config.componentInstanceUid +\n            DOM_ID_SUFFIXES.dropdownMenuClipPath\n          }\n        >\n          <rect\n            x={clipPath.topLeft.x}\n            y={clipPath.topLeft.y}\n            rx={\n              sizing.blockDropdownMenuBorderRadius -\n              sizing.blockDropdownMenuBorder\n            }\n            ry={\n              sizing.blockDropdownMenuBorderRadius -\n              sizing.blockDropdownMenuBorder\n            }\n            width={clipPath.dimensions.width}\n            height={clipPath.dimensions.height}\n          />\n        </clipPath>\n      </defs>\n\n      <rect\n        x={menuSpec.rbox.topLeft.x}\n        y={menuSpec.rbox.topLeft.y}\n        rx={sizing.blockDropdownMenuBorderRadius}\n        ry={sizing.blockDropdownMenuBorderRadius}\n        width={menuSpec.rbox.dimensions.width}\n        height={menuSpec.rbox.dimensions.height}\n        fill={stringifyColor(blockColorTriplet.tertiary)}\n      />\n\n      <g\n        clipPath={`url(#${editorProps.config.componentInstanceUid}${DOM_ID_SUFFIXES.dropdownMenuClipPath})`}\n      >\n        {menuSpec.choiceSpecs.map((choiceSpec, choiceIndex) => (\n          <g\n            key={choiceIndex}\n            data-touch-role={\n              DATA_TOUCH_ROLES.dropdownChoicePrefix + choiceIndex\n            }\n          >\n            <rect\n              x={choiceSpec.rbox.topLeft.x}\n              y={choiceSpec.rbox.topLeft.y}\n              width={choiceSpec.rbox.dimensions.width}\n              height={choiceSpec.rbox.dimensions.height}\n              fill={stringifyColor(blockColorTriplet.primary)}\n            />\n\n            <text\n              x={choiceSpec.textRbox.topLeft.x}\n              y={choiceSpec.textRbox.topLeft.y}\n              dominantBaseline=\"middle\"\n              fontFamily={fonts.blockDropdownMenuFont}\n              fontSize={sizing.blockDropdownMenuTextSizePx}\n              fill={stringifyColor(colors.blockDropdownText)}\n            >\n              {choiceSpec.text}\n            </text>\n\n            {choiceIndex > 0 && (\n              <rect\n                x={choiceSpec.rbox.topLeft.x}\n                y={\n                  choiceSpec.rbox.topLeft.y + choiceSpec.rbox.dimensions.height\n                }\n                width={choiceSpec.rbox.dimensions.width}\n                height={sizing.blockDropdownMenuInterChoiceDividerHeight}\n                fill={stringifyColor(blockColorTriplet.tertiary)}\n              />\n            )}\n          </g>\n        ))}\n      </g>\n    </>\n  );\n}\n\nfunction getDropdownMenuRenderSpec<B extends BlockEditorTypeParams>({\n  menu,\n  editorProps,\n}: {\n  menu: DropdownMenuState<B>;\n  editorProps: BlockEditorProps<B>;\n}): DropdownMenuRenderSpec {\n  const { state } = editorProps;\n  const { sizing, fonts, dropdownTexts } = editorProps.config;\n  const { canvas } = state;\n  const totalCanvasScroll =\n    canvas.scrollInProgress === null\n      ? canvas.scroll\n      : addVec(\n          canvas.scroll,\n          subVec(\n            canvas.scrollInProgress.currentClientPosition,\n            canvas.scrollInProgress.startClientPosition\n          )\n        );\n  const { dropdownAddress } = menu;\n  const dropdownParentBlockSpec = getDropdownParentBlockSpec(\n    editorProps,\n    dropdownAddress\n  );\n  const dropdownIndex = expectNumericAddressPart(\n    dropdownAddress[dropdownAddress.length - 1]\n  );\n  const dropdownSpec = dropdownParentBlockSpec.dropdownSpecs[dropdownIndex];\n  const dropdownSvgCoords = addVec(\n    dropdownSpec.rbox.topLeft,\n    totalCanvasScroll\n  );\n  const dropdownSvgCenter = addVec(dropdownSvgCoords, {\n    x: 0.5 * dropdownSpec.rbox.dimensions.width,\n    y: 0.5 * dropdownSpec.rbox.dimensions.height,\n  });\n  const canvasCenter = addVec(sizing.canvasBounds.topLeft, {\n    x: 0.5 * sizing.canvasBounds.dimensions.width,\n    y: 0.5 * sizing.canvasBounds.dimensions.height,\n  });\n  const totalMenuScroll =\n    state.uiTouch !== null &&\n    state.uiTouch.kind === UiTouchStateKind.DropdownMenuScroll\n      ? addVec(\n          menu.scroll,\n          subVec(\n            state.uiTouch.currentClientPosition,\n            state.uiTouch.startClientPosition\n          )\n        )\n      : menu.scroll;\n\n  const choiceSpecsWithUnadjustedRboxes: DropdownMenuChoiceRenderSpec[] = [];\n  let currentY = totalMenuScroll.y + sizing.blockDropdownMenuBorder;\n  for (const choice of menu.choices) {\n    const choiceText = dropdownTexts[choice];\n    const textDimensions = editorProps.measureText(\n      choiceText,\n      fonts.blockDropdownMenuFont,\n      sizing.blockDropdownMenuTextSizePx\n    );\n\n    const rbox = {\n      topLeft: {\n        x:\n          dropdownSvgCoords.x +\n          totalMenuScroll.x +\n          sizing.blockDropdownMenuBorder,\n        y: currentY,\n      },\n      dimensions: {\n        width:\n          textDimensions.width + 2 * sizing.blockDropdownMenuHorizontalPadding,\n        height:\n          textDimensions.height +\n          2 * sizing.blockDropdownMenuChoiceVerticalMargin,\n      },\n    };\n\n    choiceSpecsWithUnadjustedRboxes.push({\n      text: choiceText,\n      textRbox: {\n        topLeft: {\n          x:\n            dropdownSvgCoords.x +\n            totalMenuScroll.x +\n            sizing.blockDropdownMenuBorder +\n            sizing.blockDropdownMenuHorizontalPadding,\n          y:\n            sizing.blockDropdownMenuChoiceVerticalMargin +\n            currentY +\n            0.5 * textDimensions.height,\n        },\n        dimensions: {\n          width: textDimensions.width,\n          height: textDimensions.height,\n        },\n      },\n      rbox,\n    });\n\n    currentY +=\n      rbox.dimensions.height + sizing.blockDropdownMenuInterChoiceDividerHeight;\n  }\n\n  const maxChoiceSpecWidth = Math.max(\n    ...choiceSpecsWithUnadjustedRboxes.map((s) => s.rbox.dimensions.width)\n  );\n\n  const lastUnadjustedRbox =\n    choiceSpecsWithUnadjustedRboxes[choiceSpecsWithUnadjustedRboxes.length - 1]\n      .rbox;\n  const menuHeight = Math.min(\n    sizing.blockDropdownMenuDimensions.height,\n    lastUnadjustedRbox.topLeft.y +\n      lastUnadjustedRbox.dimensions.height +\n      sizing.blockDropdownMenuBorder,\n    dropdownSvgCenter.y <= canvasCenter.y\n      ? sizing.canvasBounds.topLeft.y +\n          sizing.canvasBounds.dimensions.height -\n          dropdownSvgCoords.y\n      : dropdownSvgCoords.y - sizing.canvasBounds.topLeft.y\n  );\n  const menuY =\n    dropdownSvgCenter.y <= canvasCenter.y\n      ? dropdownSvgCoords.y + dropdownSpec.rbox.dimensions.height\n      : dropdownSvgCoords.y - menuHeight;\n\n  const menuOuterRbox: Rectangle = {\n    topLeft: { x: dropdownSvgCoords.x, y: menuY },\n    dimensions: {\n      width: Math.min(\n        sizing.blockDropdownMenuDimensions.width,\n        maxChoiceSpecWidth + 2 * sizing.blockDropdownMenuBorder\n      ),\n      height: menuHeight,\n    },\n  };\n\n  const choiceSpecs = choiceSpecsWithUnadjustedRboxes.map((spec) => ({\n    text: spec.text,\n    textRbox: {\n      topLeft: addVec(spec.textRbox.topLeft, {\n        x: 0,\n        y: menuY,\n      }),\n      dimensions: spec.textRbox.dimensions,\n    },\n    rbox: {\n      topLeft: addVec(spec.rbox.topLeft, { x: 0, y: menuY }),\n      dimensions: { ...spec.rbox.dimensions, width: maxChoiceSpecWidth },\n    },\n  }));\n\n  return {\n    choiceSpecs,\n    rbox: menuOuterRbox,\n  };\n}\n\nfunction getDropdownChoiceIndexFromDataTouchRole(\n  touchRole: string\n): null | number {\n  const withoutPrefix = touchRole.slice(\n    DATA_TOUCH_ROLES.dropdownChoicePrefix.length\n  );\n  const parsed = Number.parseInt(withoutPrefix, 10);\n\n  if (Number.isInteger(parsed) && parsed >= 0) {\n    return parsed;\n  }\n\n  return null;\n}\n\nfunction updateDropdownValueInCanvas<B extends BlockEditorTypeParams>(\n  canvas: BlockCanvasState<B>,\n  dropdownAddress: NodeAddress,\n  newDropdownValue: B[\"DropdownValueKind\"]\n): BlockCanvasState<B> {\n  if (dropdownAddress[0]! !== CANVAS_ADDRESS_PART) {\n    throw new Error(\n      \"Non-canvas dropdown address passed to updateDropdownValueInCanvas.\"\n    );\n  }\n\n  return {\n    items: canvas.items.map((item, itemIndex) => {\n      if (itemIndex !== dropdownAddress[1]) {\n        return item;\n      }\n\n      return {\n        position: item.position,\n        content: updateDropdownValueInBlockSequenceUsingLocalAddress(\n          item.content,\n          dropdownAddress.slice(2),\n          newDropdownValue\n        ),\n      };\n    }),\n    scroll: canvas.scroll,\n    scrollInProgress: canvas.scrollInProgress,\n  };\n}\n\nfunction updateDropdownValueInBlockSequenceUsingLocalAddress<\n  B extends BlockEditorTypeParams\n>(\n  sequence: BlockSequence<B>,\n  localDropdownAddress: NodeAddress,\n  newDropdownValue: B[\"DropdownValueKind\"]\n): BlockSequence<B> {\n  return sequence.map((block, blockIndex) => {\n    if (localDropdownAddress[0] !== blockIndex) {\n      return block;\n    }\n\n    return updateDropdownValueInBlockUsingLocalAddress(\n      block,\n      localDropdownAddress.slice(1),\n      newDropdownValue\n    );\n  });\n}\n\nfunction updateDropdownValueInBlockUsingLocalAddress<\n  B extends BlockEditorTypeParams\n>(\n  block: Block<B>,\n  localDropdownAddress: NodeAddress,\n  newDropdownValue: B[\"DropdownValueKind\"]\n): Block<B> {\n  return {\n    isLiteral: false,\n    kind: block.kind,\n    args: {\n      dropdowns: block.args.dropdowns.map((original, dropdownIndex) =>\n        localDropdownAddress.length === 2 &&\n        localDropdownAddress[0] === ARG_DROPDOWN_ADDRESS_PART &&\n        localDropdownAddress[1] === dropdownIndex\n          ? newDropdownValue\n          : original\n      ),\n      expressions: block.args.expressions.map((original, expressionIndex) => {\n        if (original.isLiteral) {\n          return original;\n        }\n\n        if (\n          localDropdownAddress[0] === ARG_EXPRESSION_ADDRESS_PART &&\n          localDropdownAddress[1] === expressionIndex\n        ) {\n          return updateDropdownValueInBlockUsingLocalAddress(\n            original,\n            localDropdownAddress.slice(2),\n            newDropdownValue\n          );\n        }\n\n        return original;\n      }),\n      sequences: block.args.sequences.map((original, sequenceIndex) => {\n        if (\n          localDropdownAddress[0] === ARG_COMMAND_SEQUENCE_ADDRESS_PART &&\n          localDropdownAddress[1] === sequenceIndex\n        ) {\n          return updateDropdownValueInBlockSequenceUsingLocalAddress(\n            original,\n            localDropdownAddress.slice(2),\n            newDropdownValue\n          );\n        }\n\n        return original;\n      }),\n    },\n  };\n}\n\nfunction isPointInBlockCanvasDomElement(\n  clientPosition: Vec2,\n  editorComponentInstanceUid: string\n): boolean {\n  const targetId =\n    editorComponentInstanceUid + DOM_ID_SUFFIXES.canvasBackground;\n  const elements = document.elementsFromPoint(\n    clientPosition.x,\n    clientPosition.y\n  );\n  return elements.some((e) => e.id === targetId);\n}\n\nfunction getBlockEditorCursorBasedOnMousePosition(\n  pointerClientPosition: Vec2,\n  componentInstanceUid: string,\n  state: BlockEditorState<BlockEditorTypeParams>\n): BlockEditorCursor {\n  const touchRoleAtClientPosition = getTouchRoleAtClientPosition(\n    pointerClientPosition,\n    componentInstanceUid\n  );\n\n  const { uiTouch } = state;\n\n  if (uiTouch !== null && uiTouch.kind === UiTouchStateKind.BlockDrag) {\n    return \"grabbing\";\n  }\n\n  if (\n    touchRoleAtClientPosition !== null &&\n    touchRoleAtClientPosition.startsWith(DATA_TOUCH_ROLES.blockAddressPrefix)\n  ) {\n    return \"grab\";\n  }\n\n  if (\n    touchRoleAtClientPosition !== null &&\n    touchRoleAtClientPosition.startsWith(DATA_TOUCH_ROLES.literalAddressPrefix)\n  ) {\n    return \"text\";\n  }\n\n  if (\n    touchRoleAtClientPosition !== null &&\n    (touchRoleAtClientPosition.startsWith(\n      DATA_TOUCH_ROLES.dropdownAddressPrefix\n    ) ||\n      touchRoleAtClientPosition.startsWith(\n        DATA_TOUCH_ROLES.dropdownChoicePrefix\n      ))\n  ) {\n    return \"pointer\";\n  }\n\n  return \"default\";\n}\n","import { stringifyColor, typecheckedAssertNever } from \"./App\";\nimport { Color32 } from \"./BlockEditor\";\n\nexport enum CanvasElementKind {\n  Group = \"Group\",\n  Image = \"Image\",\n  Text = \"Text\",\n  Path = \"Path\",\n  Clear = \"Clear\",\n}\n\nexport enum PathInstructionKind {\n  MoveTo = \"MoveTo\",\n  LineTo = \"LineTo\",\n  ArcTo = \"ArcTo\",\n}\n\nexport enum TransformKind {\n  Translate = \"Translate\",\n  Rotate = \"Rotate\",\n  Scale = \"Scale\",\n}\n\nexport const NULL_CANVAS_ELEMENT: CanvasElement = {\n  kind: CanvasElementKind.Group,\n  children: [],\n};\n\nexport type CanvasElement =\n  | CanvasGroup\n  | CanvasImage\n  | CanvasText_\n  | CanvasPath_\n  | CanvasClear;\n\nexport interface CanvasGroup {\n  readonly kind: CanvasElementKind.Group;\n  readonly children: readonly CanvasElement[];\n  readonly clipPath?: Path;\n  readonly transform?: readonly Transform[];\n  readonly alpha?: number;\n}\n\nexport interface CanvasImage {\n  readonly kind: CanvasElementKind.Image;\n  readonly source: CanvasImageSource;\n  readonly dx: number;\n  readonly dy: number;\n  readonly dw: number;\n  readonly dh: number;\n}\n\nexport interface CanvasText_ extends CanvasTextFont {\n  readonly kind: CanvasElementKind.Text;\n  readonly text: string;\n  readonly x: number;\n  readonly y: number;\n  readonly maxWidth?: number;\n  readonly fill?: Color32;\n}\n\nexport interface CanvasTextFont {\n  readonly fontWeight?: number;\n  readonly fontSize: number;\n  readonly fontFamily: string;\n\n  readonly textBaseline?: CanvasRenderingContext2D[\"textBaseline\"];\n  readonly textAlign?: CanvasRenderingContext2D[\"textAlign\"];\n}\n\nexport interface CanvasPath_ {\n  readonly kind: CanvasElementKind.Path;\n  readonly path: Path | Path2D;\n  readonly stroke?: Color32;\n  readonly strokeWidth?: number;\n  readonly fill?: Color32;\n}\n\nexport interface CanvasClear {\n  readonly kind: CanvasElementKind.Clear;\n  readonly x: number;\n  readonly y: number;\n  readonly w: number;\n  readonly h: number;\n}\n\nexport type Path = readonly PathInstruction[];\n\nexport type PathInstruction = MoveTo | LineTo | ArcTo;\n\nexport interface MoveTo {\n  readonly kind: PathInstructionKind.MoveTo;\n  readonly x: number;\n  readonly y: number;\n}\n\nexport interface LineTo {\n  readonly kind: PathInstructionKind.LineTo;\n  readonly x: number;\n  readonly y: number;\n}\n\nexport interface ArcTo {\n  readonly kind: PathInstructionKind.ArcTo;\n  readonly x1: number;\n  readonly y1: number;\n  readonly x2: number;\n  readonly y2: number;\n  readonly radius: number;\n}\n\nexport type Transform = Translate | Rotate | Scale;\n\nexport interface Translate {\n  readonly kind: TransformKind.Translate;\n  readonly x: number;\n  readonly y: number;\n}\n\nexport interface Rotate {\n  readonly kind: TransformKind.Rotate;\n  readonly angle: number;\n}\n\nexport interface Scale {\n  readonly kind: TransformKind.Scale;\n  readonly x: number;\n  readonly y: number;\n}\n\nexport function paintCanvasElement(\n  element: CanvasElement,\n  ctx: CanvasRenderingContext2D\n): void {\n  switch (element.kind) {\n    case CanvasElementKind.Group:\n      ctx.save();\n\n      applyGroupModifications(element, ctx);\n\n      for (const child of element.children) {\n        paintCanvasElement(child, ctx);\n      }\n\n      ctx.restore();\n\n      break;\n\n    case CanvasElementKind.Image:\n      ctx.drawImage(\n        element.source,\n        element.dx,\n        element.dy,\n        element.dw,\n        element.dh\n      );\n\n      break;\n\n    case CanvasElementKind.Text:\n      ctx.save();\n\n      applyFont(element, ctx);\n\n      if (element.fill !== undefined) {\n        ctx.fillStyle = stringifyColor(element.fill);\n        ctx.fillText(element.text, element.x, element.y, element.maxWidth);\n      }\n\n      ctx.restore();\n\n      break;\n\n    case CanvasElementKind.Path:\n      ctx.save();\n\n      if (element.path instanceof Path2D) {\n        if (element.fill !== undefined) {\n          ctx.fillStyle = stringifyColor(element.fill);\n          ctx.fill(element.path);\n        }\n\n        if (element.strokeWidth !== undefined && element.stroke !== undefined) {\n          ctx.strokeStyle = stringifyColor(element.stroke);\n          ctx.lineWidth = element.strokeWidth;\n          ctx.stroke(element.path);\n        }\n      } else {\n        ctx.beginPath();\n\n        for (const instruction of element.path) {\n          executePathInstruction(instruction, ctx);\n        }\n\n        ctx.closePath();\n\n        if (element.fill !== undefined) {\n          ctx.fillStyle = stringifyColor(element.fill);\n          ctx.fill();\n        }\n\n        if (element.strokeWidth !== undefined && element.stroke !== undefined) {\n          ctx.strokeStyle = stringifyColor(element.stroke);\n          ctx.lineWidth = element.strokeWidth;\n          ctx.stroke();\n        }\n      }\n\n      ctx.restore();\n\n      break;\n\n    case CanvasElementKind.Clear:\n      ctx.clearRect(element.x, element.y, element.w, element.h);\n      break;\n\n    default:\n      typecheckedAssertNever(element);\n  }\n}\n\nexport function applyFont(\n  font: CanvasTextFont,\n  ctx: CanvasRenderingContext2D\n): void {\n  ctx.font = `${font.fontWeight ?? \"\"} ${font.fontSize}px ${font.fontFamily}`\n    .replace(/ {2,}/g, \" \")\n    .trim();\n\n  ctx.textBaseline = font.textBaseline ?? ctx.textBaseline;\n  ctx.textAlign = font.textAlign ?? ctx.textAlign;\n}\n\nfunction applyGroupModifications(\n  element: CanvasGroup,\n  ctx: CanvasRenderingContext2D\n): void {\n  applyTransforms(element.transform ?? [], ctx);\n\n  ctx.globalAlpha *= element.alpha ?? 1;\n\n  if (element.clipPath !== undefined) {\n    ctx.beginPath();\n\n    for (const instruction of element.clipPath) {\n      executePathInstruction(instruction, ctx);\n    }\n\n    ctx.closePath();\n\n    ctx.clip();\n  }\n}\n\nfunction applyTransforms(\n  transforms: readonly Transform[],\n  ctx: CanvasRenderingContext2D\n): void {\n  for (const t of transforms) {\n    applyTransform(t, ctx);\n  }\n}\n\nfunction applyTransform(\n  transform: Transform,\n  ctx: CanvasRenderingContext2D\n): void {\n  switch (transform.kind) {\n    case TransformKind.Translate:\n      ctx.translate(transform.x, transform.y);\n      break;\n\n    case TransformKind.Rotate:\n      ctx.rotate(transform.angle);\n      break;\n\n    case TransformKind.Scale:\n      ctx.scale(transform.x, transform.y);\n      break;\n\n    default:\n      typecheckedAssertNever(transform);\n  }\n}\n\nfunction executePathInstruction(\n  inst: PathInstruction,\n  ctx: CanvasRenderingContext2D\n): void {\n  switch (inst.kind) {\n    case PathInstructionKind.MoveTo:\n      ctx.moveTo(inst.x, inst.y);\n      break;\n\n    case PathInstructionKind.LineTo:\n      ctx.lineTo(inst.x, inst.y);\n      break;\n\n    case PathInstructionKind.ArcTo:\n      ctx.arcTo(inst.x1, inst.y1, inst.x2, inst.y2, inst.radius);\n      break;\n\n    default:\n      typecheckedAssertNever(inst);\n  }\n}\n","export const SETTINGS_VERSION = 1;\n","import { registerPlugin } from '@capacitor/core';\r\n\r\nimport type { SafeAreaPlugin } from './definitions';\r\n\r\nconst SafeArea = registerPlugin<SafeAreaPlugin>('SafeArea', {\r\n  web: () => import('./web').then(m => new m.SafeAreaWeb()),\r\n});\r\n\r\nexport * from './definitions';\r\nexport { SafeArea };\r\n","import { SafeArea, SafeAreaInsets } from \"capacitor-plugin-safe-area\";\n\nexport type SafeAreaChangeListener = (insets: SafeAreaInsets) => void;\n\nconst listeners: SafeAreaChangeListener[] = [];\n\nSafeArea.addListener(\"safeAreaChanged\", (data) => {\n  for (const listener of listeners) {\n    listener(data);\n  }\n});\n\nexport function getSafeAreaInsets(): Promise<SafeAreaInsets> {\n  return SafeArea.getSafeAreaInsets();\n}\n\nexport function addSafeAreaChangeListener(\n  listener: SafeAreaChangeListener\n): void {\n  if (listeners.includes(listener)) {\n    return;\n  }\n\n  listeners.push(listener);\n}\n\nexport function removeSafeAreaChangeListener(\n  listener: SafeAreaChangeListener\n): void {\n  while (true) {\n    const i = listeners.indexOf(listener);\n    if (i === -1) {\n      break;\n    }\n\n    listeners.splice(i, 1);\n  }\n}\n","import { registerPlugin } from '@capacitor/core';\n\nimport type { PreferencesPlugin } from './definitions';\n\nconst Preferences = registerPlugin<PreferencesPlugin>('Preferences', {\n  web: () => import('./web').then(m => new m.PreferencesWeb()),\n});\n\nexport * from './definitions';\nexport { Preferences };\n","import { Preferences } from \"@capacitor/preferences\";\n\nexport function saveData(key: string, value: string): Promise<void> {\n  localStorage.setItem(key, value);\n  return Preferences.set({ key, value });\n}\n\nexport function loadData(key: string): Promise<null | string> {\n  return Preferences.get({ key }).then((res) => res.value);\n}\n","import { registerPlugin } from '@capacitor/core';\n\nimport type { SplashScreenPlugin } from './definitions';\n\nconst SplashScreen = registerPlugin<SplashScreenPlugin>('SplashScreen', {\n  web: () => import('./web').then(m => new m.SplashScreenWeb()),\n});\n\nexport * from './definitions';\nexport { SplashScreen };\n","import button_pop from \"./button_pop.mp3\";\nimport club_attack from \"./club_attack.mp3\";\nimport sword_attack from \"./sword_attack.mp3\";\nimport character_movement from \"./character_movement.mp3\";\nimport success_music from \"./success_music.mp3\";\nimport goblin_yelp from \"./goblin_yelp.mp3\";\nimport witch_yelp from \"./witch_yelp.mp3\";\nimport hero_yelp from \"./hero_yelp.mp3\";\nimport error_buzzer from \"./error_buzzer.mp3\";\nimport heal from \"./heal.mp3\";\nimport fireball_launch from \"./fireball_launch.mp3\";\nimport fireball_explosion from \"./fireball_explosion.mp3\";\nimport greensleeves from \"./greensleeves.mp3\";\nimport puzzle_music from \"./puzzle_music.mp3\";\nimport block_pop from \"./block_pop.mp3\";\n\nexport const audioUrls = {\n  button_pop,\n  club_attack,\n  sword_attack,\n  character_movement,\n  success_music,\n  goblin_yelp,\n  witch_yelp,\n  hero_yelp,\n  error_buzzer,\n  heal,\n  fireball_launch,\n  fireball_explosion,\n  greensleeves,\n  puzzle_music,\n  block_pop,\n} as const;\n","import { audioUrls } from \"./audio\";\n\nexport enum SoundKind {\n  ButtonPop = \"ButtonPop\",\n  ClubAttack = \"ClubAttack\",\n  SwordAttack = \"SwordAttack\",\n  CharacterMovement = \"CharacterMovement\",\n  SuccessMusic = \"SuccessMusic\",\n  GoblinYelp = \"GoblinYelp\",\n  WitchYelp = \"WitchYelp\",\n  HeroYelp = \"HeroYelp\",\n  ErrorBuzzer = \"ErrorBuzzer\",\n  Heal = \"Heal\",\n  FireballLaunch = \"FireballLaunch\",\n  FireballExplosion = \"FireballExplosion\",\n  Greensleeves = \"Greensleeves\",\n  PuzzleMusic = \"PuzzleMusic\",\n  BlockPop = \"BlockPop\",\n}\n\nexport interface AudioManager {\n  scheduleSounds(sounds: readonly Sound[]): ScheduledSoundCollectionId;\n  cancel(id: ScheduledSoundCollectionId): void;\n  resume(): void;\n}\n\nexport interface Sound {\n  readonly kind: SoundKind;\n  readonly timeInSeconds: number;\n  readonly durationInSeconds?: number;\n  readonly loop?: true;\n  readonly gain?: number;\n}\n\nexport interface ScheduledSoundCollectionId {\n  readonly soundCollectionRawId: number;\n}\n\ninterface SourceNodeCollection {\n  readonly nodes: readonly AudioBufferSourceNode[];\n}\n\nexport function getAudioManager(): AudioManager {\n  return new AudioManagerImpl();\n}\n\nclass AudioManagerImpl implements AudioManager {\n  readonly ctx: AudioContext;\n  readonly nodeCollections: Map<number, SourceNodeCollection>;\n  nextAvailableSoundCollectionRawId: number;\n\n  buttonPopBuffer: null | AudioBuffer;\n  clubAttackBuffer: null | AudioBuffer;\n  swordAttackBuffer: null | AudioBuffer;\n  characterMovementBuffer: null | AudioBuffer;\n  successMusicBuffer: null | AudioBuffer;\n  goblinYelpBuffer: null | AudioBuffer;\n  witchYelpBuffer: null | AudioBuffer;\n  heroYelpBuffer: null | AudioBuffer;\n  errorBuzzerBuffer: null | AudioBuffer;\n  healBuffer: null | AudioBuffer;\n  fireballLaunchBuffer: null | AudioBuffer;\n  fireballExplosionBuffer: null | AudioBuffer;\n  greensleevesBuffer: null | AudioBuffer;\n  puzzleMusicBuffer: null | AudioBuffer;\n  blockPopBuffer: null | AudioBuffer;\n\n  constructor() {\n    this.ctx = new AudioContext();\n\n    this.nodeCollections = new Map();\n    this.nextAvailableSoundCollectionRawId = 0;\n\n    this.buttonPopBuffer = null;\n    this.loadAudio(audioUrls.button_pop).then((buffer) => {\n      this.buttonPopBuffer = buffer;\n    });\n\n    this.clubAttackBuffer = null;\n    this.loadAudio(audioUrls.club_attack).then((buffer) => {\n      this.clubAttackBuffer = buffer;\n    });\n\n    this.swordAttackBuffer = null;\n    this.loadAudio(audioUrls.sword_attack).then((buffer) => {\n      this.swordAttackBuffer = buffer;\n    });\n\n    this.characterMovementBuffer = null;\n    this.loadAudio(audioUrls.character_movement).then((buffer) => {\n      this.characterMovementBuffer = buffer;\n    });\n\n    this.successMusicBuffer = null;\n    this.loadAudio(audioUrls.success_music).then((buffer) => {\n      this.successMusicBuffer = buffer;\n    });\n\n    this.goblinYelpBuffer = null;\n    this.loadAudio(audioUrls.goblin_yelp).then((buffer) => {\n      this.goblinYelpBuffer = buffer;\n    });\n\n    this.witchYelpBuffer = null;\n    this.loadAudio(audioUrls.witch_yelp).then((buffer) => {\n      this.witchYelpBuffer = buffer;\n    });\n\n    this.heroYelpBuffer = null;\n    this.loadAudio(audioUrls.hero_yelp).then((buffer) => {\n      this.heroYelpBuffer = buffer;\n    });\n\n    this.errorBuzzerBuffer = null;\n    this.loadAudio(audioUrls.error_buzzer).then((buffer) => {\n      this.errorBuzzerBuffer = buffer;\n    });\n\n    this.healBuffer = null;\n    this.loadAudio(audioUrls.heal).then((buffer) => {\n      this.healBuffer = buffer;\n    });\n\n    this.fireballLaunchBuffer = null;\n    this.loadAudio(audioUrls.fireball_launch).then((buffer) => {\n      this.fireballLaunchBuffer = buffer;\n    });\n\n    this.fireballExplosionBuffer = null;\n    this.loadAudio(audioUrls.fireball_explosion).then((buffer) => {\n      this.fireballExplosionBuffer = buffer;\n    });\n\n    this.greensleevesBuffer = null;\n    this.loadAudio(audioUrls.greensleeves).then((buffer) => {\n      this.greensleevesBuffer = buffer;\n    });\n\n    this.puzzleMusicBuffer = null;\n    this.loadAudio(audioUrls.puzzle_music).then((buffer) => {\n      this.puzzleMusicBuffer = buffer;\n    });\n\n    this.blockPopBuffer = null;\n    this.loadAudio(audioUrls.block_pop).then((buffer) => {\n      this.blockPopBuffer = buffer;\n    });\n  }\n\n  async loadAudio(audioUrl: string): Promise<AudioBuffer> {\n    const response = await fetch(audioUrl);\n    return await this.ctx.decodeAudioData(await response.arrayBuffer());\n  }\n\n  scheduleSounds(sounds: readonly Sound[]): ScheduledSoundCollectionId {\n    const { currentTime } = this.ctx;\n\n    const nodes: AudioBufferSourceNode[] = [];\n    for (const sound of sounds) {\n      const buffer = this.getBufferForSoundKind(sound.kind);\n      if (buffer === null) {\n        continue;\n      }\n\n      const startTime = Math.max(\n        currentTime,\n        currentTime + sound.timeInSeconds\n      );\n      const offsetTime = Math.max(0, -sound.timeInSeconds);\n\n      const node = this.ctx.createBufferSource();\n      node.buffer = buffer;\n      node.loop = sound.loop ?? false;\n\n      if (sound.gain === undefined) {\n        node.connect(this.ctx.destination);\n      } else {\n        const gainNode = this.ctx.createGain();\n        node.connect(gainNode);\n        gainNode.gain.value = sound.gain;\n        gainNode.connect(this.ctx.destination);\n      }\n\n      node.start(startTime, offsetTime, sound.durationInSeconds);\n      nodes.push(node);\n    }\n\n    const collection: SourceNodeCollection = { nodes };\n\n    const id: ScheduledSoundCollectionId = {\n      soundCollectionRawId: this.nextAvailableSoundCollectionRawId,\n    };\n    ++this.nextAvailableSoundCollectionRawId;\n\n    this.nodeCollections.set(id.soundCollectionRawId, collection);\n\n    return id;\n  }\n\n  getBufferForSoundKind(kind: SoundKind): null | AudioBuffer {\n    return {\n      [SoundKind.ButtonPop]: this.buttonPopBuffer,\n      [SoundKind.ClubAttack]: this.clubAttackBuffer,\n      [SoundKind.SwordAttack]: this.swordAttackBuffer,\n      [SoundKind.CharacterMovement]: this.characterMovementBuffer,\n      [SoundKind.SuccessMusic]: this.successMusicBuffer,\n      [SoundKind.GoblinYelp]: this.goblinYelpBuffer,\n      [SoundKind.WitchYelp]: this.witchYelpBuffer,\n      [SoundKind.HeroYelp]: this.heroYelpBuffer,\n      [SoundKind.ErrorBuzzer]: this.errorBuzzerBuffer,\n      [SoundKind.Heal]: this.healBuffer,\n      [SoundKind.FireballLaunch]: this.fireballLaunchBuffer,\n      [SoundKind.FireballExplosion]: this.fireballExplosionBuffer,\n      [SoundKind.Greensleeves]: this.greensleevesBuffer,\n      [SoundKind.PuzzleMusic]: this.puzzleMusicBuffer,\n      [SoundKind.BlockPop]: this.blockPopBuffer,\n    }[kind];\n  }\n\n  cancel(id: ScheduledSoundCollectionId): void {\n    const collection = this.nodeCollections.get(id.soundCollectionRawId);\n    if (collection === undefined) {\n      return;\n    }\n\n    for (const node of collection.nodes) {\n      node.disconnect();\n    }\n\n    this.nodeCollections.delete(id.soundCollectionRawId);\n  }\n\n  resume(): void {\n    this.ctx.resume();\n  }\n}\n","import { registerPlugin } from '@capacitor/core';\n\nimport type { AppPlugin } from './definitions';\n\nconst App = registerPlugin<AppPlugin>('App', {\n  web: () => import('./web').then(m => new m.AppWeb()),\n});\n\nexport * from './definitions';\nexport { App };\n","import { registerPlugin } from '@capacitor/core';\r\n\r\nimport type { KeepAwakePlugin } from './definitions';\r\n\r\nconst KeepAwake = registerPlugin<KeepAwakePlugin>('KeepAwake', {\r\n  web: () => import('./web').then(m => new m.KeepAwakeWeb()),\r\n});\r\n\r\nexport * from './definitions';\r\nexport { KeepAwake };\r\n","import { KeepAwake } from \"@capacitor-community/keep-awake\";\n\nexport function allowSleep(): void {\n  KeepAwake.allowSleep().catch(noOp);\n}\n\nexport function keepAwake(): void {\n  KeepAwake.allowSleep().catch(noOp);\n}\n\nfunction noOp(): void {}\n","import { registerPlugin } from '@capacitor/core';\n\nimport type { DevicePlugin } from './definitions';\n\nconst Device = registerPlugin<DevicePlugin>('Device', {\n  web: () => import('./web').then(m => new m.DeviceWeb()),\n});\n\nexport * from './definitions';\nexport { Device };\n","export const GAME_VERSION_WITHOUT_V = \"1.43.0\";\n","import {\n  Dimensions,\n  MainBlockEditorTypeParams,\n  MinimapBlockEditorTypeParams,\n  TutorialBlockEditorTypeParams,\n  VectorSpaceOperations,\n} from \"./miscTypes\";\nimport { Sound, SoundKind } from \"./audioManager\";\nimport {\n  ReadonlyRecord,\n  ColorTriplet,\n  BlockEditorSizingProps,\n  BlockEditorColorProps,\n  BlockEditorFontProps,\n  Color32,\n  BlockDefs,\n  BlockDef,\n  BlockArgs,\n  BlockDefKind,\n  BlockSignatureDropdown,\n  BlockSignatureExpression,\n  BlockSignatureLabel,\n  BlockSignaturePartKind,\n  CommandSignaturePart,\n} from \"./BlockEditor\";\nimport { GAME_VERSION_WITHOUT_V } from \"./GAME_VERSION\";\nimport { images } from \"./images\";\nimport { Vec2, addVec, scaleVec } from \"./vec2\";\nimport { parseColorHexString, toU8 } from \"./App\";\n\nexport enum UiLanguage {\n  English = \"en-US\",\n  Japanese = \"ja-JP\",\n  JapaneseHiragana = \"ja-JP-hiragana\",\n}\n\nexport enum UiTextKind {\n  PleaseSwitchToLandscape = \"PleaseSwitchToLandscape\",\n  LevelCleared = \"LevelCleared\",\n  LevelFailed = \"LevelFailed\",\n  NextLevel = \"NextLevel\",\n  CannotAdvance = \"CannotAdvance\",\n  CannotRetreat = \"CannotRetreat\",\n  CannotAttack = \"CannotAttack\",\n  CannotHeal = \"CannotHeal\",\n  CloseLiteralEditor = \"CloseLiteralEditor\",\n  StartPuzzleFromBeginning = \"StartPuzzleFromBeginning\",\n  StartPuzzleFromLastSaved = \"StartPuzzleFromLastSaved\",\n  Settings = \"Settings\",\n  FlagAndCurrentLanguage = \"FlagAndCurrentLanguage\",\n  Credits = \"Credits\",\n  ResetToLevelOne = \"ResetToLevelOne\",\n  CreditScreenTitle = \"CreditScreenTitle\",\n  Stage2ComingSoon = \"Stage2ComingSoon\",\n  LoadingDotDotDot = \"LoadingDotDotDot\",\n  TutorialLevel1Part1_MoveTheHero = \"TutorialLevel1Part1_MoveTheHero\",\n  TutorialLevel1Part2_DragBlueBlock = \"TutorialLevel1Part2_DragBlueBlock\",\n  TutorialLevel1Part3_DragAnotherBlock = \"TutorialLevel1Part3_DragAnotherBlock\",\n  TutorialLevel1Part4_PressView = \"TutorialLevel1Part4_PressView\",\n  TutorialLevel1Part5_PressPlay = \"TutorialLevel1Part5_PressPlay\",\n  TutorialLevel1Part6_TryAgain = \"TutorialLevel1Part6_TryAgain\",\n  TutorialLevel2Part1_MoveTheHero = \"TutorialLevel2Part1_MoveTheHero\",\n  UseForeverBlockHint = \"UseForeverBlockHint\",\n  TutorialLevel9Part1_ScrollDown = \"TutorialLevel9Part1_ScrollDown\",\n  TutorialLevel9Part2_ScrollUp = \"TutorialLevel9Part2_ScrollUp\",\n  TutorialLevel9Part3_DragLessThan = \"TutorialLevel9Part3_DragLessThan\",\n  TutorialLevel9Part4_DragHealth = \"TutorialLevel9Part4_DragHealth\",\n  TutorialLevel9Part5_Type3 = \"TutorialLevel9Part5_Type3\",\n  AreYouSureYouWantToResetToLevelOne = \"AreYouSureYouWantToResetToLevelOne\",\n  ConfirmReset = \"ConfirmReset\",\n  CancelReset = \"CancelReset\",\n}\n\nexport enum BlockKind {\n  WhenBattleStarts = \"WhenBattleStarts\",\n  MoveForward = \"MoveForward\",\n  Attack = \"Attack\",\n  Heal = \"Heal\",\n  MoveBackward = \"MoveBackward\",\n  Forever = \"Forever\",\n  If = \"If\",\n  XInFront = \"XInFront\",\n  And = \"And\",\n  Or = \"Or\",\n  Not = \"Not\",\n  Health = \"Health\",\n  LessThan = \"LessThan\",\n  Equal = \"Equal\",\n  GreaterThan = \"GreaterThan\",\n}\n\nexport enum DropdownValueKind {\n  Nothing = \"Nothing\",\n  Goblin = \"Goblin\",\n  Witch = \"Witch\",\n}\n\nexport enum InactiveBlockKind {\n  WhenBattleStarts = \"Inactive\" + BlockKind.WhenBattleStarts,\n  MoveForward = \"Inactive\" + BlockKind.MoveForward,\n  Attack = \"Inactive\" + BlockKind.Attack,\n  Heal = \"Inactive\" + BlockKind.Heal,\n  MoveBackward = \"Inactive\" + BlockKind.MoveBackward,\n  Forever = \"Inactive\" + BlockKind.Forever,\n  If = \"Inactive\" + BlockKind.If,\n  XInFront = \"Inactive\" + BlockKind.XInFront,\n  And = \"Inactive\" + BlockKind.And,\n  Or = \"Inactive\" + BlockKind.Or,\n  Not = \"Inactive\" + BlockKind.Not,\n  Health = \"Inactive\" + BlockKind.Health,\n  LessThan = \"Inactive\" + BlockKind.LessThan,\n  Equal = \"Inactive\" + BlockKind.Equal,\n  GreaterThan = \"Inactive\" + BlockKind.GreaterThan,\n}\n\nexport type TutorialBlockKind =\n  | BlockKind.WhenBattleStarts\n  | BlockKind.MoveForward\n  | BlockKind.LessThan\n  | BlockKind.Health;\n\nexport type MinimapBlockKind = BlockKind | InactiveBlockKind;\n\nexport enum BattleEventKind {\n  EvalBlock = \"EvalBlock\",\n  Advance = \"Advance\",\n  Attack = \"Attack\",\n  Heal = \"Heal\",\n  Retreat = \"Retreat\",\n  Summon = \"Summon\",\n  FailHeroAction = \"FailHeroAction\",\n  ClimbStairs = \"ClimbStairs\",\n  FailLevel = \"FailLevel\",\n}\n\nexport enum SquareKind {\n  Empty = \"Empty\",\n  Hero = \"Hero\",\n  Goblin = \"Goblin\",\n  Witch = \"Witch\",\n}\n\nexport enum AnimationKind {\n  Loading = \"Loading\",\n  StaticHome = \"StaticHome\",\n  Edit = \"Edit\",\n  StaticSettings = \"StaticSettings\",\n  StaticConfirmResetToLevelOne = \"StaticConfirmResetToLevelOne\",\n  HomeToView = \"HomeToView\",\n  EditToView = \"EditToView\",\n  ViewToEdit = \"ViewToEdit\",\n  ViewToHome = \"ViewToHome\",\n  EditToHome = \"EditToHome\",\n  PlayBattle = \"PlayBattle\",\n  PauseBattle = \"PauseBattle\",\n  NextLevel = \"NextLevel\",\n  OpenSettings = \"OpenSettings\",\n  CloseSettings = \"CloseSettings\",\n  Credits = \"Credits\",\n}\n\nexport enum Level {\n  Level1 = 1,\n  Level2 = 2,\n  Level3 = 3,\n  Level4 = 4,\n  Level5 = 5,\n  Level6 = 6,\n  Level7 = 7,\n  Level8 = 8,\n  Level9 = 9,\n  Level10 = 10,\n}\nexport const LAST_LEVEL = Math.max(\n  ...Object.values(Level).filter((x): x is Level => Number.isInteger(x))\n) as Level;\n\nexport const UI_TEXT_FONT_FAMILY =\n  '\"Checkpoint\", \"Twemoji Country Flags\", Helvetica, Arial, sans-serif';\nexport const ERROR_ALERT_TEXT_FONT_FAMILY = UI_TEXT_FONT_FAMILY;\nexport const BATTLE_OUTCOME_TEXT_FONT_FAMILY = UI_TEXT_FONT_FAMILY;\nexport const BUTTON_TEXT_FONT_FAMILY = UI_TEXT_FONT_FAMILY;\n\nexport const BLOCK_TEXT_FONT_FAMILY =\n  '\"Noto Sans JP\", Helvetica, Arial, sans-serif';\n\nexport const TEXT_SENTINELS = {\n  useManualBreaking: \"{USE_MANUAL_BREAKING}\",\n  break_: \"{BR}\",\n  editButton: \"{EDIT_BUTTON}\",\n  viewButton: \"{VIEW_BUTTON}\",\n  playButton: \"{PLAY_BUTTON}\",\n  changeToBlockFont: \"{CHANGE_TO_BLOCK_FONT}\",\n  changeToUiFont: \"{CHANGE_TO_UI_FONT}\",\n  multilinePrettyPrintedLoggerId: \"{MULTILINE_PRETTY_PRINTED_LOGGER_ID}\",\n} as const;\n\nexport type TextSentinel = (typeof TEXT_SENTINELS)[keyof typeof TEXT_SENTINELS];\n\nexport const ALL_PUZZLE_SCREEN_BUTTON_ICON_SENTINELS = [\n  TEXT_SENTINELS.editButton,\n  TEXT_SENTINELS.viewButton,\n  TEXT_SENTINELS.playButton,\n] as const;\n\nexport type PuzzleScreenButtonIconTextSentinel =\n  (typeof ALL_PUZZLE_SCREEN_BUTTON_ICON_SENTINELS)[number];\n\nexport const PUZZLE_SCREEN_BUTTON_ICON_SENTINEL_IMAGES: ReadonlyRecord<\n  PuzzleScreenButtonIconTextSentinel,\n  HTMLImageElement\n> = {\n  [TEXT_SENTINELS.editButton]: images.buttons.puzzle.edit,\n  [TEXT_SENTINELS.viewButton]: images.buttons.puzzle.view,\n  [TEXT_SENTINELS.playButton]: images.buttons.puzzle.play,\n};\n\nexport const ALL_FONT_CHANGE_SENTINELS = [\n  TEXT_SENTINELS.changeToBlockFont,\n  TEXT_SENTINELS.changeToUiFont,\n] as const;\n\nexport type FontChangeTextSentinel = (typeof ALL_FONT_CHANGE_SENTINELS)[number];\n\nexport const FONT_CHANGE_SENTINEL_FONT_FAMILIES: ReadonlyRecord<\n  FontChangeTextSentinel,\n  string\n> = {\n  [TEXT_SENTINELS.changeToBlockFont]: BLOCK_TEXT_FONT_FAMILY,\n  [TEXT_SENTINELS.changeToUiFont]: UI_TEXT_FONT_FAMILY,\n};\n\nexport const CREDITS_SCREEN_BODY = `Kyle Lin\\nmayuge__san\\n\\nFrom Flaticon:\\nPixel Perfect\\n\\nFrom Freesound:\\nnicholasdaryl\\nAris621\\nlesaucisson\\nNatal420\\nmetekavruk\\nArtOrDie\\nProducing_Raylite\\nsuntemple\\nplasterbrain\\nHighPixel\\nG-14\\nMATRIXXX_\\nDave Rager\\n\\n“Greensleeves” score courtesy of\\nthe Mutopia Project\\n\\nCastle Coders ${GAME_VERSION_WITHOUT_V}\\nCopyright 2024 Zaqlo Studios.\\nAll rights reserved.\\n\\nInstance number:\\n${TEXT_SENTINELS.multilinePrettyPrintedLoggerId}`;\n\nexport const LOCALIZED_UI_TEXT: ReadonlyRecord<\n  UiLanguage,\n  ReadonlyRecord<UiTextKind, string>\n> = {\n  [UiLanguage.English]: {\n    [UiTextKind.PleaseSwitchToLandscape]:\n      \"Please switch your device's orientation to landscape.\",\n    [UiTextKind.LevelCleared]: \"Level Complete!\",\n    [UiTextKind.LevelFailed]: \"Level Failed.\",\n    [UiTextKind.NextLevel]: \"Next Level\",\n    [UiTextKind.CannotAdvance]: \"Cannot move forward\",\n    [UiTextKind.CannotRetreat]: \"Cannot move backward\",\n    [UiTextKind.CannotAttack]: \"Nothing to attack\",\n    [UiTextKind.CannotHeal]: `Max health reached`,\n    [UiTextKind.CloseLiteralEditor]: \"Close\",\n    [UiTextKind.StartPuzzleFromBeginning]: \"Start\",\n    [UiTextKind.StartPuzzleFromLastSaved]: \"Start\",\n    [UiTextKind.Settings]: \"Settings\",\n    [UiTextKind.FlagAndCurrentLanguage]: \"🇺🇸 English\",\n    [UiTextKind.Credits]: \"Credits\",\n    [UiTextKind.ResetToLevelOne]: \"Reset to Level 1\",\n    [UiTextKind.CreditScreenTitle]: \"Credits\",\n    [UiTextKind.Stage2ComingSoon]: \"Stage 1 complete!\\nStage 2 coming soon.\",\n    [UiTextKind.LoadingDotDotDot]: \"Loading...\",\n    [UiTextKind.TutorialLevel1Part1_MoveTheHero]: `Use code blocks to\\nmove the hero to the stairs!\\n\\nPress ${TEXT_SENTINELS.editButton} to open\\nthe code block editor.`,\n    [UiTextKind.TutorialLevel1Part2_DragBlueBlock]:\n      \"Drag the blue block and connect it\\nto the bottom of the yellow block.\",\n    [UiTextKind.TutorialLevel1Part3_DragAnotherBlock]:\n      \"Drag another blue block to the\\nbottom of the stack.\",\n    [UiTextKind.TutorialLevel1Part4_PressView]: `Nice work!\\nPress ${TEXT_SENTINELS.viewButton} to continue.`,\n    [UiTextKind.TutorialLevel1Part5_PressPlay]: `Press ${TEXT_SENTINELS.playButton} to continue.`,\n    [UiTextKind.TutorialLevel1Part6_TryAgain]:\n      \"Oops!\\nWe didn't add enough code blocks\\n to move the hero to the stairs.\\nAdd more code blocks to fix this.\",\n    [UiTextKind.TutorialLevel2Part1_MoveTheHero]:\n      \"Use the code blocks to\\nmove the hero to the stairs!\\nHint: You must defeat\\nthe goblin blocking your way\\nbefore you can move forward.\",\n    [UiTextKind.UseForeverBlockHint]: `By default, each “${TEXT_SENTINELS.changeToBlockFont}if${TEXT_SENTINELS.changeToUiFont}” block\\nonly runs once. If you want a\\nblock to run repeatedly, put it\\ninside a “${TEXT_SENTINELS.changeToBlockFont}forever${TEXT_SENTINELS.changeToUiFont}” block.`,\n    [UiTextKind.TutorialLevel9Part1_ScrollDown]: \"Scroll down.\",\n    [UiTextKind.TutorialLevel9Part2_ScrollUp]: \"Scroll up.\",\n    [UiTextKind.TutorialLevel9Part3_DragLessThan]: `Drag the green “${TEXT_SENTINELS.changeToBlockFont}<${TEXT_SENTINELS.changeToUiFont}” block\\nonto the canvas.`,\n    [UiTextKind.TutorialLevel9Part4_DragHealth]: `Drag the light blue “${TEXT_SENTINELS.changeToBlockFont}HP${TEXT_SENTINELS.changeToUiFont}” block\\ninto the left side of the “${TEXT_SENTINELS.changeToBlockFont}<${TEXT_SENTINELS.changeToUiFont}” block.`,\n    [UiTextKind.TutorialLevel9Part5_Type3]: `Tap the right side of the “${TEXT_SENTINELS.changeToBlockFont}<${TEXT_SENTINELS.changeToUiFont}” block.\\nThen, export type “${TEXT_SENTINELS.changeToBlockFont}3${TEXT_SENTINELS.changeToUiFont}” (without the quotes).`,\n    [UiTextKind.AreYouSureYouWantToResetToLevelOne]: \"Reset to level 1?\",\n    [UiTextKind.ConfirmReset]: \"Reset\",\n    [UiTextKind.CancelReset]: \"Cancel\",\n  },\n  [UiLanguage.Japanese]: {\n    [UiTextKind.PleaseSwitchToLandscape]: `${TEXT_SENTINELS.useManualBreaking}デバイスの${TEXT_SENTINELS.break_}画面を${TEXT_SENTINELS.break_}横に${TEXT_SENTINELS.break_}回転${TEXT_SENTINELS.break_}させて${TEXT_SENTINELS.break_}ください。`,\n    [UiTextKind.LevelCleared]: \"レベルクリア！\",\n    [UiTextKind.LevelFailed]: \"レベル失敗\",\n    [UiTextKind.NextLevel]: \"次のレベルへ\",\n    [UiTextKind.CannotAdvance]: \"進めない\",\n    [UiTextKind.CannotRetreat]: \"戻れない\",\n    [UiTextKind.CannotAttack]: \"攻撃対象がない\",\n    [UiTextKind.CannotHeal]: \"HPがいっぱい！\",\n    [UiTextKind.CloseLiteralEditor]: \"閉じる\",\n    [UiTextKind.StartPuzzleFromBeginning]: \"はじめから\",\n    [UiTextKind.StartPuzzleFromLastSaved]: \"つづきから\",\n    [UiTextKind.Settings]: \"設定\",\n    [UiTextKind.FlagAndCurrentLanguage]: \"🇯🇵 日本語\",\n    [UiTextKind.Credits]: \"スタッフロール\",\n    [UiTextKind.ResetToLevelOne]: \"レベル１にリセットする\",\n    [UiTextKind.CreditScreenTitle]: \"スタッフロール\",\n    [UiTextKind.Stage2ComingSoon]:\n      \"ステージ１クリア！\\nステージ２は近日公開予定です。\",\n    [UiTextKind.LoadingDotDotDot]: \"ロード中...\",\n    [UiTextKind.TutorialLevel1Part1_MoveTheHero]: `コードブロックを使って\\n勇者を階段に\\n連れて行きましょう！\\n\\n${TEXT_SENTINELS.editButton}を押してください。`,\n    [UiTextKind.TutorialLevel1Part2_DragBlueBlock]:\n      \"青のブロックをドラッグして、黄色の\\nブロックの下に繋がってください。\",\n    [UiTextKind.TutorialLevel1Part3_DragAnotherBlock]:\n      \"もう一つの青のブロックを\\nドラッグして繋がってください。\",\n    [UiTextKind.TutorialLevel1Part4_PressView]: `${TEXT_SENTINELS.viewButton}を押してください。`,\n    [UiTextKind.TutorialLevel1Part5_PressPlay]: `${TEXT_SENTINELS.playButton}を押してください。`,\n    [UiTextKind.TutorialLevel1Part6_TryAgain]:\n      \"おっと！\\n勇者を階段に連れて行くのに\\nコードブロックが\\n足りませんでした。\\nコードを修正してみましょう。\",\n    [UiTextKind.TutorialLevel2Part1_MoveTheHero]:\n      \"コードブロックを使って\\n勇者を階段に連れて行きましょう！\\nヒント：\\nゴブリンを倒さないと\\n勇者が進めません。\",\n    [UiTextKind.UseForeverBlockHint]: `現在の「${TEXT_SENTINELS.changeToBlockFont}もし${TEXT_SENTINELS.changeToUiFont}」ブロックが\\n繰り返されません。\\n繰り返したいなら\\n「${TEXT_SENTINELS.changeToBlockFont}永遠に${TEXT_SENTINELS.changeToUiFont}」ブロックの中に入れましょう。`,\n    [UiTextKind.TutorialLevel9Part1_ScrollDown]: \"下にスクロールしてください。\",\n    [UiTextKind.TutorialLevel9Part2_ScrollUp]: \"上にスクロールしてください。\",\n    [UiTextKind.TutorialLevel9Part3_DragLessThan]: `緑の「${TEXT_SENTINELS.changeToBlockFont}<${TEXT_SENTINELS.changeToUiFont}」ブロックをキャンバスに\\nドラッグしてください。`,\n    [UiTextKind.TutorialLevel9Part4_DragHealth]: `水色の「${TEXT_SENTINELS.changeToBlockFont}HP${TEXT_SENTINELS.changeToUiFont}」ブロックを\\n「${TEXT_SENTINELS.changeToBlockFont}<${TEXT_SENTINELS.changeToUiFont}」ブロックの左辺に入れてください。`,\n    [UiTextKind.TutorialLevel9Part5_Type3]: `「${TEXT_SENTINELS.changeToBlockFont}<${TEXT_SENTINELS.changeToUiFont}」ブロックの右辺をタップして、\\nキーボードで「${TEXT_SENTINELS.changeToBlockFont}3${TEXT_SENTINELS.changeToUiFont}」を記入してください。`,\n    [UiTextKind.AreYouSureYouWantToResetToLevelOne]: \"レベル１にリセット？\",\n    [UiTextKind.ConfirmReset]: \"決定\",\n    [UiTextKind.CancelReset]: \"キャンセル\",\n  },\n  [UiLanguage.JapaneseHiragana]: {\n    [UiTextKind.PleaseSwitchToLandscape]: `${TEXT_SENTINELS.useManualBreaking}デバイスの${TEXT_SENTINELS.break_}がめんを${TEXT_SENTINELS.break_}よこに${TEXT_SENTINELS.break_}かいてん${TEXT_SENTINELS.break_}させて${TEXT_SENTINELS.break_}ください。`,\n    [UiTextKind.LevelCleared]: \"レベルクリア！\",\n    [UiTextKind.LevelFailed]: \"レベルしっぱい\",\n    [UiTextKind.NextLevel]: \"つぎのレベルへ\",\n    [UiTextKind.CannotAdvance]: \"すすめない\",\n    [UiTextKind.CannotRetreat]: \"もどれない\",\n    [UiTextKind.CannotAttack]: \"こうげきたいしょうがない\",\n    [UiTextKind.CannotHeal]: \"HPがいっぱい！\",\n    [UiTextKind.CloseLiteralEditor]: \"とじる\",\n    [UiTextKind.StartPuzzleFromBeginning]: \"はじめから\",\n    [UiTextKind.StartPuzzleFromLastSaved]: \"つづきから\",\n    [UiTextKind.Settings]: \"せってい\",\n    [UiTextKind.FlagAndCurrentLanguage]: \"🇯🇵 にほんご\",\n    [UiTextKind.Credits]: \"スタッフロール\",\n    [UiTextKind.ResetToLevelOne]: \"レベル１にリセットする\",\n    [UiTextKind.CreditScreenTitle]: \"スタッフロール\",\n    [UiTextKind.Stage2ComingSoon]:\n      \"ステージ１クリア！\\nステージ２はきんじつこうかいよていです。\",\n    [UiTextKind.LoadingDotDotDot]: \"ロードちゅう...\",\n    [UiTextKind.TutorialLevel1Part1_MoveTheHero]: `コードブロックをつかって\\nゆうしゃをかいだんに\\nつれていきましょう！\\n\\n${TEXT_SENTINELS.editButton}をおしてください。`,\n    [UiTextKind.TutorialLevel1Part2_DragBlueBlock]:\n      \"あおのブロックをドラッグして、きいろの\\nブロックのしたにつながってください。\",\n    [UiTextKind.TutorialLevel1Part3_DragAnotherBlock]:\n      \"もうひとつのあおのブロックを\\nドラッグしてつながってください。\",\n    [UiTextKind.TutorialLevel1Part4_PressView]: `${TEXT_SENTINELS.viewButton}をおしてください。`,\n    [UiTextKind.TutorialLevel1Part5_PressPlay]: `${TEXT_SENTINELS.playButton}をおしてください。`,\n    [UiTextKind.TutorialLevel1Part6_TryAgain]:\n      \"おっと！\\nゆうしゃをかいだんに\\nつれていくのにコードブロックが\\nたりませんでした。\\nコードをしゅうせいしてみましょう。\",\n    [UiTextKind.TutorialLevel2Part1_MoveTheHero]:\n      \"コードブロックをつかって\\nゆうしゃをかいだんに\\nつれていきましょう！\\nヒント：\\nゴブリンをたおさないと\\nゆうしゃがすすめません。\",\n    [UiTextKind.UseForeverBlockHint]: `げんざいの「${TEXT_SENTINELS.changeToBlockFont}もし${TEXT_SENTINELS.changeToUiFont}」ブロックが\\nくりかえされません。くりかえしたいなら\\n「${TEXT_SENTINELS.changeToBlockFont}えいえんに${TEXT_SENTINELS.changeToUiFont}」ブロックのなかに\\nいれましょう。`,\n    [UiTextKind.TutorialLevel9Part1_ScrollDown]:\n      \"したにスクロールしてください。\",\n    [UiTextKind.TutorialLevel9Part2_ScrollUp]: \"うえにスクロールしてください。\",\n    [UiTextKind.TutorialLevel9Part3_DragLessThan]: `みどりの「${TEXT_SENTINELS.changeToBlockFont}<${TEXT_SENTINELS.changeToUiFont}」ブロックをキャンバスに\\nドラッグしてください。`,\n    [UiTextKind.TutorialLevel9Part4_DragHealth]: `みずいろの「${TEXT_SENTINELS.changeToBlockFont}HP${TEXT_SENTINELS.changeToUiFont}」ブロックを\\n「${TEXT_SENTINELS.changeToBlockFont}<${TEXT_SENTINELS.changeToUiFont}」ブロックのさへんにいれてください。`,\n    [UiTextKind.TutorialLevel9Part5_Type3]: `「${TEXT_SENTINELS.changeToBlockFont}<${TEXT_SENTINELS.changeToUiFont}」ブロックのうへんをタップして、\\nキーボードで「${TEXT_SENTINELS.changeToBlockFont}3${TEXT_SENTINELS.changeToUiFont}」をきにゅうしてください。`,\n    [UiTextKind.AreYouSureYouWantToResetToLevelOne]: \"レベル１にリセット？\",\n    [UiTextKind.ConfirmReset]: \"けってい\",\n    [UiTextKind.CancelReset]: \"キャンセル\",\n  },\n};\n\nexport enum EnemyCombinationKind {\n  SingleGoblin = \"SingleGoblin\",\n  MultipleGoblins = \"MultipleGoblins\",\n  SingleWitch = \"SingleWitch\",\n}\n\nexport const LOCALIZED_DEFEATED_ENEMIES_BUT_FORGOT_TO_MOVE_HERO_TO_STAIRS_MESSAGE_TEXT: ReadonlyRecord<\n  UiLanguage,\n  ReadonlyRecord<EnemyCombinationKind, string>\n> = {\n  [UiLanguage.English]: {\n    [EnemyCombinationKind.SingleGoblin]:\n      \"Your code is almost correct!\\nYou successfully defeated\\nthe goblin, but you forgot to\\nmove the hero to the stairs.\\nEdit your code to fix this.\",\n    [EnemyCombinationKind.MultipleGoblins]:\n      \"Your code is almost correct!\\nYou successfully defeated\\nthe goblins, but you forgot to\\nmove the hero to the stairs.\\nEdit your code to fix this.\",\n    [EnemyCombinationKind.SingleWitch]:\n      \"Your code is almost correct!\\nYou successfully defeated\\nthe witch, but you forgot to\\nmove the hero to the stairs.\\nEdit your code to fix this.\",\n  },\n  [UiLanguage.Japanese]: {\n    [EnemyCombinationKind.SingleGoblin]:\n      \"惜しいです！\\nゴブリンをうまく倒せたが、\\n勇者を階段に連れて行けません\\nでした。コードを\\n修正してみましょう。\",\n    [EnemyCombinationKind.MultipleGoblins]:\n      \"惜しいです！\\nゴブリン達をうまく倒せたが、\\n勇者を階段に連れて行けません\\nでした。コードを\\n修正してみましょう。\",\n    [EnemyCombinationKind.SingleWitch]:\n      \"惜しいです！\\n魔法使いをうまく倒せたが、\\n勇者を階段に連れて行けません\\nでした。コードを\\n修正してみましょう。\",\n  },\n  [UiLanguage.JapaneseHiragana]: {\n    [EnemyCombinationKind.SingleGoblin]:\n      \"おしいです！\\nゴブリンをうまくたおせたが、\\nゆうしゃをかいだんに\\nつれていけませんでした。コードを\\nしゅうせいしてみましょう。\",\n    [EnemyCombinationKind.MultipleGoblins]:\n      \"おしいです！\\nゴブリンたちをうまくたおせたが、\\nゆうしゃをかいだんに\\nつれていけませんでした。コードを\\nしゅうせいしてみましょう。\",\n    [EnemyCombinationKind.SingleWitch]:\n      \"おしいです！\\nまほうつかいをうまくたおせたが、\\nゆうしゃをかいだんに\\nつれていけませんでした。コードを\\nしゅうせいしてみましょう。\",\n  },\n};\n\nexport enum BattleStatus {\n  Victory = \"Victory\",\n  Defeat = \"Defeat\",\n  InProgress = \"InProgress\",\n}\n\nexport enum HeroActionKind {\n  Advance = \"Advance\",\n  Retreat = \"Retreat\",\n  Attack = \"Attack\",\n  Heal = \"Heal\",\n}\n\nexport enum ButtonKind {\n  HomeScreenStart = \"HomeScreenStart\",\n  Settings = \"Settings\",\n  NextLevel = \"NextLevel\",\n  PuzzleScreenLeft = \"PuzzleScreenLeft\",\n  PuzzleScreenMiddle = \"PuzzleScreenMiddle\",\n  PuzzleScreenRight = \"PuzzleScreenRight\",\n  SettingsScreenClose = \"SettingsScreenClose\",\n  SettingsScreenSecondaryClose = \"SettingsScreenSecondaryClose\",\n  Language = \"Language\",\n  Credits = \"Credits\",\n  OpenConfirmResetToLevelOneScreen = \"OpenConfirmResetToLevelOneScreen\",\n  CreditsScreenClose = \"CreditsScreenClose\",\n  ConfirmResetToLevelOne = \"ConfirmResetToLevelOne\",\n  CancelResetToLevelOne = \"CancelResetToLevelOne\",\n  ConfirmResetToLevelOneScreenClose = \"ConfirmResetToLevelOneScreenClose\",\n  InEditorMiniBattleScreen = \"InEditorMiniBattleScreen\",\n}\n\nexport enum GoblinColor {\n  Green = \"Green\",\n  Purple = \"Purple\",\n}\n\n// Color theme based on\n// https://github.com/scratchfoundation/scratch-blocks/wiki/Colors\nexport const COLOR_THEME = {\n  white: parseColorHexString(\"#f9f9f9\"),\n  gray: parseColorHexString(\"#5a6177\"),\n  unreachableBlockGray: {\n    primary: parseColorHexString(\"#888888\"),\n    secondary: parseColorHexString(\"#777777\"),\n    tertiary: parseColorHexString(\"#666666\"),\n  },\n  backgroundDotGray: parseColorHexString(\"#dddddd\"),\n  errorAlertRed: parseColorHexString(\"#aa0000cc\"),\n  paletteBackgroundWhite: parseColorHexString(\"#f9f9f9cc\"),\n  dividerGray: parseColorHexString(\"#d4d4d4\"),\n  buttonBlue: parseColorHexString(\"#469bbe\"),\n\n  red: {\n    primary: parseColorHexString(\"#ff6619\"),\n    secondary: parseColorHexString(\"#ff5500\"),\n    tertiary: parseColorHexString(\"#e64d00\"),\n  },\n  fire: {\n    primary: parseColorHexString(\"#ff8c1a\"),\n    secondary: parseColorHexString(\"#ff8000\"),\n    tertiary: parseColorHexString(\"#db6e00\"),\n  },\n  orange: {\n    primary: parseColorHexString(\"#ffab19\"),\n    secondary: parseColorHexString(\"#ec9c13\"),\n    tertiary: parseColorHexString(\"#cf8b17\"),\n  },\n  yellow: {\n    primary: parseColorHexString(\"#ffbf00\"),\n    secondary: parseColorHexString(\"#e6ac00\"),\n    tertiary: parseColorHexString(\"#cc9900\"),\n  },\n  lime: {\n    primary: parseColorHexString(\"#58c059\"),\n    secondary: parseColorHexString(\"#46b946\"),\n    tertiary: parseColorHexString(\"#389438\"),\n  },\n  emerald: {\n    primary: parseColorHexString(\"#0fbd8c\"),\n    secondary: parseColorHexString(\"#0da57a\"),\n    tertiary: parseColorHexString(\"#0b8e69\"),\n  },\n  cyan: {\n    primary: parseColorHexString(\"#5bb1d6\"),\n    secondary: parseColorHexString(\"#47a8d1\"),\n    tertiary: parseColorHexString(\"#2e8eb8\"),\n  },\n  blue: {\n    primary: parseColorHexString(\"#4c97ff\"),\n    secondary: parseColorHexString(\"#4280d7\"),\n    tertiary: parseColorHexString(\"#3373cc\"),\n  },\n  purple: {\n    primary: parseColorHexString(\"#9a66ff\"),\n    secondary: parseColorHexString(\"#855cd6\"),\n    tertiary: parseColorHexString(\"#774dcb\"),\n  },\n  magenta: {\n    primary: parseColorHexString(\"#cf63cf\"),\n    secondary: parseColorHexString(\"#c94fc9\"),\n    tertiary: parseColorHexString(\"#a63fa6\"),\n  },\n  pink: {\n    primary: parseColorHexString(\"#ff6680\"),\n    secondary: parseColorHexString(\"#ff4d6a\"),\n    tertiary: parseColorHexString(\"#ff3355\"),\n  },\n\n  insertionMarkTransparentBlack: parseColorHexString(\"#00000033\"),\n  textWhite: parseColorHexString(\"#ffffff\"),\n  textBrown: parseColorHexString(\"#68442d\"),\n  squareWhite: parseColorHexString(\"#ffffff55\"),\n  heartMarkRed: parseColorHexString(\"#ef232e\"),\n  heartMarkBorderPink: parseColorHexString(\"#f3b1b5\"),\n} as const;\n\nexport const UNSCALED_INTER_HEART_MARK_HORIZONTAL_MARGIN = 10;\nexport const MAX_HEARTS_PER_ROW = 3;\n\nexport const SIZING = {\n  paletteWidth: 200,\n  blockPadding: 5,\n  blockBorder: 1,\n  blockBorderRadius: 5,\n  minPalettePadding: 5,\n  paletteInterblockMargin: 10,\n  snapVerticalRange: 35,\n  snapHorizontalRange: 35,\n  backgroundDotRadius: 2,\n  battleOutcomeAlertWidthFactor: 0.3,\n\n  blockTextSizePx: 16,\n  unscaledErrorAlertTextSizePx: 25,\n  unscaledBattleOutcomeTextSizePx: 32,\n  unscaledButtonTextSizePx: 25,\n\n  castleInteriorImage: {\n    width: 1280,\n    height: 1280,\n  },\n\n  commandSocket: {\n    indent: 12,\n    majorBase: 20,\n    minorBase: 12,\n    height: 8,\n  },\n\n  commandSequenceArgIndent: 12,\n  interCommandPartMargin: 6,\n\n  healthTextBorder: 1,\n\n  depressedButtonScale: 0.9,\n} as const;\n\nexport const BATTLE_CONFIG = {\n  heroDamage: 1,\n  goblinDamage: 1,\n  witchDamage: 1,\n  witchAttackRange: 4,\n  witchSummonGoblinHealthCost: 1,\n  heroHeal: 1,\n} as const;\n\nexport const MAIN_BLOCK_EDITOR_BLOCK_COLORS: ReadonlyRecord<\n  BlockKind,\n  ColorTriplet\n> = {\n  [BlockKind.MoveForward]: COLOR_THEME.blue,\n  [BlockKind.Attack]: COLOR_THEME.purple,\n  [BlockKind.WhenBattleStarts]: COLOR_THEME.yellow,\n  [BlockKind.Heal]: COLOR_THEME.emerald,\n  [BlockKind.MoveBackward]: COLOR_THEME.blue,\n  [BlockKind.Forever]: COLOR_THEME.orange,\n  [BlockKind.If]: COLOR_THEME.orange,\n  [BlockKind.XInFront]: COLOR_THEME.cyan,\n  [BlockKind.And]: COLOR_THEME.lime,\n  [BlockKind.Or]: COLOR_THEME.lime,\n  [BlockKind.Not]: COLOR_THEME.lime,\n  [BlockKind.Health]: COLOR_THEME.cyan,\n  [BlockKind.LessThan]: COLOR_THEME.lime,\n  [BlockKind.Equal]: COLOR_THEME.lime,\n  [BlockKind.GreaterThan]: COLOR_THEME.lime,\n};\n\nexport const MAIN_BLOCK_EDITOR_STATIC_CONFIG: {\n  sizingWithoutWindowDependentProperties: Omit<\n    BlockEditorSizingProps,\n    | \"editorBounds\"\n    | \"paletteBounds\"\n    | \"canvasBounds\"\n    | \"blockDropdownMenuDimensions\"\n    | \"dividers\"\n    | \"paletteLeftPadding\"\n    | \"paletteRightPadding\"\n    | \"paletteTopPadding\"\n    | \"paletteBottomPadding\"\n  >;\n  colors: BlockEditorColorProps<MainBlockEditorTypeParams>;\n  fonts: BlockEditorFontProps;\n} = {\n  sizingWithoutWindowDependentProperties: {\n    blockBorder: SIZING.blockBorder,\n    blockLiteralBorder: SIZING.blockBorder,\n    blockDropdownBorder: SIZING.blockBorder,\n    blockBorderRadius: SIZING.blockBorderRadius,\n    paletteInterblockMargin: SIZING.paletteInterblockMargin,\n    paletteTrashCanHorizontalMargin: 10,\n    paletteTrashCanVerticalMargin: 10,\n    snapVerticalRange: SIZING.snapVerticalRange,\n    snapHorizontalRange: SIZING.snapHorizontalRange,\n    backgroundDotRadius: SIZING.backgroundDotRadius,\n    blockLabelTextSizePx: SIZING.blockTextSizePx,\n    blockDropdownTextSizePx: SIZING.blockTextSizePx,\n    blockDropdownHorizontalPadding: 0,\n    blockDropdownVerticalPadding: 3 * SIZING.blockBorder,\n    blockDropdownArrowWidth: 8,\n    blockDropdownArrowLeftMargin: 5,\n    blockDropdownArrowVerticalMargin: 1,\n    blockLiteralTextSizePx: SIZING.blockTextSizePx,\n    blockLiteralHorizontalPadding: 0,\n    blockLiteralVerticalPadding: 3 * SIZING.blockBorder,\n    blockDropdownMenuTextSizePx: 14,\n    blockDropdownMenuBorder: SIZING.blockBorder,\n    blockDropdownMenuBorderRadius: SIZING.blockBorderRadius,\n    blockDropdownMenuHorizontalPadding: 10,\n    blockDropdownMenuChoiceVerticalMargin: 8,\n    blockDropdownMenuInterChoiceDividerHeight: 1,\n\n    commandSocket: SIZING.commandSocket,\n\n    commandSequenceArgIndent: SIZING.commandSequenceArgIndent,\n    interBlockPartHorizontalMargin: SIZING.interCommandPartMargin,\n    commandBlockHorizontalPadding: SIZING.interCommandPartMargin,\n    commandBlockVerticalPadding:\n      0.867 * SIZING.blockTextSizePx - 0.5 * SIZING.commandSocket.height,\n    queryBlockVerticalPadding: 3 * SIZING.blockBorder,\n    queryInsertionMarkHaloRadius: 0.666667 * 3 * SIZING.blockBorder,\n  },\n  colors: {\n    background: COLOR_THEME.white,\n    paletteBackground: COLOR_THEME.paletteBackgroundWhite,\n    paletteTrashCan: COLOR_THEME.insertionMarkTransparentBlack,\n    backgroundDot: COLOR_THEME.backgroundDotGray,\n    divider: COLOR_THEME.dividerGray,\n    blocks: MAIN_BLOCK_EDITOR_BLOCK_COLORS,\n    unreachableBlocks: mapBlockKindRecord(\n      MAIN_BLOCK_EDITOR_BLOCK_COLORS,\n      () => COLOR_THEME.unreachableBlockGray\n    ),\n    blockLabelText: COLOR_THEME.textWhite,\n    blockLiteralText: COLOR_THEME.gray,\n    blockDropdownText: COLOR_THEME.textWhite,\n    blockLiteralBackground: COLOR_THEME.white,\n    commandInsertionMark: COLOR_THEME.insertionMarkTransparentBlack,\n    queryInsertionMarkHalo: COLOR_THEME.white,\n  },\n  fonts: {\n    blockLabelFont: BLOCK_TEXT_FONT_FAMILY,\n    blockDropdownFont: BLOCK_TEXT_FONT_FAMILY,\n    blockLiteralFont: BLOCK_TEXT_FONT_FAMILY,\n    blockDropdownMenuFont: BLOCK_TEXT_FONT_FAMILY,\n  },\n};\n\nexport const TRANSPARENT: Color32 = { r: 0, g: 0, b: 0, a: 0 };\nexport const TRANSPARENT_TRIPLET: ColorTriplet = {\n  primary: TRANSPARENT,\n  secondary: TRANSPARENT,\n  tertiary: TRANSPARENT,\n};\n\nexport const TUTORIAL_BLOCK_EDITOR_STATIC_CONFIG: {\n  colors: BlockEditorColorProps<TutorialBlockEditorTypeParams>;\n} = {\n  colors: {\n    background: TRANSPARENT,\n    paletteBackground: TRANSPARENT,\n    paletteTrashCan: TRANSPARENT,\n    backgroundDot: TRANSPARENT,\n    divider: TRANSPARENT,\n    blocks: {\n      [BlockKind.WhenBattleStarts]: TRANSPARENT_TRIPLET,\n      [BlockKind.MoveForward]: tripletWithAlpha(\n        0x40,\n        MAIN_BLOCK_EDITOR_STATIC_CONFIG.colors.blocks[BlockKind.MoveForward]\n      ),\n      [BlockKind.LessThan]: tripletWithAlpha(\n        0x40,\n        MAIN_BLOCK_EDITOR_STATIC_CONFIG.colors.blocks[BlockKind.LessThan]\n      ),\n      [BlockKind.Health]: tripletWithAlpha(\n        0x40,\n        MAIN_BLOCK_EDITOR_STATIC_CONFIG.colors.blocks[BlockKind.Health]\n      ),\n    },\n    unreachableBlocks: mapBlockKindRecord(MAIN_BLOCK_EDITOR_BLOCK_COLORS, () =>\n      tripletWithAlpha(0x40, COLOR_THEME.unreachableBlockGray)\n    ),\n    blockLabelText: COLOR_THEME.textWhite,\n    blockLiteralText: COLOR_THEME.gray,\n    blockDropdownText: COLOR_THEME.textWhite,\n    blockLiteralBackground: COLOR_THEME.white,\n    commandInsertionMark: COLOR_THEME.insertionMarkTransparentBlack,\n    queryInsertionMarkHalo: COLOR_THEME.white,\n  },\n};\n\nexport const MINIMAP_BLOCK_EDITOR_STATIC_CONFIG: {\n  sizingWithoutWindowDependentProperties: Omit<\n    BlockEditorSizingProps,\n    | \"editorBounds\"\n    | \"paletteBounds\"\n    | \"canvasBounds\"\n    | \"blockDropdownMenuDimensions\"\n    | \"dividers\"\n    | \"paletteLeftPadding\"\n    | \"paletteRightPadding\"\n    | \"paletteTopPadding\"\n    | \"paletteBottomPadding\"\n  >;\n  colors: BlockEditorColorProps<MinimapBlockEditorTypeParams>;\n} = {\n  sizingWithoutWindowDependentProperties: {\n    blockBorder: SIZING.blockBorder,\n    blockLiteralBorder: SIZING.blockBorder,\n    blockDropdownBorder: SIZING.blockBorder,\n    blockBorderRadius: SIZING.blockBorderRadius,\n    paletteInterblockMargin: 0,\n    paletteTrashCanHorizontalMargin: 0,\n    paletteTrashCanVerticalMargin: 0,\n    snapVerticalRange: SIZING.snapVerticalRange,\n    snapHorizontalRange: SIZING.snapHorizontalRange,\n    backgroundDotRadius: SIZING.backgroundDotRadius,\n    blockLabelTextSizePx: SIZING.blockTextSizePx,\n    blockDropdownTextSizePx: SIZING.blockTextSizePx,\n    blockDropdownHorizontalPadding: 0,\n    blockDropdownVerticalPadding: 3 * SIZING.blockBorder,\n    blockDropdownArrowWidth: 8,\n    blockDropdownArrowLeftMargin: 5,\n    blockDropdownArrowVerticalMargin: 1,\n    blockLiteralTextSizePx: SIZING.blockTextSizePx,\n    blockLiteralHorizontalPadding: 0,\n    blockLiteralVerticalPadding: 3 * SIZING.blockBorder,\n    blockDropdownMenuTextSizePx: 14,\n    blockDropdownMenuBorder: SIZING.blockBorder,\n    blockDropdownMenuBorderRadius: SIZING.blockBorderRadius,\n    blockDropdownMenuHorizontalPadding: 10,\n    blockDropdownMenuChoiceVerticalMargin: 8,\n    blockDropdownMenuInterChoiceDividerHeight: 1,\n\n    commandSocket: SIZING.commandSocket,\n\n    commandSequenceArgIndent: SIZING.commandSequenceArgIndent,\n    interBlockPartHorizontalMargin: SIZING.interCommandPartMargin,\n    commandBlockHorizontalPadding: SIZING.interCommandPartMargin,\n    commandBlockVerticalPadding:\n      0.867 * SIZING.blockTextSizePx - 0.5 * SIZING.commandSocket.height,\n    queryBlockVerticalPadding: 3 * SIZING.blockBorder,\n    queryInsertionMarkHaloRadius: 0.666667 * 3 * SIZING.blockBorder,\n  },\n  colors: {\n    background: parseColorHexString(\"#222222\"),\n    paletteBackground: TRANSPARENT,\n    paletteTrashCan: TRANSPARENT,\n    backgroundDot: TRANSPARENT,\n    divider: TRANSPARENT,\n    blocks: {\n      ...mapBlockKindRecord(\n        MAIN_BLOCK_EDITOR_STATIC_CONFIG.colors.blocks,\n        applyActiveFilterToTriplet\n      ),\n      ...mapBlockKindRecordToInactiveBlockKindRecord(\n        MAIN_BLOCK_EDITOR_STATIC_CONFIG.colors.blocks,\n        applyInactiveFilterToTriplet\n      ),\n    },\n    unreachableBlocks: {\n      ...mapBlockKindRecord(\n        MAIN_BLOCK_EDITOR_STATIC_CONFIG.colors.blocks,\n        () => COLOR_THEME.unreachableBlockGray\n      ),\n      ...mapBlockKindRecordToInactiveBlockKindRecord(\n        MAIN_BLOCK_EDITOR_STATIC_CONFIG.colors.blocks,\n        () => COLOR_THEME.unreachableBlockGray\n      ),\n    },\n    blockLabelText: COLOR_THEME.textWhite,\n    blockLiteralText: COLOR_THEME.gray,\n    blockDropdownText: COLOR_THEME.textWhite,\n    blockLiteralBackground: COLOR_THEME.white,\n    commandInsertionMark: COLOR_THEME.insertionMarkTransparentBlack,\n    queryInsertionMarkHalo: COLOR_THEME.white,\n  },\n};\n\nexport const X_IN_FRONT_DROPDOWN_VALUES: readonly DropdownValueKind[] = [\n  DropdownValueKind.Nothing,\n  DropdownValueKind.Goblin,\n  DropdownValueKind.Witch,\n];\n\nexport const BLOCK_DEF_STRINGS: ReadonlyRecord<\n  BlockKind,\n  ReadonlyRecord<UiLanguage, string>\n> = {\n  [BlockKind.WhenBattleStarts]: {\n    [UiLanguage.English]:\n      \"when battle starts %%maleCommand %%undeletable %%entryPoint\",\n    [UiLanguage.Japanese]:\n      \"バトルが始まったとき %%maleCommand %%undeletable %%entryPoint\",\n    [UiLanguage.JapaneseHiragana]:\n      \"バトルがはじまったとき %%maleCommand %%undeletable %%entryPoint\",\n  },\n  [BlockKind.MoveForward]: {\n    [UiLanguage.English]: \"move forward %%hermaphroditeCommand\",\n    [UiLanguage.Japanese]: \"一歩進む %%hermaphroditeCommand\",\n    [UiLanguage.JapaneseHiragana]: \"いっぽすすむ %%hermaphroditeCommand\",\n  },\n  [BlockKind.Attack]: {\n    [UiLanguage.English]: \"attack %%hermaphroditeCommand\",\n    [UiLanguage.Japanese]: \"攻撃する %%hermaphroditeCommand\",\n    [UiLanguage.JapaneseHiragana]: \"こうげきする %%hermaphroditeCommand\",\n  },\n  [BlockKind.Heal]: {\n    [UiLanguage.English]: \"heal %%hermaphroditeCommand\",\n    [UiLanguage.Japanese]: \"回復する %%hermaphroditeCommand\",\n    [UiLanguage.JapaneseHiragana]: \"かいふくする %%hermaphroditeCommand\",\n  },\n  [BlockKind.MoveBackward]: {\n    [UiLanguage.English]: \"move backward %%hermaphroditeCommand\",\n    [UiLanguage.Japanese]: \"一歩戻る %%hermaphroditeCommand\",\n    [UiLanguage.JapaneseHiragana]: \"いっぽもどる %%hermaphroditeCommand\",\n  },\n  [BlockKind.Forever]: {\n    [UiLanguage.English]: \"forever {} %%femaleCommand\",\n    [UiLanguage.Japanese]: \"永遠に {} %%femaleCommand\",\n    [UiLanguage.JapaneseHiragana]: \"えいえんに {} %%femaleCommand\",\n  },\n  [BlockKind.If]: {\n    [UiLanguage.English]: \"if () then {} %%hermaphroditeCommand\",\n    [UiLanguage.Japanese]: \"もし () なら {} %%hermaphroditeCommand\",\n    [UiLanguage.JapaneseHiragana]: \"もし () なら {} %%hermaphroditeCommand\",\n  },\n  [BlockKind.XInFront]: {\n    [UiLanguage.English]: `square in front has [${X_IN_FRONT_DROPDOWN_VALUES.join(\n      \" || \"\n    )}] %%query`,\n    [UiLanguage.Japanese]: `前のマス目に [${X_IN_FRONT_DROPDOWN_VALUES.join(\n      \" || \"\n    )}] %%query`,\n    [UiLanguage.JapaneseHiragana]: `まえのマスめに [${X_IN_FRONT_DROPDOWN_VALUES.join(\n      \" || \"\n    )}] %%query`,\n  },\n  [BlockKind.And]: {\n    [UiLanguage.English]: \"() and () %%query\",\n    [UiLanguage.Japanese]: \"() かつ () %%query\",\n    [UiLanguage.JapaneseHiragana]: \"() かつ () %%query\",\n  },\n  [BlockKind.Or]: {\n    [UiLanguage.English]: \"() or () %%query\",\n    [UiLanguage.Japanese]: \"() または () %%query\",\n    [UiLanguage.JapaneseHiragana]: \"() または () %%query\",\n  },\n  [BlockKind.Not]: {\n    [UiLanguage.English]: \"not () %%query\",\n    [UiLanguage.Japanese]: \"() でない %%query\",\n    [UiLanguage.JapaneseHiragana]: \"() でない %%query\",\n  },\n  [BlockKind.Health]: {\n    [UiLanguage.English]: \"HP %%query\",\n    [UiLanguage.Japanese]: \"HP %%query\",\n    [UiLanguage.JapaneseHiragana]: \"HP %%query\",\n  },\n  [BlockKind.LessThan]: {\n    [UiLanguage.English]: \"() < () %%query\",\n    [UiLanguage.Japanese]: \"() < () %%query\",\n    [UiLanguage.JapaneseHiragana]: \"() < () %%query\",\n  },\n  [BlockKind.Equal]: {\n    [UiLanguage.English]: \"() = () %%query\",\n    [UiLanguage.Japanese]: \"() = () %%query\",\n    [UiLanguage.JapaneseHiragana]: \"() = () %%query\",\n  },\n  [BlockKind.GreaterThan]: {\n    [UiLanguage.English]: \"() > () %%query\",\n    [UiLanguage.Japanese]: \"() > () %%query\",\n    [UiLanguage.JapaneseHiragana]: \"() > () %%query\",\n  },\n};\n\nexport const DROPDOWN_TEXTS: ReadonlyRecord<\n  UiLanguage,\n  ReadonlyRecord<DropdownValueKind, string>\n> = {\n  [UiLanguage.English]: {\n    [DropdownValueKind.Nothing]: \"nothing\",\n    [DropdownValueKind.Goblin]: \"goblin\",\n    [DropdownValueKind.Witch]: \"witch\",\n  },\n  [UiLanguage.Japanese]: {\n    [DropdownValueKind.Nothing]: \"何もない\",\n    [DropdownValueKind.Goblin]: \"ゴブリンがいる\",\n    [DropdownValueKind.Witch]: \"魔法使いがいる\",\n  },\n  [UiLanguage.JapaneseHiragana]: {\n    [DropdownValueKind.Nothing]: \"なにもない\",\n    [DropdownValueKind.Goblin]: \"ゴブリンがいる\",\n    [DropdownValueKind.Witch]: \"まほうつかいがいる\",\n  },\n};\n\nexport const BLOCK_DEFS: ReadonlyRecord<\n  UiLanguage,\n  BlockDefs<MainBlockEditorTypeParams>\n> = {\n  [UiLanguage.English]: mapBlockKindRecord(BLOCK_DEF_STRINGS, (dict) =>\n    parseBlockDefString(dict[UiLanguage.English])\n  ),\n  [UiLanguage.Japanese]: mapBlockKindRecord(BLOCK_DEF_STRINGS, (dict) =>\n    parseBlockDefString(dict[UiLanguage.Japanese])\n  ),\n  [UiLanguage.JapaneseHiragana]: mapBlockKindRecord(BLOCK_DEF_STRINGS, (dict) =>\n    parseBlockDefString(dict[UiLanguage.JapaneseHiragana])\n  ),\n};\n\nexport const DOM_ELEMENT_IDS = {\n  ghostSvg: \"GhostSvg\",\n  ghostCanvas: \"GhostCanvas\",\n  frontCanvas: \"FrontCanvas\",\n  blockLiteralEditor: \"BlockLiteralEditor\",\n  blockLiteralEditorForm: \"BlockLiteralEditor__Form\",\n  blockLiteralEditorInput: \"BlockLiteralEditor__Input\",\n  blockLiteralEditorCloseButton: \"BlockLiteralEditor__Button\",\n} as const;\n\nexport const SCREEN_TRANSITION_ANIMATION_SECONDS = 0.1;\nexport const CREDIT_SCREEN_SCROLL_SPEED_IN_SCREEN_HEIGHT_PER_SECOND = 0.1;\n\nexport const REAL_VSO: VectorSpaceOperations<number> = {\n  add: (u, v) => u + v,\n  scale: (u, a) => u * a,\n};\n\nexport const VEC2_VSO: VectorSpaceOperations<Vec2> = {\n  add: addVec,\n  scale: scaleVec,\n};\n\nexport const COLOR32_VSO: VectorSpaceOperations<Color32> = {\n  add: (u, v) => ({\n    r: u.r + v.r,\n    g: u.g + v.g,\n    b: u.b + v.b,\n    a: u.a + v.a,\n  }),\n  scale: (u, a) => ({\n    r: u.r * a,\n    g: u.g * a,\n    b: u.b * a,\n    a: u.a * a,\n  }),\n};\n\nexport const LOCAL_STORAGE_STATE_KEY = \"com.zaqlo.studios.castlecoders.state\";\n\nexport const DEFAULT_LANGUAGE = UiLanguage.English;\n\nexport const LEVEL_1_TUTORIAL_DRAG_CYCLE = {\n  totalDurationInSeconds: 3,\n  movingPhaseDurationInSeconds: 0.5,\n  insertionMarkTimeInSeconds: 0.4,\n  blockReleaseTimeInSeconds: 1.5,\n  firstDragEnd: {\n    x: 280,\n    y: 90,\n  },\n  secondDragEnd: {\n    x: 280,\n    y: 140,\n  },\n} as const;\n\nexport const LEVEL_9_TUTORIAL_ANIMATION_CYCLE = {\n  paletteScroll: {\n    totalDurationInSeconds: 3,\n    fingerDownTimeInSeconds: 0,\n    dragStartTimeInSeconds: 0.5,\n    dragEndTimeInSeconds: 1,\n    fingerUpTimeInSeconds: 2,\n  },\n  paletteToCanvasDrag: {\n    totalDurationInSeconds: 3,\n    movingPhaseDurationInSeconds: 0.5,\n    healthBlockIntoLessThanBlockInsertionMarkTimeInSeconds: 0.4,\n    blockReleaseTimeInSeconds: 1.5,\n    lessThanBlockDragEnd: {\n      x: SIZING.paletteWidth + 80,\n      y: 200,\n    },\n  },\n  literalTap: {\n    fingerFlashPeriod: 1,\n  },\n} as const;\n\nexport const INTER_EVENT_DELAY_SECONDS = 1;\nexport const BATTLE_START_DELAY_SECONDS = 1;\nexport const ATTACK_DURATION_IN_SECONDS = 0.3;\nexport const HEAL_ANIMATION_DURATION_IN_SECONDS = 0.3;\nexport const MELEE_ATTACKERS: readonly SquareKind[] = [\n  SquareKind.Hero,\n  SquareKind.Goblin,\n];\nexport const CLUB_ATTACKERS: readonly SquareKind[] = [SquareKind.Goblin];\nexport const SWORD_ATTACKERS: readonly SquareKind[] = [SquareKind.Hero];\nexport const FIREBALL_ATTACKERS: readonly SquareKind[] = [SquareKind.Witch];\nexport const MELEE_DAMAGE_OVERLAY_FLASH_START_FACTOR = 0.3;\nexport const MELEE_DAMAGE_OVERLAY_FLASH_END_FACTOR = 0.8;\nexport const FIREBALL_DAMAGE_OVERLAY_FLASH_START_FACTOR = 0.5;\nexport const FIREBALL_DAMAGE_OVERLAY_FLASH_END_FACTOR =\n  0.5 + (2 * (0.8 - 0.3)) / 5;\n\nexport const svgTextDimensionCache: Map<string, Dimensions> = new Map();\n\nexport const SVG_TEXT_DIMENSION_CACHE_KEY_SEPARATOR = \"<<<<SEPARATOR>>>>\";\n\nexport const UI_FONT_SIZE = {\n  startButton: {\n    [UiLanguage.English]: 120,\n    [UiLanguage.Japanese]: 94,\n    [UiLanguage.JapaneseHiragana]: 94,\n  },\n\n  settingsButton: {\n    [UiLanguage.English]: 72,\n    [UiLanguage.Japanese]: 94,\n    [UiLanguage.JapaneseHiragana]: 72,\n  },\n} as const;\n\nexport const ONE_SECOND_AFTER_FILE_LOAD: Promise<void> = new Promise(\n  (resolve) => setTimeout(resolve, 1000)\n);\n\nexport const HOME_MUSIC: Sound = {\n  kind: SoundKind.Greensleeves,\n  timeInSeconds: 0.5,\n  loop: true,\n  gain: 0.1,\n};\nexport const PUZZLE_MUSIC: Sound = {\n  kind: SoundKind.PuzzleMusic,\n  timeInSeconds: 0.5,\n  loop: true,\n  gain: 0.2,\n};\n\nexport const SHORT_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR = 0.8;\nexport const SHORT_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR = 0.275;\n\nexport const TALL_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR = 0.8;\nexport const TALL_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR = 0.45;\n\nexport const IN_EDITOR_MINI_BATTLE_SCREEN_SCALE_FACTOR = 0.25;\n\nfunction applyActiveFilterToTriplet(triplet: ColorTriplet): ColorTriplet {\n  const s = 1.5;\n  return {\n    primary: saturate(s, triplet.primary),\n    secondary: saturate(s, triplet.secondary),\n    tertiary: saturate(s, triplet.tertiary),\n  };\n}\n\nfunction applyInactiveFilterToTriplet(triplet: ColorTriplet): ColorTriplet {\n  const s = 0.5;\n  const a = 100;\n  return {\n    primary: { ...saturate(s, triplet.primary), a },\n    secondary: { ...saturate(s, triplet.secondary), a },\n    tertiary: { ...saturate(s, triplet.tertiary), a },\n  };\n}\n\nfunction saturate(s: number, original: Color32): Color32 {\n  const r = original.r / 255;\n  const g = original.g / 255;\n  const b = original.b / 255;\n\n  const newR =\n    r * (0.213 + 0.787 * s) + g * (0.715 - 0.715 * s) + b * (0.072 - 0.072 * s);\n  const newG =\n    r * (0.213 - 0.213 * s) + g * (0.715 + 0.285 * s) + b * (0.072 - 0.072 * s);\n  const newB =\n    r * (0.213 - 0.213 * s) + g * (0.715 - 0.715 * s) + b * (0.072 + 0.928 * s);\n\n  return {\n    r: toU8(255 * newR),\n    g: toU8(255 * newG),\n    b: toU8(255 * newB),\n    a: original.a,\n  };\n}\n\nfunction tripletWithAlpha(a: number, original: ColorTriplet): ColorTriplet {\n  return {\n    primary: { ...original.primary, a },\n    secondary: { ...original.secondary, a },\n    tertiary: { ...original.tertiary, a },\n  };\n}\n\nfunction parseBlockDefString(\n  blockDefString: string\n): BlockDef<MainBlockEditorTypeParams> {\n  const flags = {\n    undeletable: blockDefString.includes(\"%%undeletable\"),\n    hermaphroditeCommand: blockDefString.includes(\"%%hermaphroditeCommand\"),\n    maleCommand: blockDefString.includes(\"%%maleCommand\"),\n    femaleCommand: blockDefString.includes(\"%%femaleCommand\"),\n    query: blockDefString.includes(\"%%query\"),\n    entryPoint: blockDefString.includes(\"%%entryPoint\"),\n  } as const;\n\n  let remaining = blockDefString\n    .replace(\n      /%%(?:undeletable|hermaphroditeCommand|maleCommand|femaleCommand|query|entryPoint)/g,\n      \"\"\n    )\n    .replace(/ {2,}/g, \" \");\n  const signature: CommandSignaturePart<MainBlockEditorTypeParams>[] = [];\n  const dropdownDefaults: DropdownValueKind[] = [];\n  const literalDefaults: string[] = [];\n\n  while (remaining.length > 0) {\n    const expressionMatch = remaining.match(/^\\([^)]*\\)/);\n    if (expressionMatch !== null) {\n      signature.push({\n        kind: BlockSignaturePartKind.Expression,\n      });\n\n      literalDefaults.push(expressionMatch[0].slice(1, -1).trim());\n\n      remaining = remaining.slice(expressionMatch[0].length);\n      continue;\n    }\n\n    const dropdownMatch = remaining.match(/^\\[[^\\]]*\\]/);\n    if (dropdownMatch !== null) {\n      const choices = dropdownMatch[0]\n        .slice(1, -1)\n        .split(\"||\")\n        .map((s) => s.trim());\n      if (\n        !choices.every(\n          (s): s is DropdownValueKind =>\n            typeof (DropdownValueKind as any)[s] === \"string\"\n        )\n      ) {\n        throw new Error(\n          \"Illegal dropdown value in block editor string: \" +\n            JSON.stringify(blockDefString)\n        );\n      }\n\n      signature.push({\n        kind: BlockSignaturePartKind.Dropdown,\n        choices,\n      });\n\n      dropdownDefaults.push(choices[0]);\n\n      remaining = remaining.slice(dropdownMatch[0].length);\n      continue;\n    }\n\n    const sequenceMatch = remaining.match(/^\\{\\}/);\n    if (sequenceMatch !== null) {\n      signature.push({\n        kind: BlockSignaturePartKind.CommandSequence,\n      });\n      remaining = remaining.slice(sequenceMatch[0].length);\n      continue;\n    }\n\n    const indexOfNextPart = remaining.search(/[([{]/);\n    const labelText = remaining.slice(\n      0,\n      indexOfNextPart === -1 ? remaining.length : indexOfNextPart\n    );\n    const trimmedLabelText = labelText.trim();\n    if (trimmedLabelText.length > 0) {\n      signature.push({\n        kind: BlockSignaturePartKind.Label,\n        text: trimmedLabelText,\n      });\n    }\n\n    remaining = remaining.slice(labelText.length);\n  }\n\n  const defaultArgs: BlockArgs<MainBlockEditorTypeParams> = {\n    expressions: literalDefaults.map((source) => ({\n      isLiteral: true,\n      source,\n    })),\n    dropdowns: dropdownDefaults,\n    sequences: signature\n      .filter((part) => part.kind === BlockSignaturePartKind.CommandSequence)\n      .map(() => []),\n  };\n\n  if (\n    flags.query &&\n    !flags.hermaphroditeCommand &&\n    !flags.maleCommand &&\n    !flags.femaleCommand &&\n    !flags.entryPoint\n  ) {\n    return {\n      kind: BlockDefKind.Query,\n      isDeletable: !flags.undeletable,\n      signature: signature.filter(\n        (\n          part\n        ): part is\n          | BlockSignatureLabel\n          | BlockSignatureDropdown<MainBlockEditorTypeParams>\n          | BlockSignatureExpression => {\n          if (\n            part.kind === BlockSignaturePartKind.Label ||\n            part.kind === BlockSignaturePartKind.Dropdown ||\n            part.kind === BlockSignaturePartKind.Expression\n          ) {\n            return true;\n          }\n\n          throw new Error(\n            \"Illegal block def string: \" + JSON.stringify(blockDefString)\n          );\n        }\n      ),\n      defaultArgs,\n    };\n  }\n\n  if (\n    !flags.query &&\n    [flags.hermaphroditeCommand, flags.maleCommand, flags.femaleCommand].filter(\n      (x) => x\n    ).length === 1\n  ) {\n    return {\n      kind: BlockDefKind.Command,\n      isDeletable: !flags.undeletable,\n      isEntryPoint: flags.entryPoint,\n      hasFemaleSocket: flags.femaleCommand || flags.hermaphroditeCommand,\n      hasMaleSocket: flags.maleCommand || flags.hermaphroditeCommand,\n      signature,\n      defaultArgs,\n    };\n  }\n\n  throw new Error(\n    \"Illegal block def string: \" + JSON.stringify(blockDefString)\n  );\n}\n\nexport function mapBlockKindRecord<T, U>(\n  src: ReadonlyRecord<BlockKind, T>,\n  f: (val: T, kind: BlockKind) => U\n): ReadonlyRecord<BlockKind, U> {\n  return {\n    [BlockKind.MoveForward]: f(\n      src[BlockKind.MoveForward],\n      BlockKind.MoveForward\n    ),\n    [BlockKind.Attack]: f(src[BlockKind.Attack], BlockKind.Attack),\n    [BlockKind.WhenBattleStarts]: f(\n      src[BlockKind.WhenBattleStarts],\n      BlockKind.WhenBattleStarts\n    ),\n    [BlockKind.Heal]: f(src[BlockKind.Heal], BlockKind.Heal),\n    [BlockKind.Forever]: f(src[BlockKind.Forever], BlockKind.Forever),\n    [BlockKind.MoveBackward]: f(\n      src[BlockKind.MoveBackward],\n      BlockKind.MoveBackward\n    ),\n    [BlockKind.If]: f(src[BlockKind.If], BlockKind.If),\n    [BlockKind.XInFront]: f(src[BlockKind.XInFront], BlockKind.XInFront),\n    [BlockKind.And]: f(src[BlockKind.And], BlockKind.And),\n    [BlockKind.Or]: f(src[BlockKind.Or], BlockKind.Or),\n    [BlockKind.Not]: f(src[BlockKind.Not], BlockKind.Not),\n    [BlockKind.Health]: f(src[BlockKind.Health], BlockKind.Health),\n    [BlockKind.LessThan]: f(src[BlockKind.LessThan], BlockKind.LessThan),\n    [BlockKind.Equal]: f(src[BlockKind.Equal], BlockKind.Equal),\n    [BlockKind.GreaterThan]: f(\n      src[BlockKind.GreaterThan],\n      BlockKind.GreaterThan\n    ),\n  };\n}\n\nexport function mapBlockKindRecordToInactiveBlockKindRecord<T, U>(\n  src: ReadonlyRecord<BlockKind, T>,\n  f: (val: T, kind: BlockKind) => U\n): ReadonlyRecord<InactiveBlockKind, U> {\n  return {\n    [InactiveBlockKind.MoveForward]: f(\n      src[BlockKind.MoveForward],\n      BlockKind.MoveForward\n    ),\n    [InactiveBlockKind.Attack]: f(src[BlockKind.Attack], BlockKind.Attack),\n    [InactiveBlockKind.WhenBattleStarts]: f(\n      src[BlockKind.WhenBattleStarts],\n      BlockKind.WhenBattleStarts\n    ),\n    [InactiveBlockKind.Heal]: f(src[BlockKind.Heal], BlockKind.Heal),\n    [InactiveBlockKind.Forever]: f(src[BlockKind.Forever], BlockKind.Forever),\n    [InactiveBlockKind.MoveBackward]: f(\n      src[BlockKind.MoveBackward],\n      BlockKind.MoveBackward\n    ),\n    [InactiveBlockKind.If]: f(src[BlockKind.If], BlockKind.If),\n    [InactiveBlockKind.XInFront]: f(\n      src[BlockKind.XInFront],\n      BlockKind.XInFront\n    ),\n    [InactiveBlockKind.And]: f(src[BlockKind.And], BlockKind.And),\n    [InactiveBlockKind.Or]: f(src[BlockKind.Or], BlockKind.Or),\n    [InactiveBlockKind.Not]: f(src[BlockKind.Not], BlockKind.Not),\n    [InactiveBlockKind.Health]: f(src[BlockKind.Health], BlockKind.Health),\n    [InactiveBlockKind.LessThan]: f(\n      src[BlockKind.LessThan],\n      BlockKind.LessThan\n    ),\n    [InactiveBlockKind.Equal]: f(src[BlockKind.Equal], BlockKind.Equal),\n    [InactiveBlockKind.GreaterThan]: f(\n      src[BlockKind.GreaterThan],\n      BlockKind.GreaterThan\n    ),\n  };\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.\n */\n\nexport const CONSTANTS = {\n  /**\n   * @define {boolean} Whether this is the client Node.js SDK.\n   */\n  NODE_CLIENT: false,\n  /**\n   * @define {boolean} Whether this is the Admin Node.js SDK.\n   */\n  NODE_ADMIN: false,\n\n  /**\n   * Firebase SDK Version\n   */\n  SDK_VERSION: '${JSCORE_VERSION}'\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst stringToByteArray = function (str: string): number[] {\n  // TODO(user): Use native implementations if/when available\n  const out: number[] = [];\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (\n      (c & 0xfc00) === 0xd800 &&\n      i + 1 < str.length &&\n      (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00\n    ) {\n      // Surrogate Pair\n      c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Turns an array of numbers into the string given by the concatenation of the\n * characters to which the numbers correspond.\n * @param bytes Array of numbers representing characters.\n * @return Stringification of the array.\n */\nconst byteArrayToString = function (bytes: number[]): string {\n  // TODO(user): Use native implementations if/when available\n  const out: string[] = [];\n  let pos = 0,\n    c = 0;\n  while (pos < bytes.length) {\n    const c1 = bytes[pos++];\n    if (c1 < 128) {\n      out[c++] = String.fromCharCode(c1);\n    } else if (c1 > 191 && c1 < 224) {\n      const c2 = bytes[pos++];\n      out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\n    } else if (c1 > 239 && c1 < 365) {\n      // Surrogate Pair\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      const c4 = bytes[pos++];\n      const u =\n        (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\n        0x10000;\n      out[c++] = String.fromCharCode(0xd800 + (u >> 10));\n      out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\n    } else {\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      out[c++] = String.fromCharCode(\n        ((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)\n      );\n    }\n  }\n  return out.join('');\n};\n\ninterface Base64 {\n  byteToCharMap_: { [key: number]: string } | null;\n  charToByteMap_: { [key: string]: number } | null;\n  byteToCharMapWebSafe_: { [key: number]: string } | null;\n  charToByteMapWebSafe_: { [key: string]: number } | null;\n  ENCODED_VALS_BASE: string;\n  readonly ENCODED_VALS: string;\n  readonly ENCODED_VALS_WEBSAFE: string;\n  HAS_NATIVE_SUPPORT: boolean;\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string;\n  encodeString(input: string, webSafe?: boolean): string;\n  decodeString(input: string, webSafe: boolean): string;\n  decodeStringToByteArray(input: string, webSafe: boolean): number[];\n  init_(): void;\n}\n\n// We define it as an object literal instead of a class because a class compiled down to es5 can't\n// be treeshaked. https://github.com/rollup/rollup/issues/1691\n// Static lookup maps, lazily populated by init_()\nexport const base64: Base64 = {\n  /**\n   * Maps bytes to characters.\n   */\n  byteToCharMap_: null,\n\n  /**\n   * Maps characters to bytes.\n   */\n  charToByteMap_: null,\n\n  /**\n   * Maps bytes to websafe characters.\n   * @private\n   */\n  byteToCharMapWebSafe_: null,\n\n  /**\n   * Maps websafe characters to bytes.\n   * @private\n   */\n  charToByteMapWebSafe_: null,\n\n  /**\n   * Our default alphabet, shared between\n   * ENCODED_VALS and ENCODED_VALS_WEBSAFE\n   */\n  ENCODED_VALS_BASE:\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\n\n  /**\n   * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\n   */\n  get ENCODED_VALS() {\n    return this.ENCODED_VALS_BASE + '+/=';\n  },\n\n  /**\n   * Our websafe alphabet.\n   */\n  get ENCODED_VALS_WEBSAFE() {\n    return this.ENCODED_VALS_BASE + '-_.';\n  },\n\n  /**\n   * Whether this browser supports the atob and btoa functions. This extension\n   * started at Mozilla but is now implemented by many browsers. We use the\n   * ASSUME_* variables to avoid pulling in the full useragent detection library\n   * but still allowing the standard per-browser compilations.\n   *\n   */\n  HAS_NATIVE_SUPPORT: typeof atob === 'function',\n\n  /**\n   * Base64-encode an array of bytes.\n   *\n   * @param input An array of bytes (numbers with\n   *     value in [0, 255]) to encode.\n   * @param webSafe Boolean indicating we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string {\n    if (!Array.isArray(input)) {\n      throw Error('encodeByteArray takes an array as a parameter');\n    }\n\n    this.init_();\n\n    const byteToCharMap = webSafe\n      ? this.byteToCharMapWebSafe_!\n      : this.byteToCharMap_!;\n\n    const output = [];\n\n    for (let i = 0; i < input.length; i += 3) {\n      const byte1 = input[i];\n      const haveByte2 = i + 1 < input.length;\n      const byte2 = haveByte2 ? input[i + 1] : 0;\n      const haveByte3 = i + 2 < input.length;\n      const byte3 = haveByte3 ? input[i + 2] : 0;\n\n      const outByte1 = byte1 >> 2;\n      const outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\n      let outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\n      let outByte4 = byte3 & 0x3f;\n\n      if (!haveByte3) {\n        outByte4 = 64;\n\n        if (!haveByte2) {\n          outByte3 = 64;\n        }\n      }\n\n      output.push(\n        byteToCharMap[outByte1],\n        byteToCharMap[outByte2],\n        byteToCharMap[outByte3],\n        byteToCharMap[outByte4]\n      );\n    }\n\n    return output.join('');\n  },\n\n  /**\n   * Base64-encode a string.\n   *\n   * @param input A string to encode.\n   * @param webSafe If true, we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeString(input: string, webSafe?: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return btoa(input);\n    }\n    return this.encodeByteArray(stringToByteArray(input), webSafe);\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * @param input to decode.\n   * @param webSafe True if we should use the\n   *     alternative alphabet.\n   * @return string representing the decoded value.\n   */\n  decodeString(input: string, webSafe: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return atob(input);\n    }\n    return byteArrayToString(this.decodeStringToByteArray(input, webSafe));\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * In base-64 decoding, groups of four characters are converted into three\n   * bytes.  If the encoder did not apply padding, the input length may not\n   * be a multiple of 4.\n   *\n   * In this case, the last group will have fewer than 4 characters, and\n   * padding will be inferred.  If the group has one or two characters, it decodes\n   * to one byte.  If the group has three characters, it decodes to two bytes.\n   *\n   * @param input Input to decode.\n   * @param webSafe True if we should use the web-safe alphabet.\n   * @return bytes representing the decoded value.\n   */\n  decodeStringToByteArray(input: string, webSafe: boolean): number[] {\n    this.init_();\n\n    const charToByteMap = webSafe\n      ? this.charToByteMapWebSafe_!\n      : this.charToByteMap_!;\n\n    const output: number[] = [];\n\n    for (let i = 0; i < input.length; ) {\n      const byte1 = charToByteMap[input.charAt(i++)];\n\n      const haveByte2 = i < input.length;\n      const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\n      ++i;\n\n      const haveByte3 = i < input.length;\n      const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      const haveByte4 = i < input.length;\n      const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\n        throw new DecodeBase64StringError();\n      }\n\n      const outByte1 = (byte1 << 2) | (byte2 >> 4);\n      output.push(outByte1);\n\n      if (byte3 !== 64) {\n        const outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\n        output.push(outByte2);\n\n        if (byte4 !== 64) {\n          const outByte3 = ((byte3 << 6) & 0xc0) | byte4;\n          output.push(outByte3);\n        }\n      }\n    }\n\n    return output;\n  },\n\n  /**\n   * Lazy static initialization function. Called before\n   * accessing any of the static map variables.\n   * @private\n   */\n  init_() {\n    if (!this.byteToCharMap_) {\n      this.byteToCharMap_ = {};\n      this.charToByteMap_ = {};\n      this.byteToCharMapWebSafe_ = {};\n      this.charToByteMapWebSafe_ = {};\n\n      // We want quick mappings back and forth, so we precompute two maps.\n      for (let i = 0; i < this.ENCODED_VALS.length; i++) {\n        this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\n        this.charToByteMap_[this.byteToCharMap_[i]] = i;\n        this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\n        this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\n\n        // Be forgiving when decoding and correctly decode both encodings.\n        if (i >= this.ENCODED_VALS_BASE.length) {\n          this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\n          this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\n        }\n      }\n    }\n  }\n};\n\n/**\n * An error encountered while decoding base64 string.\n */\nexport class DecodeBase64StringError extends Error {\n  readonly name = 'DecodeBase64StringError';\n}\n\n/**\n * URL-safe base64 encoding\n */\nexport const base64Encode = function (str: string): string {\n  const utf8Bytes = stringToByteArray(str);\n  return base64.encodeByteArray(utf8Bytes, true);\n};\n\n/**\n * URL-safe base64 encoding (without \".\" padding in the end).\n * e.g. Used in JSON Web Token (JWT) parts.\n */\nexport const base64urlEncodeWithoutPadding = function (str: string): string {\n  // Use base64url encoding and remove padding in the end (dot characters).\n  return base64Encode(str).replace(/\\./g, '');\n};\n\n/**\n * URL-safe base64 decoding\n *\n * NOTE: DO NOT use the global atob() function - it does NOT support the\n * base64Url variant encoding.\n *\n * @param str To be decoded\n * @return Decoded result, if possible\n */\nexport const base64Decode = function (str: string): string | null {\n  try {\n    return base64.decodeString(str, true);\n  } catch (e) {\n    console.error('base64Decode failed: ', e);\n  }\n  return null;\n};\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64Decode } from './crypt';\nimport { getGlobal } from './global';\n\n/**\n * Keys for experimental properties on the `FirebaseDefaults` object.\n * @public\n */\nexport type ExperimentalKey = 'authTokenSyncURL' | 'authIdTokenMaxAge';\n\n/**\n * An object that can be injected into the environment as __FIREBASE_DEFAULTS__,\n * either as a property of globalThis, a shell environment variable, or a\n * cookie.\n *\n * This object can be used to automatically configure and initialize\n * a Firebase app as well as any emulators.\n *\n * @public\n */\nexport interface FirebaseDefaults {\n  config?: Record<string, string>;\n  emulatorHosts?: Record<string, string>;\n  _authTokenSyncURL?: string;\n  _authIdTokenMaxAge?: number;\n  /**\n   * Override Firebase's runtime environment detection and\n   * force the SDK to act as if it were in the specified environment.\n   */\n  forceEnvironment?: 'browser' | 'node';\n  [key: string]: unknown;\n}\n\ndeclare global {\n  // Need `var` for this to work.\n  // eslint-disable-next-line no-var\n  var __FIREBASE_DEFAULTS__: FirebaseDefaults | undefined;\n}\n\nconst getDefaultsFromGlobal = (): FirebaseDefaults | undefined =>\n  getGlobal().__FIREBASE_DEFAULTS__;\n\n/**\n * Attempt to read defaults from a JSON string provided to\n * process(.)env(.)__FIREBASE_DEFAULTS__ or a JSON file whose path is in\n * process(.)env(.)__FIREBASE_DEFAULTS_PATH__\n * The dots are in parens because certain compilers (Vite?) cannot\n * handle seeing that variable in comments.\n * See https://github.com/firebase/firebase-js-sdk/issues/6838\n */\nconst getDefaultsFromEnvVariable = (): FirebaseDefaults | undefined => {\n  if (typeof process === 'undefined' || typeof process.env === 'undefined') {\n    return;\n  }\n  const defaultsJsonString = process.env.__FIREBASE_DEFAULTS__;\n  if (defaultsJsonString) {\n    return JSON.parse(defaultsJsonString);\n  }\n};\n\nconst getDefaultsFromCookie = (): FirebaseDefaults | undefined => {\n  if (typeof document === 'undefined') {\n    return;\n  }\n  let match;\n  try {\n    match = document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/);\n  } catch (e) {\n    // Some environments such as Angular Universal SSR have a\n    // `document` object but error on accessing `document.cookie`.\n    return;\n  }\n  const decoded = match && base64Decode(match[1]);\n  return decoded && JSON.parse(decoded);\n};\n\n/**\n * Get the __FIREBASE_DEFAULTS__ object. It checks in order:\n * (1) if such an object exists as a property of `globalThis`\n * (2) if such an object was provided on a shell environment variable\n * (3) if such an object exists in a cookie\n * @public\n */\nexport const getDefaults = (): FirebaseDefaults | undefined => {\n  try {\n    return (\n      getDefaultsFromGlobal() ||\n      getDefaultsFromEnvVariable() ||\n      getDefaultsFromCookie()\n    );\n  } catch (e) {\n    /**\n     * Catch-all for being unable to get __FIREBASE_DEFAULTS__ due\n     * to any environment case we have not accounted for. Log to\n     * info instead of swallowing so we can find these unknown cases\n     * and add paths for them if needed.\n     */\n    console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);\n    return;\n  }\n};\n\n/**\n * Returns emulator host stored in the __FIREBASE_DEFAULTS__ object\n * for the given product.\n * @returns a URL host formatted like `127.0.0.1:9999` or `[::1]:4000` if available\n * @public\n */\nexport const getDefaultEmulatorHost = (\n  productName: string\n): string | undefined => getDefaults()?.emulatorHosts?.[productName];\n\n/**\n * Returns emulator hostname and port stored in the __FIREBASE_DEFAULTS__ object\n * for the given product.\n * @returns a pair of hostname and port like `[\"::1\", 4000]` if available\n * @public\n */\nexport const getDefaultEmulatorHostnameAndPort = (\n  productName: string\n): [hostname: string, port: number] | undefined => {\n  const host = getDefaultEmulatorHost(productName);\n  if (!host) {\n    return undefined;\n  }\n  const separatorIndex = host.lastIndexOf(':'); // Finding the last since IPv6 addr also has colons.\n  if (separatorIndex <= 0 || separatorIndex + 1 === host.length) {\n    throw new Error(`Invalid host ${host} with no separate hostname and port!`);\n  }\n  // eslint-disable-next-line no-restricted-globals\n  const port = parseInt(host.substring(separatorIndex + 1), 10);\n  if (host[0] === '[') {\n    // Bracket-quoted `[ipv6addr]:port` => return \"ipv6addr\" (without brackets).\n    return [host.substring(1, separatorIndex - 1), port];\n  } else {\n    return [host.substring(0, separatorIndex), port];\n  }\n};\n\n/**\n * Returns Firebase app config stored in the __FIREBASE_DEFAULTS__ object.\n * @public\n */\nexport const getDefaultAppConfig = (): Record<string, string> | undefined =>\n  getDefaults()?.config;\n\n/**\n * Returns an experimental setting on the __FIREBASE_DEFAULTS__ object (properties\n * prefixed by \"_\")\n * @public\n */\nexport const getExperimentalSetting = <T extends ExperimentalKey>(\n  name: T\n): FirebaseDefaults[`_${T}`] =>\n  getDefaults()?.[`_${name}`] as FirebaseDefaults[`_${T}`];\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Polyfill for `globalThis` object.\n * @returns the `globalThis` object for the given environment.\n * @public\n */\nexport function getGlobal(): typeof globalThis {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('Unable to locate global object.');\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class Deferred<R> {\n  promise: Promise<R>;\n  reject: (value?: unknown) => void = () => {};\n  resolve: (value?: unknown) => void = () => {};\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve as (value?: unknown) => void;\n      this.reject = reject as (value?: unknown) => void;\n    });\n  }\n\n  /**\n   * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around\n   * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\n   * and returns a node-style callback which will resolve or reject the Deferred's promise.\n   */\n  wrapCallback(\n    callback?: (error?: unknown, value?: unknown) => void\n  ): (error: unknown, value?: unknown) => void {\n    return (error, value?) => {\n      if (error) {\n        this.reject(error);\n      } else {\n        this.resolve(value);\n      }\n      if (typeof callback === 'function') {\n        // Attaching noop handler just in case developer wasn't expecting\n        // promises\n        this.promise.catch(() => {});\n\n        // Some of our callbacks don't expect a value and our own tests\n        // assert that the parameter length is 1\n        if (callback.length === 1) {\n          callback(error);\n        } else {\n          callback(error, value);\n        }\n      }\n    };\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Standardized Firebase Error.\n *\n * Usage:\n *\n *   // Typescript string literals for type-safe codes\n *   type Err =\n *     'unknown' |\n *     'object-not-found'\n *     ;\n *\n *   // Closure enum for type-safe error codes\n *   // at-enum {string}\n *   var Err = {\n *     UNKNOWN: 'unknown',\n *     OBJECT_NOT_FOUND: 'object-not-found',\n *   }\n *\n *   let errors: Map<Err, string> = {\n *     'generic-error': \"Unknown error\",\n *     'file-not-found': \"Could not find file: {$file}\",\n *   };\n *\n *   // Type-safe function - must pass a valid error code as param.\n *   let error = new ErrorFactory<Err>('service', 'Service', errors);\n *\n *   ...\n *   throw error.create(Err.GENERIC);\n *   ...\n *   throw error.create(Err.FILE_NOT_FOUND, {'file': fileName});\n *   ...\n *   // Service: Could not file file: foo.txt (service/file-not-found).\n *\n *   catch (e) {\n *     assert(e.message === \"Could not find file: foo.txt.\");\n *     if ((e as FirebaseError)?.code === 'service/file-not-found') {\n *       console.log(\"Could not read file: \" + e['file']);\n *     }\n *   }\n */\n\nexport type ErrorMap<ErrorCode extends string> = {\n  readonly [K in ErrorCode]: string;\n};\n\nconst ERROR_NAME = 'FirebaseError';\n\nexport interface StringLike {\n  toString(): string;\n}\n\nexport interface ErrorData {\n  [key: string]: unknown;\n}\n\n// Based on code from:\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types\nexport class FirebaseError extends Error {\n  /** The custom name for all FirebaseErrors. */\n  readonly name: string = ERROR_NAME;\n\n  constructor(\n    /** The error code for this error. */\n    readonly code: string,\n    message: string,\n    /** Custom data for this error. */\n    public customData?: Record<string, unknown>\n  ) {\n    super(message);\n\n    // Fix For ES5\n    // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n    Object.setPrototypeOf(this, FirebaseError.prototype);\n\n    // Maintains proper stack trace for where our error was thrown.\n    // Only available on V8.\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ErrorFactory.prototype.create);\n    }\n  }\n}\n\nexport class ErrorFactory<\n  ErrorCode extends string,\n  ErrorParams extends { readonly [K in ErrorCode]?: ErrorData } = {}\n> {\n  constructor(\n    private readonly service: string,\n    private readonly serviceName: string,\n    private readonly errors: ErrorMap<ErrorCode>\n  ) {}\n\n  create<K extends ErrorCode>(\n    code: K,\n    ...data: K extends keyof ErrorParams ? [ErrorParams[K]] : []\n  ): FirebaseError {\n    const customData = (data[0] as ErrorData) || {};\n    const fullCode = `${this.service}/${code}`;\n    const template = this.errors[code];\n\n    const message = template ? replaceTemplate(template, customData) : 'Error';\n    // Service Name: Error message (service/code).\n    const fullMessage = `${this.serviceName}: ${message} (${fullCode}).`;\n\n    const error = new FirebaseError(fullCode, fullMessage, customData);\n\n    return error;\n  }\n}\n\nfunction replaceTemplate(template: string, data: ErrorData): string {\n  return template.replace(PATTERN, (_, key) => {\n    const value = data[key];\n    return value != null ? String(value) : `<${key}?>`;\n  });\n}\n\nconst PATTERN = /\\{\\$([^}]+)}/g;\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function contains<T extends object>(obj: T, key: string): boolean {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexport function safeGet<T extends object, K extends keyof T>(\n  obj: T,\n  key: K\n): T[K] | undefined {\n  if (Object.prototype.hasOwnProperty.call(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\nexport function isEmpty(obj: object): obj is {} {\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function map<K extends string, V, U>(\n  obj: { [key in K]: V },\n  fn: (value: V, key: K, obj: { [key in K]: V }) => U,\n  contextObj?: unknown\n): { [key in K]: U } {\n  const res: Partial<{ [key in K]: U }> = {};\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      res[key] = fn.call(contextObj, obj[key], key, obj);\n    }\n  }\n  return res as { [key in K]: U };\n}\n\n/**\n * Deep equal two objects. Support Arrays and Objects.\n */\nexport function deepEqual(a: object, b: object): boolean {\n  if (a === b) {\n    return true;\n  }\n\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  for (const k of aKeys) {\n    if (!bKeys.includes(k)) {\n      return false;\n    }\n\n    const aProp = (a as Record<string, unknown>)[k];\n    const bProp = (b as Record<string, unknown>)[k];\n    if (isObject(aProp) && isObject(bProp)) {\n      if (!deepEqual(aProp, bProp)) {\n        return false;\n      }\n    } else if (aProp !== bProp) {\n      return false;\n    }\n  }\n\n  for (const k of bKeys) {\n    if (!aKeys.includes(k)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction isObject(thing: unknown): thing is object {\n  return thing !== null && typeof thing === 'object';\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport interface Compat<T> {\n  _delegate: T;\n}\n\nexport function getModularInstance<ExpService>(\n  service: Compat<ExpService> | ExpService\n): ExpService {\n  if (service && (service as Compat<ExpService>)._delegate) {\n    return (service as Compat<ExpService>)._delegate;\n  } else {\n    return service as ExpService;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  InstantiationMode,\n  InstanceFactory,\n  ComponentType,\n  Dictionary,\n  Name,\n  onInstanceCreatedCallback\n} from './types';\n\n/**\n * Component for service name T, e.g. `auth`, `auth-internal`\n */\nexport class Component<T extends Name = Name> {\n  multipleInstances = false;\n  /**\n   * Properties to be added to the service namespace\n   */\n  serviceProps: Dictionary = {};\n\n  instantiationMode = InstantiationMode.LAZY;\n\n  onInstanceCreated: onInstanceCreatedCallback<T> | null = null;\n\n  /**\n   *\n   * @param name The public service name, e.g. app, auth, firestore, database\n   * @param instanceFactory Service factory responsible for creating the public interface\n   * @param type whether the service provided by the component is public or private\n   */\n  constructor(\n    readonly name: T,\n    readonly instanceFactory: InstanceFactory<T>,\n    readonly type: ComponentType\n  ) {}\n\n  setInstantiationMode(mode: InstantiationMode): this {\n    this.instantiationMode = mode;\n    return this;\n  }\n\n  setMultipleInstances(multipleInstances: boolean): this {\n    this.multipleInstances = multipleInstances;\n    return this;\n  }\n\n  setServiceProps(props: Dictionary): this {\n    this.serviceProps = props;\n    return this;\n  }\n\n  setInstanceCreatedCallback(callback: onInstanceCreatedCallback<T>): this {\n    this.onInstanceCreated = callback;\n    return this;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const DEFAULT_ENTRY_NAME = '[DEFAULT]';\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Deferred } from '@firebase/util';\nimport { ComponentContainer } from './component_container';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport {\n  InitializeOptions,\n  InstantiationMode,\n  Name,\n  NameServiceMapping,\n  OnInitCallBack\n} from './types';\nimport { Component } from './component';\n\n/**\n * Provider for instance for service name T, e.g. 'auth', 'auth-internal'\n * NameServiceMapping[T] is an alias for the type of the instance\n */\nexport class Provider<T extends Name> {\n  private component: Component<T> | null = null;\n  private readonly instances: Map<string, NameServiceMapping[T]> = new Map();\n  private readonly instancesDeferred: Map<\n    string,\n    Deferred<NameServiceMapping[T]>\n  > = new Map();\n  private readonly instancesOptions: Map<string, Record<string, unknown>> =\n    new Map();\n  private onInitCallbacks: Map<string, Set<OnInitCallBack<T>>> = new Map();\n\n  constructor(\n    private readonly name: T,\n    private readonly container: ComponentContainer\n  ) {}\n\n  /**\n   * @param identifier A provider can provide mulitple instances of a service\n   * if this.component.multipleInstances is true.\n   */\n  get(identifier?: string): Promise<NameServiceMapping[T]> {\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n\n    if (!this.instancesDeferred.has(normalizedIdentifier)) {\n      const deferred = new Deferred<NameServiceMapping[T]>();\n      this.instancesDeferred.set(normalizedIdentifier, deferred);\n\n      if (\n        this.isInitialized(normalizedIdentifier) ||\n        this.shouldAutoInitialize()\n      ) {\n        // initialize the service if it can be auto-initialized\n        try {\n          const instance = this.getOrInitializeService({\n            instanceIdentifier: normalizedIdentifier\n          });\n          if (instance) {\n            deferred.resolve(instance);\n          }\n        } catch (e) {\n          // when the instance factory throws an exception during get(), it should not cause\n          // a fatal error. We just return the unresolved promise in this case.\n        }\n      }\n    }\n\n    return this.instancesDeferred.get(normalizedIdentifier)!.promise;\n  }\n\n  /**\n   *\n   * @param options.identifier A provider can provide mulitple instances of a service\n   * if this.component.multipleInstances is true.\n   * @param options.optional If optional is false or not provided, the method throws an error when\n   * the service is not immediately available.\n   * If optional is true, the method returns null if the service is not immediately available.\n   */\n  getImmediate(options: {\n    identifier?: string;\n    optional: true;\n  }): NameServiceMapping[T] | null;\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: false;\n  }): NameServiceMapping[T];\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: boolean;\n  }): NameServiceMapping[T] | null {\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(\n      options?.identifier\n    );\n    const optional = options?.optional ?? false;\n\n    if (\n      this.isInitialized(normalizedIdentifier) ||\n      this.shouldAutoInitialize()\n    ) {\n      try {\n        return this.getOrInitializeService({\n          instanceIdentifier: normalizedIdentifier\n        });\n      } catch (e) {\n        if (optional) {\n          return null;\n        } else {\n          throw e;\n        }\n      }\n    } else {\n      // In case a component is not initialized and should/can not be auto-initialized at the moment, return null if the optional flag is set, or throw\n      if (optional) {\n        return null;\n      } else {\n        throw Error(`Service ${this.name} is not available`);\n      }\n    }\n  }\n\n  getComponent(): Component<T> | null {\n    return this.component;\n  }\n\n  setComponent(component: Component<T>): void {\n    if (component.name !== this.name) {\n      throw Error(\n        `Mismatching Component ${component.name} for Provider ${this.name}.`\n      );\n    }\n\n    if (this.component) {\n      throw Error(`Component for ${this.name} has already been provided`);\n    }\n\n    this.component = component;\n\n    // return early without attempting to initialize the component if the component requires explicit initialization (calling `Provider.initialize()`)\n    if (!this.shouldAutoInitialize()) {\n      return;\n    }\n\n    // if the service is eager, initialize the default instance\n    if (isComponentEager(component)) {\n      try {\n        this.getOrInitializeService({ instanceIdentifier: DEFAULT_ENTRY_NAME });\n      } catch (e) {\n        // when the instance factory for an eager Component throws an exception during the eager\n        // initialization, it should not cause a fatal error.\n        // TODO: Investigate if we need to make it configurable, because some component may want to cause\n        // a fatal error in this case?\n      }\n    }\n\n    // Create service instances for the pending promises and resolve them\n    // NOTE: if this.multipleInstances is false, only the default instance will be created\n    // and all promises with resolve with it regardless of the identifier.\n    for (const [\n      instanceIdentifier,\n      instanceDeferred\n    ] of this.instancesDeferred.entries()) {\n      const normalizedIdentifier =\n        this.normalizeInstanceIdentifier(instanceIdentifier);\n\n      try {\n        // `getOrInitializeService()` should always return a valid instance since a component is guaranteed. use ! to make typescript happy.\n        const instance = this.getOrInitializeService({\n          instanceIdentifier: normalizedIdentifier\n        })!;\n        instanceDeferred.resolve(instance);\n      } catch (e) {\n        // when the instance factory throws an exception, it should not cause\n        // a fatal error. We just leave the promise unresolved.\n      }\n    }\n  }\n\n  clearInstance(identifier: string = DEFAULT_ENTRY_NAME): void {\n    this.instancesDeferred.delete(identifier);\n    this.instancesOptions.delete(identifier);\n    this.instances.delete(identifier);\n  }\n\n  // app.delete() will call this method on every provider to delete the services\n  // TODO: should we mark the provider as deleted?\n  async delete(): Promise<void> {\n    const services = Array.from(this.instances.values());\n\n    await Promise.all([\n      ...services\n        .filter(service => 'INTERNAL' in service) // legacy services\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .map(service => (service as any).INTERNAL!.delete()),\n      ...services\n        .filter(service => '_delete' in service) // modularized services\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .map(service => (service as any)._delete())\n    ]);\n  }\n\n  isComponentSet(): boolean {\n    return this.component != null;\n  }\n\n  isInitialized(identifier: string = DEFAULT_ENTRY_NAME): boolean {\n    return this.instances.has(identifier);\n  }\n\n  getOptions(identifier: string = DEFAULT_ENTRY_NAME): Record<string, unknown> {\n    return this.instancesOptions.get(identifier) || {};\n  }\n\n  initialize(opts: InitializeOptions = {}): NameServiceMapping[T] {\n    const { options = {} } = opts;\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(\n      opts.instanceIdentifier\n    );\n    if (this.isInitialized(normalizedIdentifier)) {\n      throw Error(\n        `${this.name}(${normalizedIdentifier}) has already been initialized`\n      );\n    }\n\n    if (!this.isComponentSet()) {\n      throw Error(`Component ${this.name} has not been registered yet`);\n    }\n\n    const instance = this.getOrInitializeService({\n      instanceIdentifier: normalizedIdentifier,\n      options\n    })!;\n\n    // resolve any pending promise waiting for the service instance\n    for (const [\n      instanceIdentifier,\n      instanceDeferred\n    ] of this.instancesDeferred.entries()) {\n      const normalizedDeferredIdentifier =\n        this.normalizeInstanceIdentifier(instanceIdentifier);\n      if (normalizedIdentifier === normalizedDeferredIdentifier) {\n        instanceDeferred.resolve(instance);\n      }\n    }\n\n    return instance;\n  }\n\n  /**\n   *\n   * @param callback - a function that will be invoked  after the provider has been initialized by calling provider.initialize().\n   * The function is invoked SYNCHRONOUSLY, so it should not execute any longrunning tasks in order to not block the program.\n   *\n   * @param identifier An optional instance identifier\n   * @returns a function to unregister the callback\n   */\n  onInit(callback: OnInitCallBack<T>, identifier?: string): () => void {\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n    const existingCallbacks =\n      this.onInitCallbacks.get(normalizedIdentifier) ??\n      new Set<OnInitCallBack<T>>();\n    existingCallbacks.add(callback);\n    this.onInitCallbacks.set(normalizedIdentifier, existingCallbacks);\n\n    const existingInstance = this.instances.get(normalizedIdentifier);\n    if (existingInstance) {\n      callback(existingInstance, normalizedIdentifier);\n    }\n\n    return () => {\n      existingCallbacks.delete(callback);\n    };\n  }\n\n  /**\n   * Invoke onInit callbacks synchronously\n   * @param instance the service instance`\n   */\n  private invokeOnInitCallbacks(\n    instance: NameServiceMapping[T],\n    identifier: string\n  ): void {\n    const callbacks = this.onInitCallbacks.get(identifier);\n    if (!callbacks) {\n      return;\n    }\n    for (const callback of callbacks) {\n      try {\n        callback(instance, identifier);\n      } catch {\n        // ignore errors in the onInit callback\n      }\n    }\n  }\n\n  private getOrInitializeService({\n    instanceIdentifier,\n    options = {}\n  }: {\n    instanceIdentifier: string;\n    options?: Record<string, unknown>;\n  }): NameServiceMapping[T] | null {\n    let instance = this.instances.get(instanceIdentifier);\n    if (!instance && this.component) {\n      instance = this.component.instanceFactory(this.container, {\n        instanceIdentifier: normalizeIdentifierForFactory(instanceIdentifier),\n        options\n      });\n      this.instances.set(instanceIdentifier, instance);\n      this.instancesOptions.set(instanceIdentifier, options);\n\n      /**\n       * Invoke onInit listeners.\n       * Note this.component.onInstanceCreated is different, which is used by the component creator,\n       * while onInit listeners are registered by consumers of the provider.\n       */\n      this.invokeOnInitCallbacks(instance, instanceIdentifier);\n\n      /**\n       * Order is important\n       * onInstanceCreated() should be called after this.instances.set(instanceIdentifier, instance); which\n       * makes `isInitialized()` return true.\n       */\n      if (this.component.onInstanceCreated) {\n        try {\n          this.component.onInstanceCreated(\n            this.container,\n            instanceIdentifier,\n            instance\n          );\n        } catch {\n          // ignore errors in the onInstanceCreatedCallback\n        }\n      }\n    }\n\n    return instance || null;\n  }\n\n  private normalizeInstanceIdentifier(\n    identifier: string = DEFAULT_ENTRY_NAME\n  ): string {\n    if (this.component) {\n      return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME;\n    } else {\n      return identifier; // assume multiple instances are supported before the component is provided.\n    }\n  }\n\n  private shouldAutoInitialize(): boolean {\n    return (\n      !!this.component &&\n      this.component.instantiationMode !== InstantiationMode.EXPLICIT\n    );\n  }\n}\n\n// undefined should be passed to the service factory for the default instance\nfunction normalizeIdentifierForFactory(identifier: string): string | undefined {\n  return identifier === DEFAULT_ENTRY_NAME ? undefined : identifier;\n}\n\nfunction isComponentEager<T extends Name>(component: Component<T>): boolean {\n  return component.instantiationMode === InstantiationMode.EAGER;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Provider } from './provider';\nimport { Component } from './component';\nimport { Name } from './types';\n\n/**\n * ComponentContainer that provides Providers for service name T, e.g. `auth`, `auth-internal`\n */\nexport class ComponentContainer {\n  private readonly providers = new Map<string, Provider<Name>>();\n\n  constructor(private readonly name: string) {}\n\n  /**\n   *\n   * @param component Component being added\n   * @param overwrite When a component with the same name has already been registered,\n   * if overwrite is true: overwrite the existing component with the new component and create a new\n   * provider with the new component. It can be useful in tests where you want to use different mocks\n   * for different tests.\n   * if overwrite is false: throw an exception\n   */\n  addComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      throw new Error(\n        `Component ${component.name} has already been registered with ${this.name}`\n      );\n    }\n\n    provider.setComponent(component);\n  }\n\n  addOrOverwriteComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      // delete the existing provider from the container, so we can register the new component\n      this.providers.delete(component.name);\n    }\n\n    this.addComponent(component);\n  }\n\n  /**\n   * getProvider provides a type safe interface where it can only be called with a field name\n   * present in NameServiceMapping interface.\n   *\n   * Firebase SDKs providing services should extend NameServiceMapping interface to register\n   * themselves.\n   */\n  getProvider<T extends Name>(name: T): Provider<T> {\n    if (this.providers.has(name)) {\n      return this.providers.get(name) as unknown as Provider<T>;\n    }\n\n    // create a Provider for a service that hasn't registered with Firebase\n    const provider = new Provider<T>(name, this);\n    this.providers.set(name, provider as unknown as Provider<Name>);\n\n    return provider as Provider<T>;\n  }\n\n  getProviders(): Array<Provider<Name>> {\n    return Array.from(this.providers.values());\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport type LogLevelString =\n  | 'debug'\n  | 'verbose'\n  | 'info'\n  | 'warn'\n  | 'error'\n  | 'silent';\n\nexport interface LogOptions {\n  level: LogLevelString;\n}\n\nexport type LogCallback = (callbackParams: LogCallbackParams) => void;\n\nexport interface LogCallbackParams {\n  level: LogLevelString;\n  message: string;\n  args: unknown[];\n  type: string;\n}\n\n/**\n * A container for all of the Logger instances\n */\nexport const instances: Logger[] = [];\n\n/**\n * The JS SDK supports 5 log levels and also allows a user the ability to\n * silence the logs altogether.\n *\n * The order is a follows:\n * DEBUG < VERBOSE < INFO < WARN < ERROR\n *\n * All of the log types above the current log level will be captured (i.e. if\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\n * `VERBOSE` logs will not)\n */\nexport enum LogLevel {\n  DEBUG,\n  VERBOSE,\n  INFO,\n  WARN,\n  ERROR,\n  SILENT\n}\n\nconst levelStringToEnum: { [key in LogLevelString]: LogLevel } = {\n  'debug': LogLevel.DEBUG,\n  'verbose': LogLevel.VERBOSE,\n  'info': LogLevel.INFO,\n  'warn': LogLevel.WARN,\n  'error': LogLevel.ERROR,\n  'silent': LogLevel.SILENT\n};\n\n/**\n * The default log level\n */\nconst defaultLogLevel: LogLevel = LogLevel.INFO;\n\n/**\n * We allow users the ability to pass their own log handler. We will pass the\n * type of log, the current log level, and any other arguments passed (i.e. the\n * messages that the user wants to log) to this function.\n */\nexport type LogHandler = (\n  loggerInstance: Logger,\n  logType: LogLevel,\n  ...args: unknown[]\n) => void;\n\n/**\n * By default, `console.debug` is not displayed in the developer console (in\n * chrome). To avoid forcing users to have to opt-in to these logs twice\n * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\n * logs to the `console.log` function.\n */\nconst ConsoleMethod = {\n  [LogLevel.DEBUG]: 'log',\n  [LogLevel.VERBOSE]: 'log',\n  [LogLevel.INFO]: 'info',\n  [LogLevel.WARN]: 'warn',\n  [LogLevel.ERROR]: 'error'\n};\n\n/**\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\n * messages on to their corresponding console counterparts (if the log method\n * is supported by the current log level)\n */\nconst defaultLogHandler: LogHandler = (instance, logType, ...args): void => {\n  if (logType < instance.logLevel) {\n    return;\n  }\n  const now = new Date().toISOString();\n  const method = ConsoleMethod[logType as keyof typeof ConsoleMethod];\n  if (method) {\n    console[method as 'log' | 'info' | 'warn' | 'error'](\n      `[${now}]  ${instance.name}:`,\n      ...args\n    );\n  } else {\n    throw new Error(\n      `Attempted to log a message with an invalid logType (value: ${logType})`\n    );\n  }\n};\n\nexport class Logger {\n  /**\n   * Gives you an instance of a Logger to capture messages according to\n   * Firebase's logging scheme.\n   *\n   * @param name The name that the logs will be associated with\n   */\n  constructor(public name: string) {\n    /**\n     * Capture the current instance for later use\n     */\n    instances.push(this);\n  }\n\n  /**\n   * The log level of the given Logger instance.\n   */\n  private _logLevel = defaultLogLevel;\n\n  get logLevel(): LogLevel {\n    return this._logLevel;\n  }\n\n  set logLevel(val: LogLevel) {\n    if (!(val in LogLevel)) {\n      throw new TypeError(`Invalid value \"${val}\" assigned to \\`logLevel\\``);\n    }\n    this._logLevel = val;\n  }\n\n  // Workaround for setter/getter having to be the same type.\n  setLogLevel(val: LogLevel | LogLevelString): void {\n    this._logLevel = typeof val === 'string' ? levelStringToEnum[val] : val;\n  }\n\n  /**\n   * The main (internal) log handler for the Logger instance.\n   * Can be set to a new function in internal package code but not by user.\n   */\n  private _logHandler: LogHandler = defaultLogHandler;\n  get logHandler(): LogHandler {\n    return this._logHandler;\n  }\n  set logHandler(val: LogHandler) {\n    if (typeof val !== 'function') {\n      throw new TypeError('Value assigned to `logHandler` must be a function');\n    }\n    this._logHandler = val;\n  }\n\n  /**\n   * The optional, additional, user-defined log handler for the Logger instance.\n   */\n  private _userLogHandler: LogHandler | null = null;\n  get userLogHandler(): LogHandler | null {\n    return this._userLogHandler;\n  }\n  set userLogHandler(val: LogHandler | null) {\n    this._userLogHandler = val;\n  }\n\n  /**\n   * The functions below are all based on the `console` interface\n   */\n\n  debug(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.DEBUG, ...args);\n    this._logHandler(this, LogLevel.DEBUG, ...args);\n  }\n  log(...args: unknown[]): void {\n    this._userLogHandler &&\n      this._userLogHandler(this, LogLevel.VERBOSE, ...args);\n    this._logHandler(this, LogLevel.VERBOSE, ...args);\n  }\n  info(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.INFO, ...args);\n    this._logHandler(this, LogLevel.INFO, ...args);\n  }\n  warn(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.WARN, ...args);\n    this._logHandler(this, LogLevel.WARN, ...args);\n  }\n  error(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.ERROR, ...args);\n    this._logHandler(this, LogLevel.ERROR, ...args);\n  }\n}\n\nexport function setLogLevel(level: LogLevelString | LogLevel): void {\n  instances.forEach(inst => {\n    inst.setLogLevel(level);\n  });\n}\n\nexport function setUserLogHandler(\n  logCallback: LogCallback | null,\n  options?: LogOptions\n): void {\n  for (const instance of instances) {\n    let customLogLevel: LogLevel | null = null;\n    if (options && options.level) {\n      customLogLevel = levelStringToEnum[options.level];\n    }\n    if (logCallback === null) {\n      instance.userLogHandler = null;\n    } else {\n      instance.userLogHandler = (\n        instance: Logger,\n        level: LogLevel,\n        ...args: unknown[]\n      ) => {\n        const message = args\n          .map(arg => {\n            if (arg == null) {\n              return null;\n            } else if (typeof arg === 'string') {\n              return arg;\n            } else if (typeof arg === 'number' || typeof arg === 'boolean') {\n              return arg.toString();\n            } else if (arg instanceof Error) {\n              return arg.message;\n            } else {\n              try {\n                return JSON.stringify(arg);\n              } catch (ignored) {\n                return null;\n              }\n            }\n          })\n          .filter(arg => arg)\n          .join(' ');\n        if (level >= (customLogLevel ?? instance.logLevel)) {\n          logCallback({\n            level: LogLevel[level].toLowerCase() as LogLevelString,\n            message,\n            args,\n            type: instance.name\n          });\n        }\n      };\n    }\n  }\n}\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ComponentContainer,\n  ComponentType,\n  Provider,\n  Name\n} from '@firebase/component';\nimport { PlatformLoggerService, VersionService } from './types';\n\nexport class PlatformLoggerServiceImpl implements PlatformLoggerService {\n  constructor(private readonly container: ComponentContainer) {}\n  // In initial implementation, this will be called by installations on\n  // auth token refresh, and installations will send this string.\n  getPlatformInfoString(): string {\n    const providers = this.container.getProviders();\n    // Loop through providers and get library/version pairs from any that are\n    // version components.\n    return providers\n      .map(provider => {\n        if (isVersionServiceProvider(provider)) {\n          const service = provider.getImmediate() as VersionService;\n          return `${service.library}/${service.version}`;\n        } else {\n          return null;\n        }\n      })\n      .filter(logString => logString)\n      .join(' ');\n  }\n}\n/**\n *\n * @param provider check if this provider provides a VersionService\n *\n * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider\n * provides VersionService. The provider is not necessarily a 'app-version'\n * provider.\n */\nfunction isVersionServiceProvider(provider: Provider<Name>): boolean {\n  const component = provider.getComponent();\n  return component?.type === ComponentType.VERSION;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Logger } from '@firebase/logger';\n\nexport const logger = new Logger('@firebase/app');\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { name as appName } from '../package.json';\nimport { name as appCompatName } from '../../app-compat/package.json';\nimport { name as analyticsCompatName } from '../../../packages/analytics-compat/package.json';\nimport { name as analyticsName } from '../../../packages/analytics/package.json';\nimport { name as appCheckCompatName } from '../../../packages/app-check-compat/package.json';\nimport { name as appCheckName } from '../../../packages/app-check/package.json';\nimport { name as authName } from '../../../packages/auth/package.json';\nimport { name as authCompatName } from '../../../packages/auth-compat/package.json';\nimport { name as databaseName } from '../../../packages/database/package.json';\nimport { name as databaseCompatName } from '../../../packages/database-compat/package.json';\nimport { name as functionsName } from '../../../packages/functions/package.json';\nimport { name as functionsCompatName } from '../../../packages/functions-compat/package.json';\nimport { name as installationsName } from '../../../packages/installations/package.json';\nimport { name as installationsCompatName } from '../../../packages/installations-compat/package.json';\nimport { name as messagingName } from '../../../packages/messaging/package.json';\nimport { name as messagingCompatName } from '../../../packages/messaging-compat/package.json';\nimport { name as performanceName } from '../../../packages/performance/package.json';\nimport { name as performanceCompatName } from '../../../packages/performance-compat/package.json';\nimport { name as remoteConfigName } from '../../../packages/remote-config/package.json';\nimport { name as remoteConfigCompatName } from '../../../packages/remote-config-compat/package.json';\nimport { name as storageName } from '../../../packages/storage/package.json';\nimport { name as storageCompatName } from '../../../packages/storage-compat/package.json';\nimport { name as firestoreName } from '../../../packages/firestore/package.json';\nimport { name as vertexName } from '../../../packages/vertexai/package.json';\nimport { name as firestoreCompatName } from '../../../packages/firestore-compat/package.json';\nimport { name as packageName } from '../../../packages/firebase/package.json';\n\n/**\n * The default app name\n *\n * @internal\n */\nexport const DEFAULT_ENTRY_NAME = '[DEFAULT]';\n\nexport const PLATFORM_LOG_STRING = {\n  [appName]: 'fire-core',\n  [appCompatName]: 'fire-core-compat',\n  [analyticsName]: 'fire-analytics',\n  [analyticsCompatName]: 'fire-analytics-compat',\n  [appCheckName]: 'fire-app-check',\n  [appCheckCompatName]: 'fire-app-check-compat',\n  [authName]: 'fire-auth',\n  [authCompatName]: 'fire-auth-compat',\n  [databaseName]: 'fire-rtdb',\n  [databaseCompatName]: 'fire-rtdb-compat',\n  [functionsName]: 'fire-fn',\n  [functionsCompatName]: 'fire-fn-compat',\n  [installationsName]: 'fire-iid',\n  [installationsCompatName]: 'fire-iid-compat',\n  [messagingName]: 'fire-fcm',\n  [messagingCompatName]: 'fire-fcm-compat',\n  [performanceName]: 'fire-perf',\n  [performanceCompatName]: 'fire-perf-compat',\n  [remoteConfigName]: 'fire-rc',\n  [remoteConfigCompatName]: 'fire-rc-compat',\n  [storageName]: 'fire-gcs',\n  [storageCompatName]: 'fire-gcs-compat',\n  [firestoreName]: 'fire-fst',\n  [firestoreCompatName]: 'fire-fst-compat',\n  [vertexName]: 'fire-vertex',\n  'fire-js': 'fire-js', // Platform identifier for JS SDK.\n  [packageName]: 'fire-js-all'\n} as const;\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseServerApp\n} from './public-types';\nimport { Component, Provider, Name } from '@firebase/component';\nimport { logger } from './logger';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { FirebaseServerAppImpl } from './firebaseServerApp';\n\n/**\n * @internal\n */\nexport const _apps = new Map<string, FirebaseApp>();\n\n/**\n * @internal\n */\nexport const _serverApps = new Map<string, FirebaseServerApp>();\n\n/**\n * Registered components.\n *\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const _components = new Map<string, Component<any>>();\n\n/**\n * @param component - the component being added to this app's container\n *\n * @internal\n */\nexport function _addComponent<T extends Name>(\n  app: FirebaseApp,\n  component: Component<T>\n): void {\n  try {\n    (app as FirebaseAppImpl).container.addComponent(component);\n  } catch (e) {\n    logger.debug(\n      `Component ${component.name} failed to register with FirebaseApp ${app.name}`,\n      e\n    );\n  }\n}\n\n/**\n *\n * @internal\n */\nexport function _addOrOverwriteComponent(\n  app: FirebaseApp,\n  component: Component\n): void {\n  (app as FirebaseAppImpl).container.addOrOverwriteComponent(component);\n}\n\n/**\n *\n * @param component - the component to register\n * @returns whether or not the component is registered successfully\n *\n * @internal\n */\nexport function _registerComponent<T extends Name>(\n  component: Component<T>\n): boolean {\n  const componentName = component.name;\n  if (_components.has(componentName)) {\n    logger.debug(\n      `There were multiple attempts to register component ${componentName}.`\n    );\n\n    return false;\n  }\n\n  _components.set(componentName, component);\n\n  // add the component to existing app instances\n  for (const app of _apps.values()) {\n    _addComponent(app as FirebaseAppImpl, component);\n  }\n\n  for (const serverApp of _serverApps.values()) {\n    _addComponent(serverApp as FirebaseServerAppImpl, component);\n  }\n\n  return true;\n}\n\n/**\n *\n * @param app - FirebaseApp instance\n * @param name - service name\n *\n * @returns the provider for the service with the matching name\n *\n * @internal\n */\nexport function _getProvider<T extends Name>(\n  app: FirebaseApp,\n  name: T\n): Provider<T> {\n  const heartbeatController = (app as FirebaseAppImpl).container\n    .getProvider('heartbeat')\n    .getImmediate({ optional: true });\n  if (heartbeatController) {\n    void heartbeatController.triggerHeartbeat();\n  }\n  return (app as FirebaseAppImpl).container.getProvider(name);\n}\n\n/**\n *\n * @param app - FirebaseApp instance\n * @param name - service name\n * @param instanceIdentifier - service instance identifier in case the service supports multiple instances\n *\n * @internal\n */\nexport function _removeServiceInstance<T extends Name>(\n  app: FirebaseApp,\n  name: T,\n  instanceIdentifier: string = DEFAULT_ENTRY_NAME\n): void {\n  _getProvider(app, name).clearInstance(instanceIdentifier);\n}\n\n/**\n *\n * @param obj - an object of type FirebaseApp or FirebaseOptions.\n *\n * @returns true if the provide object is of type FirebaseApp.\n *\n * @internal\n */\nexport function _isFirebaseApp(\n  obj: FirebaseApp | FirebaseOptions\n): obj is FirebaseApp {\n  return (obj as FirebaseApp).options !== undefined;\n}\n\n/**\n *\n * @param obj - an object of type FirebaseApp.\n *\n * @returns true if the provided object is of type FirebaseServerAppImpl.\n *\n * @internal\n */\nexport function _isFirebaseServerApp(\n  obj: FirebaseApp | FirebaseServerApp\n): obj is FirebaseServerApp {\n  return (obj as FirebaseServerApp).settings !== undefined;\n}\n\n/**\n * Test only\n *\n * @internal\n */\nexport function _clearComponents(): void {\n  _components.clear();\n}\n\n/**\n * Exported in order to be used in app-compat package\n */\nexport { DEFAULT_ENTRY_NAME as _DEFAULT_ENTRY_NAME };\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorFactory, ErrorMap } from '@firebase/util';\n\nexport const enum AppError {\n  NO_APP = 'no-app',\n  BAD_APP_NAME = 'bad-app-name',\n  DUPLICATE_APP = 'duplicate-app',\n  APP_DELETED = 'app-deleted',\n  SERVER_APP_DELETED = 'server-app-deleted',\n  NO_OPTIONS = 'no-options',\n  INVALID_APP_ARGUMENT = 'invalid-app-argument',\n  INVALID_LOG_ARGUMENT = 'invalid-log-argument',\n  IDB_OPEN = 'idb-open',\n  IDB_GET = 'idb-get',\n  IDB_WRITE = 'idb-set',\n  IDB_DELETE = 'idb-delete',\n  FINALIZATION_REGISTRY_NOT_SUPPORTED = 'finalization-registry-not-supported',\n  INVALID_SERVER_APP_ENVIRONMENT = 'invalid-server-app-environment'\n}\n\nconst ERRORS: ErrorMap<AppError> = {\n  [AppError.NO_APP]:\n    \"No Firebase App '{$appName}' has been created - \" +\n    'call initializeApp() first',\n  [AppError.BAD_APP_NAME]: \"Illegal App name: '{$appName}'\",\n  [AppError.DUPLICATE_APP]:\n    \"Firebase App named '{$appName}' already exists with different options or config\",\n  [AppError.APP_DELETED]: \"Firebase App named '{$appName}' already deleted\",\n  [AppError.SERVER_APP_DELETED]: 'Firebase Server App has been deleted',\n  [AppError.NO_OPTIONS]:\n    'Need to provide options, when not being deployed to hosting via source.',\n  [AppError.INVALID_APP_ARGUMENT]:\n    'firebase.{$appName}() takes either no argument or a ' +\n    'Firebase App instance.',\n  [AppError.INVALID_LOG_ARGUMENT]:\n    'First argument to `onLog` must be null or a function.',\n  [AppError.IDB_OPEN]:\n    'Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.IDB_GET]:\n    'Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.IDB_WRITE]:\n    'Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.IDB_DELETE]:\n    'Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.FINALIZATION_REGISTRY_NOT_SUPPORTED]:\n    'FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.',\n  [AppError.INVALID_SERVER_APP_ENVIRONMENT]:\n    'FirebaseServerApp is not for use in browser environments.'\n};\n\ninterface ErrorParams {\n  [AppError.NO_APP]: { appName: string };\n  [AppError.BAD_APP_NAME]: { appName: string };\n  [AppError.DUPLICATE_APP]: { appName: string };\n  [AppError.APP_DELETED]: { appName: string };\n  [AppError.INVALID_APP_ARGUMENT]: { appName: string };\n  [AppError.IDB_OPEN]: { originalErrorMessage?: string };\n  [AppError.IDB_GET]: { originalErrorMessage?: string };\n  [AppError.IDB_WRITE]: { originalErrorMessage?: string };\n  [AppError.IDB_DELETE]: { originalErrorMessage?: string };\n  [AppError.FINALIZATION_REGISTRY_NOT_SUPPORTED]: { appName?: string };\n}\n\nexport const ERROR_FACTORY = new ErrorFactory<AppError, ErrorParams>(\n  'app',\n  'Firebase',\n  ERRORS\n);\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseAppSettings\n} from './public-types';\nimport {\n  ComponentContainer,\n  Component,\n  ComponentType\n} from '@firebase/component';\nimport { ERROR_FACTORY, AppError } from './errors';\n\nexport class FirebaseAppImpl implements FirebaseApp {\n  protected readonly _options: FirebaseOptions;\n  protected readonly _name: string;\n  /**\n   * Original config values passed in as a constructor parameter.\n   * It is only used to compare with another config object to support idempotent initializeApp().\n   *\n   * Updating automaticDataCollectionEnabled on the App instance will not change its value in _config.\n   */\n  private readonly _config: Required<FirebaseAppSettings>;\n  private _automaticDataCollectionEnabled: boolean;\n  protected _isDeleted = false;\n  private readonly _container: ComponentContainer;\n\n  constructor(\n    options: FirebaseOptions,\n    config: Required<FirebaseAppSettings>,\n    container: ComponentContainer\n  ) {\n    this._options = { ...options };\n    this._config = { ...config };\n    this._name = config.name;\n    this._automaticDataCollectionEnabled =\n      config.automaticDataCollectionEnabled;\n    this._container = container;\n    this.container.addComponent(\n      new Component('app', () => this, ComponentType.PUBLIC)\n    );\n  }\n\n  get automaticDataCollectionEnabled(): boolean {\n    this.checkDestroyed();\n    return this._automaticDataCollectionEnabled;\n  }\n\n  set automaticDataCollectionEnabled(val: boolean) {\n    this.checkDestroyed();\n    this._automaticDataCollectionEnabled = val;\n  }\n\n  get name(): string {\n    this.checkDestroyed();\n    return this._name;\n  }\n\n  get options(): FirebaseOptions {\n    this.checkDestroyed();\n    return this._options;\n  }\n\n  get config(): Required<FirebaseAppSettings> {\n    this.checkDestroyed();\n    return this._config;\n  }\n\n  get container(): ComponentContainer {\n    return this._container;\n  }\n\n  get isDeleted(): boolean {\n    return this._isDeleted;\n  }\n\n  set isDeleted(val: boolean) {\n    this._isDeleted = val;\n  }\n\n  /**\n   * This function will throw an Error if the App has already been deleted -\n   * use before performing API actions on the App.\n   */\n  protected checkDestroyed(): void {\n    if (this.isDeleted) {\n      throw ERROR_FACTORY.create(AppError.APP_DELETED, { appName: this._name });\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseServerApp,\n  FirebaseOptions,\n  FirebaseAppSettings,\n  FirebaseServerAppSettings\n} from './public-types';\nimport { DEFAULT_ENTRY_NAME, PLATFORM_LOG_STRING } from './constants';\nimport { ERROR_FACTORY, AppError } from './errors';\nimport {\n  ComponentContainer,\n  Component,\n  Name,\n  ComponentType\n} from '@firebase/component';\nimport { version } from '../../firebase/package.json';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { FirebaseServerAppImpl } from './firebaseServerApp';\nimport {\n  _apps,\n  _components,\n  _isFirebaseApp,\n  _registerComponent,\n  _serverApps\n} from './internal';\nimport { logger } from './logger';\nimport {\n  LogLevelString,\n  setLogLevel as setLogLevelImpl,\n  LogCallback,\n  LogOptions,\n  setUserLogHandler\n} from '@firebase/logger';\nimport {\n  deepEqual,\n  getDefaultAppConfig,\n  isBrowser,\n  isWebWorker\n} from '@firebase/util';\n\nexport { FirebaseError } from '@firebase/util';\n\n/**\n * The current SDK version.\n *\n * @public\n */\nexport const SDK_VERSION = version;\n\n/**\n * Creates and initializes a {@link @firebase/app#FirebaseApp} instance.\n *\n * See\n * {@link\n *   https://firebase.google.com/docs/web/setup#add_firebase_to_your_app\n *   | Add Firebase to your app} and\n * {@link\n *   https://firebase.google.com/docs/web/setup#multiple-projects\n *   | Initialize multiple projects} for detailed documentation.\n *\n * @example\n * ```javascript\n *\n * // Initialize default app\n * // Retrieve your own options values by adding a web app on\n * // https://console.firebase.google.com\n * initializeApp({\n *   apiKey: \"AIza....\",                             // Auth / General Use\n *   authDomain: \"YOUR_APP.firebaseapp.com\",         // Auth with popup/redirect\n *   databaseURL: \"https://YOUR_APP.firebaseio.com\", // Realtime Database\n *   storageBucket: \"YOUR_APP.appspot.com\",          // Storage\n *   messagingSenderId: \"123456789\"                  // Cloud Messaging\n * });\n * ```\n *\n * @example\n * ```javascript\n *\n * // Initialize another app\n * const otherApp = initializeApp({\n *   databaseURL: \"https://<OTHER_DATABASE_NAME>.firebaseio.com\",\n *   storageBucket: \"<OTHER_STORAGE_BUCKET>.appspot.com\"\n * }, \"otherApp\");\n * ```\n *\n * @param options - Options to configure the app's services.\n * @param name - Optional name of the app to initialize. If no name\n *   is provided, the default is `\"[DEFAULT]\"`.\n *\n * @returns The initialized app.\n *\n * @public\n */\nexport function initializeApp(\n  options: FirebaseOptions,\n  name?: string\n): FirebaseApp;\n/**\n * Creates and initializes a FirebaseApp instance.\n *\n * @param options - Options to configure the app's services.\n * @param config - FirebaseApp Configuration\n *\n * @public\n */\nexport function initializeApp(\n  options: FirebaseOptions,\n  config?: FirebaseAppSettings\n): FirebaseApp;\n/**\n * Creates and initializes a FirebaseApp instance.\n *\n * @public\n */\nexport function initializeApp(): FirebaseApp;\nexport function initializeApp(\n  _options?: FirebaseOptions,\n  rawConfig = {}\n): FirebaseApp {\n  let options = _options;\n\n  if (typeof rawConfig !== 'object') {\n    const name = rawConfig;\n    rawConfig = { name };\n  }\n\n  const config: Required<FirebaseAppSettings> = {\n    name: DEFAULT_ENTRY_NAME,\n    automaticDataCollectionEnabled: false,\n    ...rawConfig\n  };\n  const name = config.name;\n\n  if (typeof name !== 'string' || !name) {\n    throw ERROR_FACTORY.create(AppError.BAD_APP_NAME, {\n      appName: String(name)\n    });\n  }\n\n  options ||= getDefaultAppConfig();\n\n  if (!options) {\n    throw ERROR_FACTORY.create(AppError.NO_OPTIONS);\n  }\n\n  const existingApp = _apps.get(name) as FirebaseAppImpl;\n  if (existingApp) {\n    // return the existing app if options and config deep equal the ones in the existing app.\n    if (\n      deepEqual(options, existingApp.options) &&\n      deepEqual(config, existingApp.config)\n    ) {\n      return existingApp;\n    } else {\n      throw ERROR_FACTORY.create(AppError.DUPLICATE_APP, { appName: name });\n    }\n  }\n\n  const container = new ComponentContainer(name);\n  for (const component of _components.values()) {\n    container.addComponent(component);\n  }\n\n  const newApp = new FirebaseAppImpl(options, config, container);\n\n  _apps.set(name, newApp);\n\n  return newApp;\n}\n\n/**\n * Creates and initializes a {@link @firebase/app#FirebaseServerApp} instance.\n *\n * The `FirebaseServerApp` is similar to `FirebaseApp`, but is intended for execution in\n * server side rendering environments only. Initialization will fail if invoked from a\n * browser environment.\n *\n * See\n * {@link\n *   https://firebase.google.com/docs/web/setup#add_firebase_to_your_app\n *   | Add Firebase to your app} and\n * {@link\n *   https://firebase.google.com/docs/web/setup#multiple-projects\n *   | Initialize multiple projects} for detailed documentation.\n *\n * @example\n * ```javascript\n *\n * // Initialize an instance of `FirebaseServerApp`.\n * // Retrieve your own options values by adding a web app on\n * // https://console.firebase.google.com\n * initializeServerApp({\n *     apiKey: \"AIza....\",                             // Auth / General Use\n *     authDomain: \"YOUR_APP.firebaseapp.com\",         // Auth with popup/redirect\n *     databaseURL: \"https://YOUR_APP.firebaseio.com\", // Realtime Database\n *     storageBucket: \"YOUR_APP.appspot.com\",          // Storage\n *     messagingSenderId: \"123456789\"                  // Cloud Messaging\n *   },\n *   {\n *    authIdToken: \"Your Auth ID Token\"\n *   });\n * ```\n *\n * @param options - `Firebase.AppOptions` to configure the app's services, or a\n *   a `FirebaseApp` instance which contains the `AppOptions` within.\n * @param config - `FirebaseServerApp` configuration.\n *\n * @returns The initialized `FirebaseServerApp`.\n *\n * @public\n */\nexport function initializeServerApp(\n  options: FirebaseOptions | FirebaseApp,\n  config: FirebaseServerAppSettings\n): FirebaseServerApp;\n\nexport function initializeServerApp(\n  _options: FirebaseOptions | FirebaseApp,\n  _serverAppConfig: FirebaseServerAppSettings\n): FirebaseServerApp {\n  if (isBrowser() && !isWebWorker()) {\n    // FirebaseServerApp isn't designed to be run in browsers.\n    throw ERROR_FACTORY.create(AppError.INVALID_SERVER_APP_ENVIRONMENT);\n  }\n\n  if (_serverAppConfig.automaticDataCollectionEnabled === undefined) {\n    _serverAppConfig.automaticDataCollectionEnabled = false;\n  }\n\n  let appOptions: FirebaseOptions;\n  if (_isFirebaseApp(_options)) {\n    appOptions = _options.options;\n  } else {\n    appOptions = _options;\n  }\n\n  // Build an app name based on a hash of the configuration options.\n  const nameObj = {\n    ..._serverAppConfig,\n    ...appOptions\n  };\n\n  // However, Do not mangle the name based on releaseOnDeref, since it will vary between the\n  // construction of FirebaseServerApp instances. For example, if the object is the request headers.\n  if (nameObj.releaseOnDeref !== undefined) {\n    delete nameObj.releaseOnDeref;\n  }\n\n  const hashCode = (s: string): number => {\n    return [...s].reduce(\n      (hash, c) => (Math.imul(31, hash) + c.charCodeAt(0)) | 0,\n      0\n    );\n  };\n\n  if (_serverAppConfig.releaseOnDeref !== undefined) {\n    if (typeof FinalizationRegistry === 'undefined') {\n      throw ERROR_FACTORY.create(\n        AppError.FINALIZATION_REGISTRY_NOT_SUPPORTED,\n        {}\n      );\n    }\n  }\n\n  const nameString = '' + hashCode(JSON.stringify(nameObj));\n  const existingApp = _serverApps.get(nameString) as FirebaseServerApp;\n  if (existingApp) {\n    (existingApp as FirebaseServerAppImpl).incRefCount(\n      _serverAppConfig.releaseOnDeref\n    );\n    return existingApp;\n  }\n\n  const container = new ComponentContainer(nameString);\n  for (const component of _components.values()) {\n    container.addComponent(component);\n  }\n\n  const newApp = new FirebaseServerAppImpl(\n    appOptions,\n    _serverAppConfig,\n    nameString,\n    container\n  );\n\n  _serverApps.set(nameString, newApp);\n\n  return newApp;\n}\n\n/**\n * Retrieves a {@link @firebase/app#FirebaseApp} instance.\n *\n * When called with no arguments, the default app is returned. When an app name\n * is provided, the app corresponding to that name is returned.\n *\n * An exception is thrown if the app being retrieved has not yet been\n * initialized.\n *\n * @example\n * ```javascript\n * // Return the default app\n * const app = getApp();\n * ```\n *\n * @example\n * ```javascript\n * // Return a named app\n * const otherApp = getApp(\"otherApp\");\n * ```\n *\n * @param name - Optional name of the app to return. If no name is\n *   provided, the default is `\"[DEFAULT]\"`.\n *\n * @returns The app corresponding to the provided app name.\n *   If no app name is provided, the default app is returned.\n *\n * @public\n */\nexport function getApp(name: string = DEFAULT_ENTRY_NAME): FirebaseApp {\n  const app = _apps.get(name);\n  if (!app && name === DEFAULT_ENTRY_NAME && getDefaultAppConfig()) {\n    return initializeApp();\n  }\n  if (!app) {\n    throw ERROR_FACTORY.create(AppError.NO_APP, { appName: name });\n  }\n\n  return app;\n}\n\n/**\n * A (read-only) array of all initialized apps.\n * @public\n */\nexport function getApps(): FirebaseApp[] {\n  return Array.from(_apps.values());\n}\n\n/**\n * Renders this app unusable and frees the resources of all associated\n * services.\n *\n * @example\n * ```javascript\n * deleteApp(app)\n *   .then(function() {\n *     console.log(\"App deleted successfully\");\n *   })\n *   .catch(function(error) {\n *     console.log(\"Error deleting app:\", error);\n *   });\n * ```\n *\n * @public\n */\nexport async function deleteApp(app: FirebaseApp): Promise<void> {\n  let cleanupProviders = false;\n  const name = app.name;\n  if (_apps.has(name)) {\n    cleanupProviders = true;\n    _apps.delete(name);\n  } else if (_serverApps.has(name)) {\n    const firebaseServerApp = app as FirebaseServerAppImpl;\n    if (firebaseServerApp.decRefCount() <= 0) {\n      _serverApps.delete(name);\n      cleanupProviders = true;\n    }\n  }\n\n  if (cleanupProviders) {\n    await Promise.all(\n      (app as FirebaseAppImpl).container\n        .getProviders()\n        .map(provider => provider.delete())\n    );\n    (app as FirebaseAppImpl).isDeleted = true;\n  }\n}\n\n/**\n * Registers a library's name and version for platform logging purposes.\n * @param library - Name of 1p or 3p library (e.g. firestore, angularfire)\n * @param version - Current version of that library.\n * @param variant - Bundle variant, e.g., node, rn, etc.\n *\n * @public\n */\nexport function registerVersion(\n  libraryKeyOrName: string,\n  version: string,\n  variant?: string\n): void {\n  // TODO: We can use this check to whitelist strings when/if we set up\n  // a good whitelist system.\n  let library = PLATFORM_LOG_STRING[libraryKeyOrName] ?? libraryKeyOrName;\n  if (variant) {\n    library += `-${variant}`;\n  }\n  const libraryMismatch = library.match(/\\s|\\//);\n  const versionMismatch = version.match(/\\s|\\//);\n  if (libraryMismatch || versionMismatch) {\n    const warning = [\n      `Unable to register library \"${library}\" with version \"${version}\":`\n    ];\n    if (libraryMismatch) {\n      warning.push(\n        `library name \"${library}\" contains illegal characters (whitespace or \"/\")`\n      );\n    }\n    if (libraryMismatch && versionMismatch) {\n      warning.push('and');\n    }\n    if (versionMismatch) {\n      warning.push(\n        `version name \"${version}\" contains illegal characters (whitespace or \"/\")`\n      );\n    }\n    logger.warn(warning.join(' '));\n    return;\n  }\n  _registerComponent(\n    new Component(\n      `${library}-version` as Name,\n      () => ({ library, version }),\n      ComponentType.VERSION\n    )\n  );\n}\n\n/**\n * Sets log handler for all Firebase SDKs.\n * @param logCallback - An optional custom log handler that executes user code whenever\n * the Firebase SDK makes a logging call.\n *\n * @public\n */\nexport function onLog(\n  logCallback: LogCallback | null,\n  options?: LogOptions\n): void {\n  if (logCallback !== null && typeof logCallback !== 'function') {\n    throw ERROR_FACTORY.create(AppError.INVALID_LOG_ARGUMENT);\n  }\n  setUserLogHandler(logCallback, options);\n}\n\n/**\n * Sets log level for all Firebase SDKs.\n *\n * All of the log types above the current log level are captured (i.e. if\n * you set the log level to `info`, errors are logged, but `debug` and\n * `verbose` logs are not).\n *\n * @public\n */\nexport function setLogLevel(logLevel: LogLevelString): void {\n  setLogLevelImpl(logLevel);\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseError } from '@firebase/util';\nimport { DBSchema, openDB, IDBPDatabase } from 'idb';\nimport { AppError, ERROR_FACTORY } from './errors';\nimport { FirebaseApp } from './public-types';\nimport { HeartbeatsInIndexedDB } from './types';\nimport { logger } from './logger';\n\nconst DB_NAME = 'firebase-heartbeat-database';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'firebase-heartbeat-store';\n\ninterface AppDB extends DBSchema {\n  'firebase-heartbeat-store': {\n    key: string;\n    value: HeartbeatsInIndexedDB;\n  };\n}\n\nlet dbPromise: Promise<IDBPDatabase<AppDB>> | null = null;\nfunction getDbPromise(): Promise<IDBPDatabase<AppDB>> {\n  if (!dbPromise) {\n    dbPromise = openDB<AppDB>(DB_NAME, DB_VERSION, {\n      upgrade: (db, oldVersion) => {\n        // We don't use 'break' in this switch statement, the fall-through\n        // behavior is what we want, because if there are multiple versions between\n        // the old version and the current version, we want ALL the migrations\n        // that correspond to those versions to run, not only the last one.\n        // eslint-disable-next-line default-case\n        switch (oldVersion) {\n          case 0:\n            try {\n              db.createObjectStore(STORE_NAME);\n            } catch (e) {\n              // Safari/iOS browsers throw occasional exceptions on\n              // db.createObjectStore() that may be a bug. Avoid blocking\n              // the rest of the app functionality.\n              console.warn(e);\n            }\n        }\n      }\n    }).catch(e => {\n      throw ERROR_FACTORY.create(AppError.IDB_OPEN, {\n        originalErrorMessage: e.message\n      });\n    });\n  }\n  return dbPromise;\n}\n\nexport async function readHeartbeatsFromIndexedDB(\n  app: FirebaseApp\n): Promise<HeartbeatsInIndexedDB | undefined> {\n  try {\n    const db = await getDbPromise();\n    const tx = db.transaction(STORE_NAME);\n    const result = await tx.objectStore(STORE_NAME).get(computeKey(app));\n    // We already have the value but tx.done can throw,\n    // so we need to await it here to catch errors\n    await tx.done;\n    return result;\n  } catch (e) {\n    if (e instanceof FirebaseError) {\n      logger.warn(e.message);\n    } else {\n      const idbGetError = ERROR_FACTORY.create(AppError.IDB_GET, {\n        originalErrorMessage: (e as Error)?.message\n      });\n      logger.warn(idbGetError.message);\n    }\n  }\n}\n\nexport async function writeHeartbeatsToIndexedDB(\n  app: FirebaseApp,\n  heartbeatObject: HeartbeatsInIndexedDB\n): Promise<void> {\n  try {\n    const db = await getDbPromise();\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const objectStore = tx.objectStore(STORE_NAME);\n    await objectStore.put(heartbeatObject, computeKey(app));\n    await tx.done;\n  } catch (e) {\n    if (e instanceof FirebaseError) {\n      logger.warn(e.message);\n    } else {\n      const idbGetError = ERROR_FACTORY.create(AppError.IDB_WRITE, {\n        originalErrorMessage: (e as Error)?.message\n      });\n      logger.warn(idbGetError.message);\n    }\n  }\n}\n\nfunction computeKey(app: FirebaseApp): string {\n  return `${app.name}!${app.options.appId}`;\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ComponentContainer } from '@firebase/component';\nimport {\n  base64urlEncodeWithoutPadding,\n  isIndexedDBAvailable,\n  validateIndexedDBOpenable\n} from '@firebase/util';\nimport {\n  readHeartbeatsFromIndexedDB,\n  writeHeartbeatsToIndexedDB\n} from './indexeddb';\nimport { FirebaseApp } from './public-types';\nimport {\n  HeartbeatsByUserAgent,\n  HeartbeatService,\n  HeartbeatsInIndexedDB,\n  HeartbeatStorage,\n  SingleDateHeartbeat\n} from './types';\nimport { logger } from './logger';\n\nconst MAX_HEADER_BYTES = 1024;\n// 30 days\nconst STORED_HEARTBEAT_RETENTION_MAX_MILLIS = 30 * 24 * 60 * 60 * 1000;\n\nexport class HeartbeatServiceImpl implements HeartbeatService {\n  /**\n   * The persistence layer for heartbeats\n   * Leave public for easier testing.\n   */\n  _storage: HeartbeatStorageImpl;\n\n  /**\n   * In-memory cache for heartbeats, used by getHeartbeatsHeader() to generate\n   * the header string.\n   * Stores one record per date. This will be consolidated into the standard\n   * format of one record per user agent string before being sent as a header.\n   * Populated from indexedDB when the controller is instantiated and should\n   * be kept in sync with indexedDB.\n   * Leave public for easier testing.\n   */\n  _heartbeatsCache: HeartbeatsInIndexedDB | null = null;\n\n  /**\n   * the initialization promise for populating heartbeatCache.\n   * If getHeartbeatsHeader() is called before the promise resolves\n   * (heartbeatsCache == null), it should wait for this promise\n   * Leave public for easier testing.\n   */\n  _heartbeatsCachePromise: Promise<HeartbeatsInIndexedDB>;\n  constructor(private readonly container: ComponentContainer) {\n    const app = this.container.getProvider('app').getImmediate();\n    this._storage = new HeartbeatStorageImpl(app);\n    this._heartbeatsCachePromise = this._storage.read().then(result => {\n      this._heartbeatsCache = result;\n      return result;\n    });\n  }\n\n  /**\n   * Called to report a heartbeat. The function will generate\n   * a HeartbeatsByUserAgent object, update heartbeatsCache, and persist it\n   * to IndexedDB.\n   * Note that we only store one heartbeat per day. So if a heartbeat for today is\n   * already logged, subsequent calls to this function in the same day will be ignored.\n   */\n  async triggerHeartbeat(): Promise<void> {\n    try {\n      const platformLogger = this.container\n        .getProvider('platform-logger')\n        .getImmediate();\n\n      // This is the \"Firebase user agent\" string from the platform logger\n      // service, not the browser user agent.\n      const agent = platformLogger.getPlatformInfoString();\n      const date = getUTCDateString();\n      if (this._heartbeatsCache?.heartbeats == null) {\n        this._heartbeatsCache = await this._heartbeatsCachePromise;\n        // If we failed to construct a heartbeats cache, then return immediately.\n        if (this._heartbeatsCache?.heartbeats == null) {\n          return;\n        }\n      }\n      // Do not store a heartbeat if one is already stored for this day\n      // or if a header has already been sent today.\n      if (\n        this._heartbeatsCache.lastSentHeartbeatDate === date ||\n        this._heartbeatsCache.heartbeats.some(\n          singleDateHeartbeat => singleDateHeartbeat.date === date\n        )\n      ) {\n        return;\n      } else {\n        // There is no entry for this date. Create one.\n        this._heartbeatsCache.heartbeats.push({ date, agent });\n      }\n      // Remove entries older than 30 days.\n      this._heartbeatsCache.heartbeats =\n        this._heartbeatsCache.heartbeats.filter(singleDateHeartbeat => {\n          const hbTimestamp = new Date(singleDateHeartbeat.date).valueOf();\n          const now = Date.now();\n          return now - hbTimestamp <= STORED_HEARTBEAT_RETENTION_MAX_MILLIS;\n        });\n      return this._storage.overwrite(this._heartbeatsCache);\n    } catch (e) {\n      logger.warn(e);\n    }\n  }\n\n  /**\n   * Returns a base64 encoded string which can be attached to the heartbeat-specific header directly.\n   * It also clears all heartbeats from memory as well as in IndexedDB.\n   *\n   * NOTE: Consuming product SDKs should not send the header if this method\n   * returns an empty string.\n   */\n  async getHeartbeatsHeader(): Promise<string> {\n    try {\n      if (this._heartbeatsCache === null) {\n        await this._heartbeatsCachePromise;\n      }\n      // If it's still null or the array is empty, there is no data to send.\n      if (\n        this._heartbeatsCache?.heartbeats == null ||\n        this._heartbeatsCache.heartbeats.length === 0\n      ) {\n        return '';\n      }\n      const date = getUTCDateString();\n      // Extract as many heartbeats from the cache as will fit under the size limit.\n      const { heartbeatsToSend, unsentEntries } = extractHeartbeatsForHeader(\n        this._heartbeatsCache.heartbeats\n      );\n      const headerString = base64urlEncodeWithoutPadding(\n        JSON.stringify({ version: 2, heartbeats: heartbeatsToSend })\n      );\n      // Store last sent date to prevent another being logged/sent for the same day.\n      this._heartbeatsCache.lastSentHeartbeatDate = date;\n      if (unsentEntries.length > 0) {\n        // Store any unsent entries if they exist.\n        this._heartbeatsCache.heartbeats = unsentEntries;\n        // This seems more likely than emptying the array (below) to lead to some odd state\n        // since the cache isn't empty and this will be called again on the next request,\n        // and is probably safest if we await it.\n        await this._storage.overwrite(this._heartbeatsCache);\n      } else {\n        this._heartbeatsCache.heartbeats = [];\n        // Do not wait for this, to reduce latency.\n        void this._storage.overwrite(this._heartbeatsCache);\n      }\n      return headerString;\n    } catch (e) {\n      logger.warn(e);\n      return '';\n    }\n  }\n}\n\nfunction getUTCDateString(): string {\n  const today = new Date();\n  // Returns date format 'YYYY-MM-DD'\n  return today.toISOString().substring(0, 10);\n}\n\nexport function extractHeartbeatsForHeader(\n  heartbeatsCache: SingleDateHeartbeat[],\n  maxSize = MAX_HEADER_BYTES\n): {\n  heartbeatsToSend: HeartbeatsByUserAgent[];\n  unsentEntries: SingleDateHeartbeat[];\n} {\n  // Heartbeats grouped by user agent in the standard format to be sent in\n  // the header.\n  const heartbeatsToSend: HeartbeatsByUserAgent[] = [];\n  // Single date format heartbeats that are not sent.\n  let unsentEntries = heartbeatsCache.slice();\n  for (const singleDateHeartbeat of heartbeatsCache) {\n    // Look for an existing entry with the same user agent.\n    const heartbeatEntry = heartbeatsToSend.find(\n      hb => hb.agent === singleDateHeartbeat.agent\n    );\n    if (!heartbeatEntry) {\n      // If no entry for this user agent exists, create one.\n      heartbeatsToSend.push({\n        agent: singleDateHeartbeat.agent,\n        dates: [singleDateHeartbeat.date]\n      });\n      if (countBytes(heartbeatsToSend) > maxSize) {\n        // If the header would exceed max size, remove the added heartbeat\n        // entry and stop adding to the header.\n        heartbeatsToSend.pop();\n        break;\n      }\n    } else {\n      heartbeatEntry.dates.push(singleDateHeartbeat.date);\n      // If the header would exceed max size, remove the added date\n      // and stop adding to the header.\n      if (countBytes(heartbeatsToSend) > maxSize) {\n        heartbeatEntry.dates.pop();\n        break;\n      }\n    }\n    // Pop unsent entry from queue. (Skipped if adding the entry exceeded\n    // quota and the loop breaks early.)\n    unsentEntries = unsentEntries.slice(1);\n  }\n  return {\n    heartbeatsToSend,\n    unsentEntries\n  };\n}\n\nexport class HeartbeatStorageImpl implements HeartbeatStorage {\n  private _canUseIndexedDBPromise: Promise<boolean>;\n  constructor(public app: FirebaseApp) {\n    this._canUseIndexedDBPromise = this.runIndexedDBEnvironmentCheck();\n  }\n  async runIndexedDBEnvironmentCheck(): Promise<boolean> {\n    if (!isIndexedDBAvailable()) {\n      return false;\n    } else {\n      return validateIndexedDBOpenable()\n        .then(() => true)\n        .catch(() => false);\n    }\n  }\n  /**\n   * Read all heartbeats.\n   */\n  async read(): Promise<HeartbeatsInIndexedDB> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return { heartbeats: [] };\n    } else {\n      const idbHeartbeatObject = await readHeartbeatsFromIndexedDB(this.app);\n      if (idbHeartbeatObject?.heartbeats) {\n        return idbHeartbeatObject;\n      } else {\n        return { heartbeats: [] };\n      }\n    }\n  }\n  // overwrite the storage with the provided heartbeats\n  async overwrite(heartbeatsObject: HeartbeatsInIndexedDB): Promise<void> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return;\n    } else {\n      const existingHeartbeatsObject = await this.read();\n      return writeHeartbeatsToIndexedDB(this.app, {\n        lastSentHeartbeatDate:\n          heartbeatsObject.lastSentHeartbeatDate ??\n          existingHeartbeatsObject.lastSentHeartbeatDate,\n        heartbeats: heartbeatsObject.heartbeats\n      });\n    }\n  }\n  // add heartbeats\n  async add(heartbeatsObject: HeartbeatsInIndexedDB): Promise<void> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return;\n    } else {\n      const existingHeartbeatsObject = await this.read();\n      return writeHeartbeatsToIndexedDB(this.app, {\n        lastSentHeartbeatDate:\n          heartbeatsObject.lastSentHeartbeatDate ??\n          existingHeartbeatsObject.lastSentHeartbeatDate,\n        heartbeats: [\n          ...existingHeartbeatsObject.heartbeats,\n          ...heartbeatsObject.heartbeats\n        ]\n      });\n    }\n  }\n}\n\n/**\n * Calculate bytes of a HeartbeatsByUserAgent array after being wrapped\n * in a platform logging header JSON object, stringified, and converted\n * to base 64.\n */\nexport function countBytes(heartbeatsCache: HeartbeatsByUserAgent[]): number {\n  // base64 has a restricted set of characters, all of which should be 1 byte.\n  return base64urlEncodeWithoutPadding(\n    // heartbeatsCache wrapper properties\n    JSON.stringify({ version: 2, heartbeats: heartbeatsCache })\n  ).length;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\nimport { getDefaults } from './defaults';\n\n/**\n * Type placeholder for `WorkerGlobalScope` from `webworker`\n */\ndeclare class WorkerGlobalScope {}\n\n/**\n * Returns navigator.userAgent string or '' if it's not defined.\n * @return user agent string\n */\nexport function getUA(): string {\n  if (\n    typeof navigator !== 'undefined' &&\n    typeof navigator['userAgent'] === 'string'\n  ) {\n    return navigator['userAgent'];\n  } else {\n    return '';\n  }\n}\n\n/**\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\n *\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap\n * in the Ripple emulator) nor Cordova `onDeviceReady`, which would normally\n * wait for a callback.\n */\nexport function isMobileCordova(): boolean {\n  return (\n    typeof window !== 'undefined' &&\n    // @ts-ignore Setting up an broadly applicable index signature for Window\n    // just to deal with this case would probably be a bad idea.\n    !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\n    /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())\n  );\n}\n\n/**\n * Detect Node.js.\n *\n * @return true if Node.js environment is detected or specified.\n */\n// Node detection logic from: https://github.com/iliakan/detect-node/\nexport function isNode(): boolean {\n  const forceEnvironment = getDefaults()?.forceEnvironment;\n  if (forceEnvironment === 'node') {\n    return true;\n  } else if (forceEnvironment === 'browser') {\n    return false;\n  }\n\n  try {\n    return (\n      Object.prototype.toString.call(global.process) === '[object process]'\n    );\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Detect Browser Environment\n */\nexport function isBrowser(): boolean {\n  return typeof window !== 'undefined' || isWebWorker();\n}\n\n/**\n * Detect Web Worker context\n */\nexport function isWebWorker(): boolean {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    typeof self !== 'undefined' &&\n    self instanceof WorkerGlobalScope\n  );\n}\n\n/**\n * Detect browser extensions (Chrome and Firefox at least).\n */\ninterface BrowserRuntime {\n  id?: unknown;\n}\ndeclare const chrome: { runtime?: BrowserRuntime };\ndeclare const browser: { runtime?: BrowserRuntime };\nexport function isBrowserExtension(): boolean {\n  const runtime =\n    typeof chrome === 'object'\n      ? chrome.runtime\n      : typeof browser === 'object'\n      ? browser.runtime\n      : undefined;\n  return typeof runtime === 'object' && runtime.id !== undefined;\n}\n\n/**\n * Detect React Native.\n *\n * @return true if ReactNative environment is detected.\n */\nexport function isReactNative(): boolean {\n  return (\n    typeof navigator === 'object' && navigator['product'] === 'ReactNative'\n  );\n}\n\n/** Detects Electron apps. */\nexport function isElectron(): boolean {\n  return getUA().indexOf('Electron/') >= 0;\n}\n\n/** Detects Internet Explorer. */\nexport function isIE(): boolean {\n  const ua = getUA();\n  return ua.indexOf('MSIE ') >= 0 || ua.indexOf('Trident/') >= 0;\n}\n\n/** Detects Universal Windows Platform apps. */\nexport function isUWP(): boolean {\n  return getUA().indexOf('MSAppHost/') >= 0;\n}\n\n/**\n * Detect whether the current SDK build is the Node version.\n *\n * @return true if it's the Node SDK build.\n */\nexport function isNodeSdk(): boolean {\n  return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\n}\n\n/** Returns true if we are running in Safari. */\nexport function isSafari(): boolean {\n  return (\n    !isNode() &&\n    !!navigator.userAgent &&\n    navigator.userAgent.includes('Safari') &&\n    !navigator.userAgent.includes('Chrome')\n  );\n}\n\n/**\n * This method checks if indexedDB is supported by current browser/service worker context\n * @return true if indexedDB is supported by current browser/service worker context\n */\nexport function isIndexedDBAvailable(): boolean {\n  try {\n    return typeof indexedDB === 'object';\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * This method validates browser/sw context for indexedDB by opening a dummy indexedDB database and reject\n * if errors occur during the database open operation.\n *\n * @throws exception if current browser/sw context can't run idb.open (ex: Safari iframe, Firefox\n * private browsing)\n */\nexport function validateIndexedDBOpenable(): Promise<boolean> {\n  return new Promise((resolve, reject) => {\n    try {\n      let preExist: boolean = true;\n      const DB_CHECK_NAME =\n        'validate-browser-context-for-indexeddb-analytics-module';\n      const request = self.indexedDB.open(DB_CHECK_NAME);\n      request.onsuccess = () => {\n        request.result.close();\n        // delete database only when it doesn't pre-exist\n        if (!preExist) {\n          self.indexedDB.deleteDatabase(DB_CHECK_NAME);\n        }\n        resolve(true);\n      };\n      request.onupgradeneeded = () => {\n        preExist = false;\n      };\n\n      request.onerror = () => {\n        reject(request.error?.message || '');\n      };\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n\n/**\n *\n * This method checks whether cookie is enabled within current browser\n * @return true if cookie is enabled within current browser\n */\nexport function areCookiesEnabled(): boolean {\n  if (typeof navigator === 'undefined' || !navigator.cookieEnabled) {\n    return false;\n  }\n  return true;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, ComponentType } from '@firebase/component';\nimport { PlatformLoggerServiceImpl } from './platformLoggerService';\nimport { name, version } from '../package.json';\nimport { _registerComponent } from './internal';\nimport { registerVersion } from './api';\nimport { HeartbeatServiceImpl } from './heartbeatService';\n\nexport function registerCoreComponents(variant?: string): void {\n  _registerComponent(\n    new Component(\n      'platform-logger',\n      container => new PlatformLoggerServiceImpl(container),\n      ComponentType.PRIVATE\n    )\n  );\n  _registerComponent(\n    new Component(\n      'heartbeat',\n      container => new HeartbeatServiceImpl(container),\n      ComponentType.PRIVATE\n    )\n  );\n\n  // Register `app` package.\n  registerVersion(name, version, variant);\n  // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\n  registerVersion(name, version, '__BUILD_TARGET__');\n  // Register platform SDK identifier (no version).\n  registerVersion('fire-js', '');\n}\n","/**\n * Firebase App\n *\n * @remarks This package coordinates the communication between the different Firebase components\n * @packageDocumentation\n */\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { registerCoreComponents } from './registerCoreComponents';\n\nexport * from './api';\nexport * from './internal';\nexport * from './public-types';\n\nregisterCoreComponents('__RUNTIME_ENV__');\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerVersion } from '@firebase/app';\nimport { name, version } from '../package.json';\n\nregisterVersion(name, version, 'app');\nexport * from '@firebase/app';\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Constants used in the Firebase Storage library.\n */\n\n/**\n * Domain name for firebase storage.\n */\nexport const DEFAULT_HOST = 'firebasestorage.googleapis.com';\n\n/**\n * The key in Firebase config json for the storage bucket.\n */\nexport const CONFIG_STORAGE_BUCKET_KEY = 'storageBucket';\n\n/**\n * 2 minutes\n *\n * The timeout for all operations except upload.\n */\nexport const DEFAULT_MAX_OPERATION_RETRY_TIME = 2 * 60 * 1000;\n\n/**\n * 10 minutes\n *\n * The timeout for upload.\n */\nexport const DEFAULT_MAX_UPLOAD_RETRY_TIME = 10 * 60 * 1000;\n\n/**\n * 1 second\n */\nexport const DEFAULT_MIN_SLEEP_TIME_MILLIS = 1000;\n\n/**\n * This is the value of Number.MIN_SAFE_INTEGER, which is not well supported\n * enough for us to use it directly.\n */\nexport const MIN_SAFE_INTEGER = -9007199254740991;\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseError } from '@firebase/util';\n\nimport { CONFIG_STORAGE_BUCKET_KEY } from './constants';\n\n/**\n * An error returned by the Firebase Storage SDK.\n * @public\n */\nexport class StorageError extends FirebaseError {\n  private readonly _baseMessage: string;\n  /**\n   * Stores custom error data unique to the `StorageError`.\n   */\n  customData: { serverResponse: string | null } = { serverResponse: null };\n\n  /**\n   * @param code - A `StorageErrorCode` string to be prefixed with 'storage/' and\n   *  added to the end of the message.\n   * @param message  - Error message.\n   * @param status_ - Corresponding HTTP Status Code\n   */\n  constructor(code: StorageErrorCode, message: string, private status_ = 0) {\n    super(\n      prependCode(code),\n      `Firebase Storage: ${message} (${prependCode(code)})`\n    );\n    this._baseMessage = this.message;\n    // Without this, `instanceof StorageError`, in tests for example,\n    // returns false.\n    Object.setPrototypeOf(this, StorageError.prototype);\n  }\n\n  get status(): number {\n    return this.status_;\n  }\n\n  set status(status: number) {\n    this.status_ = status;\n  }\n\n  /**\n   * Compares a `StorageErrorCode` against this error's code, filtering out the prefix.\n   */\n  _codeEquals(code: StorageErrorCode): boolean {\n    return prependCode(code) === this.code;\n  }\n\n  /**\n   * Optional response message that was added by the server.\n   */\n  get serverResponse(): null | string {\n    return this.customData.serverResponse;\n  }\n\n  set serverResponse(serverResponse: string | null) {\n    this.customData.serverResponse = serverResponse;\n    if (this.customData.serverResponse) {\n      this.message = `${this._baseMessage}\\n${this.customData.serverResponse}`;\n    } else {\n      this.message = this._baseMessage;\n    }\n  }\n}\n\nexport const errors = {};\n\n/**\n * @public\n * Error codes that can be attached to `StorageError` objects.\n */\nexport enum StorageErrorCode {\n  // Shared between all platforms\n  UNKNOWN = 'unknown',\n  OBJECT_NOT_FOUND = 'object-not-found',\n  BUCKET_NOT_FOUND = 'bucket-not-found',\n  PROJECT_NOT_FOUND = 'project-not-found',\n  QUOTA_EXCEEDED = 'quota-exceeded',\n  UNAUTHENTICATED = 'unauthenticated',\n  UNAUTHORIZED = 'unauthorized',\n  UNAUTHORIZED_APP = 'unauthorized-app',\n  RETRY_LIMIT_EXCEEDED = 'retry-limit-exceeded',\n  INVALID_CHECKSUM = 'invalid-checksum',\n  CANCELED = 'canceled',\n  // JS specific\n  INVALID_EVENT_NAME = 'invalid-event-name',\n  INVALID_URL = 'invalid-url',\n  INVALID_DEFAULT_BUCKET = 'invalid-default-bucket',\n  NO_DEFAULT_BUCKET = 'no-default-bucket',\n  CANNOT_SLICE_BLOB = 'cannot-slice-blob',\n  SERVER_FILE_WRONG_SIZE = 'server-file-wrong-size',\n  NO_DOWNLOAD_URL = 'no-download-url',\n  INVALID_ARGUMENT = 'invalid-argument',\n  INVALID_ARGUMENT_COUNT = 'invalid-argument-count',\n  APP_DELETED = 'app-deleted',\n  INVALID_ROOT_OPERATION = 'invalid-root-operation',\n  INVALID_FORMAT = 'invalid-format',\n  INTERNAL_ERROR = 'internal-error',\n  UNSUPPORTED_ENVIRONMENT = 'unsupported-environment'\n}\n\nexport function prependCode(code: StorageErrorCode): string {\n  return 'storage/' + code;\n}\n\nexport function unknown(): StorageError {\n  const message =\n    'An unknown error occurred, please check the error payload for ' +\n    'server response.';\n  return new StorageError(StorageErrorCode.UNKNOWN, message);\n}\n\nexport function objectNotFound(path: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.OBJECT_NOT_FOUND,\n    \"Object '\" + path + \"' does not exist.\"\n  );\n}\n\nexport function bucketNotFound(bucket: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.BUCKET_NOT_FOUND,\n    \"Bucket '\" + bucket + \"' does not exist.\"\n  );\n}\n\nexport function projectNotFound(project: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.PROJECT_NOT_FOUND,\n    \"Project '\" + project + \"' does not exist.\"\n  );\n}\n\nexport function quotaExceeded(bucket: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.QUOTA_EXCEEDED,\n    \"Quota for bucket '\" +\n      bucket +\n      \"' exceeded, please view quota on \" +\n      'https://firebase.google.com/pricing/.'\n  );\n}\n\nexport function unauthenticated(): StorageError {\n  const message =\n    'User is not authenticated, please authenticate using Firebase ' +\n    'Authentication and try again.';\n  return new StorageError(StorageErrorCode.UNAUTHENTICATED, message);\n}\n\nexport function unauthorizedApp(): StorageError {\n  return new StorageError(\n    StorageErrorCode.UNAUTHORIZED_APP,\n    'This app does not have permission to access Firebase Storage on this project.'\n  );\n}\n\nexport function unauthorized(path: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.UNAUTHORIZED,\n    \"User does not have permission to access '\" + path + \"'.\"\n  );\n}\n\nexport function retryLimitExceeded(): StorageError {\n  return new StorageError(\n    StorageErrorCode.RETRY_LIMIT_EXCEEDED,\n    'Max retry time for operation exceeded, please try again.'\n  );\n}\n\nexport function invalidChecksum(\n  path: string,\n  checksum: string,\n  calculated: string\n): StorageError {\n  return new StorageError(\n    StorageErrorCode.INVALID_CHECKSUM,\n    \"Uploaded/downloaded object '\" +\n      path +\n      \"' has checksum '\" +\n      checksum +\n      \"' which does not match '\" +\n      calculated +\n      \"'. Please retry the upload/download.\"\n  );\n}\n\nexport function canceled(): StorageError {\n  return new StorageError(\n    StorageErrorCode.CANCELED,\n    'User canceled the upload/download.'\n  );\n}\n\nexport function invalidEventName(name: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.INVALID_EVENT_NAME,\n    \"Invalid event name '\" + name + \"'.\"\n  );\n}\n\nexport function invalidUrl(url: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.INVALID_URL,\n    \"Invalid URL '\" + url + \"'.\"\n  );\n}\n\nexport function invalidDefaultBucket(bucket: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.INVALID_DEFAULT_BUCKET,\n    \"Invalid default bucket '\" + bucket + \"'.\"\n  );\n}\n\nexport function noDefaultBucket(): StorageError {\n  return new StorageError(\n    StorageErrorCode.NO_DEFAULT_BUCKET,\n    'No default bucket ' +\n      \"found. Did you set the '\" +\n      CONFIG_STORAGE_BUCKET_KEY +\n      \"' property when initializing the app?\"\n  );\n}\n\nexport function cannotSliceBlob(): StorageError {\n  return new StorageError(\n    StorageErrorCode.CANNOT_SLICE_BLOB,\n    'Cannot slice blob for upload. Please retry the upload.'\n  );\n}\n\nexport function serverFileWrongSize(): StorageError {\n  return new StorageError(\n    StorageErrorCode.SERVER_FILE_WRONG_SIZE,\n    'Server recorded incorrect upload file size, please retry the upload.'\n  );\n}\n\nexport function noDownloadURL(): StorageError {\n  return new StorageError(\n    StorageErrorCode.NO_DOWNLOAD_URL,\n    'The given file does not have any download URLs.'\n  );\n}\n\nexport function missingPolyFill(polyFill: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.UNSUPPORTED_ENVIRONMENT,\n    `${polyFill} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`\n  );\n}\n\n/**\n * @internal\n */\nexport function invalidArgument(message: string): StorageError {\n  return new StorageError(StorageErrorCode.INVALID_ARGUMENT, message);\n}\n\nexport function invalidArgumentCount(\n  argMin: number,\n  argMax: number,\n  fnName: string,\n  real: number\n): StorageError {\n  let countPart;\n  let plural;\n  if (argMin === argMax) {\n    countPart = argMin;\n    plural = argMin === 1 ? 'argument' : 'arguments';\n  } else {\n    countPart = 'between ' + argMin + ' and ' + argMax;\n    plural = 'arguments';\n  }\n  return new StorageError(\n    StorageErrorCode.INVALID_ARGUMENT_COUNT,\n    'Invalid argument count in `' +\n      fnName +\n      '`: Expected ' +\n      countPart +\n      ' ' +\n      plural +\n      ', received ' +\n      real +\n      '.'\n  );\n}\n\nexport function appDeleted(): StorageError {\n  return new StorageError(\n    StorageErrorCode.APP_DELETED,\n    'The Firebase app was deleted.'\n  );\n}\n\n/**\n * @param name - The name of the operation that was invalid.\n *\n * @internal\n */\nexport function invalidRootOperation(name: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.INVALID_ROOT_OPERATION,\n    \"The operation '\" +\n      name +\n      \"' cannot be performed on a root reference, create a non-root \" +\n      \"reference using child, such as .child('file.png').\"\n  );\n}\n\n/**\n * @param format - The format that was not valid.\n * @param message - A message describing the format violation.\n */\nexport function invalidFormat(format: string, message: string): StorageError {\n  return new StorageError(\n    StorageErrorCode.INVALID_FORMAT,\n    \"String does not match format '\" + format + \"': \" + message\n  );\n}\n\n/**\n * @param message - A message describing the internal error.\n */\nexport function unsupportedEnvironment(message: string): StorageError {\n  throw new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT, message);\n}\n\n/**\n * @param message - A message describing the internal error.\n */\nexport function internalError(message: string): StorageError {\n  throw new StorageError(\n    StorageErrorCode.INTERNAL_ERROR,\n    'Internal error: ' + message\n  );\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/** Network headers */\nexport type Headers = Record<string, string>;\n\n/** Response type exposed by the networking APIs. */\nexport type ConnectionType =\n  | string\n  | ArrayBuffer\n  | Blob\n  | ReadableStream<Uint8Array>;\n\n/**\n * A lightweight wrapper around XMLHttpRequest with a\n * goog.net.XhrIo-like interface.\n *\n * You can create a new connection by invoking `newTextConnection()`,\n * `newBytesConnection()` or `newStreamConnection()`.\n */\nexport interface Connection<T extends ConnectionType> {\n  /**\n   * Sends a request to the provided URL.\n   *\n   * This method never rejects its promise. In case of encountering an error,\n   * it sets an error code internally which can be accessed by calling\n   * getErrorCode() by callers.\n   */\n  send(\n    url: string,\n    method: string,\n    body?: ArrayBufferView | Blob | string | null,\n    headers?: Headers\n  ): Promise<void>;\n\n  getErrorCode(): ErrorCode;\n\n  getStatus(): number;\n\n  getResponse(): T;\n\n  getErrorText(): string;\n\n  /**\n   * Abort the request.\n   */\n  abort(): void;\n\n  getResponseHeader(header: string): string | null;\n\n  addUploadProgressListener(listener: (p1: ProgressEvent) => void): void;\n\n  removeUploadProgressListener(listener: (p1: ProgressEvent) => void): void;\n}\n\n/**\n * Error codes for requests made by the XhrIo wrapper.\n */\nexport enum ErrorCode {\n  NO_ERROR = 0,\n  NETWORK_ERROR = 1,\n  ABORT = 2\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Functionality related to the parsing/composition of bucket/\n * object location.\n */\n\nimport { invalidDefaultBucket, invalidUrl } from './error';\nimport { DEFAULT_HOST } from './constants';\n\n/**\n * Firebase Storage location data.\n *\n * @internal\n */\nexport class Location {\n  private path_: string;\n\n  constructor(public readonly bucket: string, path: string) {\n    this.path_ = path;\n  }\n\n  get path(): string {\n    return this.path_;\n  }\n\n  get isRoot(): boolean {\n    return this.path.length === 0;\n  }\n\n  fullServerUrl(): string {\n    const encode = encodeURIComponent;\n    return '/b/' + encode(this.bucket) + '/o/' + encode(this.path);\n  }\n\n  bucketOnlyServerUrl(): string {\n    const encode = encodeURIComponent;\n    return '/b/' + encode(this.bucket) + '/o';\n  }\n\n  static makeFromBucketSpec(bucketString: string, host: string): Location {\n    let bucketLocation;\n    try {\n      bucketLocation = Location.makeFromUrl(bucketString, host);\n    } catch (e) {\n      // Not valid URL, use as-is. This lets you put bare bucket names in\n      // config.\n      return new Location(bucketString, '');\n    }\n    if (bucketLocation.path === '') {\n      return bucketLocation;\n    } else {\n      throw invalidDefaultBucket(bucketString);\n    }\n  }\n\n  static makeFromUrl(url: string, host: string): Location {\n    let location: Location | null = null;\n    const bucketDomain = '([A-Za-z0-9.\\\\-_]+)';\n\n    function gsModify(loc: Location): void {\n      if (loc.path.charAt(loc.path.length - 1) === '/') {\n        loc.path_ = loc.path_.slice(0, -1);\n      }\n    }\n    const gsPath = '(/(.*))?$';\n    const gsRegex = new RegExp('^gs://' + bucketDomain + gsPath, 'i');\n    const gsIndices = { bucket: 1, path: 3 };\n\n    function httpModify(loc: Location): void {\n      loc.path_ = decodeURIComponent(loc.path);\n    }\n    const version = 'v[A-Za-z0-9_]+';\n    const firebaseStorageHost = host.replace(/[.]/g, '\\\\.');\n    const firebaseStoragePath = '(/([^?#]*).*)?$';\n    const firebaseStorageRegExp = new RegExp(\n      `^https?://${firebaseStorageHost}/${version}/b/${bucketDomain}/o${firebaseStoragePath}`,\n      'i'\n    );\n    const firebaseStorageIndices = { bucket: 1, path: 3 };\n\n    const cloudStorageHost =\n      host === DEFAULT_HOST\n        ? '(?:storage.googleapis.com|storage.cloud.google.com)'\n        : host;\n    const cloudStoragePath = '([^?#]*)';\n    const cloudStorageRegExp = new RegExp(\n      `^https?://${cloudStorageHost}/${bucketDomain}/${cloudStoragePath}`,\n      'i'\n    );\n    const cloudStorageIndices = { bucket: 1, path: 2 };\n\n    const groups = [\n      { regex: gsRegex, indices: gsIndices, postModify: gsModify },\n      {\n        regex: firebaseStorageRegExp,\n        indices: firebaseStorageIndices,\n        postModify: httpModify\n      },\n      {\n        regex: cloudStorageRegExp,\n        indices: cloudStorageIndices,\n        postModify: httpModify\n      }\n    ];\n    for (let i = 0; i < groups.length; i++) {\n      const group = groups[i];\n      const captures = group.regex.exec(url);\n      if (captures) {\n        const bucketValue = captures[group.indices.bucket];\n        let pathValue = captures[group.indices.path];\n        if (!pathValue) {\n          pathValue = '';\n        }\n        location = new Location(bucketValue, pathValue);\n        group.postModify(location);\n        break;\n      }\n    }\n    if (location == null) {\n      throw invalidUrl(url);\n    }\n    return location;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { StorageError } from './error';\nimport { Request } from './request';\n\n/**\n * A request whose promise always fails.\n */\nexport class FailRequest<T> implements Request<T> {\n  promise_: Promise<T>;\n\n  constructor(error: StorageError) {\n    this.promise_ = Promise.reject<T>(error);\n  }\n\n  /** @inheritDoc */\n  getPromise(): Promise<T> {\n    return this.promise_;\n  }\n\n  /** @inheritDoc */\n  cancel(_appDelete = false): void {}\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { invalidArgument } from './error';\n\nexport function isJustDef<T>(p: T | null | undefined): p is T | null {\n  return p !== void 0;\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function isFunction(p: unknown): p is Function {\n  return typeof p === 'function';\n}\n\nexport function isNonArrayObject(p: unknown): boolean {\n  return typeof p === 'object' && !Array.isArray(p);\n}\n\nexport function isString(p: unknown): p is string {\n  return typeof p === 'string' || p instanceof String;\n}\n\nexport function isNativeBlob(p: unknown): p is Blob {\n  return isNativeBlobDefined() && p instanceof Blob;\n}\n\nexport function isNativeBlobDefined(): boolean {\n  return typeof Blob !== 'undefined';\n}\n\nexport function validateNumber(\n  argument: string,\n  minValue: number,\n  maxValue: number,\n  value: number\n): void {\n  if (value < minValue) {\n    throw invalidArgument(\n      `Invalid value for '${argument}'. Expected ${minValue} or greater.`\n    );\n  }\n  if (value > maxValue) {\n    throw invalidArgument(\n      `Invalid value for '${argument}'. Expected ${maxValue} or less.`\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Functions to create and manipulate URLs for the server API.\n */\nimport { UrlParams } from './requestinfo';\n\nexport function makeUrl(\n  urlPart: string,\n  host: string,\n  protocol: string\n): string {\n  let origin = host;\n  if (protocol == null) {\n    origin = `https://${host}`;\n  }\n  return `${protocol}://${origin}/v0${urlPart}`;\n}\n\nexport function makeQueryString(params: UrlParams): string {\n  const encode = encodeURIComponent;\n  let queryPart = '?';\n  for (const key in params) {\n    if (params.hasOwnProperty(key)) {\n      const nextPart = encode(key) + '=' + encode(params[key]);\n      queryPart = queryPart + nextPart + '&';\n    }\n  }\n\n  // Chop off the extra '&' or '?' on the end\n  queryPart = queryPart.slice(0, -1);\n  return queryPart;\n}\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Checks the status code to see if the action should be retried.\n *\n * @param status Current HTTP status code returned by server.\n * @param additionalRetryCodes additional retry codes to check against\n */\nexport function isRetryStatusCode(\n  status: number,\n  additionalRetryCodes: number[]\n): boolean {\n  // The codes for which to retry came from this page:\n  // https://cloud.google.com/storage/docs/exponential-backoff\n  const isFiveHundredCode = status >= 500 && status < 600;\n  const extraRetryCodes = [\n    // Request Timeout: web server didn't receive full request in time.\n    408,\n    // Too Many Requests: you're getting rate-limited, basically.\n    429\n  ];\n  const isExtraRetryCode = extraRetryCodes.indexOf(status) !== -1;\n  const isAdditionalRetryCode = additionalRetryCodes.indexOf(status) !== -1;\n  return isFiveHundredCode || isExtraRetryCode || isAdditionalRetryCode;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Defines methods used to actually send HTTP requests from\n * abstract representations.\n */\n\nimport { id as backoffId, start, stop } from './backoff';\nimport { appDeleted, canceled, retryLimitExceeded, unknown } from './error';\nimport { ErrorHandler, RequestHandler, RequestInfo } from './requestinfo';\nimport { isJustDef } from './type';\nimport { makeQueryString } from './url';\nimport { Connection, ErrorCode, Headers, ConnectionType } from './connection';\nimport { isRetryStatusCode } from './utils';\n\nexport interface Request<T> {\n  getPromise(): Promise<T>;\n\n  /**\n   * Cancels the request. IMPORTANT: the promise may still be resolved with an\n   * appropriate value (if the request is finished before you call this method,\n   * but the promise has not yet been resolved), so don't just assume it will be\n   * rejected if you call this function.\n   * @param appDelete - True if the cancelation came from the app being deleted.\n   */\n  cancel(appDelete?: boolean): void;\n}\n\n/**\n * Handles network logic for all Storage Requests, including error reporting and\n * retries with backoff.\n *\n * @param I - the type of the backend's network response.\n * @param - O the output type used by the rest of the SDK. The conversion\n * happens in the specified `callback_`.\n */\nclass NetworkRequest<I extends ConnectionType, O> implements Request<O> {\n  private pendingConnection_: Connection<I> | null = null;\n  private backoffId_: backoffId | null = null;\n  private resolve_!: (value?: O | PromiseLike<O>) => void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private reject_!: (reason?: any) => void;\n  private canceled_: boolean = false;\n  private appDelete_: boolean = false;\n  private promise_: Promise<O>;\n\n  constructor(\n    private url_: string,\n    private method_: string,\n    private headers_: Headers,\n    private body_: string | Blob | Uint8Array | null,\n    private successCodes_: number[],\n    private additionalRetryCodes_: number[],\n    private callback_: RequestHandler<I, O>,\n    private errorCallback_: ErrorHandler | null,\n    private timeout_: number,\n    private progressCallback_: ((p1: number, p2: number) => void) | null,\n    private connectionFactory_: () => Connection<I>,\n    private retry = true\n  ) {\n    this.promise_ = new Promise((resolve, reject) => {\n      this.resolve_ = resolve as (value?: O | PromiseLike<O>) => void;\n      this.reject_ = reject;\n      this.start_();\n    });\n  }\n\n  /**\n   * Actually starts the retry loop.\n   */\n  private start_(): void {\n    const doTheRequest: (\n      backoffCallback: (success: boolean, ...p2: unknown[]) => void,\n      canceled: boolean\n    ) => void = (backoffCallback, canceled) => {\n      if (canceled) {\n        backoffCallback(false, new RequestEndStatus(false, null, true));\n        return;\n      }\n      const connection = this.connectionFactory_();\n      this.pendingConnection_ = connection;\n\n      const progressListener: (\n        progressEvent: ProgressEvent\n      ) => void = progressEvent => {\n        const loaded = progressEvent.loaded;\n        const total = progressEvent.lengthComputable ? progressEvent.total : -1;\n        if (this.progressCallback_ !== null) {\n          this.progressCallback_(loaded, total);\n        }\n      };\n      if (this.progressCallback_ !== null) {\n        connection.addUploadProgressListener(progressListener);\n      }\n\n      // connection.send() never rejects, so we don't need to have a error handler or use catch on the returned promise.\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      connection\n        .send(this.url_, this.method_, this.body_, this.headers_)\n        .then(() => {\n          if (this.progressCallback_ !== null) {\n            connection.removeUploadProgressListener(progressListener);\n          }\n          this.pendingConnection_ = null;\n          const hitServer = connection.getErrorCode() === ErrorCode.NO_ERROR;\n          const status = connection.getStatus();\n          if (\n            !hitServer ||\n            (isRetryStatusCode(status, this.additionalRetryCodes_) &&\n              this.retry)\n          ) {\n            const wasCanceled = connection.getErrorCode() === ErrorCode.ABORT;\n            backoffCallback(\n              false,\n              new RequestEndStatus(false, null, wasCanceled)\n            );\n            return;\n          }\n          const successCode = this.successCodes_.indexOf(status) !== -1;\n          backoffCallback(true, new RequestEndStatus(successCode, connection));\n        });\n    };\n\n    /**\n     * @param requestWentThrough - True if the request eventually went\n     *     through, false if it hit the retry limit or was canceled.\n     */\n    const backoffDone: (\n      requestWentThrough: boolean,\n      status: RequestEndStatus<I>\n    ) => void = (requestWentThrough, status) => {\n      const resolve = this.resolve_;\n      const reject = this.reject_;\n      const connection = status.connection as Connection<I>;\n      if (status.wasSuccessCode) {\n        try {\n          const result = this.callback_(connection, connection.getResponse());\n          if (isJustDef(result)) {\n            resolve(result);\n          } else {\n            resolve();\n          }\n        } catch (e) {\n          reject(e);\n        }\n      } else {\n        if (connection !== null) {\n          const err = unknown();\n          err.serverResponse = connection.getErrorText();\n          if (this.errorCallback_) {\n            reject(this.errorCallback_(connection, err));\n          } else {\n            reject(err);\n          }\n        } else {\n          if (status.canceled) {\n            const err = this.appDelete_ ? appDeleted() : canceled();\n            reject(err);\n          } else {\n            const err = retryLimitExceeded();\n            reject(err);\n          }\n        }\n      }\n    };\n    if (this.canceled_) {\n      backoffDone(false, new RequestEndStatus(false, null, true));\n    } else {\n      this.backoffId_ = start(doTheRequest, backoffDone, this.timeout_);\n    }\n  }\n\n  /** @inheritDoc */\n  getPromise(): Promise<O> {\n    return this.promise_;\n  }\n\n  /** @inheritDoc */\n  cancel(appDelete?: boolean): void {\n    this.canceled_ = true;\n    this.appDelete_ = appDelete || false;\n    if (this.backoffId_ !== null) {\n      stop(this.backoffId_);\n    }\n    if (this.pendingConnection_ !== null) {\n      this.pendingConnection_.abort();\n    }\n  }\n}\n\n/**\n * A collection of information about the result of a network request.\n * @param opt_canceled - Defaults to false.\n */\nexport class RequestEndStatus<I extends ConnectionType> {\n  /**\n   * True if the request was canceled.\n   */\n  canceled: boolean;\n\n  constructor(\n    public wasSuccessCode: boolean,\n    public connection: Connection<I> | null,\n    canceled?: boolean\n  ) {\n    this.canceled = !!canceled;\n  }\n}\n\nexport function addAuthHeader_(\n  headers: Headers,\n  authToken: string | null\n): void {\n  if (authToken !== null && authToken.length > 0) {\n    headers['Authorization'] = 'Firebase ' + authToken;\n  }\n}\n\nexport function addVersionHeader_(\n  headers: Headers,\n  firebaseVersion?: string\n): void {\n  headers['X-Firebase-Storage-Version'] =\n    'webjs/' + (firebaseVersion ?? 'AppManager');\n}\n\nexport function addGmpidHeader_(headers: Headers, appId: string | null): void {\n  if (appId) {\n    headers['X-Firebase-GMPID'] = appId;\n  }\n}\n\nexport function addAppCheckHeader_(\n  headers: Headers,\n  appCheckToken: string | null\n): void {\n  if (appCheckToken !== null) {\n    headers['X-Firebase-AppCheck'] = appCheckToken;\n  }\n}\n\nexport function makeRequest<I extends ConnectionType, O>(\n  requestInfo: RequestInfo<I, O>,\n  appId: string | null,\n  authToken: string | null,\n  appCheckToken: string | null,\n  requestFactory: () => Connection<I>,\n  firebaseVersion?: string,\n  retry = true\n): Request<O> {\n  const queryPart = makeQueryString(requestInfo.urlParams);\n  const url = requestInfo.url + queryPart;\n  const headers = Object.assign({}, requestInfo.headers);\n  addGmpidHeader_(headers, appId);\n  addAuthHeader_(headers, authToken);\n  addVersionHeader_(headers, firebaseVersion);\n  addAppCheckHeader_(headers, appCheckToken);\n  return new NetworkRequest<I, O>(\n    url,\n    requestInfo.method,\n    headers,\n    requestInfo.body,\n    requestInfo.successCodes,\n    requestInfo.additionalRetryCodes,\n    requestInfo.handler,\n    requestInfo.errorHandler,\n    requestInfo.timeout,\n    requestInfo.progressCallback,\n    requestFactory,\n    retry\n  );\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Provides a method for running a function with exponential\n * backoff.\n */\ntype id = (p1: boolean) => void;\n\nexport { id };\n\n/**\n * Accepts a callback for an action to perform (`doRequest`),\n * and then a callback for when the backoff has completed (`backoffCompleteCb`).\n * The callback sent to start requires an argument to call (`onRequestComplete`).\n * When `start` calls `doRequest`, it passes a callback for when the request has\n * completed, `onRequestComplete`. Based on this, the backoff continues, with\n * another call to `doRequest` and the above loop continues until the timeout\n * is hit, or a successful response occurs.\n * @description\n * @param doRequest Callback to perform request\n * @param backoffCompleteCb Callback to call when backoff has been completed\n */\nexport function start(\n  doRequest: (\n    onRequestComplete: (success: boolean) => void,\n    canceled: boolean\n  ) => void,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  backoffCompleteCb: (...args: any[]) => unknown,\n  timeout: number\n): id {\n  // TODO(andysoto): make this code cleaner (probably refactor into an actual\n  // type instead of a bunch of functions with state shared in the closure)\n  let waitSeconds = 1;\n  // Would type this as \"number\" but that doesn't work for Node so ¯\\_(ツ)_/¯\n  // TODO: find a way to exclude Node type definition for storage because storage only works in browser\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  let retryTimeoutId: any = null;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  let globalTimeoutId: any = null;\n  let hitTimeout = false;\n  let cancelState = 0;\n\n  function canceled(): boolean {\n    return cancelState === 2;\n  }\n  let triggeredCallback = false;\n\n  function triggerCallback(...args: any[]): void {\n    if (!triggeredCallback) {\n      triggeredCallback = true;\n      backoffCompleteCb.apply(null, args);\n    }\n  }\n\n  function callWithDelay(millis: number): void {\n    retryTimeoutId = setTimeout(() => {\n      retryTimeoutId = null;\n      doRequest(responseHandler, canceled());\n    }, millis);\n  }\n\n  function clearGlobalTimeout(): void {\n    if (globalTimeoutId) {\n      clearTimeout(globalTimeoutId);\n    }\n  }\n\n  function responseHandler(success: boolean, ...args: any[]): void {\n    if (triggeredCallback) {\n      clearGlobalTimeout();\n      return;\n    }\n    if (success) {\n      clearGlobalTimeout();\n      triggerCallback.call(null, success, ...args);\n      return;\n    }\n    const mustStop = canceled() || hitTimeout;\n    if (mustStop) {\n      clearGlobalTimeout();\n      triggerCallback.call(null, success, ...args);\n      return;\n    }\n    if (waitSeconds < 64) {\n      /* TODO(andysoto): don't back off so quickly if we know we're offline. */\n      waitSeconds *= 2;\n    }\n    let waitMillis;\n    if (cancelState === 1) {\n      cancelState = 2;\n      waitMillis = 0;\n    } else {\n      waitMillis = (waitSeconds + Math.random()) * 1000;\n    }\n    callWithDelay(waitMillis);\n  }\n  let stopped = false;\n\n  function stop(wasTimeout: boolean): void {\n    if (stopped) {\n      return;\n    }\n    stopped = true;\n    clearGlobalTimeout();\n    if (triggeredCallback) {\n      return;\n    }\n    if (retryTimeoutId !== null) {\n      if (!wasTimeout) {\n        cancelState = 2;\n      }\n      clearTimeout(retryTimeoutId);\n      callWithDelay(0);\n    } else {\n      if (!wasTimeout) {\n        cancelState = 1;\n      }\n    }\n  }\n  callWithDelay(0);\n  globalTimeoutId = setTimeout(() => {\n    hitTimeout = true;\n    stop(true);\n  }, timeout);\n  return stop;\n}\n\n/**\n * Stops the retry loop from repeating.\n * If the function is currently \"in between\" retries, it is invoked immediately\n * with the second parameter as \"true\". Otherwise, it will be invoked once more\n * after the current invocation finishes iff the current invocation would have\n * triggered another retry.\n */\nexport function stop(id: id): void {\n  id(false);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Some methods copied from goog.fs.\n * We don't include goog.fs because it pulls in a bunch of Deferred code that\n * bloats the size of the released binary.\n */\nimport { isNativeBlobDefined } from './type';\nimport { StorageErrorCode, StorageError } from './error';\n\nfunction getBlobBuilder(): typeof IBlobBuilder | undefined {\n  if (typeof BlobBuilder !== 'undefined') {\n    return BlobBuilder;\n  } else if (typeof WebKitBlobBuilder !== 'undefined') {\n    return WebKitBlobBuilder;\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * Concatenates one or more values together and converts them to a Blob.\n *\n * @param args The values that will make up the resulting blob.\n * @return The blob.\n */\nexport function getBlob(...args: Array<string | Blob | ArrayBuffer>): Blob {\n  const BlobBuilder = getBlobBuilder();\n  if (BlobBuilder !== undefined) {\n    const bb = new BlobBuilder();\n    for (let i = 0; i < args.length; i++) {\n      bb.append(args[i]);\n    }\n    return bb.getBlob();\n  } else {\n    if (isNativeBlobDefined()) {\n      return new Blob(args);\n    } else {\n      throw new StorageError(\n        StorageErrorCode.UNSUPPORTED_ENVIRONMENT,\n        \"This browser doesn't seem to support creating Blobs\"\n      );\n    }\n  }\n}\n\n/**\n * Slices the blob. The returned blob contains data from the start byte\n * (inclusive) till the end byte (exclusive). Negative indices cannot be used.\n *\n * @param blob The blob to be sliced.\n * @param start Index of the starting byte.\n * @param end Index of the ending byte.\n * @return The blob slice or null if not supported.\n */\nexport function sliceBlob(blob: Blob, start: number, end: number): Blob | null {\n  if (blob.webkitSlice) {\n    return blob.webkitSlice(start, end);\n  } else if (blob.mozSlice) {\n    return blob.mozSlice(start, end);\n  } else if (blob.slice) {\n    return blob.slice(start, end);\n  }\n  return null;\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { missingPolyFill } from '../../implementation/error';\n\n/** Converts a Base64 encoded string to a binary string. */\nexport function decodeBase64(encoded: string): string {\n  if (typeof atob === 'undefined') {\n    throw missingPolyFill('base-64');\n  }\n  return atob(encoded);\n}\n\nexport function decodeUint8Array(data: Uint8Array): string {\n  return new TextDecoder().decode(data);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { unknown, invalidFormat } from './error';\nimport { decodeBase64 } from '../platform/base64';\n\n/**\n * An enumeration of the possible string formats for upload.\n * @public\n */\nexport type StringFormat = (typeof StringFormat)[keyof typeof StringFormat];\n/**\n * An enumeration of the possible string formats for upload.\n * @public\n */\nexport const StringFormat = {\n  /**\n   * Indicates the string should be interpreted \"raw\", that is, as normal text.\n   * The string will be interpreted as UTF-16, then uploaded as a UTF-8 byte\n   * sequence.\n   * Example: The string 'Hello! \\\\ud83d\\\\ude0a' becomes the byte sequence\n   * 48 65 6c 6c 6f 21 20 f0 9f 98 8a\n   */\n  RAW: 'raw',\n  /**\n   * Indicates the string should be interpreted as base64-encoded data.\n   * Padding characters (trailing '='s) are optional.\n   * Example: The string 'rWmO++E6t7/rlw==' becomes the byte sequence\n   * ad 69 8e fb e1 3a b7 bf eb 97\n   */\n  BASE64: 'base64',\n  /**\n   * Indicates the string should be interpreted as base64url-encoded data.\n   * Padding characters (trailing '='s) are optional.\n   * Example: The string 'rWmO--E6t7_rlw==' becomes the byte sequence\n   * ad 69 8e fb e1 3a b7 bf eb 97\n   */\n  BASE64URL: 'base64url',\n  /**\n   * Indicates the string is a data URL, such as one obtained from\n   * canvas.toDataURL().\n   * Example: the string 'data:application/octet-stream;base64,aaaa'\n   * becomes the byte sequence\n   * 69 a6 9a\n   * (the content-type \"application/octet-stream\" is also applied, but can\n   * be overridden in the metadata object).\n   */\n  DATA_URL: 'data_url'\n} as const;\n\nexport class StringData {\n  contentType: string | null;\n\n  constructor(public data: Uint8Array, contentType?: string | null) {\n    this.contentType = contentType || null;\n  }\n}\n\n/**\n * @internal\n */\nexport function dataFromString(\n  format: StringFormat,\n  stringData: string\n): StringData {\n  switch (format) {\n    case StringFormat.RAW:\n      return new StringData(utf8Bytes_(stringData));\n    case StringFormat.BASE64:\n    case StringFormat.BASE64URL:\n      return new StringData(base64Bytes_(format, stringData));\n    case StringFormat.DATA_URL:\n      return new StringData(\n        dataURLBytes_(stringData),\n        dataURLContentType_(stringData)\n      );\n    default:\n    // do nothing\n  }\n\n  // assert(false);\n  throw unknown();\n}\n\nexport function utf8Bytes_(value: string): Uint8Array {\n  const b: number[] = [];\n  for (let i = 0; i < value.length; i++) {\n    let c = value.charCodeAt(i);\n    if (c <= 127) {\n      b.push(c);\n    } else {\n      if (c <= 2047) {\n        b.push(192 | (c >> 6), 128 | (c & 63));\n      } else {\n        if ((c & 64512) === 55296) {\n          // The start of a surrogate pair.\n          const valid =\n            i < value.length - 1 && (value.charCodeAt(i + 1) & 64512) === 56320;\n          if (!valid) {\n            // The second surrogate wasn't there.\n            b.push(239, 191, 189);\n          } else {\n            const hi = c;\n            const lo = value.charCodeAt(++i);\n            c = 65536 | ((hi & 1023) << 10) | (lo & 1023);\n            b.push(\n              240 | (c >> 18),\n              128 | ((c >> 12) & 63),\n              128 | ((c >> 6) & 63),\n              128 | (c & 63)\n            );\n          }\n        } else {\n          if ((c & 64512) === 56320) {\n            // Invalid low surrogate.\n            b.push(239, 191, 189);\n          } else {\n            b.push(224 | (c >> 12), 128 | ((c >> 6) & 63), 128 | (c & 63));\n          }\n        }\n      }\n    }\n  }\n  return new Uint8Array(b);\n}\n\nexport function percentEncodedBytes_(value: string): Uint8Array {\n  let decoded;\n  try {\n    decoded = decodeURIComponent(value);\n  } catch (e) {\n    throw invalidFormat(StringFormat.DATA_URL, 'Malformed data URL.');\n  }\n  return utf8Bytes_(decoded);\n}\n\nexport function base64Bytes_(format: StringFormat, value: string): Uint8Array {\n  switch (format) {\n    case StringFormat.BASE64: {\n      const hasMinus = value.indexOf('-') !== -1;\n      const hasUnder = value.indexOf('_') !== -1;\n      if (hasMinus || hasUnder) {\n        const invalidChar = hasMinus ? '-' : '_';\n        throw invalidFormat(\n          format,\n          \"Invalid character '\" +\n            invalidChar +\n            \"' found: is it base64url encoded?\"\n        );\n      }\n      break;\n    }\n    case StringFormat.BASE64URL: {\n      const hasPlus = value.indexOf('+') !== -1;\n      const hasSlash = value.indexOf('/') !== -1;\n      if (hasPlus || hasSlash) {\n        const invalidChar = hasPlus ? '+' : '/';\n        throw invalidFormat(\n          format,\n          \"Invalid character '\" + invalidChar + \"' found: is it base64 encoded?\"\n        );\n      }\n      value = value.replace(/-/g, '+').replace(/_/g, '/');\n      break;\n    }\n    default:\n    // do nothing\n  }\n  let bytes;\n  try {\n    bytes = decodeBase64(value);\n  } catch (e) {\n    if ((e as Error).message.includes('polyfill')) {\n      throw e;\n    }\n    throw invalidFormat(format, 'Invalid character found');\n  }\n  const array = new Uint8Array(bytes.length);\n  for (let i = 0; i < bytes.length; i++) {\n    array[i] = bytes.charCodeAt(i);\n  }\n  return array;\n}\n\nclass DataURLParts {\n  base64: boolean = false;\n  contentType: string | null = null;\n  rest: string;\n\n  constructor(dataURL: string) {\n    const matches = dataURL.match(/^data:([^,]+)?,/);\n    if (matches === null) {\n      throw invalidFormat(\n        StringFormat.DATA_URL,\n        \"Must be formatted 'data:[<mediatype>][;base64],<data>\"\n      );\n    }\n    const middle = matches[1] || null;\n    if (middle != null) {\n      this.base64 = endsWith(middle, ';base64');\n      this.contentType = this.base64\n        ? middle.substring(0, middle.length - ';base64'.length)\n        : middle;\n    }\n    this.rest = dataURL.substring(dataURL.indexOf(',') + 1);\n  }\n}\n\nexport function dataURLBytes_(dataUrl: string): Uint8Array {\n  const parts = new DataURLParts(dataUrl);\n  if (parts.base64) {\n    return base64Bytes_(StringFormat.BASE64, parts.rest);\n  } else {\n    return percentEncodedBytes_(parts.rest);\n  }\n}\n\nexport function dataURLContentType_(dataUrl: string): string | null {\n  const parts = new DataURLParts(dataUrl);\n  return parts.contentType;\n}\n\nfunction endsWith(s: string, end: string): boolean {\n  const longEnough = s.length >= end.length;\n  if (!longEnough) {\n    return false;\n  }\n\n  return s.substring(s.length - end.length) === end;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @file Provides a Blob-like wrapper for various binary types (including the\n * native Blob type). This makes it possible to upload types like ArrayBuffers,\n * making uploads possible in environments without the native Blob type.\n */\nimport { sliceBlob, getBlob } from './fs';\nimport { StringFormat, dataFromString } from './string';\nimport { isNativeBlob, isNativeBlobDefined, isString } from './type';\n\n/**\n * @param opt_elideCopy - If true, doesn't copy mutable input data\n *     (e.g. Uint8Arrays). Pass true only if you know the objects will not be\n *     modified after this blob's construction.\n *\n * @internal\n */\nexport class FbsBlob {\n  private data_!: Blob | Uint8Array;\n  private size_: number;\n  private type_: string;\n\n  constructor(data: Blob | Uint8Array | ArrayBuffer, elideCopy?: boolean) {\n    let size: number = 0;\n    let blobType: string = '';\n    if (isNativeBlob(data)) {\n      this.data_ = data as Blob;\n      size = (data as Blob).size;\n      blobType = (data as Blob).type;\n    } else if (data instanceof ArrayBuffer) {\n      if (elideCopy) {\n        this.data_ = new Uint8Array(data);\n      } else {\n        this.data_ = new Uint8Array(data.byteLength);\n        this.data_.set(new Uint8Array(data));\n      }\n      size = this.data_.length;\n    } else if (data instanceof Uint8Array) {\n      if (elideCopy) {\n        this.data_ = data as Uint8Array;\n      } else {\n        this.data_ = new Uint8Array(data.length);\n        this.data_.set(data as Uint8Array);\n      }\n      size = data.length;\n    }\n    this.size_ = size;\n    this.type_ = blobType;\n  }\n\n  size(): number {\n    return this.size_;\n  }\n\n  type(): string {\n    return this.type_;\n  }\n\n  slice(startByte: number, endByte: number): FbsBlob | null {\n    if (isNativeBlob(this.data_)) {\n      const realBlob = this.data_ as Blob;\n      const sliced = sliceBlob(realBlob, startByte, endByte);\n      if (sliced === null) {\n        return null;\n      }\n      return new FbsBlob(sliced);\n    } else {\n      const slice = new Uint8Array(\n        (this.data_ as Uint8Array).buffer,\n        startByte,\n        endByte - startByte\n      );\n      return new FbsBlob(slice, true);\n    }\n  }\n\n  static getBlob(...args: Array<string | FbsBlob>): FbsBlob | null {\n    if (isNativeBlobDefined()) {\n      const blobby: Array<Blob | Uint8Array | string> = args.map(\n        (val: string | FbsBlob): Blob | Uint8Array | string => {\n          if (val instanceof FbsBlob) {\n            return val.data_;\n          } else {\n            return val;\n          }\n        }\n      );\n      return new FbsBlob(getBlob.apply(null, blobby));\n    } else {\n      const uint8Arrays: Uint8Array[] = args.map(\n        (val: string | FbsBlob): Uint8Array => {\n          if (isString(val)) {\n            return dataFromString(StringFormat.RAW, val as string).data;\n          } else {\n            // Blobs don't exist, so this has to be a Uint8Array.\n            return (val as FbsBlob).data_ as Uint8Array;\n          }\n        }\n      );\n      let finalLength = 0;\n      uint8Arrays.forEach((array: Uint8Array): void => {\n        finalLength += array.byteLength;\n      });\n      const merged = new Uint8Array(finalLength);\n      let index = 0;\n      uint8Arrays.forEach((array: Uint8Array) => {\n        for (let i = 0; i < array.length; i++) {\n          merged[index++] = array[i];\n        }\n      });\n      return new FbsBlob(merged, true);\n    }\n  }\n\n  uploadData(): Blob | Uint8Array {\n    return this.data_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isNonArrayObject } from './type';\n\n/**\n * Returns the Object resulting from parsing the given JSON, or null if the\n * given string does not represent a JSON object.\n */\nexport function jsonObjectOrNull(\n  s: string\n): { [name: string]: unknown } | null {\n  let obj;\n  try {\n    obj = JSON.parse(s);\n  } catch (e) {\n    return null;\n  }\n  if (isNonArrayObject(obj)) {\n    return obj;\n  } else {\n    return null;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Contains helper methods for manipulating paths.\n */\n\n/**\n * @return Null if the path is already at the root.\n */\nexport function parent(path: string): string | null {\n  if (path.length === 0) {\n    return null;\n  }\n  const index = path.lastIndexOf('/');\n  if (index === -1) {\n    return '';\n  }\n  const newPath = path.slice(0, index);\n  return newPath;\n}\n\nexport function child(path: string, childPath: string): string {\n  const canonicalChildPath = childPath\n    .split('/')\n    .filter(component => component.length > 0)\n    .join('/');\n  if (path.length === 0) {\n    return canonicalChildPath;\n  } else {\n    return path + '/' + canonicalChildPath;\n  }\n}\n\n/**\n * Returns the last component of a path.\n * '/foo/bar' -> 'bar'\n * '/foo/bar/baz/' -> 'baz/'\n * '/a' -> 'a'\n */\nexport function lastComponent(path: string): string {\n  const index = path.lastIndexOf('/', path.length - 2);\n  if (index === -1) {\n    return path;\n  } else {\n    return path.slice(index + 1);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Documentation for the metadata format\n */\nimport { Metadata } from '../metadata';\n\nimport { jsonObjectOrNull } from './json';\nimport { Location } from './location';\nimport { lastComponent } from './path';\nimport { isString } from './type';\nimport { makeUrl, makeQueryString } from './url';\nimport { Reference } from '../reference';\nimport { FirebaseStorageImpl } from '../service';\n\nexport function noXform_<T>(metadata: Metadata, value: T): T {\n  return value;\n}\n\nclass Mapping<T> {\n  local: string;\n  writable: boolean;\n  xform: (p1: Metadata, p2?: T) => T | undefined;\n\n  constructor(\n    public server: string,\n    local?: string | null,\n    writable?: boolean,\n    xform?: ((p1: Metadata, p2?: T) => T | undefined) | null\n  ) {\n    this.local = local || server;\n    this.writable = !!writable;\n    this.xform = xform || noXform_;\n  }\n}\ntype Mappings = Array<Mapping<string> | Mapping<number>>;\n\nexport { Mappings };\n\nlet mappings_: Mappings | null = null;\n\nexport function xformPath(fullPath: string | undefined): string | undefined {\n  if (!isString(fullPath) || fullPath.length < 2) {\n    return fullPath;\n  } else {\n    return lastComponent(fullPath);\n  }\n}\n\nexport function getMappings(): Mappings {\n  if (mappings_) {\n    return mappings_;\n  }\n  const mappings: Mappings = [];\n  mappings.push(new Mapping<string>('bucket'));\n  mappings.push(new Mapping<string>('generation'));\n  mappings.push(new Mapping<string>('metageneration'));\n  mappings.push(new Mapping<string>('name', 'fullPath', true));\n\n  function mappingsXformPath(\n    _metadata: Metadata,\n    fullPath: string | undefined\n  ): string | undefined {\n    return xformPath(fullPath);\n  }\n  const nameMapping = new Mapping<string>('name');\n  nameMapping.xform = mappingsXformPath;\n  mappings.push(nameMapping);\n\n  /**\n   * Coerces the second param to a number, if it is defined.\n   */\n  function xformSize(\n    _metadata: Metadata,\n    size?: number | string\n  ): number | undefined {\n    if (size !== undefined) {\n      return Number(size);\n    } else {\n      return size;\n    }\n  }\n  const sizeMapping = new Mapping<number>('size');\n  sizeMapping.xform = xformSize;\n  mappings.push(sizeMapping);\n  mappings.push(new Mapping<number>('timeCreated'));\n  mappings.push(new Mapping<string>('updated'));\n  mappings.push(new Mapping<string>('md5Hash', null, true));\n  mappings.push(new Mapping<string>('cacheControl', null, true));\n  mappings.push(new Mapping<string>('contentDisposition', null, true));\n  mappings.push(new Mapping<string>('contentEncoding', null, true));\n  mappings.push(new Mapping<string>('contentLanguage', null, true));\n  mappings.push(new Mapping<string>('contentType', null, true));\n  mappings.push(new Mapping<string>('metadata', 'customMetadata', true));\n  mappings_ = mappings;\n  return mappings_;\n}\n\nexport function addRef(metadata: Metadata, service: FirebaseStorageImpl): void {\n  function generateRef(): Reference {\n    const bucket: string = metadata['bucket'] as string;\n    const path: string = metadata['fullPath'] as string;\n    const loc = new Location(bucket, path);\n    return service._makeStorageReference(loc);\n  }\n  Object.defineProperty(metadata, 'ref', { get: generateRef });\n}\n\nexport function fromResource(\n  service: FirebaseStorageImpl,\n  resource: { [name: string]: unknown },\n  mappings: Mappings\n): Metadata {\n  const metadata: Metadata = {} as Metadata;\n  metadata['type'] = 'file';\n  const len = mappings.length;\n  for (let i = 0; i < len; i++) {\n    const mapping = mappings[i];\n    metadata[mapping.local] = (mapping as Mapping<unknown>).xform(\n      metadata,\n      resource[mapping.server]\n    );\n  }\n  addRef(metadata, service);\n  return metadata;\n}\n\nexport function fromResourceString(\n  service: FirebaseStorageImpl,\n  resourceString: string,\n  mappings: Mappings\n): Metadata | null {\n  const obj = jsonObjectOrNull(resourceString);\n  if (obj === null) {\n    return null;\n  }\n  const resource = obj as Metadata;\n  return fromResource(service, resource, mappings);\n}\n\nexport function downloadUrlFromResourceString(\n  metadata: Metadata,\n  resourceString: string,\n  host: string,\n  protocol: string\n): string | null {\n  const obj = jsonObjectOrNull(resourceString);\n  if (obj === null) {\n    return null;\n  }\n  if (!isString(obj['downloadTokens'])) {\n    // This can happen if objects are uploaded through GCS and retrieved\n    // through list, so we don't want to throw an Error.\n    return null;\n  }\n  const tokens: string = obj['downloadTokens'] as string;\n  if (tokens.length === 0) {\n    return null;\n  }\n  const encode = encodeURIComponent;\n  const tokensList = tokens.split(',');\n  const urls = tokensList.map((token: string): string => {\n    const bucket: string = metadata['bucket'] as string;\n    const path: string = metadata['fullPath'] as string;\n    const urlPart = '/b/' + encode(bucket) + '/o/' + encode(path);\n    const base = makeUrl(urlPart, host, protocol);\n    const queryString = makeQueryString({\n      alt: 'media',\n      token\n    });\n    return base + queryString;\n  });\n  return urls[0];\n}\n\nexport function toResourceString(\n  metadata: Partial<Metadata>,\n  mappings: Mappings\n): string {\n  const resource: {\n    [prop: string]: unknown;\n  } = {};\n  const len = mappings.length;\n  for (let i = 0; i < len; i++) {\n    const mapping = mappings[i];\n    if (mapping.writable) {\n      resource[mapping.server] = metadata[mapping.local];\n    }\n  }\n  return JSON.stringify(resource);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { StorageError } from './error';\nimport { Headers, Connection, ConnectionType } from './connection';\n\n/**\n * Type for url params stored in RequestInfo.\n */\nexport interface UrlParams {\n  [name: string]: string | number;\n}\n\n/**\n * A function that converts a server response to the API type expected by the\n * SDK.\n *\n * @param I - the type of the backend's network response\n * @param O - the output response type used by the rest of the SDK.\n */\nexport type RequestHandler<I extends ConnectionType, O> = (\n  connection: Connection<I>,\n  response: I\n) => O;\n\n/** A function to handle an error. */\nexport type ErrorHandler = (\n  connection: Connection<ConnectionType>,\n  response: StorageError\n) => StorageError;\n\n/**\n * Contains a fully specified request.\n *\n * @param I - the type of the backend's network response.\n * @param O - the output response type used by the rest of the SDK.\n */\nexport class RequestInfo<I extends ConnectionType, O> {\n  urlParams: UrlParams = {};\n  headers: Headers = {};\n  body: Blob | string | Uint8Array | null = null;\n  errorHandler: ErrorHandler | null = null;\n\n  /**\n   * Called with the current number of bytes uploaded and total size (-1 if not\n   * computable) of the request body (i.e. used to report upload progress).\n   */\n  progressCallback: ((p1: number, p2: number) => void) | null = null;\n  successCodes: number[] = [200];\n  additionalRetryCodes: number[] = [];\n\n  constructor(\n    public url: string,\n    public method: string,\n    /**\n     * Returns the value with which to resolve the request's promise. Only called\n     * if the request is successful. Throw from this function to reject the\n     * returned Request's promise with the thrown error.\n     * Note: The XhrIo passed to this function may be reused after this callback\n     * returns. Do not keep a reference to it in any way.\n     */\n    public handler: RequestHandler<I, O>,\n    public timeout: number\n  ) {}\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Defines methods for interacting with the network.\n */\n\nimport { Metadata } from '../metadata';\nimport { ListResult } from '../list';\nimport { FbsBlob } from './blob';\nimport {\n  StorageError,\n  cannotSliceBlob,\n  unauthenticated,\n  quotaExceeded,\n  unauthorized,\n  objectNotFound,\n  serverFileWrongSize,\n  unknown,\n  unauthorizedApp\n} from './error';\nimport { Location } from './location';\nimport {\n  Mappings,\n  fromResourceString,\n  downloadUrlFromResourceString,\n  toResourceString\n} from './metadata';\nimport { fromResponseString } from './list';\nimport { RequestInfo, UrlParams } from './requestinfo';\nimport { isString } from './type';\nimport { makeUrl } from './url';\nimport { Connection, ConnectionType } from './connection';\nimport { FirebaseStorageImpl } from '../service';\n\n/**\n * Throws the UNKNOWN StorageError if cndn is false.\n */\nexport function handlerCheck(cndn: boolean): void {\n  if (!cndn) {\n    throw unknown();\n  }\n}\n\nexport function metadataHandler(\n  service: FirebaseStorageImpl,\n  mappings: Mappings\n): (p1: Connection<string>, p2: string) => Metadata {\n  function handler(xhr: Connection<string>, text: string): Metadata {\n    const metadata = fromResourceString(service, text, mappings);\n    handlerCheck(metadata !== null);\n    return metadata as Metadata;\n  }\n  return handler;\n}\n\nexport function listHandler(\n  service: FirebaseStorageImpl,\n  bucket: string\n): (p1: Connection<string>, p2: string) => ListResult {\n  function handler(xhr: Connection<string>, text: string): ListResult {\n    const listResult = fromResponseString(service, bucket, text);\n    handlerCheck(listResult !== null);\n    return listResult as ListResult;\n  }\n  return handler;\n}\n\nexport function downloadUrlHandler(\n  service: FirebaseStorageImpl,\n  mappings: Mappings\n): (p1: Connection<string>, p2: string) => string | null {\n  function handler(xhr: Connection<string>, text: string): string | null {\n    const metadata = fromResourceString(service, text, mappings);\n    handlerCheck(metadata !== null);\n    return downloadUrlFromResourceString(\n      metadata as Metadata,\n      text,\n      service.host,\n      service._protocol\n    );\n  }\n  return handler;\n}\n\nexport function sharedErrorHandler(\n  location: Location\n): (p1: Connection<ConnectionType>, p2: StorageError) => StorageError {\n  function errorHandler(\n    xhr: Connection<ConnectionType>,\n    err: StorageError\n  ): StorageError {\n    let newErr: StorageError;\n    if (xhr.getStatus() === 401) {\n      if (\n        // This exact message string is the only consistent part of the\n        // server's error response that identifies it as an App Check error.\n        xhr.getErrorText().includes('Firebase App Check token is invalid')\n      ) {\n        newErr = unauthorizedApp();\n      } else {\n        newErr = unauthenticated();\n      }\n    } else {\n      if (xhr.getStatus() === 402) {\n        newErr = quotaExceeded(location.bucket);\n      } else {\n        if (xhr.getStatus() === 403) {\n          newErr = unauthorized(location.path);\n        } else {\n          newErr = err;\n        }\n      }\n    }\n    newErr.status = xhr.getStatus();\n    newErr.serverResponse = err.serverResponse;\n    return newErr;\n  }\n  return errorHandler;\n}\n\nexport function objectErrorHandler(\n  location: Location\n): (p1: Connection<ConnectionType>, p2: StorageError) => StorageError {\n  const shared = sharedErrorHandler(location);\n\n  function errorHandler(\n    xhr: Connection<ConnectionType>,\n    err: StorageError\n  ): StorageError {\n    let newErr = shared(xhr, err);\n    if (xhr.getStatus() === 404) {\n      newErr = objectNotFound(location.path);\n    }\n    newErr.serverResponse = err.serverResponse;\n    return newErr;\n  }\n  return errorHandler;\n}\n\nexport function getMetadata(\n  service: FirebaseStorageImpl,\n  location: Location,\n  mappings: Mappings\n): RequestInfo<string, Metadata> {\n  const urlPart = location.fullServerUrl();\n  const url = makeUrl(urlPart, service.host, service._protocol);\n  const method = 'GET';\n  const timeout = service.maxOperationRetryTime;\n  const requestInfo = new RequestInfo(\n    url,\n    method,\n    metadataHandler(service, mappings),\n    timeout\n  );\n  requestInfo.errorHandler = objectErrorHandler(location);\n  return requestInfo;\n}\n\nexport function list(\n  service: FirebaseStorageImpl,\n  location: Location,\n  delimiter?: string,\n  pageToken?: string | null,\n  maxResults?: number | null\n): RequestInfo<string, ListResult> {\n  const urlParams: UrlParams = {};\n  if (location.isRoot) {\n    urlParams['prefix'] = '';\n  } else {\n    urlParams['prefix'] = location.path + '/';\n  }\n  if (delimiter && delimiter.length > 0) {\n    urlParams['delimiter'] = delimiter;\n  }\n  if (pageToken) {\n    urlParams['pageToken'] = pageToken;\n  }\n  if (maxResults) {\n    urlParams['maxResults'] = maxResults;\n  }\n  const urlPart = location.bucketOnlyServerUrl();\n  const url = makeUrl(urlPart, service.host, service._protocol);\n  const method = 'GET';\n  const timeout = service.maxOperationRetryTime;\n  const requestInfo = new RequestInfo(\n    url,\n    method,\n    listHandler(service, location.bucket),\n    timeout\n  );\n  requestInfo.urlParams = urlParams;\n  requestInfo.errorHandler = sharedErrorHandler(location);\n  return requestInfo;\n}\n\nexport function getBytes<I extends ConnectionType>(\n  service: FirebaseStorageImpl,\n  location: Location,\n  maxDownloadSizeBytes?: number\n): RequestInfo<I, I> {\n  const urlPart = location.fullServerUrl();\n  const url = makeUrl(urlPart, service.host, service._protocol) + '?alt=media';\n  const method = 'GET';\n  const timeout = service.maxOperationRetryTime;\n  const requestInfo = new RequestInfo(\n    url,\n    method,\n    (_: Connection<I>, data: I) => data,\n    timeout\n  );\n  requestInfo.errorHandler = objectErrorHandler(location);\n  if (maxDownloadSizeBytes !== undefined) {\n    requestInfo.headers['Range'] = `bytes=0-${maxDownloadSizeBytes}`;\n    requestInfo.successCodes = [200 /* OK */, 206 /* Partial Content */];\n  }\n  return requestInfo;\n}\n\nexport function getDownloadUrl(\n  service: FirebaseStorageImpl,\n  location: Location,\n  mappings: Mappings\n): RequestInfo<string, string | null> {\n  const urlPart = location.fullServerUrl();\n  const url = makeUrl(urlPart, service.host, service._protocol);\n  const method = 'GET';\n  const timeout = service.maxOperationRetryTime;\n  const requestInfo = new RequestInfo(\n    url,\n    method,\n    downloadUrlHandler(service, mappings),\n    timeout\n  );\n  requestInfo.errorHandler = objectErrorHandler(location);\n  return requestInfo;\n}\n\nexport function updateMetadata(\n  service: FirebaseStorageImpl,\n  location: Location,\n  metadata: Partial<Metadata>,\n  mappings: Mappings\n): RequestInfo<string, Metadata> {\n  const urlPart = location.fullServerUrl();\n  const url = makeUrl(urlPart, service.host, service._protocol);\n  const method = 'PATCH';\n  const body = toResourceString(metadata, mappings);\n  const headers = { 'Content-Type': 'application/json; charset=utf-8' };\n  const timeout = service.maxOperationRetryTime;\n  const requestInfo = new RequestInfo(\n    url,\n    method,\n    metadataHandler(service, mappings),\n    timeout\n  );\n  requestInfo.headers = headers;\n  requestInfo.body = body;\n  requestInfo.errorHandler = objectErrorHandler(location);\n  return requestInfo;\n}\n\nexport function deleteObject(\n  service: FirebaseStorageImpl,\n  location: Location\n): RequestInfo<string, void> {\n  const urlPart = location.fullServerUrl();\n  const url = makeUrl(urlPart, service.host, service._protocol);\n  const method = 'DELETE';\n  const timeout = service.maxOperationRetryTime;\n\n  function handler(_xhr: Connection<string>, _text: string): void {}\n  const requestInfo = new RequestInfo(url, method, handler, timeout);\n  requestInfo.successCodes = [200, 204];\n  requestInfo.errorHandler = objectErrorHandler(location);\n  return requestInfo;\n}\n\nexport function determineContentType_(\n  metadata: Metadata | null,\n  blob: FbsBlob | null\n): string {\n  return (\n    (metadata && metadata['contentType']) ||\n    (blob && blob.type()) ||\n    'application/octet-stream'\n  );\n}\n\nexport function metadataForUpload_(\n  location: Location,\n  blob: FbsBlob,\n  metadata?: Metadata | null\n): Metadata {\n  const metadataClone = Object.assign({}, metadata);\n  metadataClone['fullPath'] = location.path;\n  metadataClone['size'] = blob.size();\n  if (!metadataClone['contentType']) {\n    metadataClone['contentType'] = determineContentType_(null, blob);\n  }\n  return metadataClone;\n}\n\n/**\n * Prepare RequestInfo for uploads as Content-Type: multipart.\n */\nexport function multipartUpload(\n  service: FirebaseStorageImpl,\n  location: Location,\n  mappings: Mappings,\n  blob: FbsBlob,\n  metadata?: Metadata | null\n): RequestInfo<string, Metadata> {\n  const urlPart = location.bucketOnlyServerUrl();\n  const headers: { [prop: string]: string } = {\n    'X-Goog-Upload-Protocol': 'multipart'\n  };\n\n  function genBoundary(): string {\n    let str = '';\n    for (let i = 0; i < 2; i++) {\n      str = str + Math.random().toString().slice(2);\n    }\n    return str;\n  }\n  const boundary = genBoundary();\n  headers['Content-Type'] = 'multipart/related; boundary=' + boundary;\n  const metadata_ = metadataForUpload_(location, blob, metadata);\n  const metadataString = toResourceString(metadata_, mappings);\n  const preBlobPart =\n    '--' +\n    boundary +\n    '\\r\\n' +\n    'Content-Type: application/json; charset=utf-8\\r\\n\\r\\n' +\n    metadataString +\n    '\\r\\n--' +\n    boundary +\n    '\\r\\n' +\n    'Content-Type: ' +\n    metadata_['contentType'] +\n    '\\r\\n\\r\\n';\n  const postBlobPart = '\\r\\n--' + boundary + '--';\n  const body = FbsBlob.getBlob(preBlobPart, blob, postBlobPart);\n  if (body === null) {\n    throw cannotSliceBlob();\n  }\n  const urlParams: UrlParams = { name: metadata_['fullPath']! };\n  const url = makeUrl(urlPart, service.host, service._protocol);\n  const method = 'POST';\n  const timeout = service.maxUploadRetryTime;\n  const requestInfo = new RequestInfo(\n    url,\n    method,\n    metadataHandler(service, mappings),\n    timeout\n  );\n  requestInfo.urlParams = urlParams;\n  requestInfo.headers = headers;\n  requestInfo.body = body.uploadData();\n  requestInfo.errorHandler = sharedErrorHandler(location);\n  return requestInfo;\n}\n\n/**\n * @param current The number of bytes that have been uploaded so far.\n * @param total The total number of bytes in the upload.\n * @param opt_finalized True if the server has finished the upload.\n * @param opt_metadata The upload metadata, should\n *     only be passed if opt_finalized is true.\n */\nexport class ResumableUploadStatus {\n  finalized: boolean;\n  metadata: Metadata | null;\n\n  constructor(\n    public current: number,\n    public total: number,\n    finalized?: boolean,\n    metadata?: Metadata | null\n  ) {\n    this.finalized = !!finalized;\n    this.metadata = metadata || null;\n  }\n}\n\nexport function checkResumeHeader_(\n  xhr: Connection<string>,\n  allowed?: string[]\n): string {\n  let status: string | null = null;\n  try {\n    status = xhr.getResponseHeader('X-Goog-Upload-Status');\n  } catch (e) {\n    handlerCheck(false);\n  }\n  const allowedStatus = allowed || ['active'];\n  handlerCheck(!!status && allowedStatus.indexOf(status) !== -1);\n  return status as string;\n}\n\nexport function createResumableUpload(\n  service: FirebaseStorageImpl,\n  location: Location,\n  mappings: Mappings,\n  blob: FbsBlob,\n  metadata?: Metadata | null\n): RequestInfo<string, string> {\n  const urlPart = location.bucketOnlyServerUrl();\n  const metadataForUpload = metadataForUpload_(location, blob, metadata);\n  const urlParams: UrlParams = { name: metadataForUpload['fullPath']! };\n  const url = makeUrl(urlPart, service.host, service._protocol);\n  const method = 'POST';\n  const headers = {\n    'X-Goog-Upload-Protocol': 'resumable',\n    'X-Goog-Upload-Command': 'start',\n    'X-Goog-Upload-Header-Content-Length': `${blob.size()}`,\n    'X-Goog-Upload-Header-Content-Type': metadataForUpload['contentType']!,\n    'Content-Type': 'application/json; charset=utf-8'\n  };\n  const body = toResourceString(metadataForUpload, mappings);\n  const timeout = service.maxUploadRetryTime;\n\n  function handler(xhr: Connection<string>): string {\n    checkResumeHeader_(xhr);\n    let url;\n    try {\n      url = xhr.getResponseHeader('X-Goog-Upload-URL');\n    } catch (e) {\n      handlerCheck(false);\n    }\n    handlerCheck(isString(url));\n    return url as string;\n  }\n  const requestInfo = new RequestInfo(url, method, handler, timeout);\n  requestInfo.urlParams = urlParams;\n  requestInfo.headers = headers;\n  requestInfo.body = body;\n  requestInfo.errorHandler = sharedErrorHandler(location);\n  return requestInfo;\n}\n\n/**\n * @param url From a call to fbs.requests.createResumableUpload.\n */\nexport function getResumableUploadStatus(\n  service: FirebaseStorageImpl,\n  location: Location,\n  url: string,\n  blob: FbsBlob\n): RequestInfo<string, ResumableUploadStatus> {\n  const headers = { 'X-Goog-Upload-Command': 'query' };\n\n  function handler(xhr: Connection<string>): ResumableUploadStatus {\n    const status = checkResumeHeader_(xhr, ['active', 'final']);\n    let sizeString: string | null = null;\n    try {\n      sizeString = xhr.getResponseHeader('X-Goog-Upload-Size-Received');\n    } catch (e) {\n      handlerCheck(false);\n    }\n\n    if (!sizeString) {\n      // null or empty string\n      handlerCheck(false);\n    }\n\n    const size = Number(sizeString);\n    handlerCheck(!isNaN(size));\n    return new ResumableUploadStatus(size, blob.size(), status === 'final');\n  }\n  const method = 'POST';\n  const timeout = service.maxUploadRetryTime;\n  const requestInfo = new RequestInfo(url, method, handler, timeout);\n  requestInfo.headers = headers;\n  requestInfo.errorHandler = sharedErrorHandler(location);\n  return requestInfo;\n}\n\n/**\n * Any uploads via the resumable upload API must transfer a number of bytes\n * that is a multiple of this number.\n */\nexport const RESUMABLE_UPLOAD_CHUNK_SIZE: number = 256 * 1024;\n\n/**\n * @param url From a call to fbs.requests.createResumableUpload.\n * @param chunkSize Number of bytes to upload.\n * @param status The previous status.\n *     If not passed or null, we start from the beginning.\n * @throws fbs.Error If the upload is already complete, the passed in status\n *     has a final size inconsistent with the blob, or the blob cannot be sliced\n *     for upload.\n */\nexport function continueResumableUpload(\n  location: Location,\n  service: FirebaseStorageImpl,\n  url: string,\n  blob: FbsBlob,\n  chunkSize: number,\n  mappings: Mappings,\n  status?: ResumableUploadStatus | null,\n  progressCallback?: ((p1: number, p2: number) => void) | null\n): RequestInfo<string, ResumableUploadStatus> {\n  // TODO(andysoto): standardize on internal asserts\n  // assert(!(opt_status && opt_status.finalized));\n  const status_ = new ResumableUploadStatus(0, 0);\n  if (status) {\n    status_.current = status.current;\n    status_.total = status.total;\n  } else {\n    status_.current = 0;\n    status_.total = blob.size();\n  }\n  if (blob.size() !== status_.total) {\n    throw serverFileWrongSize();\n  }\n  const bytesLeft = status_.total - status_.current;\n  let bytesToUpload = bytesLeft;\n  if (chunkSize > 0) {\n    bytesToUpload = Math.min(bytesToUpload, chunkSize);\n  }\n  const startByte = status_.current;\n  const endByte = startByte + bytesToUpload;\n  let uploadCommand = '';\n  if (bytesToUpload === 0) {\n    uploadCommand = 'finalize';\n  } else if (bytesLeft === bytesToUpload) {\n    uploadCommand = 'upload, finalize';\n  } else {\n    uploadCommand = 'upload';\n  }\n  const headers = {\n    'X-Goog-Upload-Command': uploadCommand,\n    'X-Goog-Upload-Offset': `${status_.current}`\n  };\n  const body = blob.slice(startByte, endByte);\n  if (body === null) {\n    throw cannotSliceBlob();\n  }\n\n  function handler(\n    xhr: Connection<string>,\n    text: string\n  ): ResumableUploadStatus {\n    // TODO(andysoto): Verify the MD5 of each uploaded range:\n    // the 'x-range-md5' header comes back with status code 308 responses.\n    // We'll only be able to bail out though, because you can't re-upload a\n    // range that you previously uploaded.\n    const uploadStatus = checkResumeHeader_(xhr, ['active', 'final']);\n    const newCurrent = status_.current + bytesToUpload;\n    const size = blob.size();\n    let metadata;\n    if (uploadStatus === 'final') {\n      metadata = metadataHandler(service, mappings)(xhr, text);\n    } else {\n      metadata = null;\n    }\n    return new ResumableUploadStatus(\n      newCurrent,\n      size,\n      uploadStatus === 'final',\n      metadata\n    );\n  }\n  const method = 'POST';\n  const timeout = service.maxUploadRetryTime;\n  const requestInfo = new RequestInfo(url, method, handler, timeout);\n  requestInfo.headers = headers;\n  requestInfo.body = body.uploadData();\n  requestInfo.progressCallback = progressCallback || null;\n  requestInfo.errorHandler = sharedErrorHandler(location);\n  return requestInfo;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Connection,\n  ConnectionType,\n  ErrorCode,\n  Headers\n} from '../../implementation/connection';\nimport { internalError } from '../../implementation/error';\n\n/** An override for the text-based Connection. Used in tests. */\nlet textFactoryOverride: (() => Connection<string>) | null = null;\n\n/**\n * Network layer for browsers. We use this instead of goog.net.XhrIo because\n * goog.net.XhrIo is hyuuuuge and doesn't work in React Native on Android.\n */\nabstract class XhrConnection<T extends ConnectionType>\n  implements Connection<T>\n{\n  protected xhr_: XMLHttpRequest;\n  private errorCode_: ErrorCode;\n  private sendPromise_: Promise<void>;\n  protected sent_: boolean = false;\n\n  constructor() {\n    this.xhr_ = new XMLHttpRequest();\n    this.initXhr();\n    this.errorCode_ = ErrorCode.NO_ERROR;\n    this.sendPromise_ = new Promise(resolve => {\n      this.xhr_.addEventListener('abort', () => {\n        this.errorCode_ = ErrorCode.ABORT;\n        resolve();\n      });\n      this.xhr_.addEventListener('error', () => {\n        this.errorCode_ = ErrorCode.NETWORK_ERROR;\n        resolve();\n      });\n      this.xhr_.addEventListener('load', () => {\n        resolve();\n      });\n    });\n  }\n\n  abstract initXhr(): void;\n\n  send(\n    url: string,\n    method: string,\n    body?: ArrayBufferView | Blob | string,\n    headers?: Headers\n  ): Promise<void> {\n    if (this.sent_) {\n      throw internalError('cannot .send() more than once');\n    }\n    this.sent_ = true;\n    this.xhr_.open(method, url, true);\n    if (headers !== undefined) {\n      for (const key in headers) {\n        if (headers.hasOwnProperty(key)) {\n          this.xhr_.setRequestHeader(key, headers[key].toString());\n        }\n      }\n    }\n    if (body !== undefined) {\n      this.xhr_.send(body);\n    } else {\n      this.xhr_.send();\n    }\n    return this.sendPromise_;\n  }\n\n  getErrorCode(): ErrorCode {\n    if (!this.sent_) {\n      throw internalError('cannot .getErrorCode() before sending');\n    }\n    return this.errorCode_;\n  }\n\n  getStatus(): number {\n    if (!this.sent_) {\n      throw internalError('cannot .getStatus() before sending');\n    }\n    try {\n      return this.xhr_.status;\n    } catch (e) {\n      return -1;\n    }\n  }\n\n  getResponse(): T {\n    if (!this.sent_) {\n      throw internalError('cannot .getResponse() before sending');\n    }\n    return this.xhr_.response;\n  }\n\n  getErrorText(): string {\n    if (!this.sent_) {\n      throw internalError('cannot .getErrorText() before sending');\n    }\n    return this.xhr_.statusText;\n  }\n\n  /** Aborts the request. */\n  abort(): void {\n    this.xhr_.abort();\n  }\n\n  getResponseHeader(header: string): string | null {\n    return this.xhr_.getResponseHeader(header);\n  }\n\n  addUploadProgressListener(listener: (p1: ProgressEvent) => void): void {\n    if (this.xhr_.upload != null) {\n      this.xhr_.upload.addEventListener('progress', listener);\n    }\n  }\n\n  removeUploadProgressListener(listener: (p1: ProgressEvent) => void): void {\n    if (this.xhr_.upload != null) {\n      this.xhr_.upload.removeEventListener('progress', listener);\n    }\n  }\n}\n\nexport class XhrTextConnection extends XhrConnection<string> {\n  initXhr(): void {\n    this.xhr_.responseType = 'text';\n  }\n}\n\nexport function newTextConnection(): Connection<string> {\n  return textFactoryOverride ? textFactoryOverride() : new XhrTextConnection();\n}\n\nexport class XhrBytesConnection extends XhrConnection<ArrayBuffer> {\n  private data_?: ArrayBuffer;\n\n  initXhr(): void {\n    this.xhr_.responseType = 'arraybuffer';\n  }\n}\n\nexport function newBytesConnection(): Connection<ArrayBuffer> {\n  return new XhrBytesConnection();\n}\n\nexport class XhrBlobConnection extends XhrConnection<Blob> {\n  initXhr(): void {\n    this.xhr_.responseType = 'blob';\n  }\n}\n\nexport function newBlobConnection(): Connection<Blob> {\n  return new XhrBlobConnection();\n}\n\nexport function newStreamConnection(): Connection<ReadableStream> {\n  throw new Error('Streams are only supported on Node');\n}\n\nexport function injectTestConnection(\n  factory: (() => Connection<string>) | null\n): void {\n  textFactoryOverride = factory;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Defines the Firebase StorageReference class.\n */\n\nimport { FbsBlob } from './implementation/blob';\nimport { Location } from './implementation/location';\nimport { getMappings } from './implementation/metadata';\nimport { child, lastComponent, parent } from './implementation/path';\nimport {\n  deleteObject as requestsDeleteObject,\n  getBytes,\n  getDownloadUrl as requestsGetDownloadUrl,\n  getMetadata as requestsGetMetadata,\n  list as requestsList,\n  multipartUpload,\n  updateMetadata as requestsUpdateMetadata\n} from './implementation/requests';\nimport { ListOptions, UploadResult } from './public-types';\nimport { dataFromString, StringFormat } from './implementation/string';\nimport { Metadata } from './metadata';\nimport { FirebaseStorageImpl } from './service';\nimport { ListResult } from './list';\nimport { UploadTask } from './task';\nimport { invalidRootOperation, noDownloadURL } from './implementation/error';\nimport { validateNumber } from './implementation/type';\nimport {\n  newBlobConnection,\n  newBytesConnection,\n  newStreamConnection,\n  newTextConnection\n} from './platform/connection';\nimport { RequestInfo } from './implementation/requestinfo';\n\n/**\n * Provides methods to interact with a bucket in the Firebase Storage service.\n * @internal\n * @param _location - An fbs.location, or the URL at\n *     which to base this object, in one of the following forms:\n *         gs://<bucket>/<object-path>\n *         http[s]://firebasestorage.googleapis.com/\n *                     <api-version>/b/<bucket>/o/<object-path>\n *     Any query or fragment strings will be ignored in the http[s]\n *     format. If no value is passed, the storage object will use a URL based on\n *     the project ID of the base firebase.App instance.\n */\nexport class Reference {\n  _location: Location;\n\n  constructor(\n    private _service: FirebaseStorageImpl,\n    location: string | Location\n  ) {\n    if (location instanceof Location) {\n      this._location = location;\n    } else {\n      this._location = Location.makeFromUrl(location, _service.host);\n    }\n  }\n\n  /**\n   * Returns the URL for the bucket and path this object references,\n   *     in the form gs://<bucket>/<object-path>\n   * @override\n   */\n  toString(): string {\n    return 'gs://' + this._location.bucket + '/' + this._location.path;\n  }\n\n  protected _newRef(\n    service: FirebaseStorageImpl,\n    location: Location\n  ): Reference {\n    return new Reference(service, location);\n  }\n\n  /**\n   * A reference to the root of this object's bucket.\n   */\n  get root(): Reference {\n    const location = new Location(this._location.bucket, '');\n    return this._newRef(this._service, location);\n  }\n\n  /**\n   * The name of the bucket containing this reference's object.\n   */\n  get bucket(): string {\n    return this._location.bucket;\n  }\n\n  /**\n   * The full path of this object.\n   */\n  get fullPath(): string {\n    return this._location.path;\n  }\n\n  /**\n   * The short name of this object, which is the last component of the full path.\n   * For example, if fullPath is 'full/path/image.png', name is 'image.png'.\n   */\n  get name(): string {\n    return lastComponent(this._location.path);\n  }\n\n  /**\n   * The `StorageService` instance this `StorageReference` is associated with.\n   */\n  get storage(): FirebaseStorageImpl {\n    return this._service;\n  }\n\n  /**\n   * A `StorageReference` pointing to the parent location of this `StorageReference`, or null if\n   * this reference is the root.\n   */\n  get parent(): Reference | null {\n    const newPath = parent(this._location.path);\n    if (newPath === null) {\n      return null;\n    }\n    const location = new Location(this._location.bucket, newPath);\n    return new Reference(this._service, location);\n  }\n\n  /**\n   * Utility function to throw an error in methods that do not accept a root reference.\n   */\n  _throwIfRoot(name: string): void {\n    if (this._location.path === '') {\n      throw invalidRootOperation(name);\n    }\n  }\n}\n\n/**\n * Download the bytes at the object's location.\n * @returns A Promise containing the downloaded bytes.\n */\nexport function getBytesInternal(\n  ref: Reference,\n  maxDownloadSizeBytes?: number\n): Promise<ArrayBuffer> {\n  ref._throwIfRoot('getBytes');\n  const requestInfo = getBytes(\n    ref.storage,\n    ref._location,\n    maxDownloadSizeBytes\n  );\n  return ref.storage\n    .makeRequestWithTokens(requestInfo, newBytesConnection)\n    .then(bytes =>\n      maxDownloadSizeBytes !== undefined\n        ? // GCS may not honor the Range header for small files\n          (bytes as ArrayBuffer).slice(0, maxDownloadSizeBytes)\n        : (bytes as ArrayBuffer)\n    );\n}\n\n/**\n * Download the bytes at the object's location.\n * @returns A Promise containing the downloaded blob.\n */\nexport function getBlobInternal(\n  ref: Reference,\n  maxDownloadSizeBytes?: number\n): Promise<Blob> {\n  ref._throwIfRoot('getBlob');\n  const requestInfo = getBytes(\n    ref.storage,\n    ref._location,\n    maxDownloadSizeBytes\n  );\n  return ref.storage\n    .makeRequestWithTokens(requestInfo, newBlobConnection)\n    .then(blob =>\n      maxDownloadSizeBytes !== undefined\n        ? // GCS may not honor the Range header for small files\n          (blob as Blob).slice(0, maxDownloadSizeBytes)\n        : (blob as Blob)\n    );\n}\n\n/** Stream the bytes at the object's location. */\nexport function getStreamInternal(\n  ref: Reference,\n  maxDownloadSizeBytes?: number\n): ReadableStream {\n  ref._throwIfRoot('getStream');\n  const requestInfo: RequestInfo<ReadableStream, ReadableStream> = getBytes(\n    ref.storage,\n    ref._location,\n    maxDownloadSizeBytes\n  );\n\n  // Transforms the stream so that only `maxDownloadSizeBytes` bytes are piped to the result\n  const newMaxSizeTransform = (n: number): Transformer => {\n    let missingBytes = n;\n    return {\n      transform(chunk, controller: TransformStreamDefaultController) {\n        // GCS may not honor the Range header for small files\n        if (chunk.length < missingBytes) {\n          controller.enqueue(chunk);\n          missingBytes -= chunk.length;\n        } else {\n          controller.enqueue(chunk.slice(0, missingBytes));\n          controller.terminate();\n        }\n      }\n    };\n  };\n\n  const result =\n    maxDownloadSizeBytes !== undefined\n      ? new TransformStream(newMaxSizeTransform(maxDownloadSizeBytes))\n      : new TransformStream(); // The default transformer forwards all chunks to its readable side\n\n  ref.storage\n    .makeRequestWithTokens(requestInfo, newStreamConnection)\n    .then(readableStream => readableStream.pipeThrough(result))\n    .catch(err => result.writable.abort(err));\n\n  return result.readable;\n}\n\n/**\n * Uploads data to this object's location.\n * The upload is not resumable.\n *\n * @param ref - StorageReference where data should be uploaded.\n * @param data - The data to upload.\n * @param metadata - Metadata for the newly uploaded data.\n * @returns A Promise containing an UploadResult\n */\nexport function uploadBytes(\n  ref: Reference,\n  data: Blob | Uint8Array | ArrayBuffer,\n  metadata?: Metadata\n): Promise<UploadResult> {\n  ref._throwIfRoot('uploadBytes');\n  const requestInfo = multipartUpload(\n    ref.storage,\n    ref._location,\n    getMappings(),\n    new FbsBlob(data, true),\n    metadata\n  );\n  return ref.storage\n    .makeRequestWithTokens(requestInfo, newTextConnection)\n    .then(finalMetadata => {\n      return {\n        metadata: finalMetadata,\n        ref\n      };\n    });\n}\n\n/**\n * Uploads data to this object's location.\n * The upload can be paused and resumed, and exposes progress updates.\n * @public\n * @param ref - StorageReference where data should be uploaded.\n * @param data - The data to upload.\n * @param metadata - Metadata for the newly uploaded data.\n * @returns An UploadTask\n */\nexport function uploadBytesResumable(\n  ref: Reference,\n  data: Blob | Uint8Array | ArrayBuffer,\n  metadata?: Metadata\n): UploadTask {\n  ref._throwIfRoot('uploadBytesResumable');\n  return new UploadTask(ref, new FbsBlob(data), metadata);\n}\n\n/**\n * Uploads a string to this object's location.\n * The upload is not resumable.\n * @public\n * @param ref - StorageReference where string should be uploaded.\n * @param value - The string to upload.\n * @param format - The format of the string to upload.\n * @param metadata - Metadata for the newly uploaded string.\n * @returns A Promise containing an UploadResult\n */\nexport function uploadString(\n  ref: Reference,\n  value: string,\n  format: StringFormat = StringFormat.RAW,\n  metadata?: Metadata\n): Promise<UploadResult> {\n  ref._throwIfRoot('uploadString');\n  const data = dataFromString(format, value);\n  const metadataClone = { ...metadata } as Metadata;\n  if (metadataClone['contentType'] == null && data.contentType != null) {\n    metadataClone['contentType'] = data.contentType!;\n  }\n  return uploadBytes(ref, data.data, metadataClone);\n}\n\n/**\n * List all items (files) and prefixes (folders) under this storage reference.\n *\n * This is a helper method for calling list() repeatedly until there are\n * no more results. The default pagination size is 1000.\n *\n * Note: The results may not be consistent if objects are changed while this\n * operation is running.\n *\n * Warning: listAll may potentially consume too many resources if there are\n * too many results.\n * @public\n * @param ref - StorageReference to get list from.\n *\n * @returns A Promise that resolves with all the items and prefixes under\n *      the current storage reference. `prefixes` contains references to\n *      sub-directories and `items` contains references to objects in this\n *      folder. `nextPageToken` is never returned.\n */\nexport function listAll(ref: Reference): Promise<ListResult> {\n  const accumulator: ListResult = {\n    prefixes: [],\n    items: []\n  };\n  return listAllHelper(ref, accumulator).then(() => accumulator);\n}\n\n/**\n * Separated from listAll because async functions can't use \"arguments\".\n * @param ref\n * @param accumulator\n * @param pageToken\n */\nasync function listAllHelper(\n  ref: Reference,\n  accumulator: ListResult,\n  pageToken?: string\n): Promise<void> {\n  const opt: ListOptions = {\n    // maxResults is 1000 by default.\n    pageToken\n  };\n  const nextPage = await list(ref, opt);\n  accumulator.prefixes.push(...nextPage.prefixes);\n  accumulator.items.push(...nextPage.items);\n  if (nextPage.nextPageToken != null) {\n    await listAllHelper(ref, accumulator, nextPage.nextPageToken);\n  }\n}\n\n/**\n * List items (files) and prefixes (folders) under this storage reference.\n *\n * List API is only available for Firebase Rules Version 2.\n *\n * GCS is a key-blob store. Firebase Storage imposes the semantic of '/'\n * delimited folder structure.\n * Refer to GCS's List API if you want to learn more.\n *\n * To adhere to Firebase Rules's Semantics, Firebase Storage does not\n * support objects whose paths end with \"/\" or contain two consecutive\n * \"/\"s. Firebase Storage List API will filter these unsupported objects.\n * list() may fail if there are too many unsupported objects in the bucket.\n * @public\n *\n * @param ref - StorageReference to get list from.\n * @param options - See ListOptions for details.\n * @returns A Promise that resolves with the items and prefixes.\n *      `prefixes` contains references to sub-folders and `items`\n *      contains references to objects in this folder. `nextPageToken`\n *      can be used to get the rest of the results.\n */\nexport function list(\n  ref: Reference,\n  options?: ListOptions | null\n): Promise<ListResult> {\n  if (options != null) {\n    if (typeof options.maxResults === 'number') {\n      validateNumber(\n        'options.maxResults',\n        /* minValue= */ 1,\n        /* maxValue= */ 1000,\n        options.maxResults\n      );\n    }\n  }\n  const op = options || {};\n  const requestInfo = requestsList(\n    ref.storage,\n    ref._location,\n    /*delimiter= */ '/',\n    op.pageToken,\n    op.maxResults\n  );\n  return ref.storage.makeRequestWithTokens(requestInfo, newTextConnection);\n}\n\n/**\n * A `Promise` that resolves with the metadata for this object. If this\n * object doesn't exist or metadata cannot be retrieved, the promise is\n * rejected.\n * @public\n * @param ref - StorageReference to get metadata from.\n */\nexport function getMetadata(ref: Reference): Promise<Metadata> {\n  ref._throwIfRoot('getMetadata');\n  const requestInfo = requestsGetMetadata(\n    ref.storage,\n    ref._location,\n    getMappings()\n  );\n  return ref.storage.makeRequestWithTokens(requestInfo, newTextConnection);\n}\n\n/**\n * Updates the metadata for this object.\n * @public\n * @param ref - StorageReference to update metadata for.\n * @param metadata - The new metadata for the object.\n *     Only values that have been explicitly set will be changed. Explicitly\n *     setting a value to null will remove the metadata.\n * @returns A `Promise` that resolves\n *     with the new metadata for this object.\n *     See `firebaseStorage.Reference.prototype.getMetadata`\n */\nexport function updateMetadata(\n  ref: Reference,\n  metadata: Partial<Metadata>\n): Promise<Metadata> {\n  ref._throwIfRoot('updateMetadata');\n  const requestInfo = requestsUpdateMetadata(\n    ref.storage,\n    ref._location,\n    metadata,\n    getMappings()\n  );\n  return ref.storage.makeRequestWithTokens(requestInfo, newTextConnection);\n}\n\n/**\n * Returns the download URL for the given Reference.\n * @public\n * @returns A `Promise` that resolves with the download\n *     URL for this object.\n */\nexport function getDownloadURL(ref: Reference): Promise<string> {\n  ref._throwIfRoot('getDownloadURL');\n  const requestInfo = requestsGetDownloadUrl(\n    ref.storage,\n    ref._location,\n    getMappings()\n  );\n  return ref.storage\n    .makeRequestWithTokens(requestInfo, newTextConnection)\n    .then(url => {\n      if (url === null) {\n        throw noDownloadURL();\n      }\n      return url;\n    });\n}\n\n/**\n * Deletes the object at this location.\n * @public\n * @param ref - StorageReference for object to delete.\n * @returns A `Promise` that resolves if the deletion succeeds.\n */\nexport function deleteObject(ref: Reference): Promise<void> {\n  ref._throwIfRoot('deleteObject');\n  const requestInfo = requestsDeleteObject(ref.storage, ref._location);\n  return ref.storage.makeRequestWithTokens(requestInfo, newTextConnection);\n}\n\n/**\n * Returns reference for object obtained by appending `childPath` to `ref`.\n *\n * @param ref - StorageReference to get child of.\n * @param childPath - Child path from provided ref.\n * @returns A reference to the object obtained by\n * appending childPath, removing any duplicate, beginning, or trailing\n * slashes.\n *\n */\nexport function _getChild(ref: Reference, childPath: string): Reference {\n  const newPath = child(ref._location.path, childPath);\n  const location = new Location(ref._location.bucket, newPath);\n  return new Reference(ref.storage, location);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Location } from './implementation/location';\nimport { FailRequest } from './implementation/failrequest';\nimport { Request, makeRequest } from './implementation/request';\nimport { RequestInfo } from './implementation/requestinfo';\nimport { Reference, _getChild } from './reference';\nimport { Provider } from '@firebase/component';\nimport { FirebaseAuthInternalName } from '@firebase/auth-interop-types';\nimport { AppCheckInternalComponentName } from '@firebase/app-check-interop-types';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport { FirebaseApp, FirebaseOptions } from '@firebase/app';\nimport {\n  CONFIG_STORAGE_BUCKET_KEY,\n  DEFAULT_HOST,\n  DEFAULT_MAX_OPERATION_RETRY_TIME,\n  DEFAULT_MAX_UPLOAD_RETRY_TIME\n} from './implementation/constants';\nimport {\n  invalidArgument,\n  appDeleted,\n  noDefaultBucket\n} from './implementation/error';\nimport { validateNumber } from './implementation/type';\nimport { FirebaseStorage } from './public-types';\nimport { createMockUserToken, EmulatorMockTokenOptions } from '@firebase/util';\nimport { Connection, ConnectionType } from './implementation/connection';\n\nexport function isUrl(path?: string): boolean {\n  return /^[A-Za-z]+:\\/\\//.test(path as string);\n}\n\n/**\n * Returns a firebaseStorage.Reference for the given url.\n */\nfunction refFromURL(service: FirebaseStorageImpl, url: string): Reference {\n  return new Reference(service, url);\n}\n\n/**\n * Returns a firebaseStorage.Reference for the given path in the default\n * bucket.\n */\nfunction refFromPath(\n  ref: FirebaseStorageImpl | Reference,\n  path?: string\n): Reference {\n  if (ref instanceof FirebaseStorageImpl) {\n    const service = ref;\n    if (service._bucket == null) {\n      throw noDefaultBucket();\n    }\n    const reference = new Reference(service, service._bucket!);\n    if (path != null) {\n      return refFromPath(reference, path);\n    } else {\n      return reference;\n    }\n  } else {\n    // ref is a Reference\n    if (path !== undefined) {\n      return _getChild(ref, path);\n    } else {\n      return ref;\n    }\n  }\n}\n\n/**\n * Returns a storage Reference for the given url.\n * @param storage - `Storage` instance.\n * @param url - URL. If empty, returns root reference.\n * @public\n */\nexport function ref(storage: FirebaseStorageImpl, url?: string): Reference;\n/**\n * Returns a storage Reference for the given path in the\n * default bucket.\n * @param storageOrRef - `Storage` service or storage `Reference`.\n * @param pathOrUrlStorage - path. If empty, returns root reference (if Storage\n * instance provided) or returns same reference (if Reference provided).\n * @public\n */\nexport function ref(\n  storageOrRef: FirebaseStorageImpl | Reference,\n  path?: string\n): Reference;\nexport function ref(\n  serviceOrRef: FirebaseStorageImpl | Reference,\n  pathOrUrl?: string\n): Reference | null {\n  if (pathOrUrl && isUrl(pathOrUrl)) {\n    if (serviceOrRef instanceof FirebaseStorageImpl) {\n      return refFromURL(serviceOrRef, pathOrUrl);\n    } else {\n      throw invalidArgument(\n        'To use ref(service, url), the first argument must be a Storage instance.'\n      );\n    }\n  } else {\n    return refFromPath(serviceOrRef, pathOrUrl);\n  }\n}\n\nfunction extractBucket(\n  host: string,\n  config?: FirebaseOptions\n): Location | null {\n  const bucketString = config?.[CONFIG_STORAGE_BUCKET_KEY];\n  if (bucketString == null) {\n    return null;\n  }\n  return Location.makeFromBucketSpec(bucketString, host);\n}\n\nexport function connectStorageEmulator(\n  storage: FirebaseStorageImpl,\n  host: string,\n  port: number,\n  options: {\n    mockUserToken?: EmulatorMockTokenOptions | string;\n  } = {}\n): void {\n  storage.host = `${host}:${port}`;\n  storage._protocol = 'http';\n  const { mockUserToken } = options;\n  if (mockUserToken) {\n    storage._overrideAuthToken =\n      typeof mockUserToken === 'string'\n        ? mockUserToken\n        : createMockUserToken(mockUserToken, storage.app.options.projectId);\n  }\n}\n\n/**\n * A service that provides Firebase Storage Reference instances.\n * @param opt_url - gs:// url to a custom Storage Bucket\n *\n * @internal\n */\nexport class FirebaseStorageImpl implements FirebaseStorage {\n  _bucket: Location | null = null;\n  /**\n   * This string can be in the formats:\n   * - host\n   * - host:port\n   */\n  private _host: string = DEFAULT_HOST;\n  _protocol: string = 'https';\n  protected readonly _appId: string | null = null;\n  private readonly _requests: Set<Request<unknown>>;\n  private _deleted: boolean = false;\n  private _maxOperationRetryTime: number;\n  private _maxUploadRetryTime: number;\n  _overrideAuthToken?: string;\n\n  constructor(\n    /**\n     * FirebaseApp associated with this StorageService instance.\n     */\n    readonly app: FirebaseApp,\n    readonly _authProvider: Provider<FirebaseAuthInternalName>,\n    /**\n     * @internal\n     */\n    readonly _appCheckProvider: Provider<AppCheckInternalComponentName>,\n    /**\n     * @internal\n     */\n    readonly _url?: string,\n    readonly _firebaseVersion?: string\n  ) {\n    this._maxOperationRetryTime = DEFAULT_MAX_OPERATION_RETRY_TIME;\n    this._maxUploadRetryTime = DEFAULT_MAX_UPLOAD_RETRY_TIME;\n    this._requests = new Set();\n    if (_url != null) {\n      this._bucket = Location.makeFromBucketSpec(_url, this._host);\n    } else {\n      this._bucket = extractBucket(this._host, this.app.options);\n    }\n  }\n\n  /**\n   * The host string for this service, in the form of `host` or\n   * `host:port`.\n   */\n  get host(): string {\n    return this._host;\n  }\n\n  set host(host: string) {\n    this._host = host;\n    if (this._url != null) {\n      this._bucket = Location.makeFromBucketSpec(this._url, host);\n    } else {\n      this._bucket = extractBucket(host, this.app.options);\n    }\n  }\n\n  /**\n   * The maximum time to retry uploads in milliseconds.\n   */\n  get maxUploadRetryTime(): number {\n    return this._maxUploadRetryTime;\n  }\n\n  set maxUploadRetryTime(time: number) {\n    validateNumber(\n      'time',\n      /* minValue=*/ 0,\n      /* maxValue= */ Number.POSITIVE_INFINITY,\n      time\n    );\n    this._maxUploadRetryTime = time;\n  }\n\n  /**\n   * The maximum time to retry operations other than uploads or downloads in\n   * milliseconds.\n   */\n  get maxOperationRetryTime(): number {\n    return this._maxOperationRetryTime;\n  }\n\n  set maxOperationRetryTime(time: number) {\n    validateNumber(\n      'time',\n      /* minValue=*/ 0,\n      /* maxValue= */ Number.POSITIVE_INFINITY,\n      time\n    );\n    this._maxOperationRetryTime = time;\n  }\n\n  async _getAuthToken(): Promise<string | null> {\n    if (this._overrideAuthToken) {\n      return this._overrideAuthToken;\n    }\n    const auth = this._authProvider.getImmediate({ optional: true });\n    if (auth) {\n      const tokenData = await auth.getToken();\n      if (tokenData !== null) {\n        return tokenData.accessToken;\n      }\n    }\n    return null;\n  }\n\n  async _getAppCheckToken(): Promise<string | null> {\n    const appCheck = this._appCheckProvider.getImmediate({ optional: true });\n    if (appCheck) {\n      const result = await appCheck.getToken();\n      // TODO: What do we want to do if there is an error getting the token?\n      // Context: appCheck.getToken() will never throw even if an error happened. In the error case, a dummy token will be\n      // returned along with an error field describing the error. In general, we shouldn't care about the error condition and just use\n      // the token (actual or dummy) to send requests.\n      return result.token;\n    }\n    return null;\n  }\n\n  /**\n   * Stop running requests and prevent more from being created.\n   */\n  _delete(): Promise<void> {\n    if (!this._deleted) {\n      this._deleted = true;\n      this._requests.forEach(request => request.cancel());\n      this._requests.clear();\n    }\n    return Promise.resolve();\n  }\n\n  /**\n   * Returns a new firebaseStorage.Reference object referencing this StorageService\n   * at the given Location.\n   */\n  _makeStorageReference(loc: Location): Reference {\n    return new Reference(this, loc);\n  }\n\n  /**\n   * @param requestInfo - HTTP RequestInfo object\n   * @param authToken - Firebase auth token\n   */\n  _makeRequest<I extends ConnectionType, O>(\n    requestInfo: RequestInfo<I, O>,\n    requestFactory: () => Connection<I>,\n    authToken: string | null,\n    appCheckToken: string | null,\n    retry = true\n  ): Request<O> {\n    if (!this._deleted) {\n      const request = makeRequest(\n        requestInfo,\n        this._appId,\n        authToken,\n        appCheckToken,\n        requestFactory,\n        this._firebaseVersion,\n        retry\n      );\n      this._requests.add(request);\n      // Request removes itself from set when complete.\n      request.getPromise().then(\n        () => this._requests.delete(request),\n        () => this._requests.delete(request)\n      );\n      return request;\n    } else {\n      return new FailRequest(appDeleted());\n    }\n  }\n\n  async makeRequestWithTokens<I extends ConnectionType, O>(\n    requestInfo: RequestInfo<I, O>,\n    requestFactory: () => Connection<I>\n  ): Promise<O> {\n    const [authToken, appCheckToken] = await Promise.all([\n      this._getAuthToken(),\n      this._getAppCheckToken()\n    ]);\n\n    return this._makeRequest(\n      requestInfo,\n      requestFactory,\n      authToken,\n      appCheckToken\n    ).getPromise();\n  }\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64urlEncodeWithoutPadding } from './crypt';\n\n// Firebase Auth tokens contain snake_case claims following the JWT standard / convention.\n/* eslint-disable camelcase */\n\nexport type FirebaseSignInProvider =\n  | 'custom'\n  | 'email'\n  | 'password'\n  | 'phone'\n  | 'anonymous'\n  | 'google.com'\n  | 'facebook.com'\n  | 'github.com'\n  | 'twitter.com'\n  | 'microsoft.com'\n  | 'apple.com';\n\ninterface FirebaseIdToken {\n  // Always set to https://securetoken.google.com/PROJECT_ID\n  iss: string;\n\n  // Always set to PROJECT_ID\n  aud: string;\n\n  // The user's unique ID\n  sub: string;\n\n  // The token issue time, in seconds since epoch\n  iat: number;\n\n  // The token expiry time, normally 'iat' + 3600\n  exp: number;\n\n  // The user's unique ID. Must be equal to 'sub'\n  user_id: string;\n\n  // The time the user authenticated, normally 'iat'\n  auth_time: number;\n\n  // The sign in provider, only set when the provider is 'anonymous'\n  provider_id?: 'anonymous';\n\n  // The user's primary email\n  email?: string;\n\n  // The user's email verification status\n  email_verified?: boolean;\n\n  // The user's primary phone number\n  phone_number?: string;\n\n  // The user's display name\n  name?: string;\n\n  // The user's profile photo URL\n  picture?: string;\n\n  // Information on all identities linked to this user\n  firebase: {\n    // The primary sign-in provider\n    sign_in_provider: FirebaseSignInProvider;\n\n    // A map of providers to the user's list of unique identifiers from\n    // each provider\n    identities?: { [provider in FirebaseSignInProvider]?: string[] };\n  };\n\n  // Custom claims set by the developer\n  [claim: string]: unknown;\n\n  uid?: never; // Try to catch a common mistake of \"uid\" (should be \"sub\" instead).\n}\n\nexport type EmulatorMockTokenOptions = ({ user_id: string } | { sub: string }) &\n  Partial<FirebaseIdToken>;\n\nexport function createMockUserToken(\n  token: EmulatorMockTokenOptions,\n  projectId?: string\n): string {\n  if (token.uid) {\n    throw new Error(\n      'The \"uid\" field is no longer supported by mockUserToken. Please use \"sub\" instead for Firebase Auth User ID.'\n    );\n  }\n  // Unsecured JWTs use \"none\" as the algorithm.\n  const header = {\n    alg: 'none',\n    type: 'JWT'\n  };\n\n  const project = projectId || 'demo-project';\n  const iat = token.iat || 0;\n  const sub = token.sub || token.user_id;\n  if (!sub) {\n    throw new Error(\"mockUserToken must contain 'sub' or 'user_id' field!\");\n  }\n\n  const payload: FirebaseIdToken = {\n    // Set all required fields to decent defaults\n    iss: `https://securetoken.google.com/${project}`,\n    aud: project,\n    iat,\n    exp: iat + 3600,\n    auth_time: iat,\n    sub,\n    user_id: sub,\n    firebase: {\n      sign_in_provider: 'custom',\n      identities: {}\n    },\n\n    // Override with user options\n    ...token\n  };\n\n  // Unsecured JWTs use the empty string as a signature.\n  const signature = '';\n  return [\n    base64urlEncodeWithoutPadding(JSON.stringify(header)),\n    base64urlEncodeWithoutPadding(JSON.stringify(payload)),\n    signature\n  ].join('.');\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Type constant for Firebase Storage.\n */\nexport const STORAGE_TYPE = 'storage';\n","/**\n * Cloud Storage for Firebase\n *\n * @packageDocumentation\n */\n\n/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport {\n  _registerComponent,\n  registerVersion,\n  SDK_VERSION\n} from '@firebase/app';\n\nimport { FirebaseStorageImpl } from '../src/service';\nimport {\n  Component,\n  ComponentType,\n  ComponentContainer,\n  InstanceFactoryOptions\n} from '@firebase/component';\n\nimport { name, version } from '../package.json';\n\nimport { FirebaseStorage } from './public-types';\nimport { STORAGE_TYPE } from './constants';\n\nexport * from './api';\nexport * from './api.browser';\n\nfunction factory(\n  container: ComponentContainer,\n  { instanceIdentifier: url }: InstanceFactoryOptions\n): FirebaseStorage {\n  const app = container.getProvider('app').getImmediate();\n  const authProvider = container.getProvider('auth-internal');\n  const appCheckProvider = container.getProvider('app-check-internal');\n\n  return new FirebaseStorageImpl(\n    app,\n    authProvider,\n    appCheckProvider,\n    url,\n    SDK_VERSION\n  );\n}\n\nfunction registerStorage(): void {\n  _registerComponent(\n    new Component(\n      STORAGE_TYPE,\n      factory,\n      ComponentType.PUBLIC\n    ).setMultipleInstances(true)\n  );\n  //RUNTIME_ENV will be replaced during the compilation to \"node\" for nodejs and an empty string for browser\n  registerVersion(name, version, '__RUNTIME_ENV__');\n  // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\n  registerVersion(name, version, '__BUILD_TARGET__');\n}\n\nregisterStorage();\n","// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getStorage, ref, uploadBytes, UploadResult } from \"firebase/storage\";\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCk9vuv-mY15d5RkKG45Nz90oQrNQtrATY\",\n  authDomain: \"castle-coders.firebaseapp.com\",\n  projectId: \"castle-coders\",\n  storageBucket: \"castle-coders.appspot.com\",\n  messagingSenderId: \"430020675972\",\n  appId: \"1:430020675972:web:619f1cef2d906d93bbb5d1\",\n  measurementId: \"G-3911408VKE\",\n};\n\n// Initialize Firebase\nexport const firebaseApp = initializeApp(firebaseConfig);\nconst storage = getStorage(firebaseApp);\n\nexport function writeToFirebaseStorage(\n  url: string,\n  blob: Blob\n): Promise<UploadResult> {\n  const ref_ = ref(storage, url);\n  return uploadBytes(ref_, blob);\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { _getProvider, FirebaseApp, getApp } from '@firebase/app';\n\nimport {\n  ref as refInternal,\n  FirebaseStorageImpl,\n  connectStorageEmulator as connectEmulatorInternal\n} from './service';\nimport { Provider } from '@firebase/component';\n\nimport {\n  StorageReference,\n  FirebaseStorage,\n  UploadResult,\n  ListOptions,\n  ListResult,\n  UploadTask,\n  SettableMetadata,\n  UploadMetadata,\n  FullMetadata\n} from './public-types';\nimport { Metadata as MetadataInternal } from './metadata';\nimport {\n  uploadBytes as uploadBytesInternal,\n  uploadBytesResumable as uploadBytesResumableInternal,\n  uploadString as uploadStringInternal,\n  getMetadata as getMetadataInternal,\n  updateMetadata as updateMetadataInternal,\n  list as listInternal,\n  listAll as listAllInternal,\n  getDownloadURL as getDownloadURLInternal,\n  deleteObject as deleteObjectInternal,\n  Reference,\n  _getChild as _getChildInternal,\n  getBytesInternal\n} from './reference';\nimport { STORAGE_TYPE } from './constants';\nimport {\n  EmulatorMockTokenOptions,\n  getModularInstance,\n  getDefaultEmulatorHostnameAndPort\n} from '@firebase/util';\nimport { StringFormat } from './implementation/string';\n\nexport { EmulatorMockTokenOptions } from '@firebase/util';\n\nexport { StorageError, StorageErrorCode } from './implementation/error';\n\n/**\n * Public types.\n */\nexport * from './public-types';\n\nexport { Location as _Location } from './implementation/location';\nexport { UploadTask as _UploadTask } from './task';\nexport type { Reference as _Reference } from './reference';\nexport type { FirebaseStorageImpl as _FirebaseStorageImpl } from './service';\nexport { FbsBlob as _FbsBlob } from './implementation/blob';\nexport { dataFromString as _dataFromString } from './implementation/string';\nexport {\n  invalidRootOperation as _invalidRootOperation,\n  invalidArgument as _invalidArgument\n} from './implementation/error';\nexport {\n  TaskEvent as _TaskEvent,\n  TaskState as _TaskState\n} from './implementation/taskenums';\nexport { StringFormat };\n\n/**\n * Downloads the data at the object's location. Returns an error if the object\n * is not found.\n *\n * To use this functionality, you have to whitelist your app's origin in your\n * Cloud Storage bucket. See also\n * https://cloud.google.com/storage/docs/configuring-cors\n *\n * @public\n * @param ref - StorageReference where data should be downloaded.\n * @param maxDownloadSizeBytes - If set, the maximum allowed size in bytes to\n * retrieve.\n * @returns A Promise containing the object's bytes\n */\nexport function getBytes(\n  ref: StorageReference,\n  maxDownloadSizeBytes?: number\n): Promise<ArrayBuffer> {\n  ref = getModularInstance(ref);\n  return getBytesInternal(ref as Reference, maxDownloadSizeBytes);\n}\n\n/**\n * Uploads data to this object's location.\n * The upload is not resumable.\n * @public\n * @param ref - {@link StorageReference} where data should be uploaded.\n * @param data - The data to upload.\n * @param metadata - Metadata for the data to upload.\n * @returns A Promise containing an UploadResult\n */\nexport function uploadBytes(\n  ref: StorageReference,\n  data: Blob | Uint8Array | ArrayBuffer,\n  metadata?: UploadMetadata\n): Promise<UploadResult> {\n  ref = getModularInstance(ref);\n  return uploadBytesInternal(\n    ref as Reference,\n    data,\n    metadata as MetadataInternal\n  );\n}\n\n/**\n * Uploads a string to this object's location.\n * The upload is not resumable.\n * @public\n * @param ref - {@link StorageReference} where string should be uploaded.\n * @param value - The string to upload.\n * @param format - The format of the string to upload.\n * @param metadata - Metadata for the string to upload.\n * @returns A Promise containing an UploadResult\n */\nexport function uploadString(\n  ref: StorageReference,\n  value: string,\n  format?: StringFormat,\n  metadata?: UploadMetadata\n): Promise<UploadResult> {\n  ref = getModularInstance(ref);\n  return uploadStringInternal(\n    ref as Reference,\n    value,\n    format,\n    metadata as MetadataInternal\n  );\n}\n\n/**\n * Uploads data to this object's location.\n * The upload can be paused and resumed, and exposes progress updates.\n * @public\n * @param ref - {@link StorageReference} where data should be uploaded.\n * @param data - The data to upload.\n * @param metadata - Metadata for the data to upload.\n * @returns An UploadTask\n */\nexport function uploadBytesResumable(\n  ref: StorageReference,\n  data: Blob | Uint8Array | ArrayBuffer,\n  metadata?: UploadMetadata\n): UploadTask {\n  ref = getModularInstance(ref);\n  return uploadBytesResumableInternal(\n    ref as Reference,\n    data,\n    metadata as MetadataInternal\n  ) as UploadTask;\n}\n\n/**\n * A `Promise` that resolves with the metadata for this object. If this\n * object doesn't exist or metadata cannot be retrieved, the promise is\n * rejected.\n * @public\n * @param ref - {@link StorageReference} to get metadata from.\n */\nexport function getMetadata(ref: StorageReference): Promise<FullMetadata> {\n  ref = getModularInstance(ref);\n  return getMetadataInternal(ref as Reference) as Promise<FullMetadata>;\n}\n\n/**\n * Updates the metadata for this object.\n * @public\n * @param ref - {@link StorageReference} to update metadata for.\n * @param metadata - The new metadata for the object.\n *     Only values that have been explicitly set will be changed. Explicitly\n *     setting a value to null will remove the metadata.\n * @returns A `Promise` that resolves with the new metadata for this object.\n */\nexport function updateMetadata(\n  ref: StorageReference,\n  metadata: SettableMetadata\n): Promise<FullMetadata> {\n  ref = getModularInstance(ref);\n  return updateMetadataInternal(\n    ref as Reference,\n    metadata as Partial<MetadataInternal>\n  ) as Promise<FullMetadata>;\n}\n\n/**\n * List items (files) and prefixes (folders) under this storage reference.\n *\n * List API is only available for Firebase Rules Version 2.\n *\n * GCS is a key-blob store. Firebase Storage imposes the semantic of '/'\n * delimited folder structure.\n * Refer to GCS's List API if you want to learn more.\n *\n * To adhere to Firebase Rules's Semantics, Firebase Storage does not\n * support objects whose paths end with \"/\" or contain two consecutive\n * \"/\"s. Firebase Storage List API will filter these unsupported objects.\n * list() may fail if there are too many unsupported objects in the bucket.\n * @public\n *\n * @param ref - {@link StorageReference} to get list from.\n * @param options - See {@link ListOptions} for details.\n * @returns A `Promise` that resolves with the items and prefixes.\n *      `prefixes` contains references to sub-folders and `items`\n *      contains references to objects in this folder. `nextPageToken`\n *      can be used to get the rest of the results.\n */\nexport function list(\n  ref: StorageReference,\n  options?: ListOptions\n): Promise<ListResult> {\n  ref = getModularInstance(ref);\n  return listInternal(ref as Reference, options);\n}\n\n/**\n * List all items (files) and prefixes (folders) under this storage reference.\n *\n * This is a helper method for calling list() repeatedly until there are\n * no more results. The default pagination size is 1000.\n *\n * Note: The results may not be consistent if objects are changed while this\n * operation is running.\n *\n * Warning: `listAll` may potentially consume too many resources if there are\n * too many results.\n * @public\n * @param ref - {@link StorageReference} to get list from.\n *\n * @returns A `Promise` that resolves with all the items and prefixes under\n *      the current storage reference. `prefixes` contains references to\n *      sub-directories and `items` contains references to objects in this\n *      folder. `nextPageToken` is never returned.\n */\nexport function listAll(ref: StorageReference): Promise<ListResult> {\n  ref = getModularInstance(ref);\n  return listAllInternal(ref as Reference);\n}\n\n/**\n * Returns the download URL for the given {@link StorageReference}.\n * @public\n * @param ref - {@link StorageReference} to get the download URL for.\n * @returns A `Promise` that resolves with the download\n *     URL for this object.\n */\nexport function getDownloadURL(ref: StorageReference): Promise<string> {\n  ref = getModularInstance(ref);\n  return getDownloadURLInternal(ref as Reference);\n}\n\n/**\n * Deletes the object at this location.\n * @public\n * @param ref - {@link StorageReference} for object to delete.\n * @returns A `Promise` that resolves if the deletion succeeds.\n */\nexport function deleteObject(ref: StorageReference): Promise<void> {\n  ref = getModularInstance(ref);\n  return deleteObjectInternal(ref as Reference);\n}\n\n/**\n * Returns a {@link StorageReference} for the given url.\n * @param storage - {@link FirebaseStorage} instance.\n * @param url - URL. If empty, returns root reference.\n * @public\n */\nexport function ref(storage: FirebaseStorage, url?: string): StorageReference;\n/**\n * Returns a {@link StorageReference} for the given path in the\n * default bucket.\n * @param storageOrRef - {@link FirebaseStorage} or {@link StorageReference}.\n * @param pathOrUrlStorage - path. If empty, returns root reference (if {@link FirebaseStorage}\n * instance provided) or returns same reference (if {@link StorageReference} provided).\n * @public\n */\nexport function ref(\n  storageOrRef: FirebaseStorage | StorageReference,\n  path?: string\n): StorageReference;\nexport function ref(\n  serviceOrRef: FirebaseStorage | StorageReference,\n  pathOrUrl?: string\n): StorageReference | null {\n  serviceOrRef = getModularInstance(serviceOrRef);\n  return refInternal(\n    serviceOrRef as FirebaseStorageImpl | Reference,\n    pathOrUrl\n  );\n}\n\n/**\n * @internal\n */\nexport function _getChild(ref: StorageReference, childPath: string): Reference {\n  return _getChildInternal(ref as Reference, childPath);\n}\n\n/**\n * Gets a {@link FirebaseStorage} instance for the given Firebase app.\n * @public\n * @param app - Firebase app to get {@link FirebaseStorage} instance for.\n * @param bucketUrl - The gs:// url to your Firebase Storage Bucket.\n * If not passed, uses the app's default Storage Bucket.\n * @returns A {@link FirebaseStorage} instance.\n */\nexport function getStorage(\n  app: FirebaseApp = getApp(),\n  bucketUrl?: string\n): FirebaseStorage {\n  app = getModularInstance(app);\n  const storageProvider: Provider<'storage'> = _getProvider(app, STORAGE_TYPE);\n  const storageInstance = storageProvider.getImmediate({\n    identifier: bucketUrl\n  });\n  const emulator = getDefaultEmulatorHostnameAndPort('storage');\n  if (emulator) {\n    connectStorageEmulator(storageInstance, ...emulator);\n  }\n  return storageInstance;\n}\n\n/**\n * Modify this {@link FirebaseStorage} instance to communicate with the Cloud Storage emulator.\n *\n * @param storage - The {@link FirebaseStorage} instance\n * @param host - The emulator host (ex: localhost)\n * @param port - The emulator port (ex: 5001)\n * @param options - Emulator options. `options.mockUserToken` is the mock auth\n * token to use for unit testing Security Rules.\n * @public\n */\nexport function connectStorageEmulator(\n  storage: FirebaseStorage,\n  host: string,\n  port: number,\n  options: {\n    mockUserToken?: EmulatorMockTokenOptions | string;\n  } = {}\n): void {\n  connectEmulatorInternal(storage as FirebaseStorageImpl, host, port, options);\n}\n","enum Code {\n  // Codes 0 to 127 are for 7-bit references.\n\n  // Codes 128 to 144 are for integers -8 to 8.\n\n  ConstNull = 145,\n  ConstFalse = 146,\n  ConstTrue = 147,\n\n  OffsetPosInt1Byte = 148,\n  OffsetNegInt1Byte = 149,\n  Int2Byte = 150,\n  Int4Byte = 151,\n  Int8Byte = 152,\n\n  Float64 = 153,\n\n  ConstEmptyArray = 154,\n  Array1Element = 155,\n  Array2Element = 156,\n  Array3Element = 157,\n  Array4Element = 158,\n  Array5Element = 159,\n  Array6Element = 160,\n  Array7Element = 161,\n  Array8Element = 162,\n  ArrayLen1Byte = 163,\n  ArrayLen2Byte = 164,\n  ArrayLen4Byte = 165,\n\n  ConstEmptyObject = 166,\n  Object1Command = 167,\n  Object2Command = 168,\n  Object3Command = 169,\n  Object4Command = 170,\n  Object5Command = 171,\n  Object6Command = 172,\n  Object7Command = 173,\n  Object8Command = 174,\n  ObjectCommandCount1Byte = 175,\n  ObjectCommandCount2Byte = 176,\n  ObjectCommandCount4Byte = 177,\n\n  Ref1Byte = 178,\n  Ref2Byte = 179,\n  Ref4Byte = 180,\n\n  BigUint = 181,\n  NegBigInt = 182,\n\n  ConstEmptyString = 183,\n  String1Byte = 184,\n  String2Byte = 185,\n  String3Byte = 186,\n  String4Byte = 187,\n  String5Byte = 188,\n  String6Byte = 189,\n  String7Byte = 190,\n  String8Byte = 191,\n  String9Byte = 192,\n  String10Byte = 193,\n  String11Byte = 194,\n  String12Byte = 195,\n  String13Byte = 196,\n  String14Byte = 197,\n  String15Byte = 198,\n  StringLen1Byte = 199,\n  StringLen2Byte = 200,\n  StringLen4Byte = 201,\n\n  ByteArray4Element = 202,\n  ByteArray8Element = 203,\n  ByteArray16Element = 204,\n  ByteArray32Element = 205,\n  ByteArray64Element = 206,\n}\n\nconst MAX_UINT_1_BYTE = 256 ** 1 - 1;\nconst MAX_UINT_2_BYTE = 256 ** 2 - 1;\nconst MAX_UINT_4_BYTE = 256 ** 4 - 1;\n\nconst MAX_OFFSET_POS_INT_1_BYTE = 8 + 256;\nconst MIN_OFFSET_NEG_INT_1_BYTE = -8 - 256;\n\nconst MIN_INT_2_BYTE = 256 ** 2 / -2;\nconst MAX_INT_2_BYTE = 256 ** 2 / 2 - 1;\nconst MIN_INT_4_BYTE = 256 ** 4 / -2;\nconst MAX_INT_4_BYTE = 256 ** 4 / 2 - 1;\n\nclass NonReusableJsonAnalyzer {\n  private readonly lookupTable: unknown[];\n  private isUsed = false;\n\n  private readonly handleInvalidJsonValue: (\n    illegalValue: unknown,\n    wasValueLosslesslyWritten: boolean\n  ) => void;\n\n  constructor(\n    implicitTable: readonly unknown[],\n    handleInvalidJsonValue?: (\n      illegalValue: unknown,\n      wasValueLosslesslyWritten: boolean\n    ) => void\n  ) {\n    this.lookupTable = implicitTable.slice();\n    this.handleInvalidJsonValue = handleInvalidJsonValue ?? ((): void => {});\n  }\n\n  writeNodeAndMarkAnalyzerAsUsed(\n    node: unknown,\n    pushByte: (byte: number) => void\n  ): void {\n    if (this.isUsed) {\n      throw new Error(\"NonReusableJsonAnalyzer is already used.\");\n    }\n\n    this.isUsed = true;\n\n    this.writeNode(node, pushByte);\n  }\n\n  private writeNode(node: unknown, pushByte: (byte: number) => void): void {\n    if (Number.isInteger(node)) {\n      this.writeTaggedInt(node as number, pushByte);\n      return;\n    }\n\n    if (typeof node === \"number\") {\n      pushByte(Code.Float64);\n      this.writeUntaggedF64(node, pushByte);\n\n      if (!Number.isFinite(node)) {\n        this.handleInvalidJsonValue(node, true);\n      }\n\n      return;\n    }\n\n    if (typeof node === \"bigint\") {\n      throw new Error(\"BigInts are not supported.\");\n    }\n\n    if (typeof node === \"symbol\") {\n      pushByte(Code.ConstNull);\n      this.handleInvalidJsonValue(node, false);\n      return;\n    }\n\n    if (node === null) {\n      pushByte(Code.ConstNull);\n      return;\n    }\n\n    if (node === false) {\n      pushByte(Code.ConstFalse);\n      return;\n    }\n\n    if (node === true) {\n      pushByte(Code.ConstTrue);\n      return;\n    }\n\n    if (node === \"\") {\n      pushByte(Code.ConstEmptyString);\n      return;\n    }\n\n    if (Array.isArray(node) && node.length === 0) {\n      pushByte(Code.ConstEmptyArray);\n      return;\n    }\n\n    {\n      const existingRef = this.getRefOfNodeThatEquals(node);\n      if (existingRef !== null) {\n        this.writeTaggedRef(existingRef, pushByte);\n        return;\n      }\n    }\n\n    if (Array.isArray(node)) {\n      this.writeTaggedArray(node, pushByte);\n      return;\n    }\n\n    if (\n      node instanceof Uint8Array ||\n      node instanceof Int8Array ||\n      node instanceof Uint8ClampedArray ||\n      node instanceof Uint16Array ||\n      node instanceof Int16Array ||\n      node instanceof Uint32Array ||\n      node instanceof Int32Array ||\n      node instanceof Float32Array ||\n      node instanceof Float64Array\n    ) {\n      this.writeTaggedArray(Array.from(node), pushByte);\n      this.handleInvalidJsonValue(node, false);\n      return;\n    }\n\n    if (typeof node === \"string\") {\n      const utf8Encoder = new TextEncoder();\n      const utf8Bytes = utf8Encoder.encode(node);\n      const utf8Length = utf8Bytes.length;\n\n      const smallStringTag: undefined | Code =\n        utf8Length <= 15 ? Code.String1Byte + utf8Length - 1 : undefined;\n\n      if (smallStringTag !== undefined) {\n        pushByte(smallStringTag);\n      } else {\n        const bigStringTag =\n          utf8Length <= MAX_UINT_1_BYTE\n            ? Code.StringLen1Byte\n            : utf8Length <= MAX_UINT_2_BYTE\n            ? Code.StringLen2Byte\n            : Code.StringLen4Byte;\n\n        pushByte(bigStringTag);\n        this.writeUntaggedUnoffsetSafeUint(utf8Length, pushByte);\n      }\n\n      for (let i = 0; i < utf8Length; ++i) {\n        pushByte(utf8Bytes[i]);\n      }\n\n      this.lookupTable.push(node);\n\n      return;\n    }\n\n    let entries: [string, unknown][];\n    try {\n      entries = Object.entries(node as Record<string, unknown>);\n    } catch {\n      pushByte(Code.ConstNull);\n      this.handleInvalidJsonValue(node, false);\n      return;\n    }\n\n    if (entries.length === 0) {\n      pushByte(Code.ConstEmptyObject);\n      return;\n    }\n\n    type ObjectConstructionCommand =\n      | { isObjectCopy: true; ref: number }\n      | { isObjectCopy: false; key: string; value: unknown };\n    const commandQueue: ObjectConstructionCommand[] = [];\n    let nextUnprocessedEntryIndex = 0;\n    while (nextUnprocessedEntryIndex < entries.length) {\n      const [prefixObjectRef, prefixLength] =\n        this.getLongestPrefixObjectRefAndEntryCount(\n          entries.slice(nextUnprocessedEntryIndex)\n        );\n\n      if (prefixObjectRef === null) {\n        commandQueue.push({\n          isObjectCopy: false,\n          key: entries[nextUnprocessedEntryIndex][0],\n          value: entries[nextUnprocessedEntryIndex][1],\n        });\n        ++nextUnprocessedEntryIndex;\n        continue;\n      }\n\n      commandQueue.push({ isObjectCopy: true, ref: prefixObjectRef });\n      nextUnprocessedEntryIndex += prefixLength;\n    }\n\n    const commandCount = commandQueue.length;\n    const smallObjectTag: undefined | Code =\n      commandCount <= 8 ? Code.Object1Command + commandCount - 1 : undefined;\n\n    if (smallObjectTag !== undefined) {\n      pushByte(smallObjectTag);\n    } else {\n      const bigObjectTag =\n        commandCount <= MAX_UINT_1_BYTE\n          ? Code.ObjectCommandCount1Byte\n          : commandCount <= MAX_UINT_2_BYTE\n          ? Code.ObjectCommandCount2Byte\n          : Code.ObjectCommandCount4Byte;\n\n      pushByte(bigObjectTag);\n      this.writeUntaggedUnoffsetSafeUint(commandCount, pushByte);\n    }\n\n    for (const command of commandQueue) {\n      if (command.isObjectCopy) {\n        this.writeTaggedRef(command.ref, pushByte);\n      } else {\n        this.writeNode(command.key, pushByte);\n        this.writeNode(command.value, pushByte);\n      }\n    }\n\n    this.lookupTable.push(node);\n  }\n\n  private writeTaggedInt(n: number, pushByte: (byte: number) => void): void {\n    if (-8 <= n && n <= 8) {\n      pushByte(n + 136);\n      return;\n    }\n\n    if (9 <= n && n <= MAX_OFFSET_POS_INT_1_BYTE) {\n      pushByte(Code.OffsetPosInt1Byte);\n      pushByte(n - 9);\n      return;\n    }\n\n    if (MIN_OFFSET_NEG_INT_1_BYTE <= n && n <= -9) {\n      pushByte(Code.OffsetNegInt1Byte);\n      pushByte(-9 - n);\n      return;\n    }\n\n    if (!(MIN_INT_4_BYTE <= n && n <= MAX_INT_4_BYTE)) {\n      pushByte(Code.Float64);\n      this.writeUntaggedF64(n, pushByte);\n      return;\n    }\n\n    if (MIN_INT_2_BYTE <= n && n <= MAX_INT_2_BYTE) {\n      pushByte(Code.Int2Byte);\n      const buffer = new ArrayBuffer(2);\n      new DataView(buffer).setInt16(0, n, true);\n      const u8s = new Uint8Array(buffer);\n      for (let i = 0; i < 2; ++i) {\n        pushByte(u8s[i]);\n      }\n      return;\n    }\n\n    pushByte(Code.Int4Byte);\n    const buffer = new ArrayBuffer(4);\n    new DataView(buffer).setInt32(0, n, true);\n    const u8s = new Uint8Array(buffer);\n    for (let i = 0; i < 4; ++i) {\n      pushByte(u8s[i]);\n    }\n  }\n\n  private writeUntaggedUnoffsetSafeUint(\n    uint: number,\n    pushByte: (byte: number) => void\n  ): void {\n    if (uint === 0) {\n      pushByte(0);\n      return;\n    }\n\n    let n = uint;\n    while (n > 0) {\n      pushByte(n % 256);\n      n = Math.floor(n / 256);\n    }\n  }\n\n  private writeUntaggedF64(n: number, pushByte: (byte: number) => void): void {\n    const buffer = new ArrayBuffer(8);\n    const view = new DataView(buffer);\n    view.setFloat64(0, n, true);\n\n    const u8s = new Uint8Array(buffer);\n    for (let i = 0; i < 8; ++i) {\n      pushByte(u8s[i]);\n    }\n  }\n\n  private writeTaggedRef(ref: number, pushByte: (byte: number) => void): void {\n    if (ref <= 127) {\n      pushByte(ref);\n      return;\n    }\n\n    const refTag =\n      ref <= MAX_UINT_1_BYTE\n        ? Code.Ref1Byte\n        : ref <= MAX_UINT_2_BYTE\n        ? Code.Ref2Byte\n        : Code.Ref4Byte;\n\n    if (ref > MAX_UINT_4_BYTE) {\n      throw new Error(\"Reference too large. Index: \" + ref);\n    }\n\n    pushByte(refTag);\n    this.writeUntaggedUnoffsetSafeUint(ref, pushByte);\n  }\n\n  private writeTaggedArray(\n    node: readonly unknown[],\n    pushByte: (byte: number) => void\n  ): void {\n    const byteArrayTag = elementCountToByteArrayTag(node.length);\n    if (\n      byteArrayTag !== null &&\n      node.every(\n        (n) => Number.isInteger(n) && 0 <= (n as number) && (n as number) <= 255\n      )\n    ) {\n      pushByte(byteArrayTag);\n      for (const n of node) {\n        pushByte(n as number);\n      }\n      return;\n    }\n\n    const smallArrayTag: undefined | Code =\n      node.length <= 8 ? Code.Array1Element + node.length - 1 : undefined;\n\n    if (smallArrayTag !== undefined) {\n      pushByte(smallArrayTag);\n    } else {\n      const bigArrayTag =\n        node.length <= MAX_UINT_1_BYTE\n          ? Code.ArrayLen1Byte\n          : node.length <= MAX_UINT_2_BYTE\n          ? Code.ArrayLen2Byte\n          : Code.ArrayLen4Byte;\n\n      pushByte(bigArrayTag);\n      this.writeUntaggedUnoffsetSafeUint(node.length, pushByte);\n    }\n\n    if (node.length > MAX_UINT_4_BYTE) {\n      throw new Error(\"Array too long. Length: \" + node.length);\n    }\n\n    for (let i = 0; i < node.length; ++i) {\n      this.writeNode(node[i], pushByte);\n    }\n\n    this.lookupTable.push(node);\n  }\n\n  /**\n   * If a prefix object is not found, this function returns `[null, 0]`.\n   */\n  private getLongestPrefixObjectRefAndEntryCount(\n    goalEntries: readonly (readonly [string, unknown])[]\n  ): [number | null, number] {\n    if (goalEntries.length === 0) {\n      return [null, 0];\n    }\n\n    let bestRef: null | number = null;\n    let bestEntryCount = 0;\n\n    for (\n      let candidateRef = 0;\n      candidateRef < this.lookupTable.length;\n      ++candidateRef\n    ) {\n      const referent = this.lookupTable[candidateRef];\n\n      if (!(referent !== null && typeof referent === \"object\")) {\n        continue;\n      }\n\n      let candidateEntries: [string, unknown][];\n      try {\n        candidateEntries = Object.entries(referent as Record<string, unknown>);\n      } catch {\n        continue;\n      }\n\n      if (\n        !(\n          candidateEntries.length <= goalEntries.length &&\n          candidateEntries.every(\n            ([candidateKey, candidateValue], i) =>\n              candidateKey === goalEntries[i][0] &&\n              jsonDeepEquals(candidateValue, goalEntries[i][1])\n          )\n        )\n      ) {\n        continue;\n      }\n\n      if (candidateEntries.length > bestEntryCount) {\n        bestRef = candidateRef;\n        bestEntryCount = candidateEntries.length;\n      }\n    }\n\n    return [bestRef, bestEntryCount];\n  }\n\n  private getRefOfNodeThatEquals(node: unknown): number | null {\n    for (let i = 0; i < this.lookupTable.length; ++i) {\n      if (jsonDeepEquals(node, this.lookupTable[i])) {\n        return i;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * The value that this function returns is **not** safe to mutate.\n   * If you need to mutate the value, you must make a deep copy.\n   */\n  readNodeAndMarkAnalyzerAsUsed(data: Uint8Array): {\n    readonly value: unknown;\n    readonly bytesConsumed: number;\n  } {\n    if (this.isUsed) {\n      throw new Error(\"NonReusableJsonAnalyzer is already used.\");\n    }\n\n    this.isUsed = true;\n\n    return this.readNode(data);\n  }\n\n  private readNode(data: Uint8Array): {\n    value: unknown;\n    bytesConsumed: number;\n  } {\n    const tag = data[0];\n    if (tag <= 127) {\n      return { value: this.getReferent(tag), bytesConsumed: 1 };\n    }\n\n    if (128 <= tag && tag <= 144) {\n      return { value: tag - 136, bytesConsumed: 1 };\n    }\n\n    if (tag === Code.ConstNull) {\n      return { value: null, bytesConsumed: 1 };\n    }\n\n    if (tag === Code.ConstFalse) {\n      return { value: false, bytesConsumed: 1 };\n    }\n\n    if (tag === Code.ConstTrue) {\n      return { value: true, bytesConsumed: 1 };\n    }\n\n    if (Code.OffsetPosInt1Byte <= tag && tag <= Code.Int4Byte) {\n      return this.readTaggedInt(data);\n    }\n\n    if (tag === Code.Float64) {\n      const value = this.getUntaggedF64(data.subarray(1));\n      return { value, bytesConsumed: 9 };\n    }\n\n    if (Code.ConstEmptyArray <= tag && tag <= Code.ArrayLen4Byte) {\n      return this.readTaggedArray(data);\n    }\n\n    if (Code.ConstEmptyObject <= tag && tag <= Code.ObjectCommandCount4Byte) {\n      return this.readTaggedObject(data);\n    }\n\n    if (Code.Ref1Byte <= tag && tag <= Code.Ref4Byte) {\n      return this.readReferentOfTaggedBigRef(data);\n    }\n\n    if (tag === Code.BigUint || tag === Code.NegBigInt) {\n      throw new Error(\"BigInts are not supported.\");\n    }\n\n    if (Code.ConstEmptyString <= tag && tag <= Code.StringLen4Byte) {\n      return this.readTaggedString(data);\n    }\n\n    if (Code.ByteArray4Element <= tag && tag <= Code.ByteArray64Element) {\n      return this.readTaggedByteArray(data);\n    }\n\n    throw new Error(\"Invalid node tag: \" + tag);\n  }\n\n  private readTaggedInt(data: Uint8Array): {\n    value: number;\n    bytesConsumed: number;\n  } {\n    const tag = data[0];\n\n    if (tag === Code.OffsetPosInt1Byte) {\n      return { value: data[1] + 9, bytesConsumed: 2 };\n    }\n\n    if (tag === Code.OffsetNegInt1Byte) {\n      return { value: -9 - data[1], bytesConsumed: 2 };\n    }\n\n    if (tag === Code.Int2Byte) {\n      const buffer = new ArrayBuffer(2);\n      new Uint8Array(buffer).set(data.subarray(1, 3));\n      const value = new DataView(buffer).getInt16(0, true);\n      return { value, bytesConsumed: 3 };\n    }\n\n    if (tag === Code.Int4Byte) {\n      const buffer = new ArrayBuffer(4);\n      new Uint8Array(buffer).set(data.subarray(1, 5));\n      const value = new DataView(buffer).getInt32(0, true);\n      return { value, bytesConsumed: 5 };\n    }\n\n    if (tag === Code.Int8Byte) {\n      throw new Error(\"Int8Byte is not supported.\");\n    }\n\n    throw new Error(\"Invalid int tag: \" + tag);\n  }\n\n  private getUntaggedF64(data: Uint8Array): number {\n    const buffer = new ArrayBuffer(8);\n    new Uint8Array(buffer).set(data.subarray(0, 8));\n    return new DataView(buffer).getFloat64(0, true);\n  }\n\n  private readTaggedArray(data: Uint8Array): {\n    value: readonly unknown[];\n    bytesConsumed: number;\n  } {\n    const tag = data[0];\n\n    if (tag === Code.ConstEmptyArray) {\n      return { value: [], bytesConsumed: 1 };\n    }\n\n    const { arrayLength, firstElementIndex } =\n      this.getLengthAndFirstElementIndexOfTaggedNonEmptyArray(data);\n\n    const out: unknown[] = [];\n    let nextElementIndex = firstElementIndex;\n\n    for (let i = 0; i < arrayLength; ++i) {\n      const { bytesConsumed, value } = this.readNode(\n        data.subarray(nextElementIndex)\n      );\n      out.push(value);\n      nextElementIndex += bytesConsumed;\n    }\n\n    this.lookupTable.push(out);\n    return { value: out, bytesConsumed: nextElementIndex };\n  }\n\n  private getLengthAndFirstElementIndexOfTaggedNonEmptyArray(\n    data: Uint8Array\n  ): {\n    arrayLength: number;\n    firstElementIndex: number;\n  } {\n    const tag = data[0];\n\n    if (Code.Array1Element <= tag && tag <= Code.Array8Element) {\n      return {\n        arrayLength: tag - Code.Array1Element + 1,\n        firstElementIndex: 1,\n      };\n    }\n\n    if (tag === Code.ArrayLen1Byte) {\n      return { arrayLength: data[1], firstElementIndex: 2 };\n    }\n\n    if (tag === Code.ArrayLen2Byte) {\n      const arrayLength = this.getUntaggedU16(data.subarray(1));\n      return { arrayLength, firstElementIndex: 3 };\n    }\n\n    if (tag === Code.ArrayLen4Byte) {\n      const arrayLength = this.getUntaggedU32(data.subarray(1));\n      return { arrayLength, firstElementIndex: 5 };\n    }\n\n    throw new Error(\"Invalid array tag: \" + tag);\n  }\n\n  private getUntaggedU16(data: Uint8Array): number {\n    const buffer = new ArrayBuffer(2);\n    new Uint8Array(buffer).set(data.subarray(0, 2));\n    return new DataView(buffer).getUint16(0, true);\n  }\n\n  private getUntaggedU32(data: Uint8Array): number {\n    const buffer = new ArrayBuffer(4);\n    new Uint8Array(buffer).set(data.subarray(0, 4));\n    return new DataView(buffer).getUint32(0, true);\n  }\n\n  private readTaggedObject(data: Uint8Array): {\n    value: Record<string, unknown>;\n    bytesConsumed: number;\n  } {\n    const tag = data[0];\n\n    if (tag === Code.ConstEmptyObject) {\n      return { value: {}, bytesConsumed: 1 };\n    }\n\n    const { commandCount, firstCommandIndex } =\n      this.getLengthAndFirstCommandIndexOfTaggedNonEmptyObject(data);\n\n    const entries: (readonly [string, unknown])[] = [];\n    let nextCommandIndex = firstCommandIndex;\n\n    for (let i = 0; i < commandCount; ++i) {\n      const part1 = this.readNode(data.subarray(nextCommandIndex));\n      nextCommandIndex += part1.bytesConsumed;\n\n      if (typeof part1.value === \"object\" && part1.value !== null) {\n        entries.push(...Object.entries(part1.value as Record<string, unknown>));\n        continue;\n      }\n\n      const part2 = this.readNode(data.subarray(nextCommandIndex));\n      nextCommandIndex += part2.bytesConsumed;\n\n      entries.push([String(part1.value), part2.value]);\n    }\n\n    const out = Object.fromEntries(entries);\n    this.lookupTable.push(out);\n    return {\n      value: out,\n      bytesConsumed: nextCommandIndex,\n    };\n  }\n\n  private getLengthAndFirstCommandIndexOfTaggedNonEmptyObject(\n    data: Uint8Array\n  ): {\n    commandCount: number;\n    firstCommandIndex: number;\n  } {\n    const tag = data[0];\n\n    if (Code.Object1Command <= tag && tag <= Code.Object8Command) {\n      return {\n        commandCount: tag - Code.Object1Command + 1,\n        firstCommandIndex: 1,\n      };\n    }\n\n    if (tag === Code.ObjectCommandCount1Byte) {\n      return { commandCount: data[1], firstCommandIndex: 2 };\n    }\n\n    if (tag === Code.ObjectCommandCount2Byte) {\n      const commandCount = this.getUntaggedU16(data.subarray(1));\n      return { commandCount, firstCommandIndex: 3 };\n    }\n\n    if (tag === Code.ObjectCommandCount4Byte) {\n      const commandCount = this.getUntaggedU32(data.subarray(1));\n      return { commandCount, firstCommandIndex: 5 };\n    }\n\n    throw new Error(\"Invalid object tag: \" + tag);\n  }\n\n  private readReferentOfTaggedBigRef(data: Uint8Array): {\n    value: unknown;\n    bytesConsumed: number;\n  } {\n    const tag = data[0];\n\n    if (tag === Code.Ref1Byte) {\n      const ref = data[1];\n      const value = this.getReferent(ref);\n      return { value, bytesConsumed: 2 };\n    }\n\n    if (tag === Code.Ref2Byte) {\n      const ref = this.getUntaggedU16(data.subarray(1));\n      const value = this.getReferent(ref);\n      return { value, bytesConsumed: 3 };\n    }\n\n    if (tag === Code.Ref4Byte) {\n      const ref = this.getUntaggedU32(data.subarray(1));\n      const value = this.getReferent(ref);\n      return { value, bytesConsumed: 5 };\n    }\n\n    throw new Error(\"Invalid ref tag: \" + tag);\n  }\n\n  private getReferent(ref: number): unknown {\n    if (ref >= this.lookupTable.length) {\n      throw new Error(\n        \"Reference out of bounds. Index: \" +\n          ref +\n          \". Lookup table length: \" +\n          this.lookupTable.length +\n          \".\"\n      );\n    }\n\n    return this.lookupTable[ref];\n  }\n\n  private readTaggedString(data: Uint8Array): {\n    value: string;\n    bytesConsumed: number;\n  } {\n    const tag = data[0];\n\n    if (tag === Code.ConstEmptyString) {\n      return { value: \"\", bytesConsumed: 1 };\n    }\n\n    const { stringUtf8Length, firstByteIndex } =\n      this.getLengthAndFirstCharIndexOfTaggedNonEmptyString(data);\n\n    const utf8Bytes = data.subarray(\n      firstByteIndex,\n      firstByteIndex + stringUtf8Length\n    );\n    const value = new TextDecoder().decode(utf8Bytes);\n    this.lookupTable.push(value);\n    return { value, bytesConsumed: firstByteIndex + stringUtf8Length };\n  }\n\n  private getLengthAndFirstCharIndexOfTaggedNonEmptyString(data: Uint8Array): {\n    stringUtf8Length: number;\n    firstByteIndex: number;\n  } {\n    const tag = data[0];\n\n    if (Code.String1Byte <= tag && tag <= Code.String15Byte) {\n      return {\n        stringUtf8Length: tag - Code.String1Byte + 1,\n        firstByteIndex: 1,\n      };\n    }\n\n    if (tag === Code.StringLen1Byte) {\n      return { stringUtf8Length: data[1], firstByteIndex: 2 };\n    }\n\n    if (tag === Code.StringLen2Byte) {\n      const stringUtf8Length = this.getUntaggedU16(data.subarray(1));\n      return { stringUtf8Length, firstByteIndex: 3 };\n    }\n\n    if (tag === Code.StringLen4Byte) {\n      const stringUtf8Length = this.getUntaggedU32(data.subarray(1));\n      return { stringUtf8Length, firstByteIndex: 5 };\n    }\n\n    throw new Error(\"Invalid string tag: \" + tag);\n  }\n\n  private readTaggedByteArray(data: Uint8Array): {\n    value: readonly number[];\n    bytesConsumed: number;\n  } {\n    const tag = data[0];\n\n    if (tag === Code.ByteArray4Element) {\n      const value = Array.from(data.subarray(1, 5));\n      return { value, bytesConsumed: 5 };\n    }\n\n    if (tag === Code.ByteArray8Element) {\n      const value = Array.from(data.subarray(1, 9));\n      return { value, bytesConsumed: 9 };\n    }\n\n    if (tag === Code.ByteArray16Element) {\n      const value = Array.from(data.subarray(1, 17));\n      return { value, bytesConsumed: 17 };\n    }\n\n    if (tag === Code.ByteArray32Element) {\n      const value = Array.from(data.subarray(1, 33));\n      return { value, bytesConsumed: 33 };\n    }\n\n    if (tag === Code.ByteArray64Element) {\n      const value = Array.from(data.subarray(1, 65));\n      return { value, bytesConsumed: 65 };\n    }\n\n    throw new Error(\"Invalid byte array tag: \" + tag);\n  }\n}\n\nclass PushableUint8Array {\n  private buffer: Uint8Array;\n  private length: number;\n\n  constructor(length?: number) {\n    this.buffer = new Uint8Array(length ?? 0);\n    this.length = 0;\n  }\n\n  pushByte(byte: number): void {\n    if (this.length >= this.buffer.length) {\n      const newBuffer = new Uint8Array(Math.max(1, this.buffer.length * 2));\n      newBuffer.set(this.buffer);\n      this.buffer = newBuffer;\n    }\n\n    this.buffer[this.length] = byte;\n    ++this.length;\n  }\n\n  pushBytes(bytes: Uint8Array): void {\n    const requiredLen = this.length + bytes.length;\n\n    let newBufferLen = this.buffer.length;\n    while (newBufferLen < requiredLen) {\n      newBufferLen = Math.max(1, newBufferLen * 2);\n    }\n\n    if (newBufferLen !== this.buffer.length) {\n      const newBuffer = new Uint8Array(newBufferLen);\n      newBuffer.set(this.buffer);\n      this.buffer = newBuffer;\n    }\n\n    this.buffer.set(bytes, this.length);\n    this.length += bytes.length;\n  }\n\n  unpushableSlice(start?: number, end?: number): Uint8Array {\n    return this.buffer.subarray(0, this.length).slice(start, end);\n  }\n\n  unpushableSubarray(start?: number, end?: number): Uint8Array {\n    return this.buffer.subarray(0, this.length).subarray(start, end);\n  }\n\n  getLength(): number {\n    return this.length;\n  }\n}\n\nexport function compressJson(\n  json: any,\n  implicitTable: readonly string[]\n): Uint8Array {\n  const analyzer = new NonReusableJsonAnalyzer(implicitTable);\n  const body = new PushableUint8Array();\n  const pushByteToBody = body.pushByte.bind(body);\n\n  analyzer.writeNodeAndMarkAnalyzerAsUsed(json, pushByteToBody);\n  return body.unpushableSubarray();\n}\n\nexport function decompressJson(\n  data: Uint8Array,\n  implicitTable: readonly string[]\n): unknown {\n  const analyzer = new NonReusableJsonAnalyzer(implicitTable);\n  return analyzer.readNodeAndMarkAnalyzerAsUsed(data).value;\n}\n\nfunction jsonDeepEquals(a: unknown, b: unknown): boolean {\n  // This logic fails on NaN, since NaN !== NaN.\n  // However, NaN is not a valid JSON value, so this is fine.\n  if (a === b) {\n    return true;\n  }\n\n  if (typeof a !== typeof b) {\n    return false;\n  }\n\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return (\n      a.length === b.length &&\n      a.every((aElement, i) => jsonDeepEquals(aElement, b[i]))\n    );\n  }\n\n  if (\n    !(\n      a !== null &&\n      typeof a === \"object\" &&\n      b !== null &&\n      typeof b === \"object\"\n    )\n  ) {\n    return false;\n  }\n\n  try {\n    const aEntries = Object.entries(a as Record<string, unknown>);\n    const bEntries = Object.entries(b as Record<string, unknown>);\n    return (\n      aEntries.length === bEntries.length &&\n      aEntries.every(\n        ([aKey, aValue], i) =>\n          bEntries[i][0] === aKey && jsonDeepEquals(aValue, bEntries[i][1])\n      )\n    );\n  } catch {\n    return false;\n  }\n}\n\nfunction elementCountToByteArrayTag(elementCount: number): null | Code {\n  if (elementCount === 4) {\n    return Code.ByteArray4Element;\n  }\n\n  if (elementCount === 8) {\n    return Code.ByteArray8Element;\n  }\n\n  if (elementCount === 16) {\n    return Code.ByteArray16Element;\n  }\n\n  if (elementCount === 32) {\n    return Code.ByteArray32Element;\n  }\n\n  if (elementCount === 64) {\n    return Code.ByteArray64Element;\n  }\n\n  return null;\n}\n","const list = [\n\t// Native ES errors https://262.ecma-international.org/12.0/#sec-well-known-intrinsic-objects\n\tEvalError,\n\tRangeError,\n\tReferenceError,\n\tSyntaxError,\n\tTypeError,\n\tURIError,\n\n\t// Built-in errors\n\tglobalThis.DOMException,\n\n\t// Node-specific errors\n\t// https://nodejs.org/api/errors.html\n\tglobalThis.AssertionError,\n\tglobalThis.SystemError,\n]\n\t// Non-native Errors are used with `globalThis` because they might be missing. This filter drops them when undefined.\n\t.filter(Boolean)\n\t.map(\n\t\tconstructor => [constructor.name, constructor],\n\t);\n\nconst errorConstructors = new Map(list);\n\nexport default errorConstructors;\n","import errorConstructors from './error-constructors.js';\n\nexport class NonError extends Error {\n\tname = 'NonError';\n\n\tconstructor(message) {\n\t\tsuper(NonError._prepareSuperMessage(message));\n\t}\n\n\tstatic _prepareSuperMessage(message) {\n\t\ttry {\n\t\t\treturn JSON.stringify(message);\n\t\t} catch {\n\t\t\treturn String(message);\n\t\t}\n\t}\n}\n\nconst commonProperties = [\n\t{\n\t\tproperty: 'name',\n\t\tenumerable: false,\n\t},\n\t{\n\t\tproperty: 'message',\n\t\tenumerable: false,\n\t},\n\t{\n\t\tproperty: 'stack',\n\t\tenumerable: false,\n\t},\n\t{\n\t\tproperty: 'code',\n\t\tenumerable: true,\n\t},\n\t{\n\t\tproperty: 'cause',\n\t\tenumerable: false,\n\t},\n];\n\nconst toJsonWasCalled = new WeakSet();\n\nconst toJSON = from => {\n\ttoJsonWasCalled.add(from);\n\tconst json = from.toJSON();\n\ttoJsonWasCalled.delete(from);\n\treturn json;\n};\n\nconst getErrorConstructor = name => errorConstructors.get(name) ?? Error;\n\n// eslint-disable-next-line complexity\nconst destroyCircular = ({\n\tfrom,\n\tseen,\n\tto,\n\tforceEnumerable,\n\tmaxDepth,\n\tdepth,\n\tuseToJSON,\n\tserialize,\n}) => {\n\tif (!to) {\n\t\tif (Array.isArray(from)) {\n\t\t\tto = [];\n\t\t} else if (!serialize && isErrorLike(from)) {\n\t\t\tconst Error = getErrorConstructor(from.name);\n\t\t\tto = new Error();\n\t\t} else {\n\t\t\tto = {};\n\t\t}\n\t}\n\n\tseen.push(from);\n\n\tif (depth >= maxDepth) {\n\t\treturn to;\n\t}\n\n\tif (useToJSON && typeof from.toJSON === 'function' && !toJsonWasCalled.has(from)) {\n\t\treturn toJSON(from);\n\t}\n\n\tconst continueDestroyCircular = value => destroyCircular({\n\t\tfrom: value,\n\t\tseen: [...seen],\n\t\tforceEnumerable,\n\t\tmaxDepth,\n\t\tdepth,\n\t\tuseToJSON,\n\t\tserialize,\n\t});\n\n\tfor (const [key, value] of Object.entries(from)) {\n\t\tif (value && value instanceof Uint8Array && value.constructor.name === 'Buffer') {\n\t\t\tto[key] = '[object Buffer]';\n\t\t\tcontinue;\n\t\t}\n\n\t\t// TODO: Use `stream.isReadable()` when targeting Node.js 18.\n\t\tif (value !== null && typeof value === 'object' && typeof value.pipe === 'function') {\n\t\t\tto[key] = '[object Stream]';\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (typeof value === 'function') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!value || typeof value !== 'object') {\n\t\t\t// Gracefully handle non-configurable errors like `DOMException`.\n\t\t\ttry {\n\t\t\t\tto[key] = value;\n\t\t\t} catch {}\n\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!seen.includes(from[key])) {\n\t\t\tdepth++;\n\t\t\tto[key] = continueDestroyCircular(from[key]);\n\n\t\t\tcontinue;\n\t\t}\n\n\t\tto[key] = '[Circular]';\n\t}\n\n\tfor (const {property, enumerable} of commonProperties) {\n\t\tif (typeof from[property] !== 'undefined' && from[property] !== null) {\n\t\t\tObject.defineProperty(to, property, {\n\t\t\t\tvalue: isErrorLike(from[property]) ? continueDestroyCircular(from[property]) : from[property],\n\t\t\t\tenumerable: forceEnumerable ? true : enumerable,\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true,\n\t\t\t});\n\t\t}\n\t}\n\n\treturn to;\n};\n\nexport function serializeError(value, options = {}) {\n\tconst {\n\t\tmaxDepth = Number.POSITIVE_INFINITY,\n\t\tuseToJSON = true,\n\t} = options;\n\n\tif (typeof value === 'object' && value !== null) {\n\t\treturn destroyCircular({\n\t\t\tfrom: value,\n\t\t\tseen: [],\n\t\t\tforceEnumerable: true,\n\t\t\tmaxDepth,\n\t\t\tdepth: 0,\n\t\t\tuseToJSON,\n\t\t\tserialize: true,\n\t\t});\n\t}\n\n\t// People sometimes throw things besides Error objects…\n\tif (typeof value === 'function') {\n\t\t// `JSON.stringify()` discards functions. We do too, unless a function is thrown directly.\n\t\t// We intentionally use `||` because `.name` is an empty string for anonymous functions.\n\t\treturn `[Function: ${value.name || 'anonymous'}]`;\n\t}\n\n\treturn value;\n}\n\nexport function deserializeError(value, options = {}) {\n\tconst {maxDepth = Number.POSITIVE_INFINITY} = options;\n\n\tif (value instanceof Error) {\n\t\treturn value;\n\t}\n\n\tif (isMinimumViableSerializedError(value)) {\n\t\tconst Error = getErrorConstructor(value.name);\n\t\treturn destroyCircular({\n\t\t\tfrom: value,\n\t\t\tseen: [],\n\t\t\tto: new Error(),\n\t\t\tmaxDepth,\n\t\t\tdepth: 0,\n\t\t\tserialize: false,\n\t\t});\n\t}\n\n\treturn new NonError(value);\n}\n\nexport function isErrorLike(value) {\n\treturn Boolean(value)\n\t&& typeof value === 'object'\n\t&& 'name' in value\n\t&& 'message' in value\n\t&& 'stack' in value;\n}\n\nfunction isMinimumViableSerializedError(value) {\n\treturn Boolean(value)\n\t&& typeof value === 'object'\n\t&& 'message' in value\n\t&& !Array.isArray(value);\n}\n\nexport {default as errorConstructors} from './error-constructors.js';\n","import { serializeError } from \"serialize-error\";\n\nexport function stringifyError(error: unknown): string {\n  return JSON.stringify(serializeError(error));\n}\n","import { CanvasItem } from \"./BlockEditor\";\nimport { Level, UiLanguage } from \"./constsAndEnums\";\nimport { writeToFirebaseStorage } from \"./firebase\";\nimport { compressJson } from \"./jsonCompression\";\nimport { MainBlockEditorTypeParams } from \"./miscTypes\";\nimport { loadData, saveData } from \"./deviceStorage\";\nimport { stringifyError } from \"./stringifyError\";\nimport { GAME_VERSION_WITHOUT_V } from \"./GAME_VERSION\";\n\nexport const LOG_SCHEMA_VERSION = 1;\n\nexport const LOG_COMPRESSION_SCHEME_VERSION = 1;\n\nexport const LOG_CACHE_LOCAL_STORAGE_KEY =\n  \"com.zaqlo.studios.castlecoders.logcache\";\n\nexport const LOGGER_ID_BYTES_LOCAL_STORAGE_KEY =\n  \"com.zaqlo.studios.castlecoders.loggeridbytes\";\n\nexport const LOG_CACHE_MAX_SIZE = 200;\n\nexport const LOG_UPLOAD_COOLDOWN_SECONDS = 120;\n\nexport enum LogEventKind {\n  Error = \"Error\",\n  LoggerIdCreated = \"LoggerIdCreated\",\n  AppLifeCycleMilestone = \"AppLifeCycleMilestone\",\n  ButtonPressed = \"ButtonPressed\",\n  BlockEditorCanvasItemsUpdated = \"BlockEditorCanvasItemsUpdated\",\n  BattleResumed = \"BattleResumed\",\n  BattlePaused = \"BattlePaused\",\n  LevelCompleted = \"LevelCompleted\",\n  LevelFailed = \"LevelFailed\",\n  LanguageChanged = \"LanguageChanged\",\n  AppActiveStatusChanged = \"AppActiveStatusChanged\",\n}\n\nconst JSON_COMPRESSION_TABLE: readonly string[] = [];\n\nlet possiblyLoadingLoggerIdBytes: \"Loading\" | LoggerIdBytes = \"Loading\";\nlet wasLoggerIdJustCreated = false;\n\n/**\n * If the app is offline, a log upload will be queued.\n * As soon as the app regains Internet connection, the log upload will be attempted.\n * Since `logEvents` returns a promise, we need to resolve that promise\n * when the upload is successfully completed.\n * We do that by pushing the promises' `resolve` functions to this array.\n */\nconst pendingLogUploadCompletionListeners: (() => void)[] = [];\n\nconst loggerIdBytesPromise: Promise<LoggerIdBytes> =\n  (async (): Promise<LoggerIdBytes> => {\n    const savedIdString = await loadData(LOGGER_ID_BYTES_LOCAL_STORAGE_KEY);\n    const loggerIdBytesOrNull = tryParseLoggerBytesString(savedIdString);\n\n    if (loggerIdBytesOrNull !== null) {\n      possiblyLoadingLoggerIdBytes = loggerIdBytesOrNull;\n      wasLoggerIdJustCreated = false;\n      return possiblyLoadingLoggerIdBytes;\n    }\n\n    const newLoggerIdBytes = getBytesForNewLoggerId();\n\n    await saveData(\n      LOGGER_ID_BYTES_LOCAL_STORAGE_KEY,\n      JSON.stringify(newLoggerIdBytes)\n    );\n\n    possiblyLoadingLoggerIdBytes = newLoggerIdBytes;\n    wasLoggerIdJustCreated = true;\n\n    return possiblyLoadingLoggerIdBytes;\n  })();\n\nconst pendingLogEvents: LogEvent[] = [];\n\nconst pendingLogEventsPushedPromise: Promise<void> = loggerIdBytesPromise.then(\n  (loggerIdBytes) => {\n    logEventsWithLoggerId(pendingLogEvents, loggerIdBytes);\n\n    pendingLogEvents.splice(0, pendingLogEvents.length);\n\n    pendingLogEvents.push = (): number => {\n      const error = new Error(\n        \"Attempted to push to pendingLogEvents after the logger id was loaded.\"\n      );\n\n      logEvents([\n        {\n          kind: LogEventKind.Error,\n          errorMessage: stringifyError(error),\n          timestampDateDotNow: Date.now(),\n        },\n      ]);\n\n      console.error(error);\n\n      return pendingLogEvents.length;\n    };\n  }\n);\n\nexport type AppLifeCycleMilestoneKind =\n  | \"IndexDotTsFinished\"\n  | \"AppConstructed\"\n  | \"AppMounted\"\n  | \"LoadingScreenStarted\"\n  | \"LoadingScreenFinished\"\n  | \"AppUnmounted\";\n\nexport type LoggableButtonKind =\n  | \"HomeScreenStart\"\n  | \"Edit\"\n  | \"InEditorMiniBattleScreen\"\n  | \"ViewMap\"\n  | \"ResumeBattle\"\n  | \"PauseBattle\"\n  | \"ReturnHome\"\n  | \"OpenSettings\"\n  | \"CloseSettingsWithPrimaryButton\"\n  | \"CloseSettingsWithSecondaryButton\"\n  | \"ChangeLanguage\"\n  | \"OpenCredits\"\n  | \"CloseCredits\"\n  | \"OpenConfirmResetToLevelOneScreen\"\n  | \"CloseConfirmResetToLevelOneScreen\"\n  | \"ConfirmResetToLevelOne\"\n  | \"CancelResetToLevelOne\"\n  | \"NextLevel\";\n\nexport type AppActiveStatusChangeKind =\n  | \"Activated_Web\"\n  | \"Deactivated_Web\"\n  | \"Activated_Native\"\n  | \"Deactivated_Native\";\n\nexport type LogEvent =\n  | ErrorLogEvent\n  | LoggerIdCreatedLogEvent\n  | AppLifeCycleMilestoneLogEvent\n  | ButtonPressedLogEvent\n  | BlockEditorCanvasItemsUpdatedLogEvent\n  | BattleResumedLogEvent\n  | BattlePausedLogEvent\n  | LevelCompletedLogEvent\n  | LevelFailedLogEvent\n  | LanguageChangedLogEvent\n  | AppActiveStatusChangedLogEvent;\n\n/** A 16-byte ID. */\ntype LoggerIdBytes = readonly [\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number\n];\n\nexport interface BaseLogEvent {\n  readonly timestampDateDotNow: number;\n}\n\nexport interface ErrorLogEvent extends BaseLogEvent {\n  readonly kind: LogEventKind.Error;\n  readonly errorMessage: string;\n}\n\nexport interface LoggerIdCreatedLogEvent extends BaseLogEvent {\n  readonly kind: LogEventKind.LoggerIdCreated;\n  readonly loggerIdBytes: LoggerIdBytes;\n}\n\nexport interface AppLifeCycleMilestoneLogEvent extends BaseLogEvent {\n  readonly kind: LogEventKind.AppLifeCycleMilestone;\n  readonly milestoneKind: AppLifeCycleMilestoneKind;\n  readonly gameVersionWithoutV: string;\n}\n\nexport interface ButtonPressedLogEvent extends BaseLogEvent {\n  readonly kind: LogEventKind.ButtonPressed;\n  readonly buttonKind: LoggableButtonKind;\n}\n\nexport interface BlockEditorCanvasItemsUpdatedLogEvent extends BaseLogEvent {\n  readonly kind: LogEventKind.BlockEditorCanvasItemsUpdated;\n  readonly canvasItems: readonly CanvasItem<MainBlockEditorTypeParams>[];\n}\n\nexport interface BattleResumedLogEvent extends BaseLogEvent {\n  readonly kind: LogEventKind.BattleResumed;\n  readonly battleAnimationOffsetSeconds: number;\n  readonly canvasItems: readonly CanvasItem<MainBlockEditorTypeParams>[];\n}\n\nexport interface BattlePausedLogEvent extends BaseLogEvent {\n  readonly kind: LogEventKind.BattlePaused;\n  readonly battleAnimationOffsetSeconds: number;\n  readonly canvasItems: readonly CanvasItem<MainBlockEditorTypeParams>[];\n}\n\nexport interface LevelCompletedLogEvent extends BaseLogEvent {\n  readonly kind: LogEventKind.LevelCompleted;\n  readonly completedLevel: Level;\n  readonly canvasItems: readonly CanvasItem<MainBlockEditorTypeParams>[];\n}\n\nexport interface LevelFailedLogEvent extends BaseLogEvent {\n  readonly kind: LogEventKind.LevelFailed;\n  readonly failedLevel: Level;\n  readonly didHeroSurvive: boolean;\n  readonly canvasItems: readonly CanvasItem<MainBlockEditorTypeParams>[];\n}\n\nexport interface LanguageChangedLogEvent extends BaseLogEvent {\n  readonly kind: LogEventKind.LanguageChanged;\n  readonly newLanguage: UiLanguage;\n}\n\nexport interface AppActiveStatusChangedLogEvent extends BaseLogEvent {\n  readonly kind: LogEventKind.AppActiveStatusChanged;\n  readonly statusChangeKind: AppActiveStatusChangeKind;\n}\n\ninterface LogCollection {\n  readonly logSchemaVersion: number;\n  readonly logEvents: readonly LogEvent[];\n  readonly lastEmptiedDateDotNow: number;\n  readonly lastUpdatedDateDotNow: number;\n}\n\nexport function getBytesForNewLoggerId(): LoggerIdBytes {\n  const buffer = new ArrayBuffer(16);\n  const view = new DataView(buffer);\n  view.setFloat64(0, Math.random(), true);\n  view.setFloat64(8, Date.now(), true);\n\n  const u8s = new Uint8Array(buffer);\n  return Array.from(u8s) as unknown as LoggerIdBytes;\n}\n\nexport function logEvents(newEvents: readonly LogEvent[]): Promise<void> {\n  if (possiblyLoadingLoggerIdBytes === \"Loading\") {\n    pendingLogEvents.push(...newEvents);\n\n    return pendingLogEventsPushedPromise;\n  }\n\n  return logEventsWithLoggerId(newEvents, possiblyLoadingLoggerIdBytes);\n}\n\nfunction logEventsWithLoggerId(\n  newEvents: readonly LogEvent[],\n  loggerIdBytes: LoggerIdBytes\n): Promise<void> {\n  const logCache = getAndSaveUpToDateLogCacheOrDefault(\n    loggerIdBytes,\n    wasLoggerIdJustCreated\n  );\n  const nextUploadTimeDateDotNow =\n    logCache.lastEmptiedDateDotNow + LOG_UPLOAD_COOLDOWN_SECONDS * 1000;\n\n  const allEvents = logCache.logEvents.concat(newEvents);\n  updateLogCache({\n    ...logCache,\n    logEvents: allEvents,\n  });\n\n  if (\n    allEvents.length >= LOG_CACHE_MAX_SIZE ||\n    Date.now() > nextUploadTimeDateDotNow\n  ) {\n    if (!navigator.onLine) {\n      console.log(\"Attempted to send logs, but app is offline.\");\n\n      return new Promise((resolve) => {\n        pendingLogUploadCompletionListeners.push(resolve);\n      });\n    }\n\n    console.log(\"Sending logs.\");\n    return uploadLogEvents(allEvents, loggerIdBytes).then(\n      emptyLogCacheAssumingLoggerIdBytesHavedLoaded\n    );\n  }\n\n  return Promise.resolve();\n}\n\nfunction getAndSaveUpToDateLogCacheOrDefault(\n  loggerIdBytes: LoggerIdBytes,\n  wasLoggerIdJustCreated: boolean\n): LogCollection {\n  const savedStr = localStorage.getItem(LOG_CACHE_LOCAL_STORAGE_KEY);\n  if (savedStr === null) {\n    return getAndSaveDefaultLogCache(loggerIdBytes, wasLoggerIdJustCreated);\n  }\n  try {\n    const saved = JSON.parse(savedStr);\n\n    if (saved.logSchemaVersion !== LOG_SCHEMA_VERSION) {\n      return getAndSaveDefaultLogCache(loggerIdBytes, wasLoggerIdJustCreated);\n    }\n\n    return saved;\n  } catch {\n    return getAndSaveDefaultLogCache(loggerIdBytes, wasLoggerIdJustCreated);\n  }\n}\n\nfunction getAndSaveDefaultLogCache(\n  loggerIdBytes: LoggerIdBytes,\n  wasLoggerIdJustCreated: boolean\n): LogCollection {\n  const now = Date.now();\n  const defaultCache: LogCollection = {\n    logSchemaVersion: LOG_SCHEMA_VERSION,\n    logEvents: wasLoggerIdJustCreated\n      ? [\n          {\n            kind: LogEventKind.LoggerIdCreated,\n            loggerIdBytes,\n            timestampDateDotNow: now,\n          },\n        ]\n      : [],\n    lastEmptiedDateDotNow: now,\n    lastUpdatedDateDotNow: now,\n  };\n  localStorage.setItem(\n    LOG_CACHE_LOCAL_STORAGE_KEY,\n    JSON.stringify(defaultCache)\n  );\n  return defaultCache;\n}\n\nfunction updateLogCache(newCache: LogCollection): void {\n  const now = Date.now();\n  const timestampedCache: LogCollection = {\n    ...newCache,\n    lastUpdatedDateDotNow: now,\n    lastEmptiedDateDotNow:\n      newCache.logEvents.length === 0 ? now : newCache.lastEmptiedDateDotNow,\n  };\n  const s = JSON.stringify(timestampedCache);\n  localStorage.setItem(LOG_CACHE_LOCAL_STORAGE_KEY, s);\n}\n\nfunction emptyLogCacheAssumingLoggerIdBytesHavedLoaded(): void {\n  if (possiblyLoadingLoggerIdBytes === \"Loading\") {\n    throw new Error(\n      \"Called emptyLogCacheAssumingLoggerIdBytesHavedLoaded() but logger ID bytes are still loading.\"\n    );\n  }\n\n  const logCache = getAndSaveUpToDateLogCacheOrDefault(\n    possiblyLoadingLoggerIdBytes,\n    wasLoggerIdJustCreated\n  );\n  updateLogCache({\n    ...logCache,\n    logEvents: [],\n  });\n}\n\nfunction uploadLogEvents(\n  events: readonly LogEvent[],\n  loggerIdBytes: LoggerIdBytes\n): Promise<void> {\n  const startTime = performance.now();\n  const encoded = encodeLogEvents(events, loggerIdBytes);\n  const endTime = performance.now();\n  console.log(\"Encoding took\", endTime - startTime, \"ms\");\n\n  const loggerIdString = loggerIdBytes\n    .map((b) => leftpadWithZero(b.toString(16), 2))\n    .join(\"\");\n  const nowStr = Date.now().toString(16);\n  const url = `logs/${loggerIdString}_${nowStr}.dat`;\n  return writeToFirebaseStorage(url, new Blob([encoded])).then(noOp);\n}\n\nfunction encodeLogEvents(\n  logEvents: readonly LogEvent[],\n  loggerIdBytes: LoggerIdBytes\n): Uint8Array {\n  return compressJson(\n    {\n      loggerIdBytes,\n      logSchemaVersion: LOG_SCHEMA_VERSION,\n      logCompressionSchemeVersion: LOG_COMPRESSION_SCHEME_VERSION,\n      gameVersion: GAME_VERSION_WITHOUT_V,\n      logEvents,\n    },\n    JSON_COMPRESSION_TABLE\n  );\n}\n\nfunction noOp(): void {}\n\nfunction leftpadWithZero(s: string, targetLength: number): string {\n  if (s.length > targetLength) {\n    throw new Error(\n      `String is too long to pad. Target length: ${targetLength}. String: ${JSON.stringify(\n        s\n      )}`\n    );\n  }\n  return \"0\".repeat(targetLength - s.length) + s;\n}\n\nfunction tryParseLoggerBytesString(s: null | string): null | LoggerIdBytes {\n  if (s === null) {\n    return null;\n  }\n\n  let parsed: unknown;\n  try {\n    parsed = JSON.parse(s);\n  } catch {\n    return null;\n  }\n\n  if (!isLoggerIdBytes(parsed)) {\n    return null;\n  }\n\n  return parsed;\n}\n\nfunction isLoggerIdBytes(data: unknown): data is LoggerIdBytes {\n  return Array.isArray(data) && data.length === 16 && data.every(isUint8);\n}\n\nfunction isUint8(data: unknown): boolean {\n  return (\n    Number.isInteger(data) && 0 <= (data as number) && (data as number) <= 255\n  );\n}\n\nexport function getPossiblyLoadingLoggerIdBytes(): \"Loading\" | LoggerIdBytes {\n  return possiblyLoadingLoggerIdBytes;\n}\n\nwindow.addEventListener(\"online\", async () => {\n  const loggerIdBytes = await loggerIdBytesPromise;\n\n  const logCache = getAndSaveUpToDateLogCacheOrDefault(\n    loggerIdBytes,\n    wasLoggerIdJustCreated\n  );\n\n  await uploadLogEvents(logCache.logEvents, loggerIdBytes);\n  emptyLogCacheAssumingLoggerIdBytesHavedLoaded();\n\n  for (const listener of pendingLogUploadCompletionListeners) {\n    listener();\n  }\n\n  pendingLogUploadCompletionListeners.splice(\n    0,\n    pendingLogUploadCompletionListeners.length\n  );\n});\n","import React from \"react\";\nimport prand from \"pure-rand\";\nimport {\n  buttonOverlays,\n  convertRectangleFromExtendedHomeCoordsToNonextendedHomeCoords,\n  CREDITS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS,\n  damageOverlays,\n  images,\n  JAPANESE_TEXT_BBOX_IN_EXTENDED_HOME_COORDS,\n  LANGUAGE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS,\n  LOADING_SCREEN_CASTLE_CODERS_TEXT_BBOX_IN_EXTENDED_HOME_COORDS,\n  NONEXTENDED_HOME_BACKGROUND_DIMENSIONS,\n  RESET_TO_LEVEL_ONE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS,\n  SETTINGS_BOX_BBOX_IN_NONEXTENDED_HOME_COORDS,\n  SETTINGS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS,\n  SETTINGS_SCREEN_CLOSE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS,\n  START_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS,\n} from \"./images\";\nimport { fonts } from \"./fonts\";\nimport \"./App.css\";\nimport { Vec2, addVec, areVecsEqual, scaleVec, subVec } from \"./vec2\";\nimport {\n  BlockCanvasState,\n  BlockDefs,\n  BlockEditor,\n  BlockEditorColorProps,\n  BlockEditorConfig,\n  BlockEditorProps,\n  BlockEditorState,\n  CANVAS_ADDRESS_PART,\n  Color32,\n  ColorTriplet,\n  Rectangle,\n  UiTouchStateKind,\n  updateCanvasToMatchLiteralEditor,\n  Block,\n  NodeAddress,\n  BlockSequence,\n  areNodeAddressesEqual,\n  ARG_COMMAND_SEQUENCE_ADDRESS_PART,\n  ARG_EXPRESSION_ADDRESS_PART,\n  getBlockSequenceRenderSpec,\n  BlockSequenceRenderSpec,\n  BlockRenderSpec,\n  RenderSpecKind,\n  ReadonlyRecord,\n  CanvasItem,\n  Literal,\n  getPaletteBlockRenderSpecs,\n  getCanvasItemRenderSpecs,\n  UiTouchState,\n  Expression,\n  BlockEditorTypeParams,\n  PALETTE_ADDRESS_PART,\n} from \"./BlockEditor\";\nimport {\n  CanvasElement,\n  CanvasElementKind,\n  CanvasTextFont,\n  applyFont,\n  NULL_CANVAS_ELEMENT,\n  paintCanvasElement,\n  PathInstructionKind,\n  TransformKind,\n  CanvasText_,\n  Transform,\n  CanvasImage,\n  CanvasGroup,\n} from \"./paintCanvas\";\nimport { SETTINGS_VERSION } from \"./SETTINGS_VERSION\";\nimport type { SafeAreaInsets } from \"capacitor-plugin-safe-area\";\nimport {\n  addSafeAreaChangeListener,\n  getSafeAreaInsets,\n  removeSafeAreaChangeListener,\n} from \"./safeArea\";\nimport { saveData, loadData } from \"./deviceStorage\";\nimport { SplashScreen } from \"@capacitor/splash-screen\";\nimport {\n  AudioManager,\n  ScheduledSoundCollectionId,\n  Sound,\n  SoundKind,\n  getAudioManager,\n} from \"./audioManager\";\nimport { Capacitor } from \"@capacitor/core\";\nimport {\n  App as CapacitorApp,\n  AppState as CapacitorAppState,\n} from \"@capacitor/app\";\nimport { allowSleep, keepAwake } from \"./keepAwake\";\nimport { Device } from \"@capacitor/device\";\nimport {\n  AddressedCommand,\n  AdvanceSummon,\n  AnimationParticle,\n  BattleAnimationData,\n  BattleEvent,\n  BattleEventsCache,\n  ButtonClickDetectorResources,\n  CanvasCircle,\n  CanvasRect,\n  Dimensions,\n  DualRenderOutput,\n  GoblinSquareState,\n  HeroSquareState,\n  ImmutableBlockExecutionContext,\n  InstructionsBoxRenderInfo,\n  LevelState,\n  MainBlockEditorTypeParams,\n  MinimapBlockEditorTypeParams,\n  MutableBlockExecutionContext,\n  Props,\n  SavableState,\n  ScreenState,\n  SimpleFunction,\n  SquareState,\n  State,\n  Timestamp,\n  TutorialBlockEditorTypeParams,\n  VectorSpaceOperations,\n  WitchSquareState,\n} from \"./miscTypes\";\nimport {\n  DOM_ELEMENT_IDS,\n  AnimationKind,\n  ONE_SECOND_AFTER_FILE_LOAD,\n  LAST_LEVEL,\n  UiTextKind,\n  UI_TEXT_FONT_FAMILY,\n  COLOR_THEME,\n  ButtonKind,\n  Level,\n  SIZING,\n  UI_FONT_SIZE,\n  IN_EDITOR_MINI_BATTLE_SCREEN_SCALE_FACTOR,\n  SCREEN_TRANSITION_ANIMATION_SECONDS,\n  CREDIT_SCREEN_SCROLL_SPEED_IN_SCREEN_HEIGHT_PER_SECOND,\n  CREDITS_SCREEN_BODY,\n  BattleStatus,\n  BATTLE_OUTCOME_TEXT_FONT_FAMILY,\n  BUTTON_TEXT_FONT_FAMILY,\n  TRANSPARENT,\n  ERROR_ALERT_TEXT_FONT_FAMILY,\n  TALL_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR,\n  TALL_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR,\n  BlockKind,\n  LEVEL_1_TUTORIAL_DRAG_CYCLE,\n  SHORT_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR,\n  SHORT_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR,\n  LEVEL_9_TUTORIAL_ANIMATION_CYCLE,\n  LOCALIZED_DEFEATED_ENEMIES_BUT_FORGOT_TO_MOVE_HERO_TO_STAIRS_MESSAGE_TEXT,\n  TUTORIAL_BLOCK_EDITOR_STATIC_CONFIG,\n  MAIN_BLOCK_EDITOR_STATIC_CONFIG,\n  MINIMAP_BLOCK_EDITOR_STATIC_CONFIG,\n  TEXT_SENTINELS,\n  UiLanguage,\n  DEFAULT_LANGUAGE,\n  svgTextDimensionCache,\n  PUZZLE_MUSIC,\n  HOME_MUSIC,\n  TextSentinel,\n  ALL_PUZZLE_SCREEN_BUTTON_ICON_SENTINELS,\n  ALL_FONT_CHANGE_SENTINELS,\n  PUZZLE_SCREEN_BUTTON_ICON_SENTINEL_IMAGES,\n  PuzzleScreenButtonIconTextSentinel,\n  FONT_CHANGE_SENTINEL_FONT_FAMILIES,\n  FontChangeTextSentinel,\n  LOCALIZED_UI_TEXT,\n  BattleEventKind,\n  SquareKind,\n  HeroActionKind,\n  BATTLE_CONFIG,\n  X_IN_FRONT_DROPDOWN_VALUES,\n  DropdownValueKind,\n  GoblinColor,\n  BATTLE_START_DELAY_SECONDS,\n  INTER_EVENT_DELAY_SECONDS,\n  ATTACK_DURATION_IN_SECONDS,\n  MELEE_ATTACKERS,\n  MELEE_DAMAGE_OVERLAY_FLASH_START_FACTOR,\n  MELEE_DAMAGE_OVERLAY_FLASH_END_FACTOR,\n  FIREBALL_DAMAGE_OVERLAY_FLASH_START_FACTOR,\n  FIREBALL_DAMAGE_OVERLAY_FLASH_END_FACTOR,\n  HEAL_ANIMATION_DURATION_IN_SECONDS,\n  VEC2_VSO,\n  COLOR32_VSO,\n  BLOCK_DEFS,\n  DROPDOWN_TEXTS,\n  REAL_VSO,\n  LOCAL_STORAGE_STATE_KEY,\n  MinimapBlockKind,\n  BLOCK_DEF_STRINGS,\n  InactiveBlockKind,\n  SVG_TEXT_DIMENSION_CACHE_KEY_SEPARATOR,\n  EnemyCombinationKind,\n  CLUB_ATTACKERS,\n  SWORD_ATTACKERS,\n  FIREBALL_ATTACKERS,\n  MAX_HEARTS_PER_ROW,\n  UNSCALED_INTER_HEART_MARK_HORIZONTAL_MARGIN,\n  mapBlockKindRecordToInactiveBlockKindRecord,\n  mapBlockKindRecord,\n} from \"./constsAndEnums\";\nimport {\n  getPossiblyLoadingLoggerIdBytes,\n  LogEvent,\n  LogEventKind,\n  logEvents as uncheckedLogEvents,\n} from \"./log\";\nimport { GAME_VERSION_WITHOUT_V } from \"./GAME_VERSION\";\n\nlet hasPerformedPreflightSanityCheck = false;\n\nexport class App extends React.Component<Props, State> {\n  readonly mainBlockEditorComponentInstanceUid: string;\n  readonly tutorialBlockEditorComponentInstanceUid: string;\n  readonly minimapBlockEditorComponentInstanceUid: string;\n  readonly ghostSvg: SVGElement;\n  readonly tempCanvasCtx: CanvasRenderingContext2D;\n  readonly frontCanvasCtx: CanvasRenderingContext2D;\n  readonly blockLiteralEditor: HTMLDivElement;\n  readonly blockLiteralEditorForm: HTMLFormElement;\n  readonly blockLiteralEditorInput: HTMLInputElement;\n  readonly blockLiteralEditorCloseButton: HTMLButtonElement;\n  readonly initialSavedStateOrDefault: Promise<SavableState>;\n  readonly audioManager: AudioManager;\n\n  isMounted_: boolean;\n\n  lastBlockEditorSetStateCallTime: Timestamp;\n\n  /**\n   * If the block editor has never called setState,\n   * then this can be any value as long as\n   * `currentLevelBattleEventsCache.timeCached` is strictly earlier\n   * than `lastBlockEditorSetStateCallTime`.\n   */\n  currentLevelBattleEventsCache: BattleEventsCache;\n\n  /**\n   * If the block editor has never called setState,\n   * then this can be any value as long as\n   * `prevLevelBattleEventsCache.timeCached` is strictly earlier\n   * than `lastBlockEditorSetStateCallTime`.\n   */\n  prevLevelBattleEventsCache: BattleEventsCache;\n\n  battleSoundsId: ScheduledSoundCollectionId;\n  homeMusicId: ScheduledSoundCollectionId;\n  puzzleMusicId: ScheduledSoundCollectionId;\n\n  hasRecordedLevelCompletionOrFailureSinceLastBattleResumption: boolean;\n\n  __debug__pause: boolean;\n\n  constructor(props: Props) {\n    super(props);\n\n    performPreflightSanityCheckIfNotAlreadyPerformed();\n\n    this.mainBlockEditorComponentInstanceUid =\n      BlockEditor.generateComponentInstanceUid();\n\n    this.tutorialBlockEditorComponentInstanceUid =\n      BlockEditor.generateComponentInstanceUid();\n\n    this.minimapBlockEditorComponentInstanceUid =\n      BlockEditor.generateComponentInstanceUid();\n\n    this.ghostSvg = document.getElementById(\n      DOM_ELEMENT_IDS.ghostSvg\n    ) as unknown as SVGElement;\n\n    const tempCanvas = document.createElement(\"canvas\");\n    this.tempCanvasCtx = tempCanvas.getContext(\"2d\", {\n      willReadFrequently: true,\n    })!;\n\n    const frontCanvas = document.getElementById(\n      DOM_ELEMENT_IDS.frontCanvas\n    ) as HTMLCanvasElement;\n    this.frontCanvasCtx = frontCanvas.getContext(\"2d\")!;\n\n    this.blockLiteralEditor = document.getElementById(\n      DOM_ELEMENT_IDS.blockLiteralEditor\n    ) as HTMLDivElement;\n    this.blockLiteralEditorForm = document.getElementById(\n      DOM_ELEMENT_IDS.blockLiteralEditorForm\n    ) as HTMLFormElement;\n    this.blockLiteralEditorInput = document.getElementById(\n      DOM_ELEMENT_IDS.blockLiteralEditorInput\n    ) as HTMLInputElement;\n    this.blockLiteralEditorCloseButton = document.getElementById(\n      DOM_ELEMENT_IDS.blockLiteralEditorCloseButton\n    ) as HTMLButtonElement;\n\n    this.initialSavedStateOrDefault = getSavedStateOrDefault();\n\n    this.audioManager = getAudioManager();\n\n    this.isMounted_ = false;\n\n    this.lastBlockEditorSetStateCallTime = getCurrentTimestamp();\n    this.currentLevelBattleEventsCache = {\n      timeCached: { millisecondsSinceEpoch: 0 },\n      events: [],\n    };\n    this.prevLevelBattleEventsCache = {\n      timeCached: { millisecondsSinceEpoch: 0 },\n      events: [],\n    };\n\n    this.battleSoundsId = { soundCollectionRawId: -1 };\n    this.homeMusicId = { soundCollectionRawId: -1 };\n    this.puzzleMusicId = { soundCollectionRawId: -1 };\n\n    this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption = false;\n\n    this.__debug__pause = false;\n\n    this.bindMethods();\n\n    // As a placeholder, we initialize this.state\n    // with the data in localStorage,\n    // since we can fetch it synchronously.\n    // Later, we fetch the data asynchronously from a more reliable storage source,\n    // and then update the state once that Promise resolves.\n    const { language, blockEditor, level } =\n      getStateSavedInLocalStorageOrDefault();\n\n    this.state = {\n      appWidth: window.innerWidth,\n      appHeight: window.innerHeight,\n      orientationType: getCurrentScreenOrientation(),\n      language,\n      screen: {\n        blockEditor,\n        level,\n        animationKind: AnimationKind.Loading,\n        animationStartTime: getCurrentTimestamp(),\n        currentTimestamp: getCurrentTimestamp(),\n        battleAnimationOffsetSeconds: 0,\n        prevLevelBlockEditor: getDummyBlockEditorState(),\n        mostRecentTutorialBlockEditorUpdateTime: getCurrentTimestamp(),\n      },\n      onlyTouchStartButton: null,\n      onlyTouchDepressedButton: null,\n      mouseClientPosition: { x: -1, y: -1 },\n      safeAreaInsets: {\n        insets: {\n          left: 0,\n          right: 0,\n          top: 0,\n          bottom: 0,\n        },\n      },\n      hasFailedLevelOneAtLeastOnce: false,\n    };\n\n    // Since the app is not mounted yet,\n    // we need to bypass the `isMounted_` check.\n    // So, we use `uncheckedLogEvents` instead of `this.logEventsIfMounted`.\n    uncheckedLogEvents([\n      {\n        kind: LogEventKind.AppLifeCycleMilestone,\n        milestoneKind: \"AppConstructed\",\n        gameVersionWithoutV: GAME_VERSION_WITHOUT_V,\n        timestampDateDotNow: Date.now(),\n      },\n    ]);\n  }\n\n  bindMethods(): void {\n    this.onResize = this.onResize.bind(this);\n    this.onDocumentVisibilityChange =\n      this.onDocumentVisibilityChange.bind(this);\n    this.onCapacitorAppStateChange = this.onCapacitorAppStateChange.bind(this);\n    this.onWindowTouchStart = this.onWindowTouchStart.bind(this);\n    this.onWindowMouseDown = this.onWindowMouseDown.bind(this);\n    this.onWindowTouchMove = this.onWindowTouchMove.bind(this);\n    this.onWindowMouseMove = this.onWindowMouseMove.bind(this);\n    this.onWindowTouchEnd = this.onWindowTouchEnd.bind(this);\n    this.onWindowMouseUp = this.onWindowMouseUp.bind(this);\n    this.onLiteralEditorFormSubmit = this.onLiteralEditorFormSubmit.bind(this);\n    this.onLiteralEditorInputChange =\n      this.onLiteralEditorInputChange.bind(this);\n    this.onCloseLiteralEditorButtonClick =\n      this.onCloseLiteralEditorButtonClick.bind(this);\n\n    this.measureCanvasText = this.measureCanvasText.bind(this);\n    this.measureSvgText = this.measureSvgText.bind(this);\n    this.setBlockEditorState = this.setBlockEditorState.bind(this);\n    this.updateCanvas = this.updateCanvas.bind(this);\n    this.getCurrentLevelBattleEvents =\n      this.getCurrentLevelBattleEvents.bind(this);\n    this.startLoadingBarProgressAnimation =\n      this.startLoadingBarProgressAnimation.bind(this);\n    this.renderTutorialCanvasElement =\n      this.renderTutorialCanvasElement.bind(this);\n  }\n\n  componentDidMount(): void {\n    this.isMounted_ = true;\n\n    window.addEventListener(\"resize\", this.onResize);\n    document.addEventListener(\n      \"visibilitychange\",\n      this.onDocumentVisibilityChange\n    );\n    CapacitorApp.addListener(\"appStateChange\", this.onCapacitorAppStateChange);\n    window.addEventListener(\"orientationchange\", this.onResize);\n    addSafeAreaChangeListener(this.onResize);\n    window.addEventListener(\"touchstart\", this.onWindowTouchStart, {\n      passive: false,\n    });\n    window.addEventListener(\"mousedown\", this.onWindowMouseDown);\n    window.addEventListener(\"touchmove\", this.onWindowTouchMove);\n    window.addEventListener(\"mousemove\", this.onWindowMouseMove);\n    window.addEventListener(\"touchend\", this.onWindowTouchEnd);\n    window.addEventListener(\"mouseup\", this.onWindowMouseUp);\n\n    this.blockLiteralEditor.style.removeProperty(\"display\");\n\n    this.blockLiteralEditorForm.addEventListener(\n      \"submit\",\n      this.onLiteralEditorFormSubmit\n    );\n    this.blockLiteralEditorInput.addEventListener(\n      \"input\",\n      this.onLiteralEditorInputChange\n    );\n    this.blockLiteralEditorCloseButton.addEventListener(\n      \"touchend\",\n      this.onCloseLiteralEditorButtonClick\n    );\n    this.blockLiteralEditorCloseButton.addEventListener(\n      \"mouseup\",\n      this.onCloseLiteralEditorButtonClick\n    );\n\n    Promise.all([\n      this.initialSavedStateOrDefault,\n      getSafeAreaInsets(),\n      images.extended_home_background.ready,\n      images.buttons.home.start.ready,\n      images.buttons.home.settings.ready,\n      fonts.checkpoint,\n    ])\n      .then(([initialSavedStateOrDefault]) => {\n        this.onResize();\n\n        const { language, blockEditor, level } = initialSavedStateOrDefault;\n        this.setState(\n          (prevState) => ({\n            ...prevState,\n            language,\n            screen: {\n              ...prevState.screen,\n              blockEditor,\n              level,\n            },\n          }),\n          () => {\n            ONE_SECOND_AFTER_FILE_LOAD.then(() => {\n              SplashScreen.hide();\n              this.startLoadingBarProgressAnimation();\n            });\n          }\n        );\n      })\n      .catch((error) => {\n        console.error(\"Error loading assets: \", error);\n      });\n\n    (window as any).app = this;\n    (window as any).skipToLevel = (level: number): void => {\n      if (!(level === Math.floor(level) && 1 <= level && level <= LAST_LEVEL)) {\n        throw new Error(\n          \"Invalid level: \" +\n            JSON.stringify(level) +\n            \". Max level is \" +\n            LAST_LEVEL\n        );\n      }\n\n      this.setState(\n        {\n          screen: {\n            ...this.state.screen,\n            blockEditor: getStartingBlockEditorStateForLevel(level),\n            level,\n          },\n        },\n        () => window.location.reload()\n      );\n    };\n\n    this.logEventIfMounted({\n      kind: LogEventKind.AppLifeCycleMilestone,\n      milestoneKind: \"AppMounted\",\n      gameVersionWithoutV: GAME_VERSION_WITHOUT_V,\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  startLoadingBarProgressAnimation(): void {\n    const currentTimestamp = getCurrentTimestamp();\n    this.setState(\n      (prevState) => ({\n        ...prevState,\n        screen: {\n          ...prevState.screen,\n          animationKind: AnimationKind.Loading,\n          animationStartTime: currentTimestamp,\n          currentTimestamp,\n        },\n      }),\n      this.getLoadingScreenAnimationUpdater(currentTimestamp)\n    );\n\n    this.logEventIfMounted({\n      kind: LogEventKind.AppLifeCycleMilestone,\n      milestoneKind: \"LoadingScreenStarted\",\n      gameVersionWithoutV: GAME_VERSION_WITHOUT_V,\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  componentWillUnmount(): void {\n    this.isMounted_ = false;\n    window.removeEventListener(\"resize\", this.onResize);\n    document.removeEventListener(\n      \"visibilitychange\",\n      this.onDocumentVisibilityChange\n    );\n    CapacitorApp.removeAllListeners();\n    window.removeEventListener(\"orientationchange\", this.onResize);\n    removeSafeAreaChangeListener(this.onResize);\n    window.removeEventListener(\"touchstart\", this.onWindowTouchStart);\n    window.removeEventListener(\"touchmove\", this.onWindowTouchMove);\n    window.removeEventListener(\"touchend\", this.onWindowTouchEnd);\n\n    this.blockLiteralEditorForm.removeEventListener(\n      \"submit\",\n      this.onLiteralEditorFormSubmit\n    );\n    this.blockLiteralEditorInput.removeEventListener(\n      \"input\",\n      this.onLiteralEditorInputChange\n    );\n    this.blockLiteralEditorCloseButton.removeEventListener(\n      \"touchend\",\n      this.onCloseLiteralEditorButtonClick\n    );\n    this.blockLiteralEditorCloseButton.removeEventListener(\n      \"mouseup\",\n      this.onCloseLiteralEditorButtonClick\n    );\n\n    uncheckedLogEvents([\n      {\n        kind: LogEventKind.AppLifeCycleMilestone,\n        milestoneKind: \"AppUnmounted\",\n        gameVersionWithoutV: GAME_VERSION_WITHOUT_V,\n        timestampDateDotNow: Date.now(),\n      },\n    ]);\n  }\n\n  logEventIfMounted(event: LogEvent): void {\n    this.logEventsIfMounted([event]);\n  }\n\n  logEventsIfMounted(events: readonly LogEvent[]): void {\n    if (this.isMounted_) {\n      uncheckedLogEvents(events);\n    } else {\n      console.log(\"Suppressing log events from unmounted component\", events);\n    }\n  }\n\n  override setState<K extends keyof State>(\n    state:\n      | ((\n          prevState: Readonly<State>,\n          props: Readonly<Props>\n        ) => Pick<State, K> | State | null)\n      | (Pick<State, K> | State | null),\n    callback?: () => void\n  ): void;\n  override setState<K extends keyof State>(\n    state:\n      | ((\n          prevState: Readonly<State>,\n          props: Readonly<Props>\n        ) => Pick<State, K> | State | null)\n      | (Pick<State, K> | State | null),\n    callback?: () => void\n  ): ReturnType<App[\"setState\"]> {\n    if (this.__debug__pause) {\n      return;\n    }\n\n    return super.setState(state, (): void => {\n      this.updateCanvas();\n\n      saveState(this.state, this.getCurrentLevelBattleEvents);\n\n      const isMouseOverButton =\n        getButtonAt(\n          this.state.mouseClientPosition,\n          this.state,\n          this.getButtonClickDetectorResources()\n        ) !== null;\n      const cursor = isMouseOverButton ? \"pointer\" : \"default\";\n      const root = document.getElementById(\"Root\");\n      if (root !== null) {\n        root.style.cursor = cursor;\n      }\n\n      if (typeof callback === \"function\") {\n        callback();\n      }\n    });\n  }\n\n  render(): React.ReactElement {\n    this.updateBlockLiteralEditor();\n    return this.dualRender().reactElement;\n  }\n\n  updateBlockLiteralEditor(): void {\n    const { literalEditor } = this.state.screen.blockEditor;\n    const shouldShowEditor =\n      literalEditor !== null &&\n      this.state.screen.animationKind === AnimationKind.Edit;\n    this.blockLiteralEditor.classList.toggle(\"Hidden\", !shouldShowEditor);\n\n    const { language } = this.state;\n    this.blockLiteralEditorCloseButton.innerText = getUiText(\n      language,\n      UiTextKind.CloseLiteralEditor\n    );\n\n    if (literalEditor !== null) {\n      this.blockLiteralEditorInput.value = literalEditor.literalSource;\n      this.blockLiteralEditorInput.focus();\n    }\n  }\n\n  dualRender(): DualRenderOutput {\n    switch (this.state.orientationType) {\n      case \"landscape-primary\":\n      case \"landscape-secondary\":\n        return this.dualRenderAssumingLandscapeOrientation();\n      case \"portrait-secondary\":\n      case \"portrait-primary\":\n        return this.dualRenderAssumingPortraitOrientation();\n      default:\n        console.warn(\n          \"The orientation API isn't supported in this browser. Falling back to landscape mode.\"\n        );\n        return this.dualRenderAssumingLandscapeOrientation();\n    }\n  }\n\n  dualRenderAssumingLandscapeOrientation(): DualRenderOutput {\n    const { screen } = this.state;\n    switch (screen.animationKind) {\n      case AnimationKind.Loading:\n        return this.dualRenderLoadingScreen();\n      case AnimationKind.StaticHome:\n        return this.dualRenderHomeScreen();\n      case AnimationKind.Edit:\n        return this.dualRenderEditScreen();\n      case AnimationKind.StaticSettings:\n        return this.dualRenderSettingsScreen();\n      case AnimationKind.StaticConfirmResetToLevelOne:\n        return this.dualRenderConfirmResetToLevelOneScreen();\n      case AnimationKind.HomeToView:\n        return this.dualRenderHomeToViewAnimation();\n      case AnimationKind.EditToView:\n        return this.dualRenderEditToViewAnimation();\n      case AnimationKind.ViewToEdit:\n        return this.dualRenderViewToEditAnimation();\n      case AnimationKind.ViewToHome:\n        return this.dualRenderViewToHomeAnimation();\n      case AnimationKind.EditToHome:\n        return this.dualRenderEditToHomeAnimation();\n      case AnimationKind.PlayBattle:\n      case AnimationKind.PauseBattle:\n        return this.dualRenderBattleScreen();\n      case AnimationKind.NextLevel:\n        return this.dualRenderNextLevelAnimation();\n      case AnimationKind.OpenSettings:\n        return this.dualRenderOpenSettingsAnimation();\n      case AnimationKind.CloseSettings:\n        return this.dualRenderCloseSettingsAnimation();\n      case AnimationKind.Credits:\n        return this.dualRenderCreditsAnimation();\n      default:\n        typecheckedAssertNever(screen.animationKind);\n    }\n  }\n\n  dualRenderLoadingScreen(): DualRenderOutput {\n    const reactElement = (\n      <div className=\"App\">\n        <div className=\"AppMain\">\n          <svg\n            className=\"MainSvg\"\n            width={this.state.appWidth}\n            height={this.state.appHeight}\n          ></svg>\n        </div>\n      </div>\n    );\n    const canvasElement = this.renderLoadingScreenCanvasElement();\n    return { reactElement, canvasElement };\n  }\n\n  renderLoadingScreenCanvasElement(): CanvasElement {\n    const minimumHorizontalScale =\n      this.state.appWidth / NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.width;\n    const minimumVerticalScale =\n      this.state.appHeight / NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.height;\n    const scale = Math.min(minimumHorizontalScale, minimumVerticalScale);\n\n    const loadCompletionFactor = this.getLoadCompletionFactor();\n\n    const { language } = this.state;\n\n    const nonextendedHomeBackgroundBBox: Rectangle = ((): Rectangle => {\n      const scaledWidth = NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.width * scale;\n      const scaledHeight =\n        NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.height * scale;\n      const x = (this.state.appWidth - scaledWidth) / 2;\n      const y = (this.state.appHeight - scaledHeight) / 1;\n      return {\n        topLeft: { x, y },\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n\n    const castleCodersTextBBox: Rectangle = ((): Rectangle => {\n      const topLeft = addVec(\n        nonextendedHomeBackgroundBBox.topLeft,\n        scaleVec(\n          convertRectangleFromExtendedHomeCoordsToNonextendedHomeCoords(\n            LOADING_SCREEN_CASTLE_CODERS_TEXT_BBOX_IN_EXTENDED_HOME_COORDS\n          ).topLeft,\n          scale\n        )\n      );\n      const scaledWidth =\n        convertRectangleFromExtendedHomeCoordsToNonextendedHomeCoords(\n          LOADING_SCREEN_CASTLE_CODERS_TEXT_BBOX_IN_EXTENDED_HOME_COORDS\n        ).dimensions.width * scale;\n      const scaledHeight =\n        convertRectangleFromExtendedHomeCoordsToNonextendedHomeCoords(\n          LOADING_SCREEN_CASTLE_CODERS_TEXT_BBOX_IN_EXTENDED_HOME_COORDS\n        ).dimensions.height * scale;\n      return {\n        topLeft,\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n    const SCALED_CASTLE_CODERS_TEXT_BOTTOM_MARGIN = scale * 500;\n\n    const loadingText: CanvasText_ = {\n      kind: CanvasElementKind.Text,\n      text: getUiText(language, UiTextKind.LoadingDotDotDot),\n      x:\n        castleCodersTextBBox.topLeft.x +\n        0.5 * castleCodersTextBBox.dimensions.width,\n      y:\n        castleCodersTextBBox.topLeft.y +\n        castleCodersTextBBox.dimensions.height +\n        SCALED_CASTLE_CODERS_TEXT_BOTTOM_MARGIN,\n      fontFamily: UI_TEXT_FONT_FAMILY,\n      fontSize: scale * 56,\n      fill: COLOR_THEME.textBrown,\n      textAlign: \"center\",\n      textBaseline: \"top\",\n    };\n    const loadingTextDimensions = this.measureCanvasText(loadingText);\n    const loadingTextBottom = loadingText.y + loadingTextDimensions.height;\n    const SCALED_LOADING_TEXT_BOTTOM_MARGIN = scale * 60;\n\n    const SCALED_LOADING_BAR_DEPTH_ILLUSION_OFFSET = scale * 10;\n\n    return {\n      kind: CanvasElementKind.Group,\n      children: [\n        this.renderHomeScreenBackgroundCanvasElement(),\n\n        {\n          kind: CanvasElementKind.Image,\n          source: images.loading_screen_castle_coders_text,\n          dx: castleCodersTextBBox.topLeft.x,\n          dy: castleCodersTextBBox.topLeft.y,\n          dw: castleCodersTextBBox.dimensions.width,\n          dh: castleCodersTextBBox.dimensions.height,\n        },\n\n        loadingText,\n\n        renderRect({\n          x: castleCodersTextBBox.topLeft.x,\n          y: loadingTextBottom + SCALED_LOADING_TEXT_BOTTOM_MARGIN,\n          w: castleCodersTextBBox.dimensions.width,\n          h: 40 * scale,\n          rx: 20 * scale,\n          ry: 20 * scale,\n          fill: parseColorHexString(\"#888888\"),\n        }),\n\n        renderRect({\n          x: castleCodersTextBBox.topLeft.x,\n          y: loadingTextBottom + SCALED_LOADING_TEXT_BOTTOM_MARGIN,\n          w: castleCodersTextBBox.dimensions.width * loadCompletionFactor,\n          h: 40 * scale,\n          rx: 20 * scale,\n          ry: 20 * scale,\n          fill: COLOR_THEME.purple.secondary,\n        }),\n\n        renderRect({\n          x: castleCodersTextBBox.topLeft.x,\n          y:\n            loadingTextBottom +\n            SCALED_LOADING_TEXT_BOTTOM_MARGIN +\n            SCALED_LOADING_BAR_DEPTH_ILLUSION_OFFSET,\n          w: castleCodersTextBBox.dimensions.width,\n          h: 40 * scale,\n          rx: 20 * scale,\n          ry: 20 * scale,\n          fill: parseColorHexString(\"#A6A6A6\"),\n        }),\n\n        renderRect({\n          x: castleCodersTextBBox.topLeft.x,\n          y:\n            loadingTextBottom +\n            SCALED_LOADING_TEXT_BOTTOM_MARGIN +\n            SCALED_LOADING_BAR_DEPTH_ILLUSION_OFFSET,\n          w: castleCodersTextBBox.dimensions.width * loadCompletionFactor,\n          h: 40 * scale,\n          rx: 20 * scale,\n          ry: 20 * scale,\n          fill: COLOR_THEME.purple.primary,\n        }),\n      ],\n    };\n  }\n\n  dualRenderHomeScreen(): DualRenderOutput {\n    const reactElement = (\n      <div className=\"App\">\n        <div className=\"AppMain\">\n          <svg\n            className=\"MainSvg\"\n            width={this.state.appWidth}\n            height={this.state.appHeight}\n          ></svg>\n        </div>\n      </div>\n    );\n    const canvasElement = this.renderHomeScreenCanvasElement();\n    return { reactElement, canvasElement };\n  }\n\n  renderHomeScreenCanvasElement(): CanvasElement {\n    return {\n      kind: CanvasElementKind.Group,\n      children: [\n        this.renderHomeScreenBackgroundCanvasElement(),\n        this.renderHomeScreenButtonsCanvasElement(),\n      ],\n    };\n  }\n\n  renderHomeScreenBackgroundCanvasElement(): CanvasElement {\n    const minimumHorizontalScale =\n      this.state.appWidth / NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.width;\n    const minimumVerticalScale =\n      this.state.appHeight / NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.height;\n    const scale = Math.min(minimumHorizontalScale, minimumVerticalScale);\n\n    const extendedHomeBackgroundBBox: Rectangle = ((): Rectangle => {\n      const scaledWidth =\n        NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.width * 3 * scale;\n      const scaledHeight =\n        NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.height * 2 * scale;\n      const x = (this.state.appWidth - scaledWidth) / 2;\n      const y = (this.state.appHeight - scaledHeight) / 1;\n      return {\n        topLeft: { x, y },\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n\n    return {\n      kind: CanvasElementKind.Image,\n      source: images.extended_home_background,\n      dx: extendedHomeBackgroundBBox.topLeft.x,\n      dy: extendedHomeBackgroundBBox.topLeft.y,\n      dw: extendedHomeBackgroundBBox.dimensions.width,\n      dh: extendedHomeBackgroundBBox.dimensions.height,\n    };\n  }\n\n  renderHomeScreenButtonsCanvasElement(): CanvasElement {\n    const minimumHorizontalScale =\n      this.state.appWidth / NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.width;\n    const minimumVerticalScale =\n      this.state.appHeight / NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.height;\n    const scale = Math.min(minimumHorizontalScale, minimumVerticalScale);\n    const { onlyTouchDepressedButton, screen, language } = this.state;\n\n    const nonextendedHomeBackgroundBBox: Rectangle = ((): Rectangle => {\n      const scaledWidth = NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.width * scale;\n      const scaledHeight =\n        NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.height * scale;\n      const x = (this.state.appWidth - scaledWidth) / 2;\n      const y = (this.state.appHeight - scaledHeight) / 1;\n      return {\n        topLeft: { x, y },\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n\n    const nondepressedStartButtonBBox: Rectangle = ((): Rectangle => {\n      const topLeft = addVec(\n        nonextendedHomeBackgroundBBox.topLeft,\n        scaleVec(START_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft, scale)\n      );\n      const scaledWidth =\n        START_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.width * scale;\n      const scaledHeight =\n        START_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.height * scale;\n      return {\n        topLeft,\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n    const startButtonBBox =\n      onlyTouchDepressedButton === ButtonKind.HomeScreenStart\n        ? getDepressedButtonBBox(nondepressedStartButtonBBox)\n        : nondepressedStartButtonBBox;\n\n    const nonDepressedSettingsButtonBBox: Rectangle = ((): Rectangle => {\n      const topLeft = addVec(\n        nonextendedHomeBackgroundBBox.topLeft,\n        scaleVec(SETTINGS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft, scale)\n      );\n      const scaledWidth =\n        SETTINGS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.width *\n        scale;\n      const scaledHeight =\n        SETTINGS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.height *\n        scale;\n      return {\n        topLeft,\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n    const settingsButtonBBox =\n      onlyTouchDepressedButton === ButtonKind.Settings\n        ? getDepressedButtonBBox(nonDepressedSettingsButtonBBox)\n        : nonDepressedSettingsButtonBBox;\n\n    const nondepressedStartButtonTextBBox: Rectangle = ((): Rectangle => {\n      const topLeft = addVec(\n        nonextendedHomeBackgroundBBox.topLeft,\n        scaleVec(\n          convertRectangleFromExtendedHomeCoordsToNonextendedHomeCoords(\n            JAPANESE_TEXT_BBOX_IN_EXTENDED_HOME_COORDS.fromBeginning\n          ).topLeft,\n          scale\n        )\n      );\n      const scaledWidth =\n        convertRectangleFromExtendedHomeCoordsToNonextendedHomeCoords(\n          JAPANESE_TEXT_BBOX_IN_EXTENDED_HOME_COORDS.fromBeginning\n        ).dimensions.width * scale;\n      const scaledHeight =\n        convertRectangleFromExtendedHomeCoordsToNonextendedHomeCoords(\n          JAPANESE_TEXT_BBOX_IN_EXTENDED_HOME_COORDS.fromBeginning\n        ).dimensions.height * scale;\n      return {\n        topLeft,\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n    const startButtonTextBBox =\n      onlyTouchDepressedButton === ButtonKind.HomeScreenStart\n        ? getDepressedButtonBBox(nondepressedStartButtonTextBBox)\n        : nondepressedStartButtonTextBBox;\n\n    const nondepressedSettingsTextBBox: Rectangle = ((): Rectangle => {\n      const topLeft = addVec(\n        nonextendedHomeBackgroundBBox.topLeft,\n        scaleVec(\n          convertRectangleFromExtendedHomeCoordsToNonextendedHomeCoords(\n            JAPANESE_TEXT_BBOX_IN_EXTENDED_HOME_COORDS.settings\n          ).topLeft,\n          scale\n        )\n      );\n      const scaledWidth =\n        convertRectangleFromExtendedHomeCoordsToNonextendedHomeCoords(\n          JAPANESE_TEXT_BBOX_IN_EXTENDED_HOME_COORDS.settings\n        ).dimensions.width * scale;\n      const scaledHeight =\n        convertRectangleFromExtendedHomeCoordsToNonextendedHomeCoords(\n          JAPANESE_TEXT_BBOX_IN_EXTENDED_HOME_COORDS.settings\n        ).dimensions.height * scale;\n      return {\n        topLeft,\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n    const settingsTextBBox =\n      onlyTouchDepressedButton === ButtonKind.Settings\n        ? getDepressedButtonBBox(nondepressedSettingsTextBBox)\n        : nondepressedSettingsTextBBox;\n\n    return {\n      kind: CanvasElementKind.Group,\n      children: [\n        {\n          kind: CanvasElementKind.Image,\n          source: images.buttons.home.start,\n          dx: startButtonBBox.topLeft.x,\n          dy: startButtonBBox.topLeft.y,\n          dw: startButtonBBox.dimensions.width,\n          dh: startButtonBBox.dimensions.height,\n        },\n        {\n          kind: CanvasElementKind.Text,\n          text: getUiText(\n            language,\n            screen.level === Level.Level1\n              ? UiTextKind.StartPuzzleFromBeginning\n              : UiTextKind.StartPuzzleFromLastSaved\n          ),\n          x: getRectCenter(startButtonTextBBox).x,\n          y: getRectCenter(startButtonTextBBox).y,\n          fill: COLOR_THEME.textBrown,\n          fontWeight: 400,\n          fontSize:\n            onlyTouchDepressedButton === ButtonKind.HomeScreenStart\n              ? SIZING.depressedButtonScale *\n                UI_FONT_SIZE.startButton[language] *\n                scale\n              : UI_FONT_SIZE.startButton[language] * scale,\n          fontFamily: UI_TEXT_FONT_FAMILY,\n          textBaseline: \"middle\",\n          textAlign: \"center\",\n        },\n        {\n          kind: CanvasElementKind.Group,\n          alpha: 0.5,\n          children:\n            onlyTouchDepressedButton === ButtonKind.HomeScreenStart\n              ? [\n                  {\n                    kind: CanvasElementKind.Image,\n                    source: buttonOverlays.home.start,\n                    dx: startButtonBBox.topLeft.x,\n                    dy: startButtonBBox.topLeft.y,\n                    dw: startButtonBBox.dimensions.width,\n                    dh: startButtonBBox.dimensions.height,\n                  },\n                ]\n              : [],\n        },\n        {\n          kind: CanvasElementKind.Image,\n          source: images.buttons.home.settings,\n          dx: settingsButtonBBox.topLeft.x,\n          dy: settingsButtonBBox.topLeft.y,\n          dw: settingsButtonBBox.dimensions.width,\n          dh: settingsButtonBBox.dimensions.height,\n        },\n        {\n          kind: CanvasElementKind.Text,\n          text: getUiText(language, UiTextKind.Settings),\n          x: getRectCenter(settingsTextBBox).x,\n          y: getRectCenter(settingsTextBBox).y,\n          fill: COLOR_THEME.textBrown,\n          fontWeight: 400,\n          fontSize:\n            onlyTouchDepressedButton === ButtonKind.Settings\n              ? SIZING.depressedButtonScale *\n                UI_FONT_SIZE.settingsButton[language] *\n                scale\n              : UI_FONT_SIZE.settingsButton[language] * scale,\n          fontFamily: UI_TEXT_FONT_FAMILY,\n          textBaseline: \"middle\",\n          textAlign: \"center\",\n        },\n        {\n          kind: CanvasElementKind.Group,\n          alpha: 0.5,\n          children:\n            onlyTouchDepressedButton === ButtonKind.Settings\n              ? [\n                  {\n                    kind: CanvasElementKind.Image,\n                    source: buttonOverlays.home.settings,\n                    dx: settingsButtonBBox.topLeft.x,\n                    dy: settingsButtonBBox.topLeft.y,\n                    dw: settingsButtonBBox.dimensions.width,\n                    dh: settingsButtonBBox.dimensions.height,\n                  },\n                ]\n              : [],\n        },\n      ],\n    };\n  }\n\n  dualRenderEditScreen(): DualRenderOutput {\n    const { appHeight, screen } = this.state;\n\n    const blockEditorProps: BlockEditorProps<MainBlockEditorTypeParams> = {\n      config: this.getMainBlockEditorConfig(),\n      state: screen.blockEditor,\n\n      measureText: this.measureSvgText,\n      setState: this.setBlockEditorState,\n    };\n\n    const noBlockEditorUiAction =\n      screen.blockEditor.uiTouch === null &&\n      screen.blockEditor.palette.scrollInProgress === null &&\n      screen.blockEditor.canvas.scrollInProgress === null &&\n      screen.blockEditor.literalEditor === null;\n\n    const tutorialBlockEditorProps: BlockEditorProps<TutorialBlockEditorTypeParams> =\n      {\n        config: this.getTutorialBlockEditorConfig(),\n        state: this.getTutorialBlockEditorState(),\n\n        measureText: this.measureSvgText,\n        setState: noOp,\n      };\n\n    const {\n      canvasElement: puzzleButtonsCanvasElement,\n      reactElement: puzzleButtonsDragBlocker,\n    } = this.dualRenderPuzzleScreenButtons();\n\n    const tutorialCanvasElement = this.renderTutorialCanvasElement();\n    const {\n      canvasElement: miniBattleScreenCanvasElement,\n      reactElement: miniBattleScreenDragBlocker,\n    } =\n      tutorialCanvasElement === NULL_CANVAS_ELEMENT\n        ? this.dualRenderInEditorMiniBattleScreenAssumingNoTutorial()\n        : { canvasElement: NULL_CANVAS_ELEMENT, reactElement: null };\n\n    const reactElement = (\n      <div className=\"App\">\n        <div className=\"AppMain\">\n          <svg\n            className=\"MainSvg\"\n            width={this.state.appWidth}\n            height={appHeight}\n          >\n            <BlockEditor {...blockEditorProps} />\n\n            {[Level.Level1, Level.Level9].includes(this.state.screen.level) &&\n              noBlockEditorUiAction && (\n                <g style={{ pointerEvents: \"none\" }}>\n                  <BlockEditor {...tutorialBlockEditorProps} />\n                </g>\n              )}\n\n            {puzzleButtonsDragBlocker}\n            {miniBattleScreenDragBlocker}\n          </svg>\n        </div>\n      </div>\n    );\n\n    const canvasElement: CanvasElement = {\n      kind: CanvasElementKind.Group,\n      children: [\n        tutorialCanvasElement,\n        miniBattleScreenCanvasElement,\n        puzzleButtonsCanvasElement,\n      ],\n    };\n\n    return {\n      reactElement,\n      canvasElement,\n    };\n  }\n\n  dualRenderInEditorMiniBattleScreenAssumingNoTutorial(): DualRenderOutput {\n    const { screen, appWidth, appHeight, onlyTouchDepressedButton } =\n      this.state;\n    const battleEvents = this.getCurrentLevelBattleEvents();\n    const battleElapsedSeconds = 0;\n    const battleAnimationData = getBattleAnimationData(\n      getInitialLevelState(screen.level),\n      battleEvents,\n      battleElapsedSeconds\n    );\n    return {\n      reactElement: (\n        <rect\n          fill=\"transparent\"\n          x={(1 - IN_EDITOR_MINI_BATTLE_SCREEN_SCALE_FACTOR) * appWidth}\n          y={(1 - IN_EDITOR_MINI_BATTLE_SCREEN_SCALE_FACTOR) * appHeight}\n          width={IN_EDITOR_MINI_BATTLE_SCREEN_SCALE_FACTOR * appWidth}\n          height={IN_EDITOR_MINI_BATTLE_SCREEN_SCALE_FACTOR * appHeight}\n        />\n      ),\n      canvasElement: {\n        kind: CanvasElementKind.Group,\n        transform: [\n          { kind: TransformKind.Translate, x: appWidth, y: appHeight },\n          {\n            kind: TransformKind.Scale,\n            x: IN_EDITOR_MINI_BATTLE_SCREEN_SCALE_FACTOR,\n            y: IN_EDITOR_MINI_BATTLE_SCREEN_SCALE_FACTOR,\n          },\n          { kind: TransformKind.Translate, x: -appWidth, y: -appHeight },\n        ],\n        children: [\n          this.renderBattleAndOutcomeScreenCanvasElement(\n            -appHeight,\n            screen.blockEditor,\n            screen.level,\n            battleElapsedSeconds,\n            battleAnimationData\n          ),\n\n          renderRect({\n            x: 0,\n            y: 0,\n            w: appWidth,\n            h: appHeight,\n            fill: {\n              r: 255,\n              g: 255,\n              b: 255,\n              a:\n                onlyTouchDepressedButton === ButtonKind.InEditorMiniBattleScreen\n                  ? 128\n                  : 0,\n            },\n          }),\n        ],\n      },\n    };\n  }\n\n  dualRenderSettingsScreen(): DualRenderOutput {\n    return this.dualRenderSettingsBoxOverHomeScreen(0);\n  }\n\n  dualRenderSettingsBoxOverHomeScreen(\n    settingsScreenDy: number\n  ): DualRenderOutput {\n    const reactElement = (\n      <div className=\"App\">\n        <div className=\"AppMain\">\n          <svg\n            className=\"MainSvg\"\n            width={this.state.appWidth}\n            height={this.state.appHeight}\n          ></svg>\n        </div>\n      </div>\n    );\n\n    const canvasElement: CanvasElement = {\n      kind: CanvasElementKind.Group,\n      children: [\n        this.renderHomeScreenCanvasElement(),\n        this.renderSettingsBoxCanvasElement(settingsScreenDy),\n      ],\n    };\n\n    return { reactElement, canvasElement };\n  }\n\n  renderSettingsBoxCanvasElement(settingsScreenDy: number): CanvasElement {\n    const { appWidth, appHeight, onlyTouchDepressedButton, language } =\n      this.state;\n\n    const minimumHorizontalScale =\n      this.state.appWidth / NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.width;\n    const minimumVerticalScale =\n      this.state.appHeight / NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.height;\n    const scale = Math.min(minimumHorizontalScale, minimumVerticalScale);\n\n    const nonextendedHomeBackgroundBBox: Rectangle = ((): Rectangle => {\n      const scaledWidth = NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.width * scale;\n      const scaledHeight =\n        NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.height * scale;\n      const x = (this.state.appWidth - scaledWidth) / 2;\n      const y = (this.state.appHeight - scaledHeight) / 1;\n      return {\n        topLeft: { x, y },\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n\n    const settingsBoxBBox: Rectangle = ((): Rectangle => {\n      const topLeft = addVec(\n        addVec(\n          nonextendedHomeBackgroundBBox.topLeft,\n          scaleVec(SETTINGS_BOX_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft, scale)\n        ),\n        { x: 0, y: settingsScreenDy }\n      );\n      const scaledWidth =\n        SETTINGS_BOX_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.width * scale;\n      const scaledHeight =\n        SETTINGS_BOX_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.height * scale;\n      return {\n        topLeft,\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n\n    const nondepressedCloseButtonBBox: Rectangle = ((): Rectangle => {\n      const topLeft = addVec(\n        addVec(\n          nonextendedHomeBackgroundBBox.topLeft,\n          scaleVec(\n            SETTINGS_SCREEN_CLOSE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft,\n            scale\n          )\n        ),\n        { x: 0, y: settingsScreenDy }\n      );\n      const scaledWidth =\n        SETTINGS_SCREEN_CLOSE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions\n          .width * scale;\n      const scaledHeight =\n        SETTINGS_SCREEN_CLOSE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions\n          .height * scale;\n      return {\n        topLeft,\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n    const closeButtonBBox =\n      onlyTouchDepressedButton === ButtonKind.SettingsScreenClose\n        ? getDepressedButtonBBox(nondepressedCloseButtonBBox)\n        : nondepressedCloseButtonBBox;\n\n    const nondepressedLanguageButtonBBox: Rectangle = ((): Rectangle => {\n      const topLeft = addVec(\n        addVec(\n          nonextendedHomeBackgroundBBox.topLeft,\n          scaleVec(\n            LANGUAGE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft,\n            scale\n          )\n        ),\n        { x: 0, y: settingsScreenDy }\n      );\n      const scaledWidth =\n        LANGUAGE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.width *\n        scale;\n      const scaledHeight =\n        LANGUAGE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.height *\n        scale;\n      return {\n        topLeft,\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n    const languageButtonBBox =\n      onlyTouchDepressedButton === ButtonKind.Language\n        ? getDepressedButtonBBox(nondepressedLanguageButtonBBox)\n        : nondepressedLanguageButtonBBox;\n\n    const nondepressedCreditsButtonBBox: Rectangle = ((): Rectangle => {\n      const topLeft = addVec(\n        addVec(\n          nonextendedHomeBackgroundBBox.topLeft,\n          scaleVec(\n            CREDITS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft,\n            scale\n          )\n        ),\n        { x: 0, y: settingsScreenDy }\n      );\n      const scaledWidth =\n        CREDITS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.width * scale;\n      const scaledHeight =\n        CREDITS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.height *\n        scale;\n      return {\n        topLeft,\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n    const creditsButtonBBox =\n      onlyTouchDepressedButton === ButtonKind.Credits\n        ? getDepressedButtonBBox(nondepressedCreditsButtonBBox)\n        : nondepressedCreditsButtonBBox;\n\n    const nondepressedResetButtonBBox: Rectangle = ((): Rectangle => {\n      const topLeft = addVec(\n        addVec(\n          nonextendedHomeBackgroundBBox.topLeft,\n          scaleVec(\n            RESET_TO_LEVEL_ONE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft,\n            scale\n          )\n        ),\n        { x: 0, y: settingsScreenDy }\n      );\n      const scaledWidth =\n        RESET_TO_LEVEL_ONE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions\n          .width * scale;\n      const scaledHeight =\n        RESET_TO_LEVEL_ONE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions\n          .height * scale;\n      return {\n        topLeft,\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n    const resetButtonBBox =\n      onlyTouchDepressedButton === ButtonKind.OpenConfirmResetToLevelOneScreen\n        ? getDepressedButtonBBox(nondepressedResetButtonBBox)\n        : nondepressedResetButtonBBox;\n\n    return {\n      kind: CanvasElementKind.Group,\n      children: [\n        renderRect({\n          x: 0,\n          y: settingsScreenDy,\n          w: appWidth,\n          h: appHeight,\n          fill: { r: 0, g: 0, b: 0, a: 128 },\n        }),\n        {\n          kind: CanvasElementKind.Image,\n          source: images.settings_box,\n          dx: settingsBoxBBox.topLeft.x,\n          dy: settingsBoxBBox.topLeft.y,\n          dw: settingsBoxBBox.dimensions.width,\n          dh: settingsBoxBBox.dimensions.height,\n        },\n\n        {\n          kind: CanvasElementKind.Image,\n          source: images.buttons.settings.close,\n          dx: closeButtonBBox.topLeft.x,\n          dy: closeButtonBBox.topLeft.y,\n          dw: closeButtonBBox.dimensions.width,\n          dh: closeButtonBBox.dimensions.height,\n        },\n        withAlpha(\n          onlyTouchDepressedButton === ButtonKind.SettingsScreenClose ? 0.5 : 0,\n          {\n            kind: CanvasElementKind.Image,\n            source: buttonOverlays.settings.close,\n            dx: closeButtonBBox.topLeft.x,\n            dy: closeButtonBBox.topLeft.y,\n            dw: closeButtonBBox.dimensions.width,\n            dh: closeButtonBBox.dimensions.height,\n          }\n        ),\n\n        {\n          kind: CanvasElementKind.Image,\n          source: images.buttons.settings.language,\n          dx: languageButtonBBox.topLeft.x,\n          dy: languageButtonBBox.topLeft.y,\n          dw: languageButtonBBox.dimensions.width,\n          dh: languageButtonBBox.dimensions.height,\n        },\n        {\n          kind: CanvasElementKind.Text,\n          text: getUiText(language, UiTextKind.FlagAndCurrentLanguage),\n          x: getRectCenter(languageButtonBBox).x,\n          y: getRectCenter(languageButtonBBox).y,\n          fill: COLOR_THEME.textBrown,\n          fontWeight: 400,\n          fontSize:\n            onlyTouchDepressedButton === ButtonKind.Language\n              ? SIZING.depressedButtonScale * 67 * scale\n              : 67 * scale,\n          fontFamily: UI_TEXT_FONT_FAMILY,\n          textBaseline: \"middle\",\n          textAlign: \"center\",\n        },\n        withAlpha(onlyTouchDepressedButton === ButtonKind.Language ? 0.5 : 0, {\n          kind: CanvasElementKind.Image,\n          source: buttonOverlays.settings.language,\n          dx: languageButtonBBox.topLeft.x,\n          dy: languageButtonBBox.topLeft.y,\n          dw: languageButtonBBox.dimensions.width,\n          dh: languageButtonBBox.dimensions.height,\n        }),\n\n        {\n          kind: CanvasElementKind.Image,\n          source: images.buttons.settings.credits,\n          dx: creditsButtonBBox.topLeft.x,\n          dy: creditsButtonBBox.topLeft.y,\n          dw: creditsButtonBBox.dimensions.width,\n          dh: creditsButtonBBox.dimensions.height,\n        },\n        {\n          kind: CanvasElementKind.Text,\n          text: getUiText(language, UiTextKind.Credits),\n          x: getRectCenter(creditsButtonBBox).x,\n          y: getRectCenter(creditsButtonBBox).y,\n          fill: COLOR_THEME.textBrown,\n          fontWeight: 400,\n          fontSize:\n            onlyTouchDepressedButton === ButtonKind.Credits\n              ? SIZING.depressedButtonScale * 67 * scale\n              : 67 * scale,\n          fontFamily: UI_TEXT_FONT_FAMILY,\n          textBaseline: \"middle\",\n          textAlign: \"center\",\n        },\n        withAlpha(onlyTouchDepressedButton === ButtonKind.Credits ? 0.5 : 0, {\n          kind: CanvasElementKind.Image,\n          source: buttonOverlays.settings.credits,\n          dx: creditsButtonBBox.topLeft.x,\n          dy: creditsButtonBBox.topLeft.y,\n          dw: creditsButtonBBox.dimensions.width,\n          dh: creditsButtonBBox.dimensions.height,\n        }),\n\n        {\n          kind: CanvasElementKind.Image,\n          source: images.buttons.settings.reset_to_level_one,\n          dx: resetButtonBBox.topLeft.x,\n          dy: resetButtonBBox.topLeft.y,\n          dw: resetButtonBBox.dimensions.width,\n          dh: resetButtonBBox.dimensions.height,\n        },\n        {\n          kind: CanvasElementKind.Text,\n          text: getUiText(language, UiTextKind.ResetToLevelOne),\n          x: getRectCenter(resetButtonBBox).x,\n          y: getRectCenter(resetButtonBBox).y,\n          fill: COLOR_THEME.textBrown,\n          fontWeight: 400,\n          fontSize:\n            onlyTouchDepressedButton ===\n            ButtonKind.OpenConfirmResetToLevelOneScreen\n              ? SIZING.depressedButtonScale * 56 * scale\n              : 56 * scale,\n          fontFamily: UI_TEXT_FONT_FAMILY,\n          textBaseline: \"middle\",\n          textAlign: \"center\",\n        },\n        withAlpha(\n          onlyTouchDepressedButton ===\n            ButtonKind.OpenConfirmResetToLevelOneScreen\n            ? 0.5\n            : 0,\n          {\n            kind: CanvasElementKind.Image,\n            source: buttonOverlays.settings.reset_to_level_one,\n            dx: resetButtonBBox.topLeft.x,\n            dy: resetButtonBBox.topLeft.y,\n            dw: resetButtonBBox.dimensions.width,\n            dh: resetButtonBBox.dimensions.height,\n          }\n        ),\n      ],\n    };\n  }\n\n  dualRenderConfirmResetToLevelOneScreen(): DualRenderOutput {\n    const reactElement = (\n      <div className=\"App\">\n        <div className=\"AppMain\">\n          <svg\n            className=\"MainSvg\"\n            width={this.state.appWidth}\n            height={this.state.appHeight}\n          ></svg>\n        </div>\n      </div>\n    );\n\n    const canvasElement: CanvasElement = {\n      kind: CanvasElementKind.Group,\n      children: [\n        this.renderHomeScreenCanvasElement(),\n        this.renderConfirmResetTOLevelOneBoxCanvasElement(),\n      ],\n    };\n\n    return { reactElement, canvasElement };\n  }\n\n  renderConfirmResetTOLevelOneBoxCanvasElement(): CanvasElement {\n    const { appWidth, appHeight, onlyTouchDepressedButton, language } =\n      this.state;\n\n    const minimumHorizontalScale =\n      this.state.appWidth / NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.width;\n    const minimumVerticalScale =\n      this.state.appHeight / NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.height;\n    const scale = Math.min(minimumHorizontalScale, minimumVerticalScale);\n\n    const nonextendedHomeBackgroundBBox: Rectangle = ((): Rectangle => {\n      const scaledWidth = NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.width * scale;\n      const scaledHeight =\n        NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.height * scale;\n      const x = (this.state.appWidth - scaledWidth) / 2;\n      const y = (this.state.appHeight - scaledHeight) / 1;\n      return {\n        topLeft: { x, y },\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n\n    const settingsBoxBBox: Rectangle = ((): Rectangle => {\n      const topLeft = addVec(\n        addVec(\n          nonextendedHomeBackgroundBBox.topLeft,\n          scaleVec(SETTINGS_BOX_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft, scale)\n        ),\n        { x: 0, y: 0 }\n      );\n      const scaledWidth =\n        SETTINGS_BOX_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.width * scale;\n      const scaledHeight =\n        SETTINGS_BOX_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.height * scale;\n      return {\n        topLeft,\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n\n    const nondepressedCloseButtonBBox: Rectangle = ((): Rectangle => {\n      const topLeft = addVec(\n        addVec(\n          nonextendedHomeBackgroundBBox.topLeft,\n          scaleVec(\n            SETTINGS_SCREEN_CLOSE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft,\n            scale\n          )\n        ),\n        { x: 0, y: 0 }\n      );\n      const scaledWidth =\n        SETTINGS_SCREEN_CLOSE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions\n          .width * scale;\n      const scaledHeight =\n        SETTINGS_SCREEN_CLOSE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions\n          .height * scale;\n      return {\n        topLeft,\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n    const closeButtonBBox =\n      onlyTouchDepressedButton === ButtonKind.ConfirmResetToLevelOneScreenClose\n        ? getDepressedButtonBBox(nondepressedCloseButtonBBox)\n        : nondepressedCloseButtonBBox;\n\n    const nondepressedLanguageButtonBBox: Rectangle = ((): Rectangle => {\n      const topLeft = addVec(\n        addVec(\n          nonextendedHomeBackgroundBBox.topLeft,\n          scaleVec(\n            LANGUAGE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft,\n            scale\n          )\n        ),\n        { x: 0, y: 0 }\n      );\n      const scaledWidth =\n        LANGUAGE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.width *\n        scale;\n      const scaledHeight =\n        LANGUAGE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.height *\n        scale;\n      return {\n        topLeft,\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n    const languageButtonBBox = nondepressedLanguageButtonBBox;\n\n    const nondepressedCreditsButtonBBox: Rectangle = ((): Rectangle => {\n      const topLeft = addVec(\n        addVec(\n          nonextendedHomeBackgroundBBox.topLeft,\n          scaleVec(\n            CREDITS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft,\n            scale\n          )\n        ),\n        { x: 0, y: 0 }\n      );\n      const scaledWidth =\n        CREDITS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.width * scale;\n      const scaledHeight =\n        CREDITS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions.height *\n        scale;\n      return {\n        topLeft,\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n    const creditsButtonBBox =\n      onlyTouchDepressedButton === ButtonKind.ConfirmResetToLevelOne\n        ? getDepressedButtonBBox(nondepressedCreditsButtonBBox)\n        : nondepressedCreditsButtonBBox;\n\n    const nondepressedResetButtonBBox: Rectangle = ((): Rectangle => {\n      const topLeft = addVec(\n        addVec(\n          nonextendedHomeBackgroundBBox.topLeft,\n          scaleVec(\n            RESET_TO_LEVEL_ONE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft,\n            scale\n          )\n        ),\n        { x: 0, y: 0 }\n      );\n      const scaledWidth =\n        RESET_TO_LEVEL_ONE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions\n          .width * scale;\n      const scaledHeight =\n        RESET_TO_LEVEL_ONE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.dimensions\n          .height * scale;\n      return {\n        topLeft,\n        dimensions: { width: scaledWidth, height: scaledHeight },\n      };\n    })();\n    const resetButtonBBox =\n      onlyTouchDepressedButton === ButtonKind.CancelResetToLevelOne\n        ? getDepressedButtonBBox(nondepressedResetButtonBBox)\n        : nondepressedResetButtonBBox;\n\n    return {\n      kind: CanvasElementKind.Group,\n      children: [\n        renderRect({\n          x: 0,\n          y: 0,\n          w: appWidth,\n          h: appHeight,\n          fill: { r: 0, g: 0, b: 0, a: 128 },\n        }),\n        {\n          kind: CanvasElementKind.Image,\n          source: images.settings_box,\n          dx: settingsBoxBBox.topLeft.x,\n          dy: settingsBoxBBox.topLeft.y,\n          dw: settingsBoxBBox.dimensions.width,\n          dh: settingsBoxBBox.dimensions.height,\n        },\n\n        {\n          kind: CanvasElementKind.Image,\n          source: images.buttons.settings.close,\n          dx: closeButtonBBox.topLeft.x,\n          dy: closeButtonBBox.topLeft.y,\n          dw: closeButtonBBox.dimensions.width,\n          dh: closeButtonBBox.dimensions.height,\n        },\n        withAlpha(\n          onlyTouchDepressedButton ===\n            ButtonKind.ConfirmResetToLevelOneScreenClose\n            ? 0.5\n            : 0,\n          {\n            kind: CanvasElementKind.Image,\n            source: buttonOverlays.settings.close,\n            dx: closeButtonBBox.topLeft.x,\n            dy: closeButtonBBox.topLeft.y,\n            dw: closeButtonBBox.dimensions.width,\n            dh: closeButtonBBox.dimensions.height,\n          }\n        ),\n\n        {\n          kind: CanvasElementKind.Text,\n          text: getUiText(\n            language,\n            UiTextKind.AreYouSureYouWantToResetToLevelOne\n          ),\n          x: getRectCenter(languageButtonBBox).x,\n          y: getRectCenter(languageButtonBBox).y,\n          fill: COLOR_THEME.textBrown,\n          fontWeight: 400,\n          fontSize: 67 * scale,\n          fontFamily: UI_TEXT_FONT_FAMILY,\n          textBaseline: \"middle\",\n          textAlign: \"center\",\n        },\n\n        {\n          kind: CanvasElementKind.Image,\n          source: images.buttons.settings.credits,\n          dx: creditsButtonBBox.topLeft.x,\n          dy: creditsButtonBBox.topLeft.y,\n          dw: creditsButtonBBox.dimensions.width,\n          dh: creditsButtonBBox.dimensions.height,\n        },\n        {\n          kind: CanvasElementKind.Text,\n          text: getUiText(language, UiTextKind.ConfirmReset),\n          x: getRectCenter(creditsButtonBBox).x,\n          y: getRectCenter(creditsButtonBBox).y,\n          fill: COLOR_THEME.textBrown,\n          fontWeight: 400,\n          fontSize:\n            onlyTouchDepressedButton === ButtonKind.ConfirmResetToLevelOne\n              ? SIZING.depressedButtonScale * 67 * scale\n              : 67 * scale,\n          fontFamily: UI_TEXT_FONT_FAMILY,\n          textBaseline: \"middle\",\n          textAlign: \"center\",\n        },\n        withAlpha(\n          onlyTouchDepressedButton === ButtonKind.ConfirmResetToLevelOne\n            ? 0.5\n            : 0,\n          {\n            kind: CanvasElementKind.Image,\n            source: buttonOverlays.settings.credits,\n            dx: creditsButtonBBox.topLeft.x,\n            dy: creditsButtonBBox.topLeft.y,\n            dw: creditsButtonBBox.dimensions.width,\n            dh: creditsButtonBBox.dimensions.height,\n          }\n        ),\n\n        {\n          kind: CanvasElementKind.Image,\n          source: images.buttons.settings.reset_to_level_one,\n          dx: resetButtonBBox.topLeft.x,\n          dy: resetButtonBBox.topLeft.y,\n          dw: resetButtonBBox.dimensions.width,\n          dh: resetButtonBBox.dimensions.height,\n        },\n        {\n          kind: CanvasElementKind.Text,\n          text: getUiText(language, UiTextKind.CancelReset),\n          x: getRectCenter(resetButtonBBox).x,\n          y: getRectCenter(resetButtonBBox).y,\n          fill: COLOR_THEME.textBrown,\n          fontWeight: 400,\n          fontSize:\n            onlyTouchDepressedButton === ButtonKind.CancelResetToLevelOne\n              ? SIZING.depressedButtonScale * 67 * scale\n              : 67 * scale,\n          fontFamily: UI_TEXT_FONT_FAMILY,\n          textBaseline: \"middle\",\n          textAlign: \"center\",\n        },\n        withAlpha(\n          onlyTouchDepressedButton === ButtonKind.CancelResetToLevelOne\n            ? 0.5\n            : 0,\n          {\n            kind: CanvasElementKind.Image,\n            source: buttonOverlays.settings.reset_to_level_one,\n            dx: resetButtonBBox.topLeft.x,\n            dy: resetButtonBBox.topLeft.y,\n            dw: resetButtonBBox.dimensions.width,\n            dh: resetButtonBBox.dimensions.height,\n          }\n        ),\n      ],\n    };\n  }\n\n  dualRenderHomeToViewAnimation(): DualRenderOutput {\n    const { appHeight, screen } = this.state;\n    const elapsedSeconds = getElapsedSeconds(\n      screen.currentTimestamp,\n      screen.animationStartTime\n    );\n    const homeScreenDy = Math.max(\n      -(appHeight * elapsedSeconds) / SCREEN_TRANSITION_ANIMATION_SECONDS,\n      -appHeight\n    );\n\n    const battleEvents = this.getCurrentLevelBattleEvents();\n    const battleElapsedSeconds =\n      screen.animationKind === AnimationKind.PlayBattle\n        ? screen.battleAnimationOffsetSeconds + elapsedSeconds\n        : screen.animationKind === AnimationKind.PauseBattle\n        ? screen.battleAnimationOffsetSeconds\n        : 0;\n    const battleAnimationData = getBattleAnimationData(\n      getInitialLevelState(screen.level),\n      battleEvents,\n      battleElapsedSeconds\n    );\n\n    const reactElement = (\n      <div className=\"App\">\n        <div className=\"AppMain\">\n          <svg\n            className=\"MainSvg\"\n            width={this.state.appWidth}\n            height={appHeight}\n          ></svg>\n        </div>\n      </div>\n    );\n\n    const canvasElement: CanvasElement = {\n      kind: CanvasElementKind.Group,\n      children: [\n        {\n          kind: CanvasElementKind.Group,\n          transform: [{ kind: TransformKind.Translate, x: 0, y: homeScreenDy }],\n          children: [this.renderHomeScreenCanvasElement()],\n        },\n        this.renderBattleAndOutcomeScreenCanvasElement(\n          homeScreenDy,\n          screen.blockEditor,\n          screen.level,\n          battleElapsedSeconds,\n          battleAnimationData\n        ),\n      ],\n    };\n\n    return { reactElement, canvasElement };\n  }\n\n  dualRenderEditToViewAnimation(): DualRenderOutput {\n    const { appHeight, screen } = this.state;\n    const elapsedSeconds = getElapsedSeconds(\n      screen.currentTimestamp,\n      screen.animationStartTime\n    );\n    const blockEditorDy = Math.max(\n      -(appHeight * elapsedSeconds) / SCREEN_TRANSITION_ANIMATION_SECONDS,\n      -appHeight\n    );\n\n    const battleEvents = this.getCurrentLevelBattleEvents();\n    const battleElapsedSeconds =\n      screen.animationKind === AnimationKind.PlayBattle\n        ? screen.battleAnimationOffsetSeconds + elapsedSeconds\n        : screen.animationKind === AnimationKind.PauseBattle\n        ? screen.battleAnimationOffsetSeconds\n        : 0;\n    const battleAnimationData = getBattleAnimationData(\n      getInitialLevelState(screen.level),\n      battleEvents,\n      battleElapsedSeconds\n    );\n\n    const blockEditorProps: BlockEditorProps<MainBlockEditorTypeParams> = {\n      config: this.getMainBlockEditorConfig(),\n      state: screen.blockEditor,\n\n      measureText: this.measureSvgText,\n      setState: this.setBlockEditorState,\n    };\n\n    const reactElement = (\n      <div className=\"App\">\n        <div className=\"AppMain\">\n          <svg\n            className=\"MainSvg\"\n            width={this.state.appWidth}\n            height={appHeight}\n          >\n            <g transform={`translate(0 ${blockEditorDy})`}>\n              <BlockEditor {...blockEditorProps} />\n            </g>\n          </svg>\n        </div>\n      </div>\n    );\n\n    const canvasElement: CanvasElement = {\n      kind: CanvasElementKind.Group,\n      children: [\n        this.renderBattleAndOutcomeScreenCanvasElement(\n          blockEditorDy,\n          screen.blockEditor,\n          screen.level,\n          battleElapsedSeconds,\n          battleAnimationData\n        ),\n        this.renderPuzzleScreenButtonsCanvasElement(),\n      ],\n    };\n\n    return { reactElement, canvasElement };\n  }\n\n  dualRenderViewToEditAnimation(): DualRenderOutput {\n    const { appHeight, screen } = this.state;\n    const elapsedSeconds = getElapsedSeconds(\n      screen.currentTimestamp,\n      screen.animationStartTime\n    );\n    const blockEditorDy = Math.min(\n      (appHeight * elapsedSeconds) / SCREEN_TRANSITION_ANIMATION_SECONDS -\n        appHeight,\n      0\n    );\n\n    const battleEvents = this.getCurrentLevelBattleEvents();\n    const battleElapsedSeconds =\n      screen.animationKind === AnimationKind.PlayBattle\n        ? screen.battleAnimationOffsetSeconds + elapsedSeconds\n        : screen.animationKind === AnimationKind.PauseBattle\n        ? screen.battleAnimationOffsetSeconds\n        : 0;\n    const battleAnimationData = getBattleAnimationData(\n      getInitialLevelState(screen.level),\n      battleEvents,\n      battleElapsedSeconds\n    );\n\n    const blockEditorProps: BlockEditorProps<MainBlockEditorTypeParams> = {\n      config: this.getMainBlockEditorConfig(),\n      state: screen.blockEditor,\n\n      measureText: this.measureSvgText,\n      setState: this.setBlockEditorState,\n    };\n\n    const reactElement = (\n      <div className=\"App\">\n        <div className=\"AppMain\">\n          <svg\n            className=\"MainSvg\"\n            width={this.state.appWidth}\n            height={appHeight}\n          >\n            <g transform={`translate(0 ${blockEditorDy})`}>\n              <BlockEditor {...blockEditorProps} />\n            </g>\n          </svg>\n        </div>\n      </div>\n    );\n\n    const canvasElement: CanvasElement = {\n      kind: CanvasElementKind.Group,\n      children: [\n        this.renderBattleAndOutcomeScreenCanvasElement(\n          blockEditorDy,\n          screen.blockEditor,\n          screen.level,\n          battleElapsedSeconds,\n          battleAnimationData\n        ),\n        this.renderPuzzleScreenButtonsCanvasElement(),\n      ],\n    };\n\n    return { reactElement, canvasElement };\n  }\n\n  dualRenderViewToHomeAnimation(): DualRenderOutput {\n    const { appHeight, screen } = this.state;\n    const elapsedSeconds = getElapsedSeconds(\n      screen.currentTimestamp,\n      screen.animationStartTime\n    );\n    const homeScreenDy = Math.min(\n      (appHeight * elapsedSeconds) / SCREEN_TRANSITION_ANIMATION_SECONDS -\n        appHeight,\n      0\n    );\n\n    const battleEvents = this.getCurrentLevelBattleEvents();\n    const battleElapsedSeconds =\n      screen.animationKind === AnimationKind.PlayBattle\n        ? screen.battleAnimationOffsetSeconds + elapsedSeconds\n        : screen.animationKind === AnimationKind.PauseBattle\n        ? screen.battleAnimationOffsetSeconds\n        : 0;\n    const battleAnimationData = getBattleAnimationData(\n      getInitialLevelState(screen.level),\n      battleEvents,\n      battleElapsedSeconds\n    );\n\n    const reactElement = (\n      <div className=\"App\">\n        <div className=\"AppMain\">\n          <svg\n            className=\"MainSvg\"\n            width={this.state.appWidth}\n            height={appHeight}\n          ></svg>\n        </div>\n      </div>\n    );\n\n    const canvasElement: CanvasElement = {\n      kind: CanvasElementKind.Group,\n      children: [\n        {\n          kind: CanvasElementKind.Group,\n          transform: [{ kind: TransformKind.Translate, x: 0, y: homeScreenDy }],\n          children: [this.renderHomeScreenCanvasElement()],\n        },\n        this.renderBattleAndOutcomeScreenCanvasElement(\n          homeScreenDy,\n          screen.blockEditor,\n          screen.level,\n          battleElapsedSeconds,\n          battleAnimationData\n        ),\n      ],\n    };\n\n    return { reactElement, canvasElement };\n  }\n\n  dualRenderEditToHomeAnimation(): DualRenderOutput {\n    const { appHeight, screen } = this.state;\n    const elapsedSeconds = getElapsedSeconds(\n      screen.currentTimestamp,\n      screen.animationStartTime\n    );\n    const homeScreenDy = Math.min(\n      (appHeight * elapsedSeconds) / SCREEN_TRANSITION_ANIMATION_SECONDS -\n        appHeight,\n      0\n    );\n\n    const blockEditorProps: BlockEditorProps<MainBlockEditorTypeParams> = {\n      config: this.getMainBlockEditorConfig(),\n      state: screen.blockEditor,\n\n      measureText: this.measureSvgText,\n      setState: this.setBlockEditorState,\n    };\n\n    const reactElement = (\n      <div className=\"App\">\n        <div className=\"AppMain\">\n          <svg\n            className=\"MainSvg\"\n            width={this.state.appWidth}\n            height={appHeight}\n          >\n            <g transform={`translate(0 ${appHeight + homeScreenDy})`}>\n              <BlockEditor {...blockEditorProps} />\n            </g>\n          </svg>\n        </div>\n      </div>\n    );\n\n    const canvasElement: CanvasElement = {\n      kind: CanvasElementKind.Group,\n      transform: [{ kind: TransformKind.Translate, x: 0, y: homeScreenDy }],\n      children: [this.renderHomeScreenCanvasElement()],\n    };\n\n    return { reactElement, canvasElement };\n  }\n\n  dualRenderBattleScreen(): DualRenderOutput {\n    const { appWidth, appHeight, screen } = this.state;\n    const elapsedSeconds = getElapsedSeconds(\n      screen.currentTimestamp,\n      screen.animationStartTime\n    );\n\n    const battleEvents = this.getCurrentLevelBattleEvents();\n    const battleElapsedSeconds =\n      screen.animationKind === AnimationKind.PlayBattle\n        ? screen.battleAnimationOffsetSeconds + elapsedSeconds\n        : screen.animationKind === AnimationKind.PauseBattle\n        ? screen.battleAnimationOffsetSeconds\n        : 0;\n    const battleAnimationData = getBattleAnimationData(\n      getInitialLevelState(screen.level),\n      battleEvents,\n      battleElapsedSeconds\n    );\n\n    const [protectedAreaScalePoint, protectedAreaScale] =\n      this.getBattleScreenProtectedAreaScalePointAndScaleFactor();\n    const minimapBBox = this.getMinimapBBox();\n\n    const minimapBlockEditorProps: BlockEditorProps<MinimapBlockEditorTypeParams> =\n      {\n        config: this.getMinimapBlockEditorConfig(),\n        state: this.getMinimapBlockEditorState(),\n\n        measureText: this.measureSvgText,\n        setState: noOp,\n      };\n\n    const reactElement = (\n      <div className=\"App\">\n        <div className=\"AppMain\">\n          <svg\n            className=\"MainSvg\"\n            width={this.state.appWidth}\n            height={appHeight}\n          >\n            <g\n              transform={`translate(${protectedAreaScalePoint.x} ${\n                protectedAreaScalePoint.y\n              }) scale(${protectedAreaScale} ${protectedAreaScale}) translate(${-protectedAreaScalePoint.x} ${-protectedAreaScalePoint.y})`}\n            >\n              <g\n                transform={`translate(${minimapBBox.topLeft.x} ${\n                  minimapBBox.topLeft.y\n                }) scale(${minimapBBox.dimensions.width / appWidth} ${\n                  minimapBBox.dimensions.height / appHeight\n                })`}\n                opacity={battleElapsedSeconds === 0 ? 0 : 1}\n              >\n                <BlockEditor {...minimapBlockEditorProps} />\n              </g>\n            </g>\n          </svg>\n        </div>\n      </div>\n    );\n\n    const canvasElement: CanvasElement = {\n      kind: CanvasElementKind.Group,\n      children: [\n        this.renderBattleAndOutcomeScreenCanvasElement(\n          -appHeight,\n          screen.blockEditor,\n          screen.level,\n          battleElapsedSeconds,\n          battleAnimationData,\n          { renderTutorial: true }\n        ),\n        this.renderKilledEnemiesButForgotToMoveHeroToStairsHintIfNeeded(),\n        this.renderPuzzleScreenButtonsCanvasElement(),\n      ],\n    };\n\n    return { reactElement, canvasElement };\n  }\n\n  dualRenderNextLevelAnimation(): DualRenderOutput {\n    const { appHeight, screen } = this.state;\n    const elapsedSeconds = getElapsedSeconds(\n      screen.currentTimestamp,\n      screen.animationStartTime\n    );\n    const blockEditorDy = Math.min(\n      (appHeight * elapsedSeconds) / SCREEN_TRANSITION_ANIMATION_SECONDS -\n        appHeight,\n      appHeight\n    );\n\n    const prevBattleEvents = this.getPrevLevelBattleEvents();\n    const prevBattleElapsedSeconds = Number.MAX_SAFE_INTEGER;\n    const prevBattleAnimationData = getBattleAnimationData(\n      getInitialLevelState(screen.level - 1),\n      prevBattleEvents,\n      prevBattleElapsedSeconds\n    );\n\n    const battleElapsedSeconds = 0;\n    const battleEvents: readonly BattleEvent[] = [];\n    const battleAnimationData = getBattleAnimationData(\n      getInitialLevelState(screen.level),\n      battleEvents,\n      battleElapsedSeconds\n    );\n\n    const blockEditorProps: BlockEditorProps<MainBlockEditorTypeParams> = {\n      config: this.getMainBlockEditorConfig(),\n      state: screen.prevLevelBlockEditor,\n\n      measureText: this.measureSvgText,\n      setState: noOp,\n    };\n\n    const reactElement = (\n      <div className=\"App\">\n        <div className=\"AppMain\">\n          <svg\n            className=\"MainSvg\"\n            width={this.state.appWidth}\n            height={appHeight}\n          >\n            <g transform={`translate(0 ${blockEditorDy})`}>\n              <BlockEditor {...blockEditorProps} />\n            </g>\n          </svg>\n        </div>\n      </div>\n    );\n\n    const canvasElement: CanvasElement = {\n      kind: CanvasElementKind.Group,\n      children: [\n        this.renderBattleAndOutcomeScreenCanvasElement(\n          blockEditorDy,\n          screen.prevLevelBlockEditor,\n          screen.level - 1,\n          prevBattleElapsedSeconds,\n          prevBattleAnimationData\n        ),\n        this.renderBattleAndOutcomeScreenCanvasElement(\n          blockEditorDy - 2 * appHeight,\n          screen.blockEditor,\n          screen.level,\n          battleElapsedSeconds,\n          battleAnimationData\n        ),\n        this.renderPuzzleScreenButtonsCanvasElement(),\n      ],\n    };\n\n    return { reactElement, canvasElement };\n  }\n\n  dualRenderOpenSettingsAnimation(): DualRenderOutput {\n    const { screen, appHeight } = this.state;\n    const elapsedSeconds = getElapsedSeconds(\n      screen.currentTimestamp,\n      screen.animationStartTime\n    );\n    const settingsScreenDy = Math.max(\n      appHeight -\n        (appHeight * elapsedSeconds) / SCREEN_TRANSITION_ANIMATION_SECONDS,\n      0\n    );\n\n    return this.dualRenderSettingsBoxOverHomeScreen(settingsScreenDy);\n  }\n\n  dualRenderCloseSettingsAnimation(): DualRenderOutput {\n    const { screen, appHeight } = this.state;\n    const elapsedSeconds = getElapsedSeconds(\n      screen.currentTimestamp,\n      screen.animationStartTime\n    );\n    const settingsScreenDy = Math.min(\n      (appHeight * elapsedSeconds) / SCREEN_TRANSITION_ANIMATION_SECONDS,\n      appHeight\n    );\n\n    return this.dualRenderSettingsBoxOverHomeScreen(settingsScreenDy);\n  }\n\n  dualRenderCreditsAnimation(): DualRenderOutput {\n    const reactElement = (\n      <div className=\"App\">\n        <div className=\"AppMain\">\n          <svg\n            className=\"MainSvg\"\n            width={this.state.appWidth}\n            height={this.state.appHeight}\n          ></svg>\n        </div>\n      </div>\n    );\n\n    const { appWidth, appHeight, screen } = this.state;\n    const elapsedSeconds = getElapsedSeconds(\n      screen.currentTimestamp,\n      screen.animationStartTime\n    );\n    const creditTextDy =\n      -appHeight *\n      elapsedSeconds *\n      CREDIT_SCREEN_SCROLL_SPEED_IN_SCREEN_HEIGHT_PER_SECOND;\n\n    const [textElements] =\n      this.getUntransformedCreditScreenTextElementsAndFinalYCursor();\n\n    const canvasElement: CanvasElement = {\n      kind: CanvasElementKind.Group,\n      children: [\n        renderRect({\n          x: 0,\n          y: 0,\n          w: appWidth,\n          h: appHeight,\n          fill: { r: 0, g: 0, b: 0, a: 255 },\n        }),\n\n        {\n          kind: CanvasElementKind.Group,\n          transform: [{ kind: TransformKind.Translate, x: 0, y: creditTextDy }],\n          children: textElements,\n        },\n      ],\n    };\n\n    return { reactElement, canvasElement };\n  }\n\n  getUntransformedCreditScreenTextElementsAndFinalYCursor(): [\n    readonly CanvasText_[],\n    number\n  ] {\n    const { appWidth, appHeight, language } = this.state;\n\n    const MAIN_DIMENSIONS: Dimensions = {\n      width: 2039,\n      height: 1447,\n    };\n    const minimumHorizontalScale = appWidth / MAIN_DIMENSIONS.width;\n    const minimumVerticalScale = appHeight / MAIN_DIMENSIONS.height;\n    const scale = Math.min(minimumHorizontalScale, minimumVerticalScale);\n\n    const textElements: CanvasText_[] = [];\n\n    const title = getUiText(language, UiTextKind.CreditScreenTitle);\n    const titleFont: CanvasTextFont = {\n      textAlign: \"center\",\n      fontSize: 96 * scale,\n      fontFamily: UI_TEXT_FONT_FAMILY,\n    };\n    const titleTextDimensions = this.measureCanvasText({\n      ...titleFont,\n      text: title,\n    });\n    const titleElement: CanvasText_ = {\n      ...titleFont,\n\n      kind: CanvasElementKind.Text,\n      text: title,\n      x: 0.5 * appWidth,\n      y: appHeight - titleTextDimensions.height,\n      fill: COLOR_THEME.textWhite,\n    };\n    textElements.push(titleElement);\n\n    const sectionBottomMargin = 240 * scale;\n    const bodyFont: CanvasTextFont = {\n      textAlign: \"center\",\n      fontSize: 80 * scale,\n      fontFamily: UI_TEXT_FONT_FAMILY,\n    };\n    const lineBottomMargin = 80 * scale;\n\n    let y = titleElement.y + titleTextDimensions.height + sectionBottomMargin;\n    const bodySections = CREDITS_SCREEN_BODY.replaceAll(\n      TEXT_SENTINELS.multilinePrettyPrintedLoggerId,\n      getMultilinePrettyPrintedLoggerIdOrDefault()\n    ).split(\"\\n\\n\");\n    for (const section of bodySections) {\n      const lines = section.split(\"\\n\");\n      for (const line of lines) {\n        textElements.push({\n          ...bodyFont,\n\n          kind: CanvasElementKind.Text,\n          text: line,\n          x: 0.5 * appWidth,\n          y,\n          fill: COLOR_THEME.textWhite,\n        });\n\n        const lineDimensions = this.measureCanvasText({\n          ...bodyFont,\n          text: line,\n        });\n        y += lineDimensions.height + lineBottomMargin;\n      }\n\n      if (lines.length > 0) {\n        y -= lineBottomMargin;\n      }\n\n      y += sectionBottomMargin;\n    }\n\n    return [textElements, y];\n  }\n\n  getCreditRollDurationInSeconds(): number {\n    const untransformedYCursor =\n      this.getUntransformedCreditScreenTextElementsAndFinalYCursor()[1];\n    const { appHeight } = this.state;\n    return (\n      untransformedYCursor /\n      (appHeight * CREDIT_SCREEN_SCROLL_SPEED_IN_SCREEN_HEIGHT_PER_SECOND)\n    );\n  }\n\n  renderBattleAndOutcomeScreenCanvasElement(\n    blockEditorDy: number,\n    blockEditor: BlockEditorState<MainBlockEditorTypeParams>,\n    level: Level,\n    elapsedSeconds: number,\n    battleAnimationData: BattleAnimationData,\n    options?: { renderTutorial?: true }\n  ): CanvasElement {\n    const { language, appWidth, appHeight, onlyTouchDepressedButton, screen } =\n      this.state;\n    const backgroundImageScale =\n      this.state.appWidth / SIZING.castleInteriorImage.width;\n    const backgroundImageTop =\n      appHeight - SIZING.castleInteriorImage.height * backgroundImageScale;\n\n    const [protectedAreaScalePoint, protectedAreaScale] =\n      this.getBattleScreenProtectedAreaScalePointAndScaleFactor();\n    const protectedAreaTransform: readonly Transform[] = [\n      {\n        kind: TransformKind.Translate,\n        x: protectedAreaScalePoint.x,\n        y: protectedAreaScalePoint.y,\n      },\n      {\n        kind: TransformKind.Scale,\n        x: protectedAreaScale,\n        y: protectedAreaScale,\n      },\n      {\n        kind: TransformKind.Translate,\n        x: -protectedAreaScalePoint.x,\n        y: -protectedAreaScalePoint.y,\n      },\n    ];\n\n    const {\n      levelState: currentLevelState,\n      battleStatus,\n      errorAlert,\n      particles,\n      advanceSummon,\n    } = battleAnimationData;\n\n    const battleOutcomeTextDimensions = this.measureCanvasText({\n      text:\n        battleStatus === BattleStatus.Victory\n          ? getUiText(language, UiTextKind.LevelCleared)\n          : battleStatus === BattleStatus.Defeat\n          ? getUiText(language, UiTextKind.LevelFailed)\n          : \"\",\n      fontSize: SIZING.unscaledBattleOutcomeTextSizePx * backgroundImageScale,\n      fontFamily: BATTLE_OUTCOME_TEXT_FONT_FAMILY,\n    });\n    const nondepressedNextLevelButtonTextDimensions = this.measureCanvasText({\n      text:\n        battleStatus === BattleStatus.Victory\n          ? getUiText(language, UiTextKind.NextLevel)\n          : \"\",\n      fontSize: SIZING.unscaledButtonTextSizePx * backgroundImageScale,\n      fontFamily: BUTTON_TEXT_FONT_FAMILY,\n    });\n    const nondepressedNextLevelButtonPadding =\n      nondepressedNextLevelButtonTextDimensions.height;\n    const nondepressedNextLevelButtonBBox: Rectangle = {\n      topLeft: {\n        x:\n          this.state.appWidth / 2 -\n          (nondepressedNextLevelButtonTextDimensions.width +\n            2 * nondepressedNextLevelButtonPadding) /\n            2,\n        y:\n          0 +\n          0.5 * appHeight +\n          0.5 * battleOutcomeTextDimensions.height +\n          2 * battleOutcomeTextDimensions.height,\n      },\n      dimensions: {\n        width:\n          nondepressedNextLevelButtonTextDimensions.width +\n          2 * nondepressedNextLevelButtonPadding,\n        height:\n          nondepressedNextLevelButtonTextDimensions.height +\n          2 * nondepressedNextLevelButtonPadding,\n      },\n    };\n    const nextLevelButtonBBox =\n      onlyTouchDepressedButton === ButtonKind.NextLevel\n        ? getDepressedButtonBBox(nondepressedNextLevelButtonBBox)\n        : nondepressedNextLevelButtonBBox;\n    const nextLevelButtonFontSize =\n      onlyTouchDepressedButton === ButtonKind.NextLevel\n        ? SIZING.depressedButtonScale *\n          SIZING.unscaledButtonTextSizePx *\n          backgroundImageScale\n        : SIZING.unscaledButtonTextSizePx * backgroundImageScale;\n\n    const victoryElements: readonly CanvasElement[] = [\n      renderRect({\n        x:\n          (this.state.appWidth -\n            this.state.appWidth * SIZING.battleOutcomeAlertWidthFactor) /\n          2,\n        y: 0,\n        w: this.state.appWidth * SIZING.battleOutcomeAlertWidthFactor,\n        h: appHeight,\n        fill: { r: 0, g: 0, b: 0, a: 0xcc },\n      }),\n\n      {\n        kind: CanvasElementKind.Text,\n        text: getUiText(language, UiTextKind.LevelCleared),\n        x:\n          (this.state.appWidth -\n            this.state.appWidth * SIZING.battleOutcomeAlertWidthFactor) /\n            2 +\n          0.5 * (this.state.appWidth * SIZING.battleOutcomeAlertWidthFactor),\n        y: 0 + 0.5 * appHeight,\n        fill: COLOR_THEME.textWhite,\n        fontSize: SIZING.unscaledBattleOutcomeTextSizePx * backgroundImageScale,\n        fontFamily: BATTLE_OUTCOME_TEXT_FONT_FAMILY,\n        textBaseline: \"middle\",\n        textAlign: \"center\",\n      },\n\n      {\n        kind: CanvasElementKind.Group,\n        alpha: ![AnimationKind.PlayBattle, AnimationKind.PauseBattle].includes(\n          screen.animationKind\n        )\n          ? 0.5\n          : 1.0,\n        children:\n          level >= LAST_LEVEL\n            ? []\n            : [\n                renderRect({\n                  x: nextLevelButtonBBox.topLeft.x,\n                  y: nextLevelButtonBBox.topLeft.y,\n                  w: nextLevelButtonBBox.dimensions.width,\n                  h: nextLevelButtonBBox.dimensions.height,\n                  fill: COLOR_THEME.buttonBlue,\n                  rx: 5,\n                  ry: 5,\n                }),\n\n                {\n                  kind: CanvasElementKind.Text,\n                  text: getUiText(language, UiTextKind.NextLevel),\n                  x: getRectCenter(nextLevelButtonBBox).x,\n                  y: getRectCenter(nextLevelButtonBBox).y,\n                  fill: COLOR_THEME.textWhite,\n                  fontSize: nextLevelButtonFontSize,\n                  fontFamily: BUTTON_TEXT_FONT_FAMILY,\n                  textBaseline: \"middle\",\n                  textAlign: \"center\",\n                },\n\n                renderRect({\n                  x: nextLevelButtonBBox.topLeft.x,\n                  y: nextLevelButtonBBox.topLeft.y,\n                  w: nextLevelButtonBBox.dimensions.width,\n                  h: nextLevelButtonBBox.dimensions.height,\n                  fill: ![\n                    AnimationKind.PlayBattle,\n                    AnimationKind.PauseBattle,\n                  ].includes(screen.animationKind)\n                    ? TRANSPARENT\n                    : onlyTouchDepressedButton === ButtonKind.NextLevel\n                    ? { r: 255, g: 255, b: 255, a: 128 }\n                    : periodicColorSinInterp(\n                        { r: 0, g: 0, b: 0, a: 150 },\n                        { r: 255, g: 255, b: 255, a: 30 },\n                        elapsedSeconds,\n                        1\n                      ),\n                  rx: 5,\n                  ry: 5,\n                }),\n              ],\n      },\n    ];\n\n    const defeatElements: readonly CanvasElement[] = [\n      renderRect({\n        x:\n          (this.state.appWidth -\n            this.state.appWidth * SIZING.battleOutcomeAlertWidthFactor) /\n          2,\n        y: 0,\n        w: this.state.appWidth * SIZING.battleOutcomeAlertWidthFactor,\n        h: appHeight,\n        fill: { r: 0, g: 0, b: 0, a: 0xcc },\n      }),\n\n      {\n        kind: CanvasElementKind.Text,\n        text: getUiText(language, UiTextKind.LevelFailed),\n        x:\n          (this.state.appWidth -\n            this.state.appWidth * SIZING.battleOutcomeAlertWidthFactor) /\n            2 +\n          0.5 * (this.state.appWidth * SIZING.battleOutcomeAlertWidthFactor),\n        y: 0 + 0.5 * appHeight,\n        fill: COLOR_THEME.textWhite,\n        fontSize: SIZING.unscaledBattleOutcomeTextSizePx * backgroundImageScale,\n        fontFamily: BATTLE_OUTCOME_TEXT_FONT_FAMILY,\n        textBaseline: \"middle\",\n        textAlign: \"center\",\n      },\n    ];\n\n    const renderTutorial = options?.renderTutorial ?? false;\n\n    return {\n      kind: CanvasElementKind.Group,\n      clipPath: [\n        {\n          kind: PathInstructionKind.MoveTo,\n          x: 0,\n          y: appHeight + blockEditorDy,\n        },\n        {\n          kind: PathInstructionKind.LineTo,\n          x: appWidth,\n          y: appHeight + blockEditorDy,\n        },\n        {\n          kind: PathInstructionKind.LineTo,\n          x: appWidth,\n          y: appHeight + blockEditorDy + appHeight,\n        },\n        {\n          kind: PathInstructionKind.LineTo,\n          x: 0,\n          y: appHeight + blockEditorDy + appHeight,\n        },\n        {\n          kind: PathInstructionKind.LineTo,\n          x: 0,\n          y: appHeight + blockEditorDy,\n        },\n      ],\n      children: [\n        {\n          kind: CanvasElementKind.Group,\n          transform: [\n            {\n              kind: TransformKind.Translate,\n              x: 0,\n              y: appHeight + blockEditorDy,\n            },\n          ],\n          children: [\n            {\n              kind: CanvasElementKind.Image,\n              source: images.castle_interior,\n              dx: 0,\n              dy: backgroundImageTop,\n              dw: appWidth,\n              dh:\n                appWidth *\n                (images.castle_interior.naturalHeight /\n                  images.castle_interior.naturalWidth),\n            },\n\n            {\n              kind: CanvasElementKind.Group,\n              transform: protectedAreaTransform,\n              children: [this.renderMinimapHoleCanvasElement()],\n            },\n\n            renderTutorial\n              ? this.renderTutorialCanvasElement()\n              : NULL_CANVAS_ELEMENT,\n\n            {\n              kind: CanvasElementKind.Group,\n              transform: protectedAreaTransform,\n              children: [\n                ...currentLevelState.squares.map(\n                  (_square, i): CanvasElement =>\n                    renderRect({\n                      x: (50 + i * 150) * backgroundImageScale,\n                      y:\n                        backgroundImageTop +\n                        (735 + 35 + 405) * backgroundImageScale,\n                      w: 130 * backgroundImageScale,\n                      h: 80 * backgroundImageScale,\n                      rx: (130 / 2) * backgroundImageScale,\n                      ry: (80 / 2) * backgroundImageScale,\n                      fill: COLOR_THEME.squareWhite,\n                    })\n                ),\n\n                ...currentLevelState.squares.map((square, squareIndex) =>\n                  renderCastleSquareOccupant({\n                    square,\n                    squareIndex,\n                    backgroundImageTop,\n                    backgroundImageScale,\n                    elapsedSeconds,\n                    battleAnimationData,\n                  })\n                ),\n\n                advanceSummon === null\n                  ? NULL_CANVAS_ELEMENT\n                  : renderCastleSquareOccupant({\n                      square: advanceSummon.summonee,\n                      squareIndex: advanceSummon.summoneeIndex,\n                      backgroundImageTop,\n                      backgroundImageScale,\n                      elapsedSeconds,\n                      battleAnimationData,\n                    }),\n\n                ...particles.map((particle) =>\n                  renderCircle({\n                    cx: particle.position.x * backgroundImageScale,\n                    cy:\n                      backgroundImageTop +\n                      particle.position.y * backgroundImageScale,\n                    r: particle.radius * backgroundImageScale,\n                    fill: particle.color,\n                  })\n                ),\n\n                errorAlert === null\n                  ? NULL_CANVAS_ELEMENT\n                  : ((): CanvasElement => {\n                      const textElement: CanvasText_ = {\n                        kind: CanvasElementKind.Text,\n                        text: getUiText(language, errorAlert.message),\n                        x:\n                          (50 - 130 + errorAlert.index * 150) *\n                            backgroundImageScale +\n                          0.5 * (260 * backgroundImageScale),\n                        y:\n                          backgroundImageTop +\n                          805 * backgroundImageScale +\n                          0.5 * (160 * backgroundImageScale),\n                        fill: COLOR_THEME.textWhite,\n                        fontSize:\n                          SIZING.unscaledErrorAlertTextSizePx *\n                          backgroundImageScale,\n                        fontFamily: ERROR_ALERT_TEXT_FONT_FAMILY,\n                        textBaseline: \"middle\",\n                        textAlign: \"center\",\n                      };\n                      const textDimensions =\n                        this.measureCanvasText(textElement);\n                      const rectWidth = Math.max(\n                        260 * backgroundImageScale,\n                        textDimensions.width + 2 * 10 * backgroundImageScale\n                      );\n\n                      return {\n                        kind: CanvasElementKind.Group,\n                        alpha: errorAlert.opacityFactor,\n                        children: [\n                          renderRect({\n                            x:\n                              (50 + errorAlert.index * 150) *\n                                backgroundImageScale -\n                              0.5 * rectWidth,\n                            y: backgroundImageTop + 805 * backgroundImageScale,\n                            w: rectWidth,\n                            h: 160 * backgroundImageScale,\n                            rx: 5 * backgroundImageScale,\n                            ry: 5 * backgroundImageScale,\n                            fill: COLOR_THEME.errorAlertRed,\n                          }),\n\n                          textElement,\n                        ],\n                      };\n                    })(),\n              ],\n            },\n\n            ...(battleStatus === BattleStatus.Victory\n              ? victoryElements\n              : battleStatus === BattleStatus.Defeat\n              ? defeatElements\n              : []),\n\n            battleStatus === BattleStatus.Victory && level === LAST_LEVEL\n              ? this.renderStage2ComingSoonCanvasElement()\n              : NULL_CANVAS_ELEMENT,\n          ],\n        },\n      ],\n    };\n  }\n\n  getBattleScreenProtectedAreaScalePointAndScaleFactor(): [Vec2, number] {\n    const { appHeight, screen } = this.state;\n    const safeAreaInsets = this.state.safeAreaInsets.insets;\n    const backgroundImageScale =\n      this.state.appWidth / SIZING.castleInteriorImage.width;\n    const backgroundImageTop =\n      appHeight - SIZING.castleInteriorImage.height * backgroundImageScale;\n    const squareCount = getInitialLevelState(screen.level).squares.length;\n\n    const protectedAreaLeft = 50 * backgroundImageScale;\n    const lastSquareBBoxBottomRight: Vec2 = {\n      x:\n        (50 + (squareCount - 1) * 150) * backgroundImageScale +\n        130 * backgroundImageScale,\n      y:\n        backgroundImageTop +\n        (735 + 35) * backgroundImageScale +\n        80 * backgroundImageScale,\n    };\n    const protectedAreaWidth = lastSquareBBoxBottomRight.x - protectedAreaLeft;\n    const horizontalShrinkAmount = Math.max(\n      0,\n      safeAreaInsets.left - protectedAreaLeft\n    );\n    const protectedAreaScale =\n      (protectedAreaWidth - horizontalShrinkAmount) / protectedAreaWidth;\n    return [lastSquareBBoxBottomRight, protectedAreaScale];\n  }\n\n  renderPuzzleScreenButtonsCanvasElement(): CanvasElement {\n    return this.dualRenderPuzzleScreenButtons().canvasElement;\n  }\n\n  dualRenderPuzzleScreenButtons(): DualRenderOutput {\n    const backgroundImageScale =\n      this.state.appWidth / SIZING.castleInteriorImage.width;\n    const { screen, onlyTouchDepressedButton } = this.state;\n    const safeAreaInsets = this.state.safeAreaInsets.insets;\n    const areAnyBlocksReachable_ = areAnyBlocksReachable(screen);\n\n    const isBattleFinished =\n      isScreenShowingVictory(screen, this.getCurrentLevelBattleEvents) ||\n      isScreenShowingDefeat(screen, this.getCurrentLevelBattleEvents);\n    const elapsedSeconds = getElapsedSeconds(\n      screen.currentTimestamp,\n      screen.animationStartTime\n    );\n\n    const blockEditorCanvasItems = screen.blockEditor.canvas.items;\n    const { hasFailedLevelOneAtLeastOnce } = this.state;\n\n    const doesUserNeedToWriteIncorrectCodeForLevelOne =\n      screen.level === Level.Level1 &&\n      !hasFailedLevelOneAtLeastOnce &&\n      blockEditorCanvasItems[0].content.length < 3;\n    const doesUserNeedToFixInitialIncorrectCodeForLevelOne =\n      screen.level === Level.Level1 &&\n      hasFailedLevelOneAtLeastOnce &&\n      blockEditorCanvasItems[0].content.length <= 3;\n    const doesUserNeedToExecuteIncorrectCodeForLevelOne =\n      screen.level === Level.Level1 &&\n      !hasFailedLevelOneAtLeastOnce &&\n      blockEditorCanvasItems[0].content.length === 3;\n    const isUserReadyToExecuteCorrectCodeForLevelOne =\n      screen.level === Level.Level1 &&\n      blockEditorCanvasItems[0].content.length >= 4;\n\n    const isBlockCanvasIsInInitialState =\n      blockEditorCanvasItems.length === 1 &&\n      blockEditorCanvasItems[0].content.length === 1;\n\n    const {\n      nondepressedLeftButtonBBox,\n      nondepressedMiddleButtonBBox,\n      nondepressedRightButtonBBox,\n    } = getNondepressedPuzzleScreenButtonBBoxes(\n      backgroundImageScale,\n      safeAreaInsets\n    );\n\n    const leftButtonBBox =\n      onlyTouchDepressedButton === ButtonKind.PuzzleScreenLeft\n        ? getDepressedButtonBBox(nondepressedLeftButtonBBox)\n        : nondepressedLeftButtonBBox;\n\n    const editButton: CanvasElement = {\n      kind: CanvasElementKind.Image,\n      source: images.buttons.puzzle.edit,\n      dx: leftButtonBBox.topLeft.x,\n      dy: leftButtonBBox.topLeft.y,\n      dw: leftButtonBBox.dimensions.width,\n      dh: leftButtonBBox.dimensions.height,\n    };\n    const disabledEditButton = withAlpha(0.5, editButton);\n    const flashingEditButton: CanvasElement = {\n      kind: CanvasElementKind.Group,\n      children: [\n        editButton,\n        onlyTouchDepressedButton === ButtonKind.PuzzleScreenLeft\n          ? NULL_CANVAS_ELEMENT\n          : renderRect({\n              x: leftButtonBBox.topLeft.x,\n              y: leftButtonBBox.topLeft.y,\n              w: leftButtonBBox.dimensions.width,\n              h: leftButtonBBox.dimensions.height,\n              rx: 0.5 * leftButtonBBox.dimensions.width,\n              ry: 0.5 * leftButtonBBox.dimensions.height,\n              fill: periodicColorSinInterp(\n                { r: 0, g: 0, b: 0, a: 150 },\n                { r: 255, g: 255, b: 255, a: 30 },\n                elapsedSeconds,\n                1\n              ),\n            }),\n      ],\n    };\n\n    const leftButton =\n      ![AnimationKind.PlayBattle, AnimationKind.PauseBattle].includes(\n        screen.animationKind\n      ) || isScreenShowingVictory(screen, this.getCurrentLevelBattleEvents)\n        ? disabledEditButton\n        : isScreenShowingDefeat(screen, this.getCurrentLevelBattleEvents)\n        ? flashingEditButton\n        : screen.animationKind === AnimationKind.PauseBattle &&\n          (doesUserNeedToWriteIncorrectCodeForLevelOne ||\n            doesUserNeedToFixInitialIncorrectCodeForLevelOne)\n        ? flashingEditButton\n        : isBlockCanvasIsInInitialState\n        ? flashingEditButton\n        : this.getCurrentLevelBattleAnimationData()\n            .didHeroSurviveLevelButFailToReachStairs\n        ? flashingEditButton\n        : editButton;\n    const leftButtonOverlay = withAlpha(\n      onlyTouchDepressedButton === ButtonKind.PuzzleScreenLeft ? 0.5 : 0,\n      {\n        kind: CanvasElementKind.Image,\n        source: buttonOverlays.puzzle.all_purpose,\n        dx: leftButtonBBox.topLeft.x,\n        dy: leftButtonBBox.topLeft.y,\n        dw: leftButtonBBox.dimensions.width,\n        dh: leftButtonBBox.dimensions.height,\n      }\n    );\n\n    const middleButtonBBox =\n      onlyTouchDepressedButton === ButtonKind.PuzzleScreenMiddle\n        ? getDepressedButtonBBox(nondepressedMiddleButtonBBox)\n        : nondepressedMiddleButtonBBox;\n\n    const viewButtonSpec = {\n      source: images.buttons.puzzle.view,\n    };\n    const disabledViewButtonSpec = {\n      disabled: true,\n      source: images.buttons.puzzle.view,\n    };\n    const flashingViewButtonSpec = {\n      flashing: true,\n      source: images.buttons.puzzle.view,\n    };\n    const playButtonSpec = {\n      source: images.buttons.puzzle.play,\n    };\n    const disabledPlayButtonSpec = {\n      disabled: true,\n      source: images.buttons.puzzle.play,\n    };\n    const flashingPlayButtonSpec = {\n      flashing: true,\n      source: images.buttons.puzzle.play,\n    };\n    const pauseButtonSpec = {\n      source: images.buttons.puzzle.pause,\n    };\n    const disabledPauseButtonSpec = {\n      disabled: true,\n      source: images.buttons.puzzle.pause,\n    };\n\n    const ENTER_VIEW_SCREEN_ANIMATIONS = [\n      AnimationKind.HomeToView,\n      AnimationKind.EditToView,\n    ];\n    const middleButtonSpec: {\n      disabled?: true;\n      flashing?: true;\n      source: HTMLImageElement;\n    } =\n      screen.animationKind === AnimationKind.Edit &&\n      (doesUserNeedToExecuteIncorrectCodeForLevelOne ||\n        isUserReadyToExecuteCorrectCodeForLevelOne) &&\n      screen.blockEditor.uiTouch === null\n        ? flashingViewButtonSpec\n        : screen.animationKind === AnimationKind.PauseBattle &&\n          doesUserNeedToWriteIncorrectCodeForLevelOne\n        ? disabledPlayButtonSpec\n        : screen.animationKind === AnimationKind.PauseBattle &&\n          (doesUserNeedToExecuteIncorrectCodeForLevelOne ||\n            isUserReadyToExecuteCorrectCodeForLevelOne)\n        ? flashingPlayButtonSpec\n        : screen.animationKind === AnimationKind.PauseBattle &&\n          this.getCurrentLevelBattleAnimationData()\n            .didHeroSurviveLevelButFailToReachStairs\n        ? disabledPlayButtonSpec\n        : screen.animationKind === AnimationKind.PlayBattle && !isBattleFinished\n        ? pauseButtonSpec\n        : screen.animationKind === AnimationKind.PlayBattle && isBattleFinished\n        ? disabledPauseButtonSpec\n        : screen.animationKind === AnimationKind.PauseBattle &&\n          areAnyBlocksReachable_\n        ? playButtonSpec\n        : screen.animationKind === AnimationKind.PauseBattle &&\n          !areAnyBlocksReachable_\n        ? disabledPlayButtonSpec\n        : screen.animationKind === AnimationKind.Edit\n        ? viewButtonSpec\n        : ENTER_VIEW_SCREEN_ANIMATIONS.includes(screen.animationKind) ||\n          screen.animationKind === AnimationKind.NextLevel\n        ? disabledPlayButtonSpec\n        : disabledViewButtonSpec;\n    const middleButton = withAlpha(middleButtonSpec.disabled ? 0.5 : 1, {\n      kind: CanvasElementKind.Image,\n      source: middleButtonSpec.source,\n      dx: middleButtonBBox.topLeft.x,\n      dy: middleButtonBBox.topLeft.y,\n      dw: middleButtonBBox.dimensions.width,\n      dh: middleButtonBBox.dimensions.height,\n    });\n    const middleButtonDepressionOverlay: CanvasElement = withAlpha(\n      onlyTouchDepressedButton === ButtonKind.PuzzleScreenMiddle ? 0.5 : 0,\n      {\n        kind: CanvasElementKind.Image,\n        source: buttonOverlays.puzzle.all_purpose,\n        dx: middleButtonBBox.topLeft.x,\n        dy: middleButtonBBox.topLeft.y,\n        dw: middleButtonBBox.dimensions.width,\n        dh: middleButtonBBox.dimensions.height,\n      }\n    );\n    const middleButtonFlashOverlay =\n      onlyTouchDepressedButton === ButtonKind.PuzzleScreenMiddle ||\n      !middleButtonSpec.flashing\n        ? NULL_CANVAS_ELEMENT\n        : renderRect({\n            x: middleButtonBBox.topLeft.x,\n            y: middleButtonBBox.topLeft.y,\n            w: middleButtonBBox.dimensions.width,\n            h: middleButtonBBox.dimensions.height,\n            rx: 0.5 * middleButtonBBox.dimensions.width,\n            ry: 0.5 * middleButtonBBox.dimensions.height,\n            fill: periodicColorSinInterp(\n              { r: 0, g: 0, b: 0, a: 150 },\n              { r: 255, g: 255, b: 255, a: 30 },\n              elapsedSeconds,\n              1\n            ),\n          });\n\n    const rightButtonBBox =\n      onlyTouchDepressedButton === ButtonKind.PuzzleScreenRight\n        ? getDepressedButtonBBox(nondepressedRightButtonBBox)\n        : nondepressedRightButtonBBox;\n    const rightButton: CanvasElement = {\n      kind: CanvasElementKind.Image,\n      source: images.buttons.puzzle.home,\n      dx: rightButtonBBox.topLeft.x,\n      dy: rightButtonBBox.topLeft.y,\n      dw: rightButtonBBox.dimensions.width,\n      dh: rightButtonBBox.dimensions.height,\n    };\n    const rightButtonOverlay: CanvasElement = withAlpha(\n      onlyTouchDepressedButton === ButtonKind.PuzzleScreenRight ? 0.5 : 0,\n      {\n        kind: CanvasElementKind.Image,\n        source: buttonOverlays.puzzle.all_purpose,\n        dx: rightButtonBBox.topLeft.x,\n        dy: rightButtonBBox.topLeft.y,\n        dw: rightButtonBBox.dimensions.width,\n        dh: rightButtonBBox.dimensions.height,\n      }\n    );\n\n    /**\n     * The user can use their finger to drag the BlockEditor\n     * canvas (not to be confused with the #FrontCanvas)\n     * in order to scroll.\n     * However, we want to prevent scrolling if the drag begins\n     * on a puzzle button.\n     * The problem is that since the buttons are not rendered to the SVG,\n     * they cannot capture touch (or mouse) events.\n     * To solve this, we add invisible <ellipse>s where the buttons are rendered,\n     * so that they can capture touch (or mouse) events,\n     * thus preventing the BlockEditor canvas from receiving those events.\n     */\n    const blockEditorDragBlockers = (\n      <>\n        <ellipse\n          cx={getRectCenter(leftButtonBBox).x}\n          cy={getRectCenter(leftButtonBBox).y}\n          rx={0.5 * leftButtonBBox.dimensions.width}\n          ry={0.5 * leftButtonBBox.dimensions.height}\n          fill=\"transparent\"\n        />\n        <ellipse\n          cx={getRectCenter(middleButtonBBox).x}\n          cy={getRectCenter(middleButtonBBox).y}\n          rx={0.5 * middleButtonBBox.dimensions.width}\n          ry={0.5 * middleButtonBBox.dimensions.height}\n          fill=\"transparent\"\n        />\n        <ellipse\n          cx={getRectCenter(rightButtonBBox).x}\n          cy={getRectCenter(rightButtonBBox).y}\n          rx={0.5 * rightButtonBBox.dimensions.width}\n          ry={0.5 * rightButtonBBox.dimensions.height}\n          fill=\"transparent\"\n        />\n      </>\n    );\n\n    const canvasElement: CanvasElement = {\n      kind: CanvasElementKind.Group,\n      children: [\n        leftButton,\n        leftButtonOverlay,\n        middleButton,\n        middleButtonDepressionOverlay,\n        middleButtonFlashOverlay,\n        rightButton,\n        rightButtonOverlay,\n      ],\n    };\n\n    return { reactElement: blockEditorDragBlockers, canvasElement };\n  }\n\n  renderStage2ComingSoonCanvasElement(): CanvasElement {\n    const { appWidth, appHeight, language } = this.state;\n\n    const MAIN_DIMENSIONS: Dimensions = {\n      width: 2039,\n      height: 1447,\n    };\n    const minimumHorizontalScale = appWidth / MAIN_DIMENSIONS.width;\n    const minimumVerticalScale = appHeight / MAIN_DIMENSIONS.height;\n    const scale = Math.min(minimumHorizontalScale, minimumVerticalScale);\n\n    const textElements: CanvasText_[] = [];\n\n    const comingSoonTextLines = getUiText(\n      language,\n      UiTextKind.Stage2ComingSoon\n    ).split(\"\\n\");\n    const title = comingSoonTextLines[0];\n    const titleFont: CanvasTextFont = {\n      textAlign: \"center\",\n      fontSize: 120 * scale,\n      fontFamily: UI_TEXT_FONT_FAMILY,\n    };\n    const titleTextDimensions = this.measureCanvasText({\n      ...titleFont,\n      text: title,\n    });\n    const titleElement: CanvasText_ = {\n      ...titleFont,\n\n      kind: CanvasElementKind.Text,\n      text: title,\n      x: 0.5 * appWidth,\n      y: 0.5 * appHeight,\n      fill: COLOR_THEME.textWhite,\n    };\n    textElements.push(titleElement);\n\n    const sectionBottomMargin = 240 * scale;\n    const bodyFont: CanvasTextFont = {\n      textAlign: \"center\",\n      fontSize: 80 * scale,\n      fontFamily: UI_TEXT_FONT_FAMILY,\n    };\n    const lineBottomMargin = 80 * scale;\n\n    let y = titleElement.y + titleTextDimensions.height + sectionBottomMargin;\n    const bodyLines = comingSoonTextLines.slice(1);\n    for (const name of bodyLines) {\n      textElements.push({\n        ...bodyFont,\n\n        kind: CanvasElementKind.Text,\n        text: name,\n        x: 0.5 * appWidth,\n        y,\n        fill: COLOR_THEME.textWhite,\n      });\n\n      const lineDimensions = this.measureCanvasText({\n        ...bodyFont,\n        text: name,\n      });\n      y += lineDimensions.height + lineBottomMargin;\n    }\n\n    return {\n      kind: CanvasElementKind.Group,\n      children: [\n        renderRect({\n          x: 0,\n          y: 0,\n          w: appWidth,\n          h: appHeight,\n          fill: { r: 0, g: 0, b: 0, a: 255 },\n        }),\n        ...textElements,\n      ],\n    };\n  }\n\n  renderTutorialCanvasElement(): CanvasElement {\n    const { level, blockEditor } = this.state.screen;\n\n    const noBlockEditorUiAction =\n      blockEditor.uiTouch === null &&\n      blockEditor.palette.scrollInProgress === null &&\n      blockEditor.canvas.scrollInProgress === null &&\n      blockEditor.literalEditor === null;\n    if (!noBlockEditorUiAction) {\n      return NULL_CANVAS_ELEMENT;\n    }\n\n    if (level === Level.Level1) {\n      return this.renderLevel1TutorialCanvasElementAssumingNoBlockEditorUiAction();\n    }\n\n    if (level === Level.Level2) {\n      return this.renderLevel2TutorialCanvasElementAssumingNoBlockEditorUiAction();\n    }\n\n    if (level === Level.Level8) {\n      return this.renderLevel8TutorialCanvasElementAssumingNoBlockEditorUiAction();\n    }\n\n    if (level === Level.Level9) {\n      return this.renderLevel9TutorialCanvasElementAssumingNoBlockEditorUiAction();\n    }\n\n    return NULL_CANVAS_ELEMENT;\n  }\n\n  renderLevel1TutorialCanvasElementAssumingNoBlockEditorUiAction(): CanvasElement {\n    const { screen, language, appWidth, appHeight } = this.state;\n    const blockEditorCanvasItems = screen.blockEditor.canvas.items;\n    const { hasFailedLevelOneAtLeastOnce } = this.state;\n    const isReadyToFailLevelForTheFirstTime =\n      !hasFailedLevelOneAtLeastOnce &&\n      blockEditorCanvasItems.length === 1 &&\n      blockEditorCanvasItems[0].content.length >= 3;\n    const backgroundImageScale = appWidth / SIZING.castleInteriorImage.width;\n\n    const bBoxOfTallInstructionsBoxForCastleBackground: Rectangle =\n      ((): Rectangle => {\n        const source = images.tutorial.tall_instructions_box;\n        const width = 500 * backgroundImageScale;\n        const height = width * (source.naturalHeight / source.naturalWidth);\n        return {\n          topLeft: {\n            x: 50 * backgroundImageScale,\n            y: Math.max(-0.26 * height, appHeight - 600 * backgroundImageScale),\n          },\n          dimensions: {\n            width,\n            height,\n          },\n        };\n      })();\n    const bBoxOfShortInstructionsBoxForBlockEditor: Rectangle =\n      ((): Rectangle => {\n        const source = images.tutorial.short_instructions_box;\n        const width = 650 * backgroundImageScale;\n        const height = width * (source.naturalHeight / source.naturalWidth);\n        return {\n          topLeft: {\n            x: appWidth - width - 20 * backgroundImageScale,\n            y: appHeight - height - 20 * backgroundImageScale,\n          },\n          dimensions: {\n            width,\n            height,\n          },\n        };\n      })();\n\n    const bBoxOfShortInstructionsBoxForCastleBackground: Rectangle =\n      ((): Rectangle => {\n        const source = images.tutorial.short_instructions_box;\n        const width = 650 * backgroundImageScale;\n        const height = width * (source.naturalHeight / source.naturalWidth);\n        return {\n          topLeft: {\n            x: 20 * backgroundImageScale,\n            y: Math.max(-0.3 * height, appHeight - 600 * backgroundImageScale),\n          },\n          dimensions: { width, height },\n        };\n      })();\n\n    if (\n      screen.animationKind === AnimationKind.PauseBattle &&\n      !isReadyToFailLevelForTheFirstTime &&\n      !hasFailedLevelOneAtLeastOnce\n    ) {\n      const [protectedAreaScalePoint, protectedAreaScale] =\n        this.getBattleScreenProtectedAreaScalePointAndScaleFactor();\n\n      const source = images.tutorial.tall_instructions_box;\n      const instructionsBoxBBox = bBoxOfTallInstructionsBoxForCastleBackground;\n      const instructionsText = getUiText(\n        language,\n        UiTextKind.TutorialLevel1Part1_MoveTheHero\n      );\n\n      return {\n        kind: CanvasElementKind.Group,\n        transform: [\n          {\n            kind: TransformKind.Translate,\n            x: protectedAreaScalePoint.x,\n            y: protectedAreaScalePoint.y,\n          },\n          {\n            kind: TransformKind.Scale,\n            x: protectedAreaScale,\n            y: protectedAreaScale,\n          },\n          {\n            kind: TransformKind.Translate,\n            x: -protectedAreaScalePoint.x,\n            y: -protectedAreaScalePoint.y,\n          },\n        ],\n        children: [\n          {\n            kind: CanvasElementKind.Image,\n            source,\n            dx: instructionsBoxBBox.topLeft.x,\n            dy: instructionsBoxBBox.topLeft.y,\n            dw: instructionsBoxBBox.dimensions.width,\n            dh: instructionsBoxBBox.dimensions.height,\n          },\n          this.renderTextAndIconsAroundCenter(\n            instructionsText,\n            getRectCenter(instructionsBoxBBox),\n            {\n              width:\n                TALL_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR *\n                instructionsBoxBBox.dimensions.width,\n              height:\n                TALL_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR *\n                instructionsBoxBBox.dimensions.height,\n            }\n          ),\n        ],\n      };\n    }\n\n    const fingerWidth = 60;\n    const fingerHeight =\n      fingerWidth *\n      (images.tutorial.finger.naturalHeight /\n        images.tutorial.finger.naturalWidth);\n\n    const blockEditorProps: BlockEditorProps<MainBlockEditorTypeParams> = {\n      config: this.getMainBlockEditorConfig(),\n      state: this.state.screen.blockEditor,\n      measureText: this.measureSvgText,\n      setState: noOp,\n    };\n    const paletteSpecs = getPaletteBlockRenderSpecs(blockEditorProps);\n    const paletteMoveForwardBlockRbox = paletteSpecs.find(\n      (spec) => spec.block.kind === BlockKind.MoveForward\n    )!.rbox;\n\n    if (\n      screen.animationKind === AnimationKind.Edit &&\n      blockEditorCanvasItems.length === 1 &&\n      blockEditorCanvasItems[0].content.length === 1 &&\n      !hasFailedLevelOneAtLeastOnce\n    ) {\n      const paletteLessThanBlockRboxMiddle = getRectCenter(\n        paletteMoveForwardBlockRbox\n      );\n      const dragStart = paletteLessThanBlockRboxMiddle;\n      const fingerStart = addVec(dragStart, {\n        x: -0.1 * fingerWidth,\n        y: -0.2 * fingerHeight,\n      });\n      const source = images.tutorial.short_instructions_box;\n      const instructionsBoxBBox = bBoxOfShortInstructionsBoxForBlockEditor;\n      const instructionsText = getUiText(\n        language,\n        UiTextKind.TutorialLevel1Part2_DragBlueBlock\n      );\n\n      const fingerEnd = LEVEL_1_TUTORIAL_DRAG_CYCLE.firstDragEnd;\n      const { screen } = this.state;\n      const secondsElapsedAfterLastEdit = getElapsedSeconds(\n        screen.currentTimestamp,\n        getLaterTimestamp(\n          screen.animationStartTime,\n          screen.mostRecentTutorialBlockEditorUpdateTime\n        )\n      );\n      const secondsIntoDragCycle =\n        secondsElapsedAfterLastEdit %\n        LEVEL_1_TUTORIAL_DRAG_CYCLE.totalDurationInSeconds;\n      const fingerDisplacement = scaleVec(\n        subVec(fingerEnd, fingerStart),\n        Math.min(\n          1,\n          secondsIntoDragCycle /\n            LEVEL_1_TUTORIAL_DRAG_CYCLE.movingPhaseDurationInSeconds\n        )\n      );\n      const fingerPosition = addVec(fingerStart, fingerDisplacement);\n      const isAnimationInDragPhase =\n        secondsIntoDragCycle <\n        LEVEL_1_TUTORIAL_DRAG_CYCLE.blockReleaseTimeInSeconds;\n      return {\n        kind: CanvasElementKind.Group,\n        children: [\n          {\n            kind: CanvasElementKind.Image,\n            source,\n            dx: instructionsBoxBBox.topLeft.x,\n            dy: instructionsBoxBBox.topLeft.y,\n            dw: instructionsBoxBBox.dimensions.width,\n            dh: instructionsBoxBBox.dimensions.height,\n          },\n          this.renderTextAndIconsAroundCenter(\n            instructionsText,\n            getRectCenter(instructionsBoxBBox),\n            {\n              width:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR *\n                instructionsBoxBBox.dimensions.width,\n              height:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR *\n                instructionsBoxBBox.dimensions.height,\n            }\n          ),\n          isAnimationInDragPhase\n            ? {\n                kind: CanvasElementKind.Image,\n                source: images.tutorial.finger,\n                dx: fingerPosition.x,\n                dy: fingerPosition.y,\n                dw: fingerWidth,\n                dh: fingerHeight,\n              }\n            : NULL_CANVAS_ELEMENT,\n        ],\n      };\n    }\n\n    if (\n      screen.animationKind === AnimationKind.Edit &&\n      blockEditorCanvasItems.length === 1 &&\n      blockEditorCanvasItems[0].content.length === 2 &&\n      !hasFailedLevelOneAtLeastOnce\n    ) {\n      const paletteLessThanBlockRboxMiddle = getRectCenter(\n        paletteMoveForwardBlockRbox\n      );\n      const dragStart = paletteLessThanBlockRboxMiddle;\n      const fingerStart = addVec(dragStart, {\n        x: -0.1 * fingerWidth,\n        y: -0.2 * fingerHeight,\n      });\n      const source = images.tutorial.short_instructions_box;\n      const instructionsBoxBBox = bBoxOfShortInstructionsBoxForBlockEditor;\n      const instructionsText = getUiText(\n        language,\n        UiTextKind.TutorialLevel1Part3_DragAnotherBlock\n      );\n\n      const fingerEnd = LEVEL_1_TUTORIAL_DRAG_CYCLE.secondDragEnd;\n      const { screen } = this.state;\n      const secondsElapsedAfterLastEdit = getElapsedSeconds(\n        screen.currentTimestamp,\n        getLaterTimestamp(\n          screen.animationStartTime,\n          screen.mostRecentTutorialBlockEditorUpdateTime\n        )\n      );\n      const secondsIntoDragCycle =\n        secondsElapsedAfterLastEdit %\n        LEVEL_1_TUTORIAL_DRAG_CYCLE.totalDurationInSeconds;\n      const fingerDisplacement = scaleVec(\n        subVec(fingerEnd, fingerStart),\n        Math.min(\n          1,\n          secondsIntoDragCycle /\n            LEVEL_1_TUTORIAL_DRAG_CYCLE.movingPhaseDurationInSeconds\n        )\n      );\n      const fingerPosition = addVec(fingerStart, fingerDisplacement);\n      const isAnimationInDragPhase =\n        secondsIntoDragCycle <\n        LEVEL_1_TUTORIAL_DRAG_CYCLE.blockReleaseTimeInSeconds;\n      return {\n        kind: CanvasElementKind.Group,\n        children: [\n          {\n            kind: CanvasElementKind.Image,\n            source,\n            dx: instructionsBoxBBox.topLeft.x,\n            dy: instructionsBoxBBox.topLeft.y,\n            dw: instructionsBoxBBox.dimensions.width,\n            dh: instructionsBoxBBox.dimensions.height,\n          },\n          this.renderTextAndIconsAroundCenter(\n            instructionsText,\n            getRectCenter(instructionsBoxBBox),\n            {\n              width:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR *\n                instructionsBoxBBox.dimensions.width,\n              height:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR *\n                instructionsBoxBBox.dimensions.height,\n            }\n          ),\n          isAnimationInDragPhase\n            ? {\n                kind: CanvasElementKind.Image,\n                source: images.tutorial.finger,\n                dx: fingerPosition.x,\n                dy: fingerPosition.y,\n                dw: fingerWidth,\n                dh: fingerHeight,\n              }\n            : NULL_CANVAS_ELEMENT,\n        ],\n      };\n    }\n\n    if (\n      screen.animationKind === AnimationKind.Edit &&\n      blockEditorCanvasItems.length === 1 &&\n      blockEditorCanvasItems[0].content.length >= 3 &&\n      !hasFailedLevelOneAtLeastOnce\n    ) {\n      const source = images.tutorial.short_instructions_box;\n      const instructionsBoxBBox = bBoxOfShortInstructionsBoxForBlockEditor;\n      const instructionsText = getUiText(\n        language,\n        UiTextKind.TutorialLevel1Part4_PressView\n      );\n      return {\n        kind: CanvasElementKind.Group,\n        children: [\n          {\n            kind: CanvasElementKind.Image,\n            source,\n            dx: instructionsBoxBBox.topLeft.x,\n            dy: instructionsBoxBBox.topLeft.y,\n            dw: instructionsBoxBBox.dimensions.width,\n            dh: instructionsBoxBBox.dimensions.height,\n          },\n          this.renderTextAndIconsAroundCenter(\n            instructionsText,\n            getRectCenter(instructionsBoxBBox),\n            {\n              width:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR *\n                instructionsBoxBBox.dimensions.width,\n              height:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR *\n                instructionsBoxBBox.dimensions.height,\n            }\n          ),\n        ],\n      };\n    }\n\n    if (\n      screen.animationKind === AnimationKind.PauseBattle &&\n      isReadyToFailLevelForTheFirstTime\n    ) {\n      const [protectedAreaScalePoint, protectedAreaScale] =\n        this.getBattleScreenProtectedAreaScalePointAndScaleFactor();\n\n      const source = images.tutorial.short_instructions_box;\n      const instructionsBoxBBox = bBoxOfShortInstructionsBoxForCastleBackground;\n      const instructionsText = getUiText(\n        language,\n        UiTextKind.TutorialLevel1Part5_PressPlay\n      );\n\n      return {\n        kind: CanvasElementKind.Group,\n        transform: [\n          {\n            kind: TransformKind.Translate,\n            x: protectedAreaScalePoint.x,\n            y: protectedAreaScalePoint.y,\n          },\n          {\n            kind: TransformKind.Scale,\n            x: protectedAreaScale,\n            y: protectedAreaScale,\n          },\n          {\n            kind: TransformKind.Translate,\n            x: -protectedAreaScalePoint.x,\n            y: -protectedAreaScalePoint.y,\n          },\n        ],\n        children: [\n          {\n            kind: CanvasElementKind.Image,\n            source,\n            dx: instructionsBoxBBox.topLeft.x,\n            dy: instructionsBoxBBox.topLeft.y,\n            dw: instructionsBoxBBox.dimensions.width,\n            dh: instructionsBoxBBox.dimensions.height,\n          },\n          this.renderTextAndIconsAroundCenter(\n            instructionsText,\n            getRectCenter(instructionsBoxBBox),\n            {\n              width:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR *\n                instructionsBoxBBox.dimensions.width,\n              height:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR *\n                instructionsBoxBBox.dimensions.height,\n            }\n          ),\n        ],\n      };\n    }\n\n    if (\n      screen.animationKind === AnimationKind.PauseBattle &&\n      hasFailedLevelOneAtLeastOnce &&\n      blockEditorCanvasItems[0].content.length <= 3\n    ) {\n      const [protectedAreaScalePoint, protectedAreaScale] =\n        this.getBattleScreenProtectedAreaScalePointAndScaleFactor();\n\n      const source = images.tutorial.tall_instructions_box;\n      const instructionsBoxBBox = bBoxOfTallInstructionsBoxForCastleBackground;\n      const instructionsText = getUiText(\n        language,\n        UiTextKind.TutorialLevel1Part6_TryAgain\n      );\n\n      return {\n        kind: CanvasElementKind.Group,\n        transform: [\n          {\n            kind: TransformKind.Translate,\n            x: protectedAreaScalePoint.x,\n            y: protectedAreaScalePoint.y,\n          },\n          {\n            kind: TransformKind.Scale,\n            x: protectedAreaScale,\n            y: protectedAreaScale,\n          },\n          {\n            kind: TransformKind.Translate,\n            x: -protectedAreaScalePoint.x,\n            y: -protectedAreaScalePoint.y,\n          },\n        ],\n        children: [\n          {\n            kind: CanvasElementKind.Image,\n            source,\n            dx: instructionsBoxBBox.topLeft.x,\n            dy: instructionsBoxBBox.topLeft.y,\n            dw: instructionsBoxBBox.dimensions.width,\n            dh: instructionsBoxBBox.dimensions.height,\n          },\n          this.renderTextAndIconsAroundCenter(\n            instructionsText,\n            getRectCenter(instructionsBoxBBox),\n            {\n              width:\n                TALL_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR *\n                instructionsBoxBBox.dimensions.width,\n              height:\n                TALL_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR *\n                instructionsBoxBBox.dimensions.height,\n            }\n          ),\n        ],\n      };\n    }\n\n    return NULL_CANVAS_ELEMENT;\n  }\n\n  renderLevel2TutorialCanvasElementAssumingNoBlockEditorUiAction(): CanvasElement {\n    const { screen, language, appWidth, appHeight } = this.state;\n\n    if (screen.animationKind !== AnimationKind.PauseBattle) {\n      return NULL_CANVAS_ELEMENT;\n    }\n\n    const blockEditorCanvasItems = screen.blockEditor.canvas.items;\n    const isBlockCanvasInInitialState =\n      blockEditorCanvasItems.length === 1 &&\n      blockEditorCanvasItems[0].content.length === 1;\n\n    const backgroundImageScale = appWidth / SIZING.castleInteriorImage.width;\n\n    const bBoxOfTallInstructionsBoxForCastleBackground: Rectangle =\n      ((): Rectangle => {\n        const source = images.tutorial.tall_instructions_box;\n        const width = 500 * backgroundImageScale;\n        const height = width * (source.naturalHeight / source.naturalWidth);\n        return {\n          topLeft: {\n            x: 50 * backgroundImageScale,\n            y: Math.max(-0.26 * height, appHeight - 600 * backgroundImageScale),\n          },\n          dimensions: {\n            width,\n            height,\n          },\n        };\n      })();\n\n    const [protectedAreaScalePoint, protectedAreaScale] =\n      this.getBattleScreenProtectedAreaScalePointAndScaleFactor();\n    const protectedAreaTransform: readonly Transform[] = [\n      {\n        kind: TransformKind.Translate,\n        x: protectedAreaScalePoint.x,\n        y: protectedAreaScalePoint.y,\n      },\n      {\n        kind: TransformKind.Scale,\n        x: protectedAreaScale,\n        y: protectedAreaScale,\n      },\n      {\n        kind: TransformKind.Translate,\n        x: -protectedAreaScalePoint.x,\n        y: -protectedAreaScalePoint.y,\n      },\n    ];\n\n    const instructionsBoxSource = images.tutorial.tall_instructions_box;\n    const instructionsBoxBBox = bBoxOfTallInstructionsBoxForCastleBackground;\n    const instructionsBoxCanvasElement: CanvasImage = {\n      kind: CanvasElementKind.Image,\n      source: instructionsBoxSource,\n      dx: instructionsBoxBBox.topLeft.x,\n      dy: instructionsBoxBBox.topLeft.y,\n      dw: instructionsBoxBBox.dimensions.width,\n      dh: instructionsBoxBBox.dimensions.height,\n    };\n\n    if (isBlockCanvasInInitialState) {\n      const instructionsText = getUiText(\n        language,\n        UiTextKind.TutorialLevel2Part1_MoveTheHero\n      );\n      return {\n        kind: CanvasElementKind.Group,\n        transform: protectedAreaTransform,\n        children: [\n          instructionsBoxCanvasElement,\n          this.renderTextAndIconsAroundCenter(\n            instructionsText,\n            getRectCenter(instructionsBoxBBox),\n            {\n              width:\n                TALL_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR *\n                instructionsBoxBBox.dimensions.width,\n              height:\n                TALL_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR *\n                instructionsBoxBBox.dimensions.height,\n            }\n          ),\n        ],\n      };\n    }\n\n    return NULL_CANVAS_ELEMENT;\n  }\n\n  renderLevel8TutorialCanvasElementAssumingNoBlockEditorUiAction(): CanvasElement {\n    return this.renderUseForeverBlockHintIfNeeded();\n  }\n\n  renderUseForeverBlockHintIfNeeded(): CanvasElement {\n    const { screen, language, appWidth, appHeight } = this.state;\n\n    if (screen.animationKind !== AnimationKind.PauseBattle) {\n      return NULL_CANVAS_ELEMENT;\n    }\n\n    const blockEditorCanvasItems = screen.blockEditor.canvas.items;\n    const entryPointItemContent = blockEditorCanvasItems\n      .map((item) => item.content)\n      .find(\n        (content) =>\n          content.length > 0 && content[0].kind === BlockKind.WhenBattleStarts\n      );\n    const backgroundImageScale = appWidth / SIZING.castleInteriorImage.width;\n\n    const bBoxOfTallInstructionsBoxForCastleBackground: Rectangle =\n      ((): Rectangle => {\n        const source = images.tutorial.tall_instructions_box;\n        const width = 500 * backgroundImageScale;\n        const height = width * (source.naturalHeight / source.naturalWidth);\n        return {\n          topLeft: {\n            x: 50 * backgroundImageScale,\n            y: Math.max(-0.26 * height, appHeight - 600 * backgroundImageScale),\n          },\n          dimensions: {\n            width,\n            height,\n          },\n        };\n      })();\n\n    const battleAnimationData = this.getCurrentLevelBattleAnimationData();\n\n    if (\n      battleAnimationData.didHeroSurviveLevelButFailToReachStairs &&\n      !battleAnimationData.didHeroDefeatAllEnemiesButForgetToMoveToStairs &&\n      entryPointItemContent !== undefined &&\n      entryPointItemContent.some((block) => block.kind === BlockKind.If)\n    ) {\n      const [protectedAreaScalePoint, protectedAreaScale] =\n        this.getBattleScreenProtectedAreaScalePointAndScaleFactor();\n\n      const source = images.tutorial.tall_instructions_box;\n      const instructionsBoxBBox = bBoxOfTallInstructionsBoxForCastleBackground;\n      const instructionsText = getUiText(\n        language,\n        UiTextKind.UseForeverBlockHint\n      );\n\n      return {\n        kind: CanvasElementKind.Group,\n        transform: [\n          {\n            kind: TransformKind.Translate,\n            x: protectedAreaScalePoint.x,\n            y: protectedAreaScalePoint.y,\n          },\n          {\n            kind: TransformKind.Scale,\n            x: protectedAreaScale,\n            y: protectedAreaScale,\n          },\n          {\n            kind: TransformKind.Translate,\n            x: -protectedAreaScalePoint.x,\n            y: -protectedAreaScalePoint.y,\n          },\n        ],\n        children: [\n          {\n            kind: CanvasElementKind.Image,\n            source,\n            dx: instructionsBoxBBox.topLeft.x,\n            dy: instructionsBoxBBox.topLeft.y,\n            dw: instructionsBoxBBox.dimensions.width,\n            dh: instructionsBoxBBox.dimensions.height,\n          },\n          this.renderTextAndIconsAroundCenter(\n            instructionsText,\n            getRectCenter(instructionsBoxBBox),\n            {\n              width:\n                TALL_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR *\n                instructionsBoxBBox.dimensions.width,\n              height:\n                TALL_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR *\n                instructionsBoxBBox.dimensions.height,\n            }\n          ),\n        ],\n      };\n    }\n\n    return NULL_CANVAS_ELEMENT;\n  }\n\n  renderLevel9TutorialCanvasElementAssumingNoBlockEditorUiAction(): CanvasElement {\n    const { screen, language, appWidth, appHeight } = this.state;\n    const blockEditorCanvasItems = screen.blockEditor.canvas.items;\n    const hasUserEditedLiteral = blockEditorCanvasItems.some((item) =>\n      doesBlockSequenceContainNonEmptyLiteral(item.content)\n    );\n    const backgroundImageScale = appWidth / SIZING.castleInteriorImage.width;\n\n    if (screen.animationKind === AnimationKind.PauseBattle) {\n      return this.renderUseForeverBlockHintIfNeeded();\n    }\n\n    if (screen.animationKind !== AnimationKind.Edit) {\n      return NULL_CANVAS_ELEMENT;\n    }\n\n    if (hasUserEditedLiteral) {\n      return NULL_CANVAS_ELEMENT;\n    }\n\n    const instructionsBoxBBox = ((): Rectangle => {\n      const source = images.tutorial.short_instructions_box;\n      const instructionsWidth = 650 * backgroundImageScale;\n      const instructionsHeight =\n        instructionsWidth * (source.naturalHeight / source.naturalWidth);\n      return {\n        topLeft: {\n          x: appWidth - instructionsWidth - 20 * backgroundImageScale,\n          y: appHeight - instructionsHeight - 20 * backgroundImageScale,\n        },\n        dimensions: { width: instructionsWidth, height: instructionsHeight },\n      };\n    })();\n\n    const fingerWidth = 60;\n    const fingerHeight =\n      fingerWidth *\n      (images.tutorial.finger.naturalHeight /\n        images.tutorial.finger.naturalWidth);\n\n    const blockEditorProps: BlockEditorProps<MainBlockEditorTypeParams> = {\n      config: this.getMainBlockEditorConfig(),\n      state: this.state.screen.blockEditor,\n      measureText: this.measureSvgText,\n      setState: noOp,\n    };\n    const paletteSpecs = getPaletteBlockRenderSpecs(blockEditorProps);\n    const paletteLessThanBlockRbox = paletteSpecs.find(\n      (spec) => spec.block.kind === BlockKind.LessThan\n    )!.rbox;\n    const paletteLessThanBlockRboxTop = paletteLessThanBlockRbox.topLeft.y;\n    const paletteLessThanBlockRboxBottom =\n      paletteLessThanBlockRbox.topLeft.y +\n      paletteLessThanBlockRbox.dimensions.height;\n    const PADDING = 20 + 0.3 * fingerHeight;\n    const MAX_RBOX_RIGHT = 165;\n    const requiredPaletteScrollYForLessThanBlock =\n      paletteLessThanBlockRboxTop < 0\n        ? -paletteLessThanBlockRboxTop + PADDING\n        : paletteLessThanBlockRboxBottom > appHeight\n        ? appHeight - paletteLessThanBlockRboxBottom - PADDING\n        : 0;\n    const { canvas } = screen.blockEditor;\n    const totalScroll =\n      canvas.scrollInProgress === null\n        ? canvas.scroll\n        : {\n            x:\n              canvas.scroll.x +\n              canvas.scrollInProgress.currentClientPosition.x -\n              canvas.scrollInProgress.startClientPosition.x,\n            y:\n              canvas.scroll.y +\n              canvas.scrollInProgress.currentClientPosition.y -\n              canvas.scrollInProgress.startClientPosition.y,\n          };\n    const onScreenEmptyLessThanBlockSpec =\n      ((): null | BlockRenderSpec<MainBlockEditorTypeParams> => {\n        function isOnScreenEmptyLessThanBlockSpec(\n          spec: BlockRenderSpec<MainBlockEditorTypeParams>\n        ): boolean {\n          const translatedTopLeft = addVec(totalScroll, spec.rbox.topLeft);\n          const left = translatedTopLeft.x;\n          const top = translatedTopLeft.y;\n          const right = left + spec.rbox.dimensions.width;\n          const bottom = top + spec.rbox.dimensions.height;\n          const isOnScreen =\n            0 <= left && right <= appWidth && 0 <= top && bottom <= appHeight;\n\n          const isEmpty = spec.block.args.expressions.every(\n            (expr) => expr.isLiteral && expr.source === \"\"\n          );\n\n          return (\n            isOnScreen && spec.block.kind === BlockKind.LessThan && isEmpty\n          );\n        }\n\n        const specs = getCanvasItemRenderSpecs(blockEditorProps);\n        for (const seqSpec of specs) {\n          const blockSpec = getBlockSpecFromBlockSequenceSpecSatisfying(\n            seqSpec,\n            isOnScreenEmptyLessThanBlockSpec\n          );\n          if (blockSpec !== null) {\n            return blockSpec;\n          }\n        }\n\n        return null;\n      })();\n    const onScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec =\n      ((): null | BlockRenderSpec<MainBlockEditorTypeParams> => {\n        function isOnScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec(\n          spec: BlockRenderSpec<MainBlockEditorTypeParams>\n        ): boolean {\n          const translatedTopLeft = addVec(totalScroll, spec.rbox.topLeft);\n          const left = translatedTopLeft.x;\n          const top = translatedTopLeft.y;\n          const right = left + spec.rbox.dimensions.width;\n          const bottom = top + spec.rbox.dimensions.height;\n          const isOnScreen =\n            0 <= left && right <= appWidth && 0 <= top && bottom <= appHeight;\n\n          const lhs = spec.block.args.expressions[0];\n          const isLhsHealthBlock =\n            lhs !== undefined &&\n            !lhs.isLiteral &&\n            lhs.kind === BlockKind.Health;\n\n          const rhs = spec.block.args.expressions[1];\n          const isRhsEmptyLiteral =\n            rhs !== undefined && rhs.isLiteral && rhs.source === \"\";\n\n          return (\n            isOnScreen &&\n            spec.block.kind === BlockKind.LessThan &&\n            isLhsHealthBlock &&\n            isRhsEmptyLiteral\n          );\n        }\n\n        const specs = getCanvasItemRenderSpecs(blockEditorProps);\n        for (const seqSpec of specs) {\n          const blockSpec = getBlockSpecFromBlockSequenceSpecSatisfying(\n            seqSpec,\n            isOnScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec\n          );\n          if (blockSpec !== null) {\n            return blockSpec;\n          }\n        }\n\n        return null;\n      })();\n\n    if (\n      onScreenEmptyLessThanBlockSpec === null &&\n      onScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec === null &&\n      requiredPaletteScrollYForLessThanBlock !== 0\n    ) {\n      const longSpecRboxes = paletteSpecs\n        .map((spec) => spec.rbox)\n        .filter((rbox) => {\n          const right = rbox.topLeft.x + rbox.dimensions.width;\n          return right > MAX_RBOX_RIGHT;\n        });\n      const unpaddedExclusionZones = [\n        { topLeft: { x: 0, y: 0 }, dimensions: { width: 0, height: 0 } },\n        ...longSpecRboxes,\n        {\n          topLeft: {\n            x: 0,\n            y:\n              paletteSpecs[paletteSpecs.length - 1].rbox.topLeft.y +\n              paletteSpecs[paletteSpecs.length - 1].rbox.dimensions.height,\n          },\n          dimensions: { width: 0, height: 0 },\n        },\n      ];\n      const CANDIDATE_STEP = 10;\n      const highestDragStartYCandidate = ((): number => {\n        for (let y = PADDING; y < appHeight - PADDING; y += CANDIDATE_STEP) {\n          const inExclusionZone = unpaddedExclusionZones.some((zone) => {\n            const top = zone.topLeft.y - PADDING;\n            const bottom = zone.topLeft.y + zone.dimensions.height + PADDING;\n            return top <= y && y <= bottom;\n          });\n          if (!inExclusionZone) {\n            return y;\n          }\n        }\n\n        throw new Error(\"Could not find a dragStartYCandidate.\");\n      })();\n      const lowestDragStartYCandidate = ((): number => {\n        for (let y = appHeight - PADDING; y >= PADDING; y -= CANDIDATE_STEP) {\n          const inExclusionZone = unpaddedExclusionZones.some((zone) => {\n            const top = zone.topLeft.y - PADDING;\n            const bottom = zone.topLeft.y + zone.dimensions.height + PADDING;\n            return top <= y && y <= bottom;\n          });\n          if (!inExclusionZone) {\n            return y;\n          }\n        }\n\n        throw new Error(\"Could not find a dragStartYCandidate.\");\n      })();\n      const dragStart = {\n        x: MAX_RBOX_RIGHT,\n        y:\n          requiredPaletteScrollYForLessThanBlock < 0\n            ? lowestDragStartYCandidate\n            : highestDragStartYCandidate,\n      };\n      const dragEnd = addVec(dragStart, {\n        x: 0,\n        y: requiredPaletteScrollYForLessThanBlock,\n      });\n      const instructionsText = getUiText(\n        language,\n        requiredPaletteScrollYForLessThanBlock < 0\n          ? UiTextKind.TutorialLevel9Part1_ScrollDown\n          : UiTextKind.TutorialLevel9Part2_ScrollUp\n      );\n\n      const { screen } = this.state;\n      const secondsElapsedAfterLastEdit = getElapsedSeconds(\n        screen.currentTimestamp,\n        getLaterTimestamp(\n          screen.animationStartTime,\n          screen.mostRecentTutorialBlockEditorUpdateTime\n        )\n      );\n      const secondsIntoDragCycle =\n        secondsElapsedAfterLastEdit %\n        LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteScroll.totalDurationInSeconds;\n      const movingPhaseDurationInSeconds =\n        LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteScroll.dragEndTimeInSeconds -\n        LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteScroll.dragStartTimeInSeconds;\n      const completionFactor = Math.max(\n        0,\n        Math.min(\n          1,\n          (secondsIntoDragCycle -\n            LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteScroll\n              .dragStartTimeInSeconds) /\n            movingPhaseDurationInSeconds\n        )\n      );\n      const fingerDisplacement = scaleVec(\n        subVec(dragEnd, dragStart),\n        completionFactor\n      );\n      const fingerPosition = addVec(dragStart, fingerDisplacement);\n      const isAnimationInDragPhase =\n        LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteScroll\n          .fingerDownTimeInSeconds <= secondsIntoDragCycle &&\n        secondsIntoDragCycle <=\n          LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteScroll.fingerUpTimeInSeconds;\n\n      return {\n        kind: CanvasElementKind.Group,\n        children: [\n          {\n            kind: CanvasElementKind.Image,\n            source: images.tutorial.short_instructions_box,\n            dx: instructionsBoxBBox.topLeft.x,\n            dy: instructionsBoxBBox.topLeft.y,\n            dw: instructionsBoxBBox.dimensions.width,\n            dh: instructionsBoxBBox.dimensions.height,\n          },\n          this.renderTextAndIconsAroundCenter(\n            instructionsText,\n            getRectCenter(instructionsBoxBBox),\n            {\n              width:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR *\n                instructionsBoxBBox.dimensions.width,\n              height:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR *\n                instructionsBoxBBox.dimensions.height,\n            }\n          ),\n          screen.blockEditor.uiTouch === null && isAnimationInDragPhase\n            ? {\n                kind: CanvasElementKind.Image,\n                source: images.tutorial.finger,\n                dx: fingerPosition.x,\n                dy: fingerPosition.y,\n                dw: fingerWidth,\n                dh: fingerHeight,\n              }\n            : NULL_CANVAS_ELEMENT,\n        ],\n      };\n    }\n\n    if (\n      onScreenEmptyLessThanBlockSpec === null &&\n      onScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec === null &&\n      requiredPaletteScrollYForLessThanBlock === 0\n    ) {\n      const paletteLessThanBlockRboxMiddle = getRectCenter(\n        paletteLessThanBlockRbox\n      );\n      const dragStart = paletteLessThanBlockRboxMiddle;\n      const fingerStart = addVec(dragStart, {\n        x: -0.1 * fingerWidth,\n        y: -0.2 * fingerHeight,\n      });\n      const instructionsText = getUiText(\n        language,\n        UiTextKind.TutorialLevel9Part3_DragLessThan\n      );\n      const fingerEnd =\n        LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteToCanvasDrag\n          .lessThanBlockDragEnd;\n      const { screen } = this.state;\n      const secondsElapsedAfterLastEdit = getElapsedSeconds(\n        screen.currentTimestamp,\n        getLaterTimestamp(\n          screen.animationStartTime,\n          screen.mostRecentTutorialBlockEditorUpdateTime\n        )\n      );\n      const secondsIntoDragCycle =\n        secondsElapsedAfterLastEdit %\n        LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteToCanvasDrag\n          .totalDurationInSeconds;\n      const fingerDisplacement = scaleVec(\n        subVec(fingerEnd, fingerStart),\n        Math.min(\n          1,\n          secondsIntoDragCycle /\n            LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteToCanvasDrag\n              .movingPhaseDurationInSeconds\n        )\n      );\n      const fingerPosition = addVec(fingerStart, fingerDisplacement);\n      const isAnimationInDragPhase =\n        secondsIntoDragCycle <\n        LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteToCanvasDrag\n          .blockReleaseTimeInSeconds;\n      return {\n        kind: CanvasElementKind.Group,\n        children: [\n          {\n            kind: CanvasElementKind.Image,\n            source: images.tutorial.short_instructions_box,\n            dx: instructionsBoxBBox.topLeft.x,\n            dy: instructionsBoxBBox.topLeft.y,\n            dw: instructionsBoxBBox.dimensions.width,\n            dh: instructionsBoxBBox.dimensions.height,\n          },\n          this.renderTextAndIconsAroundCenter(\n            instructionsText,\n            getRectCenter(instructionsBoxBBox),\n            {\n              width:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR *\n                instructionsBoxBBox.dimensions.width,\n              height:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR *\n                instructionsBoxBBox.dimensions.height,\n            }\n          ),\n          screen.blockEditor.uiTouch === null && isAnimationInDragPhase\n            ? {\n                kind: CanvasElementKind.Image,\n                source: images.tutorial.finger,\n                dx: fingerPosition.x,\n                dy: fingerPosition.y,\n                dw: fingerWidth,\n                dh: fingerHeight,\n              }\n            : NULL_CANVAS_ELEMENT,\n        ],\n      };\n    }\n\n    const paletteHealthBlockRbox = paletteSpecs.find(\n      (spec) => spec.block.kind === BlockKind.Health\n    )!.rbox;\n    const paletteHealthBlockRboxTop = paletteHealthBlockRbox.topLeft.y;\n    const paletteHealthBlockRboxBottom =\n      paletteHealthBlockRbox.topLeft.y +\n      paletteHealthBlockRbox.dimensions.height;\n    const requiredPaletteScrollYForHealthBlock =\n      paletteHealthBlockRboxTop < 0\n        ? -paletteHealthBlockRboxTop + PADDING\n        : paletteHealthBlockRboxBottom > appHeight\n        ? appHeight - paletteHealthBlockRboxBottom - PADDING\n        : 0;\n\n    if (\n      onScreenEmptyLessThanBlockSpec !== null &&\n      onScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec === null &&\n      requiredPaletteScrollYForHealthBlock !== 0\n    ) {\n      const longSpecRboxes = paletteSpecs\n        .map((spec) => spec.rbox)\n        .filter((rbox) => {\n          const right = rbox.topLeft.x + rbox.dimensions.width;\n          return right > MAX_RBOX_RIGHT;\n        });\n      const unpaddedExclusionZones = [\n        { topLeft: { x: 0, y: 0 }, dimensions: { width: 0, height: 0 } },\n        ...longSpecRboxes,\n        {\n          topLeft: {\n            x: 0,\n            y:\n              paletteSpecs[paletteSpecs.length - 1].rbox.topLeft.y +\n              paletteSpecs[paletteSpecs.length - 1].rbox.dimensions.height,\n          },\n          dimensions: { width: 0, height: 0 },\n        },\n      ];\n      const CANDIDATE_STEP = 10;\n      const highestDragStartYCandidate = ((): number => {\n        for (let y = PADDING; y < appHeight - PADDING; y += CANDIDATE_STEP) {\n          const inExclusionZone = unpaddedExclusionZones.some((zone) => {\n            const top = zone.topLeft.y - PADDING;\n            const bottom = zone.topLeft.y + zone.dimensions.height + PADDING;\n            return top <= y && y <= bottom;\n          });\n          if (!inExclusionZone) {\n            return y;\n          }\n        }\n\n        throw new Error(\"Could not find a dragStartYCandidate.\");\n      })();\n      const lowestDragStartYCandidate = ((): number => {\n        for (let y = appHeight - PADDING; y >= PADDING; y -= CANDIDATE_STEP) {\n          const inExclusionZone = unpaddedExclusionZones.some((zone) => {\n            const top = zone.topLeft.y - PADDING;\n            const bottom = zone.topLeft.y + zone.dimensions.height + PADDING;\n            return top <= y && y <= bottom;\n          });\n          if (!inExclusionZone) {\n            return y;\n          }\n        }\n\n        throw new Error(\"Could not find a dragStartYCandidate.\");\n      })();\n      const dragStart = {\n        x: MAX_RBOX_RIGHT,\n        y:\n          requiredPaletteScrollYForLessThanBlock < 0\n            ? lowestDragStartYCandidate\n            : highestDragStartYCandidate,\n      };\n      const dragEnd = addVec(dragStart, {\n        x: 0,\n        y: requiredPaletteScrollYForHealthBlock,\n      });\n      const instructionsText = getUiText(\n        language,\n        requiredPaletteScrollYForHealthBlock < 0\n          ? UiTextKind.TutorialLevel9Part1_ScrollDown\n          : UiTextKind.TutorialLevel9Part2_ScrollUp\n      );\n\n      const { screen } = this.state;\n      const secondsElapsedAfterLastEdit = getElapsedSeconds(\n        screen.currentTimestamp,\n        getLaterTimestamp(\n          screen.animationStartTime,\n          screen.mostRecentTutorialBlockEditorUpdateTime\n        )\n      );\n      const secondsIntoDragCycle =\n        secondsElapsedAfterLastEdit %\n        LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteScroll.totalDurationInSeconds;\n      const movingPhaseDurationInSeconds =\n        LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteScroll.dragEndTimeInSeconds -\n        LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteScroll.dragStartTimeInSeconds;\n      const completionFactor = Math.max(\n        0,\n        Math.min(\n          1,\n          (secondsIntoDragCycle -\n            LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteScroll\n              .dragStartTimeInSeconds) /\n            movingPhaseDurationInSeconds\n        )\n      );\n      const fingerDisplacement = scaleVec(\n        subVec(dragEnd, dragStart),\n        completionFactor\n      );\n      const fingerPosition = addVec(dragStart, fingerDisplacement);\n      const isAnimationInDragPhase =\n        LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteScroll\n          .fingerDownTimeInSeconds <= secondsIntoDragCycle &&\n        secondsIntoDragCycle <=\n          LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteScroll.fingerUpTimeInSeconds;\n\n      return {\n        kind: CanvasElementKind.Group,\n        children: [\n          {\n            kind: CanvasElementKind.Image,\n            source: images.tutorial.short_instructions_box,\n            dx: instructionsBoxBBox.topLeft.x,\n            dy: instructionsBoxBBox.topLeft.y,\n            dw: instructionsBoxBBox.dimensions.width,\n            dh: instructionsBoxBBox.dimensions.height,\n          },\n          this.renderTextAndIconsAroundCenter(\n            instructionsText,\n            getRectCenter(instructionsBoxBBox),\n            {\n              width:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR *\n                instructionsBoxBBox.dimensions.width,\n              height:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR *\n                instructionsBoxBBox.dimensions.height,\n            }\n          ),\n          screen.blockEditor.uiTouch === null && isAnimationInDragPhase\n            ? {\n                kind: CanvasElementKind.Image,\n                source: images.tutorial.finger,\n                dx: fingerPosition.x,\n                dy: fingerPosition.y,\n                dw: fingerWidth,\n                dh: fingerHeight,\n              }\n            : NULL_CANVAS_ELEMENT,\n        ],\n      };\n    }\n\n    if (\n      onScreenEmptyLessThanBlockSpec !== null &&\n      onScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec === null &&\n      requiredPaletteScrollYForHealthBlock === 0\n    ) {\n      const paletteHealthBlockRboxMiddle = getRectCenter(\n        paletteHealthBlockRbox\n      );\n      const dragStart = paletteHealthBlockRboxMiddle;\n      const fingerStart = addVec(dragStart, {\n        x: -0.1 * fingerWidth,\n        y: -0.2 * fingerHeight,\n      });\n      const instructionsText = getUiText(\n        language,\n        UiTextKind.TutorialLevel9Part4_DragHealth\n      );\n      const fingerEnd = addVec(totalScroll, {\n        x:\n          onScreenEmptyLessThanBlockSpec.rbox.topLeft.x +\n          SIZING.blockPadding +\n          0.3 * fingerWidth,\n        y:\n          onScreenEmptyLessThanBlockSpec.rbox.topLeft.y +\n          0.5 * onScreenEmptyLessThanBlockSpec.rbox.dimensions.height -\n          0.2 * fingerHeight,\n      });\n      const { screen } = this.state;\n      const secondsElapsedAfterLastEdit = getElapsedSeconds(\n        screen.currentTimestamp,\n        getLaterTimestamp(\n          screen.animationStartTime,\n          screen.mostRecentTutorialBlockEditorUpdateTime\n        )\n      );\n      const secondsIntoDragCycle =\n        secondsElapsedAfterLastEdit %\n        LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteToCanvasDrag\n          .totalDurationInSeconds;\n      const fingerDisplacement = scaleVec(\n        subVec(fingerEnd, fingerStart),\n        Math.min(\n          1,\n          secondsIntoDragCycle /\n            LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteToCanvasDrag\n              .movingPhaseDurationInSeconds\n        )\n      );\n      const fingerPosition = addVec(fingerStart, fingerDisplacement);\n      const isAnimationInDragPhase =\n        secondsIntoDragCycle <\n        LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteToCanvasDrag\n          .blockReleaseTimeInSeconds;\n      return {\n        kind: CanvasElementKind.Group,\n        children: [\n          {\n            kind: CanvasElementKind.Image,\n            source: images.tutorial.short_instructions_box,\n            dx: instructionsBoxBBox.topLeft.x,\n            dy: instructionsBoxBBox.topLeft.y,\n            dw: instructionsBoxBBox.dimensions.width,\n            dh: instructionsBoxBBox.dimensions.height,\n          },\n          this.renderTextAndIconsAroundCenter(\n            instructionsText,\n            getRectCenter(instructionsBoxBBox),\n            {\n              width:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR *\n                instructionsBoxBBox.dimensions.width,\n              height:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR *\n                instructionsBoxBBox.dimensions.height,\n            }\n          ),\n          screen.blockEditor.uiTouch === null && isAnimationInDragPhase\n            ? {\n                kind: CanvasElementKind.Image,\n                source: images.tutorial.finger,\n                dx: fingerPosition.x,\n                dy: fingerPosition.y,\n                dw: fingerWidth,\n                dh: fingerHeight,\n              }\n            : NULL_CANVAS_ELEMENT,\n        ],\n      };\n    }\n\n    if (onScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec !== null) {\n      const instructionsText = getUiText(\n        language,\n        UiTextKind.TutorialLevel9Part5_Type3\n      );\n\n      const { screen } = this.state;\n      const secondsElapsedAfterLastEdit = getElapsedSeconds(\n        screen.currentTimestamp,\n        getLaterTimestamp(\n          screen.animationStartTime,\n          screen.mostRecentTutorialBlockEditorUpdateTime\n        )\n      );\n      const completionFactor =\n        0.5 +\n        0.5 *\n          Math.sin(\n            (2 * Math.PI * secondsElapsedAfterLastEdit) /\n              LEVEL_9_TUTORIAL_ANIMATION_CYCLE.literalTap.fingerFlashPeriod\n          );\n      const fingerPosition = addVec(totalScroll, {\n        x:\n          onScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec.rbox.topLeft.x +\n          onScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec.rbox.dimensions\n            .width -\n          SIZING.blockPadding -\n          0.3 * fingerWidth,\n        y:\n          onScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec.rbox.topLeft.y +\n          0.5 *\n            onScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec.rbox.dimensions\n              .height -\n          0.2 * fingerHeight,\n      });\n\n      return {\n        kind: CanvasElementKind.Group,\n        children: [\n          {\n            kind: CanvasElementKind.Image,\n            source: images.tutorial.short_instructions_box,\n            dx: instructionsBoxBBox.topLeft.x,\n            dy: instructionsBoxBBox.topLeft.y,\n            dw: instructionsBoxBBox.dimensions.width,\n            dh: instructionsBoxBBox.dimensions.height,\n          },\n          this.renderTextAndIconsAroundCenter(\n            instructionsText,\n            getRectCenter(instructionsBoxBBox),\n            {\n              width:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR *\n                instructionsBoxBBox.dimensions.width,\n              height:\n                SHORT_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR *\n                instructionsBoxBBox.dimensions.height,\n            }\n          ),\n          {\n            kind: CanvasElementKind.Group,\n            alpha: completionFactor,\n            children: [\n              {\n                kind: CanvasElementKind.Image,\n                source: images.tutorial.finger,\n                dx: fingerPosition.x,\n                dy: fingerPosition.y,\n                dw: fingerWidth,\n                dh: fingerHeight,\n              },\n            ],\n          },\n        ],\n      };\n    }\n\n    return NULL_CANVAS_ELEMENT;\n  }\n\n  renderKilledEnemiesButForgotToMoveHeroToStairsHintIfNeeded(): CanvasElement {\n    const { language, appWidth, appHeight } = this.state;\n\n    const [protectedAreaScalePoint, protectedAreaScale] =\n      this.getBattleScreenProtectedAreaScalePointAndScaleFactor();\n    const protectedAreaTransform: readonly Transform[] = [\n      {\n        kind: TransformKind.Translate,\n        x: protectedAreaScalePoint.x,\n        y: protectedAreaScalePoint.y,\n      },\n      {\n        kind: TransformKind.Scale,\n        x: protectedAreaScale,\n        y: protectedAreaScale,\n      },\n      {\n        kind: TransformKind.Translate,\n        x: -protectedAreaScalePoint.x,\n        y: -protectedAreaScalePoint.y,\n      },\n    ];\n\n    const backgroundImageScale = appWidth / SIZING.castleInteriorImage.width;\n    const bBoxOfTallInstructionsBoxForCastleBackground: Rectangle =\n      ((): Rectangle => {\n        const source = images.tutorial.tall_instructions_box;\n        const width = 500 * backgroundImageScale;\n        const height = width * (source.naturalHeight / source.naturalWidth);\n        return {\n          topLeft: {\n            x: 50 * backgroundImageScale,\n            y: Math.max(-0.26 * height, appHeight - 600 * backgroundImageScale),\n          },\n          dimensions: {\n            width,\n            height,\n          },\n        };\n      })();\n\n    const instructionsBoxSource = images.tutorial.tall_instructions_box;\n    const instructionsBoxBBox = bBoxOfTallInstructionsBoxForCastleBackground;\n    const instructionsBoxCanvasElement: CanvasImage = {\n      kind: CanvasElementKind.Image,\n      source: instructionsBoxSource,\n      dx: instructionsBoxBBox.topLeft.x,\n      dy: instructionsBoxBBox.topLeft.y,\n      dw: instructionsBoxBBox.dimensions.width,\n      dh: instructionsBoxBBox.dimensions.height,\n    };\n\n    const battleAnimationData = this.getCurrentLevelBattleAnimationData();\n    if (battleAnimationData.didHeroDefeatAllEnemiesButForgetToMoveToStairs) {\n      const enemyCombinationKind =\n        getEnemyCombinationKindOfEnemiesInitiallyBlockingHeroFromStairs(\n          this.state.screen.level\n        );\n\n      if (enemyCombinationKind === \"NoEnemies\") {\n        return NULL_CANVAS_ELEMENT;\n      }\n\n      const instructionsText =\n        LOCALIZED_DEFEATED_ENEMIES_BUT_FORGOT_TO_MOVE_HERO_TO_STAIRS_MESSAGE_TEXT[\n          language\n        ][enemyCombinationKind];\n      return {\n        kind: CanvasElementKind.Group,\n        transform: protectedAreaTransform,\n        children: [\n          instructionsBoxCanvasElement,\n          this.renderTextAndIconsAroundCenter(\n            instructionsText,\n            getRectCenter(instructionsBoxBBox),\n            {\n              width:\n                TALL_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR *\n                instructionsBoxBBox.dimensions.width,\n              height:\n                TALL_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR *\n                instructionsBoxBBox.dimensions.height,\n            }\n          ),\n        ],\n      };\n    }\n\n    return NULL_CANVAS_ELEMENT;\n  }\n\n  getTutorialBlockEditorConfig(): BlockEditorConfig<TutorialBlockEditorTypeParams> {\n    const colors: BlockEditorColorProps<TutorialBlockEditorTypeParams> = {\n      ...TUTORIAL_BLOCK_EDITOR_STATIC_CONFIG.colors,\n      unreachableBlocks: this.getLevel9DragStatus().needsHealthBlockDrag\n        ? {\n            ...MAIN_BLOCK_EDITOR_STATIC_CONFIG.colors.unreachableBlocks,\n            [BlockKind.Health]: mapTriplet(\n              MAIN_BLOCK_EDITOR_STATIC_CONFIG.colors.unreachableBlocks[\n                BlockKind.Health\n              ],\n              (unreachableBlockColor) =>\n                compositeColor32(\n                  { ...unreachableBlockColor, a: 0xc0 },\n                  MAIN_BLOCK_EDITOR_STATIC_CONFIG.colors.blockLiteralBackground\n                )\n            ),\n          }\n        : TUTORIAL_BLOCK_EDITOR_STATIC_CONFIG.colors.unreachableBlocks,\n    };\n    return {\n      ...this.getMainBlockEditorConfig(),\n      componentInstanceUid: this.tutorialBlockEditorComponentInstanceUid,\n      colors,\n      blockDefs: getLocalizedTutorialBlockDefs(this.state.language),\n    };\n  }\n\n  getTutorialBlockEditorState(): BlockEditorState<TutorialBlockEditorTypeParams> {\n    const { screen } = this.state;\n\n    if (screen.level === Level.Level1) {\n      return this.getTutorialBlockEditorStateAssumingLevel1();\n    }\n\n    if (screen.level === Level.Level9) {\n      return this.getTutorialBlockEditorStateAssumingLevel9();\n    }\n\n    const EMPTY_BLOCK_EDITOR_STATE: BlockEditorState<TutorialBlockEditorTypeParams> =\n      {\n        palette: {\n          blockKinds: [],\n          scroll: { x: 0, y: 0 },\n          scrollInProgress: null,\n        },\n        uiTouch: null,\n        literalEditor: null,\n        dropdownMenu: null,\n        canvas: {\n          items: [],\n          scroll: { x: 0, y: 0 },\n          scrollInProgress: null,\n        },\n        cursor: \"default\",\n      };\n\n    return EMPTY_BLOCK_EDITOR_STATE;\n  }\n\n  getTutorialBlockEditorStateAssumingLevel1(): BlockEditorState<TutorialBlockEditorTypeParams> {\n    const { appHeight, screen, hasFailedLevelOneAtLeastOnce } = this.state;\n    const { canvas } = screen.blockEditor;\n    const entryPoint = canvas.items.find(\n      (item) =>\n        item.content.length > 0 &&\n        item.content[0].kind === BlockKind.WhenBattleStarts\n    )!;\n\n    if (!(entryPoint.content.length <= 2 && !hasFailedLevelOneAtLeastOnce)) {\n      return {\n        palette: {\n          blockKinds: [],\n          scroll: { x: 0, y: 0 },\n          scrollInProgress: null,\n        },\n        uiTouch: null,\n        literalEditor: null,\n        dropdownMenu: null,\n        canvas: {\n          items: [],\n          scroll: { x: 0, y: 0 },\n          scrollInProgress: null,\n        },\n        cursor: \"default\",\n      };\n    }\n\n    const fingerWidth = 60;\n    const fingerHeight =\n      fingerWidth *\n      (images.tutorial.finger.naturalHeight /\n        images.tutorial.finger.naturalWidth);\n    const readonlyMainBlockEditorProps: BlockEditorProps<MainBlockEditorTypeParams> =\n      {\n        config: this.getMainBlockEditorConfig(),\n        state: this.state.screen.blockEditor,\n        measureText: this.measureSvgText,\n        setState: noOp,\n      };\n    const paletteSpecs = getPaletteBlockRenderSpecs(\n      readonlyMainBlockEditorProps\n    );\n\n    const paletteMoveForwardBlockRbox = paletteSpecs.find(\n      (spec) => spec.block.kind === BlockKind.MoveForward\n    )!.rbox;\n\n    const secondsElapsedAfterLastEdit = getElapsedSeconds(\n      screen.currentTimestamp,\n      getLaterTimestamp(\n        screen.animationStartTime,\n        screen.mostRecentTutorialBlockEditorUpdateTime\n      )\n    );\n    const secondsIntoDragCycle =\n      secondsElapsedAfterLastEdit %\n      LEVEL_1_TUTORIAL_DRAG_CYCLE.totalDurationInSeconds;\n    const showInsertionMark =\n      LEVEL_1_TUTORIAL_DRAG_CYCLE.insertionMarkTimeInSeconds <\n        secondsIntoDragCycle &&\n      secondsIntoDragCycle <\n        LEVEL_1_TUTORIAL_DRAG_CYCLE.blockReleaseTimeInSeconds;\n    const isDragging =\n      secondsIntoDragCycle <\n      LEVEL_1_TUTORIAL_DRAG_CYCLE.blockReleaseTimeInSeconds;\n\n    const offscreenBlockPosition: Vec2 = { x: 0, y: appHeight };\n    const [fingerStart, fingerEnd] = ((): [Vec2, Vec2] => {\n      const paletteMoveForwardBlockRboxMiddle = getRectCenter(\n        paletteMoveForwardBlockRbox\n      );\n      const dragStart = paletteMoveForwardBlockRboxMiddle;\n      const fingerStart = addVec(dragStart, {\n        x: -0.1 * fingerWidth,\n        y: -0.2 * fingerHeight,\n      });\n      const fingerEnd =\n        entryPoint.content.length === 1\n          ? LEVEL_1_TUTORIAL_DRAG_CYCLE.firstDragEnd\n          : LEVEL_1_TUTORIAL_DRAG_CYCLE.secondDragEnd;\n      return [fingerStart, fingerEnd];\n    })();\n    const dragStart = { x: 0, y: 0 };\n    const startDisplacement = subVec(\n      paletteMoveForwardBlockRbox.topLeft,\n      offscreenBlockPosition\n    );\n    const endDisplacement = addVec(\n      startDisplacement,\n      subVec(fingerEnd, fingerStart)\n    );\n    const dragDisplacement = addVec(\n      startDisplacement,\n      scaleVec(\n        subVec(endDisplacement, startDisplacement),\n        Math.min(\n          1,\n          secondsIntoDragCycle /\n            LEVEL_1_TUTORIAL_DRAG_CYCLE.movingPhaseDurationInSeconds\n        )\n      )\n    );\n\n    const offscreenMoveForward: CanvasItem<TutorialBlockEditorTypeParams> = {\n      position: offscreenBlockPosition,\n      content: [\n        {\n          isLiteral: false,\n          kind: BlockKind.MoveForward,\n          args: {\n            expressions: [\n              { isLiteral: true, source: \"\" },\n              { isLiteral: true, source: \"\" },\n            ],\n            dropdowns: [],\n            sequences: [],\n          },\n        },\n      ],\n    };\n\n    const onscreenWhenBattleStarts: CanvasItem<TutorialBlockEditorTypeParams> =\n      {\n        position: entryPoint.position,\n        content: (\n          entryPoint.content as readonly Block<TutorialBlockEditorTypeParams>[]\n        ).slice(0, 1),\n      };\n\n    const onscreenWhenBattleStartsMoveForward: CanvasItem<TutorialBlockEditorTypeParams> =\n      {\n        ...onscreenWhenBattleStarts,\n        content: onscreenWhenBattleStarts.content.concat([\n          {\n            isLiteral: false,\n            kind: BlockKind.MoveForward,\n            args: {\n              expressions: [],\n              dropdowns: [],\n              sequences: [],\n            },\n          },\n        ]),\n      };\n\n    const onscreenWhenBattleStartsMoveForwardTwice: CanvasItem<TutorialBlockEditorTypeParams> =\n      {\n        ...onscreenWhenBattleStarts,\n        content: onscreenWhenBattleStarts.content.concat([\n          {\n            isLiteral: false,\n            kind: BlockKind.MoveForward,\n            args: {\n              expressions: [],\n              dropdowns: [],\n              sequences: [],\n            },\n          },\n          {\n            isLiteral: false,\n            kind: BlockKind.MoveForward,\n            args: {\n              expressions: [],\n              dropdowns: [],\n              sequences: [],\n            },\n          },\n        ]),\n      };\n\n    const unsafeUiTouch: UiTouchState = {\n      kind: UiTouchStateKind.BlockDrag,\n      hasPositionChangedSinceDragStart: true,\n      draggeeOriginalAddress: [CANVAS_ADDRESS_PART, 0, 0],\n      insertionMarkAddress:\n        entryPoint.content.length === 1 && showInsertionMark\n          ? [CANVAS_ADDRESS_PART, 1, 1]\n          : entryPoint.content.length === 2 && showInsertionMark\n          ? [CANVAS_ADDRESS_PART, 1, 2]\n          : null,\n      startClientPosition: dragStart,\n      currentClientPosition: addVec(dragStart, dragDisplacement),\n    };\n    const uiTouch = isDragging ? unsafeUiTouch : null;\n\n    return {\n      palette: {\n        blockKinds: [],\n        scroll: { x: 0, y: 0 },\n        scrollInProgress: null,\n      },\n      uiTouch,\n      literalEditor: null,\n      dropdownMenu: null,\n      canvas: {\n        items:\n          isDragging && entryPoint.content.length === 1\n            ? [offscreenMoveForward, onscreenWhenBattleStarts]\n            : !isDragging && entryPoint.content.length === 1\n            ? [offscreenMoveForward, onscreenWhenBattleStartsMoveForward]\n            : isDragging && entryPoint.content.length === 2\n            ? [offscreenMoveForward, onscreenWhenBattleStartsMoveForward]\n            : !isDragging && entryPoint.content.length === 2\n            ? [offscreenMoveForward, onscreenWhenBattleStartsMoveForwardTwice]\n            : [],\n        scroll: { x: 0, y: 0 },\n        scrollInProgress: null,\n      },\n      cursor: \"default\",\n    };\n  }\n\n  getTutorialBlockEditorStateAssumingLevel9(): BlockEditorState<TutorialBlockEditorTypeParams> {\n    const EMPTY_BLOCK_EDITOR_STATE: BlockEditorState<TutorialBlockEditorTypeParams> =\n      {\n        palette: {\n          blockKinds: [],\n          scroll: { x: 0, y: 0 },\n          scrollInProgress: null,\n        },\n        uiTouch: null,\n        literalEditor: null,\n        dropdownMenu: null,\n        canvas: {\n          items: [],\n          scroll: { x: 0, y: 0 },\n          scrollInProgress: null,\n        },\n        cursor: \"default\",\n      };\n\n    const { appHeight, appWidth, screen } = this.state;\n    const fingerWidth = 60;\n    const fingerHeight =\n      fingerWidth *\n      (images.tutorial.finger.naturalHeight /\n        images.tutorial.finger.naturalWidth);\n    const readonlyMainBlockEditorProps: BlockEditorProps<MainBlockEditorTypeParams> =\n      {\n        config: this.getMainBlockEditorConfig(),\n        state: this.state.screen.blockEditor,\n        measureText: this.measureSvgText,\n        setState: noOp,\n      };\n    const paletteSpecs = getPaletteBlockRenderSpecs(\n      readonlyMainBlockEditorProps\n    );\n\n    const paletteLessThanBlockRbox = paletteSpecs.find(\n      (spec) => spec.block.kind === BlockKind.LessThan\n    )!.rbox;\n\n    const paletteHealthBlockRbox = paletteSpecs.find(\n      (spec) => spec.block.kind === BlockKind.Health\n    )!.rbox;\n\n    const { canvas } = screen.blockEditor;\n    const totalScroll =\n      canvas.scrollInProgress === null\n        ? canvas.scroll\n        : {\n            x:\n              canvas.scroll.x +\n              canvas.scrollInProgress.currentClientPosition.x -\n              canvas.scrollInProgress.startClientPosition.x,\n            y:\n              canvas.scroll.y +\n              canvas.scrollInProgress.currentClientPosition.y -\n              canvas.scrollInProgress.startClientPosition.y,\n          };\n    const onScreenEmptyLessThanBlockSpec =\n      ((): null | BlockRenderSpec<MainBlockEditorTypeParams> => {\n        function isOnScreenEmptyLessThanBlockSpec(\n          spec: BlockRenderSpec<MainBlockEditorTypeParams>\n        ): boolean {\n          const translatedTopLeft = addVec(totalScroll, spec.rbox.topLeft);\n          const left = translatedTopLeft.x;\n          const top = translatedTopLeft.y;\n          const right = left + spec.rbox.dimensions.width;\n          const bottom = top + spec.rbox.dimensions.height;\n          const isOnScreen =\n            0 <= left && right <= appWidth && 0 <= top && bottom <= appHeight;\n\n          const isEmpty = spec.block.args.expressions.every(\n            (expr) => expr.isLiteral && expr.source === \"\"\n          );\n\n          return (\n            isOnScreen && spec.block.kind === BlockKind.LessThan && isEmpty\n          );\n        }\n\n        const specs = getCanvasItemRenderSpecs(readonlyMainBlockEditorProps);\n        for (const seqSpec of specs) {\n          const blockSpec = getBlockSpecFromBlockSequenceSpecSatisfying(\n            seqSpec,\n            isOnScreenEmptyLessThanBlockSpec\n          );\n          if (blockSpec !== null) {\n            return blockSpec;\n          }\n        }\n\n        return null;\n      })();\n\n    const { needsLessThanBlockDrag, needsHealthBlockDrag } =\n      this.getLevel9DragStatus();\n\n    if (!(needsLessThanBlockDrag || needsHealthBlockDrag)) {\n      return EMPTY_BLOCK_EDITOR_STATE;\n    }\n\n    const secondsElapsedAfterLastEdit = getElapsedSeconds(\n      screen.currentTimestamp,\n      getLaterTimestamp(\n        screen.animationStartTime,\n        screen.mostRecentTutorialBlockEditorUpdateTime\n      )\n    );\n    const secondsIntoDragCycle =\n      secondsElapsedAfterLastEdit %\n      LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteToCanvasDrag\n        .totalDurationInSeconds;\n    const showInsertionMark =\n      LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteToCanvasDrag\n        .healthBlockIntoLessThanBlockInsertionMarkTimeInSeconds <\n        secondsIntoDragCycle &&\n      secondsIntoDragCycle <\n        LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteToCanvasDrag\n          .blockReleaseTimeInSeconds;\n    const isDragging =\n      secondsIntoDragCycle <\n      LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteToCanvasDrag\n        .blockReleaseTimeInSeconds;\n\n    const offscreenBlockPosition: Vec2 = { x: 0, y: appHeight };\n    const [fingerStart, fingerEnd] = needsLessThanBlockDrag\n      ? (function getFingerStartAndEndForLessThanBlockDrag(): [Vec2, Vec2] {\n          const paletteLessThanBlockRboxMiddle = getRectCenter(\n            paletteLessThanBlockRbox\n          );\n          const dragStart = paletteLessThanBlockRboxMiddle;\n          const fingerStart = addVec(dragStart, {\n            x: -0.1 * fingerWidth,\n            y: -0.2 * fingerHeight,\n          });\n          const fingerEnd =\n            LEVEL_9_TUTORIAL_ANIMATION_CYCLE.paletteToCanvasDrag\n              .lessThanBlockDragEnd;\n          return [fingerStart, fingerEnd];\n        })()\n      : (function getFingerStartAndEndForHealthBlockDrag(): [Vec2, Vec2] {\n          const paletteHealthBlockRboxMiddle = getRectCenter(\n            paletteHealthBlockRbox\n          );\n          const dragStart = paletteHealthBlockRboxMiddle;\n          const fingerStart = addVec(dragStart, {\n            x: -0.1 * fingerWidth,\n            y: -0.2 * fingerHeight,\n          });\n          const fingerEnd = addVec(totalScroll, {\n            x:\n              onScreenEmptyLessThanBlockSpec!.rbox.topLeft.x +\n              SIZING.blockPadding +\n              0.3 * fingerWidth,\n            y:\n              onScreenEmptyLessThanBlockSpec!.rbox.topLeft.y +\n              0.5 * onScreenEmptyLessThanBlockSpec!.rbox.dimensions.height -\n              0.2 * fingerHeight,\n          });\n          return [fingerStart, fingerEnd];\n        })();\n    const dragStart = { x: 0, y: 0 };\n    const draggedPaletteBlockRbox = needsLessThanBlockDrag\n      ? paletteLessThanBlockRbox\n      : paletteHealthBlockRbox;\n    const startDisplacement = subVec(\n      draggedPaletteBlockRbox.topLeft,\n      offscreenBlockPosition\n    );\n    const endDisplacement = addVec(\n      startDisplacement,\n      subVec(fingerEnd, fingerStart)\n    );\n    const dragDisplacement = addVec(\n      startDisplacement,\n      scaleVec(\n        subVec(endDisplacement, startDisplacement),\n        Math.min(\n          1,\n          secondsIntoDragCycle /\n            LEVEL_1_TUTORIAL_DRAG_CYCLE.movingPhaseDurationInSeconds\n        )\n      )\n    );\n\n    const offscreenLessThan: CanvasItem<TutorialBlockEditorTypeParams> = {\n      position: offscreenBlockPosition,\n      content: [\n        {\n          isLiteral: false,\n          kind: BlockKind.LessThan,\n          args: {\n            expressions: [\n              { isLiteral: true, source: \"\" },\n              { isLiteral: true, source: \"\" },\n            ],\n            dropdowns: [],\n            sequences: [],\n          },\n        },\n      ],\n    };\n    const offscreenHealth: CanvasItem<TutorialBlockEditorTypeParams> = {\n      position: offscreenBlockPosition,\n      content: [\n        {\n          isLiteral: false,\n          kind: BlockKind.Health,\n          args: {\n            expressions: [],\n            dropdowns: [],\n            sequences: [],\n          },\n        },\n      ],\n    };\n\n    const onscreenEmptyLessThan: null | CanvasItem<TutorialBlockEditorTypeParams> =\n      onScreenEmptyLessThanBlockSpec === null\n        ? null\n        : {\n            position: addVec(\n              onScreenEmptyLessThanBlockSpec.rbox.topLeft,\n              totalScroll\n            ),\n            content: [\n              {\n                isLiteral: false,\n                kind: BlockKind.LessThan,\n                args: {\n                  expressions: [\n                    { isLiteral: true, source: \"\" },\n                    { isLiteral: true, source: \"\" },\n                  ],\n                  dropdowns: [],\n                  sequences: [],\n                },\n              },\n            ],\n          };\n\n    const hypotheticalOnscreenEmptyLessThan: CanvasItem<TutorialBlockEditorTypeParams> =\n      {\n        position: addVec(offscreenLessThan.position, endDisplacement),\n        content: offscreenLessThan.content,\n      };\n\n    const hypotheticalOnscreenFilledLessThan: null | CanvasItem<TutorialBlockEditorTypeParams> =\n      !(\n        onScreenEmptyLessThanBlockSpec !== null &&\n        onscreenEmptyLessThan !== null\n      )\n        ? null\n        : typesafeCast<CanvasItem<TutorialBlockEditorTypeParams>>({\n            position: onscreenEmptyLessThan.position,\n            content: [\n              {\n                isLiteral: false,\n                kind: BlockKind.LessThan,\n                args: {\n                  expressions: [\n                    {\n                      isLiteral: false,\n                      kind: BlockKind.Health,\n                      args: {\n                        expressions: [],\n                        dropdowns: [],\n                        sequences: [],\n                      },\n                    },\n                    onScreenEmptyLessThanBlockSpec.block.args\n                      .expressions[1] as Expression<TutorialBlockEditorTypeParams>,\n                  ],\n                  dropdowns: [],\n                  sequences: [],\n                },\n              },\n            ],\n          });\n\n    const unsafeUiTouch: UiTouchState = {\n      kind: UiTouchStateKind.BlockDrag,\n      hasPositionChangedSinceDragStart: true,\n      draggeeOriginalAddress: [CANVAS_ADDRESS_PART, 0, 0],\n      insertionMarkAddress:\n        needsHealthBlockDrag && showInsertionMark\n          ? [CANVAS_ADDRESS_PART, 1, 0, ARG_EXPRESSION_ADDRESS_PART, 0]\n          : null,\n      startClientPosition: dragStart,\n      currentClientPosition: addVec(dragStart, dragDisplacement),\n    };\n    const uiTouch = isDragging ? unsafeUiTouch : null;\n\n    return {\n      palette: {\n        blockKinds: [],\n        scroll: { x: 0, y: 0 },\n        scrollInProgress: null,\n      },\n      uiTouch,\n      literalEditor: null,\n      dropdownMenu: null,\n      canvas: {\n        items:\n          isDragging && needsLessThanBlockDrag\n            ? [offscreenLessThan]\n            : !isDragging && needsLessThanBlockDrag\n            ? [offscreenLessThan, hypotheticalOnscreenEmptyLessThan]\n            : isDragging && needsHealthBlockDrag\n            ? [offscreenHealth, onscreenEmptyLessThan!]\n            : !isDragging && needsHealthBlockDrag\n            ? [offscreenHealth, hypotheticalOnscreenFilledLessThan!]\n            : [],\n        scroll: { x: 0, y: 0 },\n        scrollInProgress: null,\n      },\n      cursor: \"default\",\n    };\n  }\n\n  getMinimapBlockEditorConfig(): BlockEditorConfig<MinimapBlockEditorTypeParams> {\n    const { appHeight } = this.state;\n    const safeAreaInsets = this.state.safeAreaInsets.insets;\n    const mainConfig = this.getMainBlockEditorConfig();\n    return {\n      ...mainConfig,\n      blockDefs: {\n        ...mainConfig.blockDefs,\n        ...mapBlockKindRecordToInactiveBlockKindRecord(\n          mainConfig.blockDefs,\n          identity\n        ),\n      },\n      componentInstanceUid: this.minimapBlockEditorComponentInstanceUid,\n      colors: MINIMAP_BLOCK_EDITOR_STATIC_CONFIG.colors,\n      sizing: {\n        ...MINIMAP_BLOCK_EDITOR_STATIC_CONFIG.sizingWithoutWindowDependentProperties,\n\n        editorBounds: {\n          topLeft: { x: 0, y: 0 },\n          dimensions: { width: this.state.appWidth, height: appHeight },\n        },\n        paletteBounds: {\n          topLeft: { x: 0, y: 0 },\n          dimensions: { width: 0, height: appHeight },\n        },\n        canvasBounds: {\n          topLeft: { x: 0, y: 0 },\n          dimensions: {\n            width: this.state.appWidth,\n            height: appHeight,\n          },\n        },\n\n        blockDropdownMenuDimensions: {\n          width: 0.5 * (this.state.appWidth - SIZING.paletteWidth),\n          height: 0.5 * appHeight,\n        },\n\n        dividers: [],\n\n        paletteLeftPadding: safeAreaInsets.left + SIZING.minPalettePadding,\n        paletteRightPadding: SIZING.minPalettePadding,\n        paletteTopPadding: safeAreaInsets.top + SIZING.minPalettePadding,\n        paletteBottomPadding: safeAreaInsets.bottom + SIZING.minPalettePadding,\n      },\n    };\n  }\n\n  getMinimapBlockEditorState(): BlockEditorState<MinimapBlockEditorTypeParams> {\n    const { screen } = this.state;\n    const elapsedSeconds = getElapsedSeconds(\n      screen.currentTimestamp,\n      screen.animationStartTime\n    );\n    const battleEvents = this.getCurrentLevelBattleEvents();\n    const battleElapsedSeconds =\n      screen.animationKind === AnimationKind.PlayBattle\n        ? screen.battleAnimationOffsetSeconds + elapsedSeconds\n        : screen.animationKind === AnimationKind.PauseBattle\n        ? screen.battleAnimationOffsetSeconds\n        : 0;\n    const executedBlockAddress = getBattleAnimationData(\n      getInitialLevelState(screen.level),\n      battleEvents,\n      battleElapsedSeconds\n    ).executedBlockAddress ?? [CANVAS_ADDRESS_PART, 0, 0];\n\n    const { blockEditor } = this.state.screen;\n    const activeCanvasItemPosition: Vec2 = { x: 20, y: 20 };\n    const activeCanvasItem = blockEditor.canvas.items\n      .filter(\n        (item) =>\n          item.content.length >= 1 &&\n          item.content[0].kind === BlockKind.WhenBattleStarts\n      )\n      .map((item) => ({\n        content: flagBlockSequenceAsInactiveExcept(\n          executedBlockAddress.slice(2),\n          item.content,\n          []\n        ),\n        position: activeCanvasItemPosition,\n      }))[0];\n    if (activeCanvasItem === undefined) {\n      throw new Error(\n        \"Impossible: Called getMinimapBlockEditorState when there was no active canvas item.\"\n      );\n    }\n\n    const withoutCanvasScroll: BlockEditorState<MinimapBlockEditorTypeParams> =\n      {\n        ...blockEditor,\n        palette: {\n          blockKinds: [],\n          scroll: { x: 0, y: 0 },\n          scrollInProgress: null,\n        },\n        uiTouch: null,\n        canvas: {\n          items: [activeCanvasItem],\n          scroll: { x: 0, y: 0 },\n          scrollInProgress: null,\n        },\n      };\n\n    const minimapBlockEditorProps: BlockEditorProps<MinimapBlockEditorTypeParams> =\n      {\n        config: this.getMinimapBlockEditorConfig(),\n        state: withoutCanvasScroll,\n\n        measureText: this.measureSvgText,\n        setState: noOp,\n      };\n    const spec = getBlockSequenceRenderSpec({\n      editorProps: minimapBlockEditorProps,\n      position: activeCanvasItemPosition,\n      sequence: activeCanvasItem.content,\n      address: [],\n      insertionMark: null,\n      draggeeOriginalAddress: null,\n      hasDragPositionChangedSinceDragStart: false,\n      dropdownMenuDropdownAddress: null,\n      isUnreachable: false,\n    });\n    const rbox = getRboxAtAddressFromBlockSequence(\n      executedBlockAddress.slice(2),\n      spec\n    );\n    if (rbox === null) {\n      return withoutCanvasScroll;\n    }\n\n    const { appHeight } = this.state;\n    return {\n      ...withoutCanvasScroll,\n      canvas: {\n        ...withoutCanvasScroll.canvas,\n        scroll: {\n          x: withoutCanvasScroll.canvas.scroll.x,\n          y: -(rbox.topLeft.y + 0.5 * rbox.dimensions.height) + 0.5 * appHeight,\n        },\n      },\n    };\n  }\n\n  renderMinimapHoleCanvasElement(): CanvasElement {\n    const { screen } = this.state;\n    const elapsedSeconds = getElapsedSeconds(\n      screen.currentTimestamp,\n      screen.animationStartTime\n    );\n\n    const battleElapsedSeconds =\n      screen.animationKind === AnimationKind.PlayBattle\n        ? screen.battleAnimationOffsetSeconds + elapsedSeconds\n        : screen.animationKind === AnimationKind.PauseBattle\n        ? screen.battleAnimationOffsetSeconds\n        : 0;\n\n    if (battleElapsedSeconds === 0) {\n      return NULL_CANVAS_ELEMENT;\n    }\n\n    const bbox = this.getMinimapBBox();\n    return {\n      kind: CanvasElementKind.Clear,\n      x: bbox.topLeft.x,\n      y: bbox.topLeft.y,\n      w: bbox.dimensions.width,\n      h: bbox.dimensions.height,\n    };\n  }\n\n  getMinimapBBox(): Rectangle {\n    const { appWidth, appHeight } = this.state;\n    const backgroundImageScale = appWidth / SIZING.castleInteriorImage.width;\n    const width = 400 * backgroundImageScale;\n\n    return {\n      topLeft: { x: 20, y: 20 },\n      dimensions: {\n        width,\n        height: (appHeight / appWidth) * width,\n      },\n    };\n  }\n\n  dualRenderAssumingPortraitOrientation(): DualRenderOutput {\n    const text = getUiText(\n      this.state.language,\n      UiTextKind.PleaseSwitchToLandscape\n    );\n    const requestContent = text.includes(TEXT_SENTINELS.useManualBreaking)\n      ? text\n          .replace(TEXT_SENTINELS.useManualBreaking, \"\")\n          .split(TEXT_SENTINELS.break_)\n          .map((segmentText, i) => (\n            <span className=\"ManualBreak__Segment\" key={i}>\n              {segmentText}\n            </span>\n          ))\n      : text;\n    const reactElement = (\n      <div className=\"App\">\n        <div className=\"PleaseSwitchToLandscapeRequestContainer\">\n          <p className=\"PleaseSwitchToLandscapeRequest\">{requestContent}</p>\n        </div>\n      </div>\n    );\n    return { reactElement, canvasElement: NULL_CANVAS_ELEMENT };\n  }\n\n  updateCanvas(): void {\n    const { devicePixelRatio } = window;\n    const { frontCanvasCtx } = this;\n    const { appWidth, appHeight } = this.state;\n    frontCanvasCtx.canvas.width = devicePixelRatio * appWidth;\n    frontCanvasCtx.canvas.height = devicePixelRatio * appHeight;\n\n    frontCanvasCtx.resetTransform();\n\n    frontCanvasCtx.clearRect(\n      0,\n      0,\n      frontCanvasCtx.canvas.width,\n      frontCanvasCtx.canvas.height\n    );\n\n    frontCanvasCtx.scale(devicePixelRatio, devicePixelRatio);\n\n    const { canvasElement } = this.dualRender();\n    if (canvasElement !== null) {\n      paintCanvasElement(canvasElement, frontCanvasCtx);\n    }\n  }\n\n  onResize(): void {\n    getSafeAreaInsets().then((safeAreaInsets) => {\n      this.setState({\n        appWidth: window.innerWidth,\n        appHeight: window.innerHeight,\n        orientationType: getCurrentScreenOrientation(),\n        safeAreaInsets,\n      });\n    });\n  }\n\n  onDocumentVisibilityChange(): void {\n    if (Capacitor.isNativePlatform()) {\n      return;\n    }\n\n    if (document.visibilityState === \"hidden\") {\n      this.onAppDeactivated();\n\n      this.logEventIfMounted({\n        kind: LogEventKind.AppActiveStatusChanged,\n        statusChangeKind: \"Deactivated_Web\",\n        timestampDateDotNow: Date.now(),\n      });\n    }\n\n    if (document.visibilityState === \"visible\") {\n      this.onAppReactivated();\n\n      this.logEventIfMounted({\n        kind: LogEventKind.AppActiveStatusChanged,\n        statusChangeKind: \"Activated_Web\",\n        timestampDateDotNow: Date.now(),\n      });\n    }\n  }\n\n  onCapacitorAppStateChange(capacitorAppState: CapacitorAppState): void {\n    if (!Capacitor.isNativePlatform()) {\n      return;\n    }\n\n    if (capacitorAppState.isActive) {\n      this.onAppReactivated();\n\n      this.logEventIfMounted({\n        kind: LogEventKind.AppActiveStatusChanged,\n        statusChangeKind: \"Activated_Native\",\n        timestampDateDotNow: Date.now(),\n      });\n    } else {\n      this.onAppDeactivated();\n\n      this.logEventIfMounted({\n        kind: LogEventKind.AppActiveStatusChanged,\n        statusChangeKind: \"Deactivated_Native\",\n        timestampDateDotNow: Date.now(),\n      });\n    }\n  }\n\n  onAppReactivated(): void {\n    this.audioManager.resume();\n  }\n\n  onAppDeactivated(): void {\n    if (this.state.screen.animationKind === AnimationKind.PlayBattle) {\n      this.pauseBattle();\n    }\n  }\n\n  onWindowTouchStart(event: TouchEvent): void {\n    if (event.target !== this.blockLiteralEditorInput) {\n      event.preventDefault();\n    }\n\n    if (event.touches.length !== 1) {\n      this.setState({\n        onlyTouchStartButton: null,\n        onlyTouchDepressedButton: null,\n      });\n      return;\n    }\n\n    this.onOnlyPointerDown({\n      x: event.touches[0].clientX,\n      y: event.touches[0].clientY,\n    });\n  }\n\n  onWindowMouseDown(event: MouseEvent): void {\n    this.onOnlyPointerDown({\n      x: event.clientX,\n      y: event.clientY,\n    });\n  }\n\n  onOnlyPointerDown(clientPosition: Vec2): void {\n    const onlyTouchStartButton = getButtonAt(\n      clientPosition,\n      this.state,\n      this.getButtonClickDetectorResources()\n    );\n    this.setState({\n      onlyTouchStartButton,\n      onlyTouchDepressedButton: onlyTouchStartButton,\n    });\n  }\n\n  onWindowTouchMove(event: TouchEvent): void {\n    if (event.touches.length !== 1) {\n      this.setState({\n        onlyTouchStartButton: null,\n        onlyTouchDepressedButton: null,\n      });\n      return;\n    }\n\n    const touchedButton = getButtonAt(\n      {\n        x: event.touches[0].clientX,\n        y: event.touches[0].clientY,\n      },\n      this.state,\n      this.getButtonClickDetectorResources()\n    );\n    const onlyTouchDepressedButton =\n      touchedButton === this.state.onlyTouchStartButton ? touchedButton : null;\n    this.setState({\n      onlyTouchDepressedButton,\n    });\n  }\n\n  onWindowMouseMove(event: MouseEvent): void {\n    this.setState({\n      mouseClientPosition: { x: event.clientX, y: event.clientY },\n    });\n    this.onOnlyPointerMove({\n      x: event.clientX,\n      y: event.clientY,\n    });\n  }\n\n  onOnlyPointerMove(clientPosition: Vec2): void {\n    const touchedButton = getButtonAt(\n      clientPosition,\n      this.state,\n      this.getButtonClickDetectorResources()\n    );\n    const onlyTouchDepressedButton =\n      touchedButton === this.state.onlyTouchStartButton ? touchedButton : null;\n    this.setState({\n      onlyTouchDepressedButton,\n    });\n  }\n\n  onWindowTouchEnd(event: TouchEvent): void {\n    if (!(event.touches.length === 0 && event.changedTouches.length === 1)) {\n      this.setState({\n        onlyTouchStartButton: null,\n        onlyTouchDepressedButton: null,\n      });\n      return;\n    }\n\n    this.onOnlyPointerUp({\n      x: event.changedTouches[0].clientX,\n      y: event.changedTouches[0].clientY,\n    });\n  }\n\n  onWindowMouseUp(event: MouseEvent): void {\n    this.onOnlyPointerUp({\n      x: event.clientX,\n      y: event.clientY,\n    });\n  }\n\n  onOnlyPointerUp(clientPosition: Vec2): void {\n    const { onlyTouchStartButton } = this.state;\n    const onlyTouchDepressedButton = getButtonAt(\n      clientPosition,\n      this.state,\n      this.getButtonClickDetectorResources()\n    );\n    if (\n      !(\n        onlyTouchDepressedButton === onlyTouchStartButton &&\n        onlyTouchDepressedButton !== null\n      )\n    ) {\n      this.setState({\n        onlyTouchStartButton: null,\n        onlyTouchDepressedButton: null,\n      });\n      return;\n    }\n\n    this.setState({\n      onlyTouchStartButton: null,\n      onlyTouchDepressedButton: null,\n    });\n\n    switch (onlyTouchDepressedButton) {\n      case ButtonKind.HomeScreenStart:\n      case ButtonKind.Settings:\n      case ButtonKind.NextLevel:\n      case ButtonKind.PuzzleScreenLeft:\n      case ButtonKind.PuzzleScreenMiddle:\n      case ButtonKind.PuzzleScreenRight:\n      case ButtonKind.Language:\n      case ButtonKind.Credits:\n      case ButtonKind.OpenConfirmResetToLevelOneScreen:\n      case ButtonKind.SettingsScreenClose:\n      case ButtonKind.ConfirmResetToLevelOne:\n      case ButtonKind.CancelResetToLevelOne:\n      case ButtonKind.ConfirmResetToLevelOneScreenClose:\n      case ButtonKind.InEditorMiniBattleScreen:\n        this.audioManager.scheduleSounds([\n          { kind: SoundKind.ButtonPop, timeInSeconds: 0 },\n        ]);\n        break;\n\n      case ButtonKind.SettingsScreenSecondaryClose:\n      case ButtonKind.CreditsScreenClose:\n        // Do nothing.\n        break;\n\n      default:\n        typecheckedAssertNever(onlyTouchDepressedButton);\n    }\n\n    switch (onlyTouchDepressedButton) {\n      case ButtonKind.HomeScreenStart:\n        this.onHomeScreenStartButtonClick();\n        break;\n      case ButtonKind.Settings:\n        this.onHomeScreenSettingsButtonClick();\n        break;\n      case ButtonKind.NextLevel:\n        this.onNextLevelButtonClick();\n        break;\n      case ButtonKind.PuzzleScreenLeft:\n        this.onPuzzleScreenLeftButtonClick();\n        break;\n      case ButtonKind.PuzzleScreenMiddle:\n        this.onPuzzleScreenMiddleButtonClick();\n        break;\n      case ButtonKind.PuzzleScreenRight:\n        this.onPuzzleScreenRightButtonClick();\n        break;\n      case ButtonKind.Language:\n        this.onLanguageButtonClick();\n        break;\n      case ButtonKind.Credits:\n        this.onCreditsButtonClick();\n        break;\n      case ButtonKind.OpenConfirmResetToLevelOneScreen:\n        this.onOpenConfirmResetToLevelOneScreenButtonClick();\n        break;\n      case ButtonKind.SettingsScreenClose:\n        this.onSettingsScreenCloseButtonClick();\n        break;\n      case ButtonKind.SettingsScreenSecondaryClose:\n        this.onSettingsScreenSecondaryCloseButtonClick();\n        break;\n      case ButtonKind.ConfirmResetToLevelOneScreenClose:\n        this.onConfirmResetToLevelOneCloseButtonClick();\n        break;\n      case ButtonKind.CreditsScreenClose:\n        this.onCreditsScreenCloseButtonClick();\n        break;\n      case ButtonKind.ConfirmResetToLevelOne:\n        this.onConfirmResetToLevelOneButtonClick();\n        break;\n      case ButtonKind.CancelResetToLevelOne:\n        this.onCancelResetToLevelOneButtonClick();\n        break;\n      case ButtonKind.InEditorMiniBattleScreen:\n        this.onInEditorMiniBattleScreenClick();\n        break;\n      default:\n        typecheckedAssertNever(onlyTouchDepressedButton);\n    }\n  }\n\n  onEditBlocksButtonClick(): void {\n    const { screen } = this.state;\n\n    this.audioManager.cancel(this.battleSoundsId);\n    allowSleep();\n\n    if (\n      ![AnimationKind.PlayBattle, AnimationKind.PauseBattle].includes(\n        screen.animationKind\n      )\n    ) {\n      return;\n    }\n\n    const animationStartTime = getCurrentTimestamp();\n\n    const updateAnimationTimeIfAnimationIsStillInProgress = (): void => {\n      const currentState = this.state;\n      if (\n        !(\n          currentState.screen.animationKind === AnimationKind.ViewToEdit &&\n          areTimestampsEqual(\n            currentState.screen.animationStartTime,\n            animationStartTime\n          )\n        )\n      ) {\n        return;\n      }\n\n      const currentTimestamp = getCurrentTimestamp();\n      const elapsedSeconds = getElapsedSeconds(\n        currentTimestamp,\n        currentState.screen.animationStartTime\n      );\n\n      if (elapsedSeconds > SCREEN_TRANSITION_ANIMATION_SECONDS) {\n        this.setState(\n          {\n            ...currentState,\n            screen: {\n              blockEditor: {\n                ...currentState.screen.blockEditor,\n                literalEditor: null,\n              },\n              level: currentState.screen.level,\n\n              animationKind: AnimationKind.Edit,\n              animationStartTime: currentTimestamp,\n              currentTimestamp,\n              battleAnimationOffsetSeconds: 0,\n              prevLevelBlockEditor: getDummyBlockEditorState(),\n              mostRecentTutorialBlockEditorUpdateTime:\n                this.state.screen.mostRecentTutorialBlockEditorUpdateTime,\n            },\n          },\n          this.getEditScreenAnimationUpdaterIfOnTutorialLevel(currentTimestamp)\n        );\n        return;\n      }\n\n      this.setState({\n        ...currentState,\n        screen: {\n          ...currentState.screen,\n          currentTimestamp,\n        },\n      });\n\n      requestAnimationFrame(updateAnimationTimeIfAnimationIsStillInProgress);\n    };\n\n    this.setState(\n      {\n        screen: {\n          blockEditor: screen.blockEditor,\n          level: screen.level,\n\n          animationKind: AnimationKind.ViewToEdit,\n          animationStartTime,\n          currentTimestamp: getCurrentTimestamp(),\n          battleAnimationOffsetSeconds: 0,\n          prevLevelBlockEditor: getDummyBlockEditorState(),\n          mostRecentTutorialBlockEditorUpdateTime:\n            this.state.screen.mostRecentTutorialBlockEditorUpdateTime,\n        },\n      },\n      updateAnimationTimeIfAnimationIsStillInProgress\n    );\n\n    this.logEventIfMounted({\n      kind: LogEventKind.ButtonPressed,\n      buttonKind: \"Edit\",\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  onViewMapButtonClick(): void {\n    this.startEditToViewAnimation();\n    this.logEventIfMounted({\n      kind: LogEventKind.ButtonPressed,\n      buttonKind: \"ViewMap\",\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  onInEditorMiniBattleScreenClick(): void {\n    this.startEditToViewAnimation();\n    this.logEventIfMounted({\n      kind: LogEventKind.ButtonPressed,\n      buttonKind: \"InEditorMiniBattleScreen\",\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  startEditToViewAnimation(): void {\n    const { screen } = this.state;\n\n    if (screen.animationKind !== AnimationKind.Edit) {\n      return;\n    }\n\n    const animationStartTime = getCurrentTimestamp();\n\n    this.setState(\n      {\n        screen: {\n          blockEditor: screen.blockEditor,\n          level: screen.level,\n\n          animationKind: AnimationKind.EditToView,\n          animationStartTime,\n          currentTimestamp: getCurrentTimestamp(),\n          battleAnimationOffsetSeconds: 0,\n          prevLevelBlockEditor: getDummyBlockEditorState(),\n          mostRecentTutorialBlockEditorUpdateTime:\n            this.state.screen.mostRecentTutorialBlockEditorUpdateTime,\n        },\n      },\n      this.getViewScreenEnterAnimationUpdater(\n        animationStartTime,\n        AnimationKind.EditToView\n      )\n    );\n  }\n\n  onResumeBattleButtonClick(): void {\n    const { screen } = this.state;\n\n    if (screen.animationKind !== AnimationKind.PauseBattle) {\n      throw new Error(\n        \"The Resume Battle button was clicked when screen.animationKind was \" +\n          screen.animationKind\n      );\n    }\n\n    {\n      const battleAnimationData = this.getCurrentLevelBattleAnimationData();\n      if (\n        battleAnimationData.didHeroSurviveLevelButFailToReachStairs ||\n        battleAnimationData.battleStatus === BattleStatus.Victory ||\n        battleAnimationData.battleStatus === BattleStatus.Defeat\n      ) {\n        return;\n      }\n    }\n\n    this.battleSoundsId = this.audioManager.scheduleSounds(\n      this.getBattleSoundsForCurrentLevel()\n    );\n\n    keepAwake();\n\n    const animationStartTime = getCurrentTimestamp();\n    const updateAnimationTimeIfAnimationIsStillInProgress = (): void => {\n      const currentState = this.state;\n      if (\n        !(\n          currentState.screen.animationKind === AnimationKind.PlayBattle &&\n          areTimestampsEqual(\n            currentState.screen.animationStartTime,\n            animationStartTime\n          )\n        )\n      ) {\n        return;\n      }\n\n      const battleAnimationData = this.getCurrentLevelBattleAnimationData();\n\n      if (battleAnimationData.didHeroSurviveLevelButFailToReachStairs) {\n        const currentTimestamp = getCurrentTimestamp();\n        const elapsedSeconds = getElapsedSeconds(\n          currentTimestamp,\n          screen.animationStartTime\n        );\n        const battleAnimationOffsetSeconds =\n          screen.battleAnimationOffsetSeconds + elapsedSeconds;\n        this.setState(\n          {\n            ...currentState,\n            screen: {\n              ...currentState.screen,\n              animationKind: AnimationKind.PauseBattle,\n              animationStartTime: currentTimestamp,\n              currentTimestamp,\n              battleAnimationOffsetSeconds,\n            },\n            hasFailedLevelOneAtLeastOnce:\n              currentState.screen.level === Level.Level1\n                ? true\n                : currentState.hasFailedLevelOneAtLeastOnce,\n          },\n          this.getPauseScreenAnimationUpdater(currentTimestamp)\n        );\n\n        return;\n      }\n\n      if (battleAnimationData.battleStatus === BattleStatus.Victory) {\n        this.audioManager.cancel(this.puzzleMusicId);\n      }\n\n      if (\n        battleAnimationData.battleStatus === BattleStatus.Victory &&\n        !this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption\n      ) {\n        this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption =\n          true;\n\n        this.logEventIfMounted({\n          kind: LogEventKind.LevelCompleted,\n          completedLevel: screen.level,\n          canvasItems: screen.blockEditor.canvas.items,\n          timestampDateDotNow: Date.now(),\n        });\n\n        allowSleep();\n      }\n\n      if (\n        (battleAnimationData.battleStatus === BattleStatus.Defeat ||\n          battleAnimationData.didHeroSurviveLevelButFailToReachStairs) &&\n        !this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption\n      ) {\n        this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption =\n          true;\n\n        this.logEventIfMounted({\n          kind: LogEventKind.LevelFailed,\n          failedLevel: screen.level,\n          didHeroSurvive: battleAnimationData.levelState.squares.some(\n            (square) => square.kind === SquareKind.Hero && square.health > 0\n          ),\n          canvasItems: screen.blockEditor.canvas.items,\n          timestampDateDotNow: Date.now(),\n        });\n\n        allowSleep();\n      }\n\n      this.setState({\n        ...currentState,\n        screen: {\n          ...currentState.screen,\n          currentTimestamp: getCurrentTimestamp(),\n        },\n      });\n      requestAnimationFrame(updateAnimationTimeIfAnimationIsStillInProgress);\n    };\n\n    this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption = false;\n\n    this.setState(\n      {\n        screen: {\n          blockEditor: screen.blockEditor,\n          level: screen.level,\n          animationKind: AnimationKind.PlayBattle,\n          animationStartTime,\n          currentTimestamp: getCurrentTimestamp(),\n          battleAnimationOffsetSeconds: screen.battleAnimationOffsetSeconds,\n          prevLevelBlockEditor: getDummyBlockEditorState(),\n          mostRecentTutorialBlockEditorUpdateTime:\n            this.state.screen.mostRecentTutorialBlockEditorUpdateTime,\n        },\n      },\n      updateAnimationTimeIfAnimationIsStillInProgress\n    );\n\n    this.logEventsIfMounted([\n      {\n        kind: LogEventKind.ButtonPressed,\n        buttonKind: \"ResumeBattle\",\n        timestampDateDotNow: Date.now(),\n      },\n      {\n        kind: LogEventKind.BattleResumed,\n        battleAnimationOffsetSeconds: screen.battleAnimationOffsetSeconds,\n        canvasItems: screen.blockEditor.canvas.items,\n        timestampDateDotNow: Date.now(),\n      },\n    ]);\n  }\n\n  onPauseBattleButtonClick(): void {\n    this.pauseBattle();\n    this.logEventIfMounted({\n      kind: LogEventKind.ButtonPressed,\n      buttonKind: \"PauseBattle\",\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  pauseBattle(): void {\n    const { screen } = this.state;\n\n    this.audioManager.cancel(this.battleSoundsId);\n    allowSleep();\n\n    const currentTimestamp = getCurrentTimestamp();\n    const elapsedSeconds = getElapsedSeconds(\n      currentTimestamp,\n      screen.animationStartTime\n    );\n    const battleAnimationOffsetSeconds =\n      screen.battleAnimationOffsetSeconds + elapsedSeconds;\n    this.setState(\n      {\n        screen: {\n          ...screen,\n          animationKind: AnimationKind.PauseBattle,\n          animationStartTime: currentTimestamp,\n          currentTimestamp,\n          battleAnimationOffsetSeconds,\n        },\n      },\n      this.getPauseScreenAnimationUpdater(currentTimestamp)\n    );\n\n    this.logEventIfMounted({\n      kind: LogEventKind.BattlePaused,\n      battleAnimationOffsetSeconds,\n      canvasItems: screen.blockEditor.canvas.items,\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  onNextLevelButtonClick(): void {\n    const nextLevel = getNextLevel(this.state.screen.level);\n    if (nextLevel === null) {\n      throw new Error(\"There is no next level.\");\n    }\n\n    const animationStartTime = getCurrentTimestamp();\n    const updateAnimationTimeIfAnimationIsStillInProgress = (): void => {\n      const currentState = this.state;\n      if (\n        !(\n          currentState.screen.animationKind === AnimationKind.NextLevel &&\n          areTimestampsEqual(\n            currentState.screen.animationStartTime,\n            animationStartTime\n          )\n        )\n      ) {\n        return;\n      }\n\n      const currentTimestamp = getCurrentTimestamp();\n      const elapsedSeconds = getElapsedSeconds(\n        currentTimestamp,\n        currentState.screen.animationStartTime\n      );\n\n      // We need to transition over 2 screens, so we double the usual time.\n      if (elapsedSeconds > 2 * SCREEN_TRANSITION_ANIMATION_SECONDS) {\n        this.playPuzzleMusic();\n        this.setState(\n          {\n            ...currentState,\n            screen: {\n              ...currentState.screen,\n              animationKind: AnimationKind.PauseBattle,\n              animationStartTime: currentTimestamp,\n              currentTimestamp,\n              battleAnimationOffsetSeconds: 0,\n            },\n          },\n          this.getPauseScreenAnimationUpdater(currentTimestamp)\n        );\n        return;\n      }\n\n      this.setState({\n        ...currentState,\n        screen: {\n          ...currentState.screen,\n          currentTimestamp,\n        },\n      });\n\n      requestAnimationFrame(updateAnimationTimeIfAnimationIsStillInProgress);\n\n      this.logEventIfMounted({\n        kind: LogEventKind.ButtonPressed,\n        buttonKind: \"NextLevel\",\n        timestampDateDotNow: Date.now(),\n      });\n    };\n    this.setState(\n      {\n        screen: {\n          blockEditor: getStartingBlockEditorStateForLevel(nextLevel),\n          level: nextLevel,\n          animationKind: AnimationKind.NextLevel,\n          animationStartTime,\n          currentTimestamp: animationStartTime,\n          battleAnimationOffsetSeconds: 0,\n          prevLevelBlockEditor: this.state.screen.blockEditor,\n          mostRecentTutorialBlockEditorUpdateTime:\n            this.state.screen.mostRecentTutorialBlockEditorUpdateTime,\n        },\n      },\n      updateAnimationTimeIfAnimationIsStillInProgress\n    );\n  }\n\n  onPuzzleScreenLeftButtonClick(): void {\n    const { screen } = this.state;\n    if (\n      ![AnimationKind.PlayBattle, AnimationKind.PauseBattle].includes(\n        screen.animationKind\n      ) ||\n      isScreenShowingVictory(screen, this.getCurrentLevelBattleEvents)\n    ) {\n      return;\n    }\n\n    this.onEditBlocksButtonClick();\n  }\n\n  onPuzzleScreenMiddleButtonClick(): void {\n    const { screen, hasFailedLevelOneAtLeastOnce } = this.state;\n    const isBattleFinished =\n      isScreenShowingVictory(screen, this.getCurrentLevelBattleEvents) ||\n      isScreenShowingDefeat(screen, this.getCurrentLevelBattleEvents);\n\n    if (\n      screen.animationKind === AnimationKind.PlayBattle &&\n      !isBattleFinished\n    ) {\n      this.onPauseBattleButtonClick();\n      return;\n    }\n\n    const blockEditorCanvasItems = screen.blockEditor.canvas.items;\n    const isLevelOneAndCodeExecutionForbidden =\n      screen.level === Level.Level1 &&\n      !hasFailedLevelOneAtLeastOnce &&\n      blockEditorCanvasItems[0].content.length < 3;\n\n    if (\n      screen.animationKind === AnimationKind.PauseBattle &&\n      areAnyBlocksReachable(screen) &&\n      !isLevelOneAndCodeExecutionForbidden\n    ) {\n      this.onResumeBattleButtonClick();\n      return;\n    }\n\n    if (screen.animationKind === AnimationKind.Edit) {\n      this.onViewMapButtonClick();\n      return;\n    }\n  }\n\n  onPuzzleScreenRightButtonClick(): void {\n    this.onReturnHomeButtonClick();\n  }\n\n  onLanguageButtonClick(): void {\n    const newLanguage =\n      {\n        [UiLanguage.English]: UiLanguage.Japanese,\n        [UiLanguage.Japanese]: UiLanguage.JapaneseHiragana,\n        [UiLanguage.JapaneseHiragana]: UiLanguage.English,\n      }[this.state.language] ?? DEFAULT_LANGUAGE;\n    this.setState({\n      language: newLanguage,\n    });\n    this.logEventsIfMounted([\n      {\n        kind: LogEventKind.ButtonPressed,\n        buttonKind: \"ChangeLanguage\",\n        timestampDateDotNow: Date.now(),\n      },\n      {\n        kind: LogEventKind.LanguageChanged,\n        newLanguage,\n        timestampDateDotNow: Date.now(),\n      },\n    ]);\n  }\n\n  onCreditsButtonClick(): void {\n    const animationStartTime = getCurrentTimestamp();\n    const updateAnimationTimeIfAnimationIsStillInProgress = (): void => {\n      const currentState = this.state;\n      if (\n        !(\n          currentState.screen.animationKind === AnimationKind.Credits &&\n          areTimestampsEqual(\n            currentState.screen.animationStartTime,\n            animationStartTime\n          )\n        )\n      ) {\n        return;\n      }\n\n      const currentTimestamp = getCurrentTimestamp();\n      const elapsedSeconds = getElapsedSeconds(\n        currentTimestamp,\n        currentState.screen.animationStartTime\n      );\n\n      if (elapsedSeconds > this.getCreditRollDurationInSeconds()) {\n        this.setState({\n          ...currentState,\n          screen: {\n            ...currentState.screen,\n            animationKind: AnimationKind.StaticSettings,\n          },\n        });\n        return;\n      }\n\n      this.setState({\n        ...currentState,\n        screen: {\n          ...currentState.screen,\n          currentTimestamp,\n        },\n      });\n\n      requestAnimationFrame(updateAnimationTimeIfAnimationIsStillInProgress);\n    };\n\n    this.setState(\n      {\n        screen: {\n          ...this.state.screen,\n          animationKind: AnimationKind.Credits,\n          animationStartTime,\n          currentTimestamp: animationStartTime,\n        },\n      },\n      updateAnimationTimeIfAnimationIsStillInProgress\n    );\n\n    this.logEventIfMounted({\n      kind: LogEventKind.ButtonPressed,\n      buttonKind: \"OpenCredits\",\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  onOpenConfirmResetToLevelOneScreenButtonClick(): void {\n    const currentTimestamp = getCurrentTimestamp();\n    this.setState((prevState) => ({\n      ...prevState,\n      screen: {\n        ...prevState.screen,\n        animationKind: AnimationKind.StaticConfirmResetToLevelOne,\n        animationStartTime: currentTimestamp,\n        currentTimestamp,\n      },\n    }));\n    this.logEventIfMounted({\n      kind: LogEventKind.ButtonPressed,\n      buttonKind: \"OpenConfirmResetToLevelOneScreen\",\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  onSettingsScreenCloseButtonClick(): void {\n    this.closeSettingsScreen();\n    this.logEventIfMounted({\n      kind: LogEventKind.ButtonPressed,\n      buttonKind: \"CloseSettingsWithPrimaryButton\",\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  onSettingsScreenSecondaryCloseButtonClick(): void {\n    this.closeSettingsScreen();\n    this.logEventIfMounted({\n      kind: LogEventKind.ButtonPressed,\n      buttonKind: \"CloseSettingsWithSecondaryButton\",\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  onConfirmResetToLevelOneCloseButtonClick(): void {\n    this.closeSettingsScreen();\n    this.logEventIfMounted({\n      kind: LogEventKind.ButtonPressed,\n      buttonKind: \"CloseConfirmResetToLevelOneScreen\",\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  closeSettingsScreen(): void {\n    const animationStartTime = getCurrentTimestamp();\n    const updateAnimationTimeIfAnimationIsStillInProgress = (): void => {\n      const currentState = this.state;\n      if (\n        !(\n          currentState.screen.animationKind === AnimationKind.CloseSettings &&\n          areTimestampsEqual(\n            currentState.screen.animationStartTime,\n            animationStartTime\n          )\n        )\n      ) {\n        return;\n      }\n\n      const currentTimestamp = getCurrentTimestamp();\n      const elapsedSeconds = getElapsedSeconds(\n        currentTimestamp,\n        currentState.screen.animationStartTime\n      );\n\n      if (elapsedSeconds > SCREEN_TRANSITION_ANIMATION_SECONDS) {\n        this.setState({\n          ...currentState,\n          screen: {\n            ...currentState.screen,\n            animationKind: AnimationKind.StaticHome,\n          },\n        });\n        return;\n      }\n\n      this.setState({\n        ...currentState,\n        screen: {\n          ...currentState.screen,\n          currentTimestamp,\n        },\n      });\n\n      requestAnimationFrame(updateAnimationTimeIfAnimationIsStillInProgress);\n    };\n\n    const { screen } = this.state;\n    this.setState(\n      {\n        screen: {\n          blockEditor: screen.blockEditor,\n          level: screen.level,\n\n          animationKind: AnimationKind.CloseSettings,\n          animationStartTime,\n          currentTimestamp: animationStartTime,\n          battleAnimationOffsetSeconds: 0,\n          prevLevelBlockEditor: getDummyBlockEditorState(),\n          mostRecentTutorialBlockEditorUpdateTime:\n            this.state.screen.mostRecentTutorialBlockEditorUpdateTime,\n        },\n      },\n      updateAnimationTimeIfAnimationIsStillInProgress\n    );\n  }\n\n  onCreditsScreenCloseButtonClick(): void {\n    const animationStartTime = getCurrentTimestamp();\n    this.setState({\n      screen: {\n        ...this.state.screen,\n        animationKind: AnimationKind.StaticSettings,\n        animationStartTime,\n        currentTimestamp: animationStartTime,\n      },\n    });\n    this.logEventIfMounted({\n      kind: LogEventKind.ButtonPressed,\n      buttonKind: \"CloseCredits\",\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  onConfirmResetToLevelOneButtonClick(): void {\n    this.setState(\n      {\n        screen: {\n          ...this.state.screen,\n          blockEditor: getStartingBlockEditorStateForLevel(Level.Level1),\n          level: Level.Level1,\n        },\n        hasFailedLevelOneAtLeastOnce: false,\n      },\n      this.startLoadingBarProgressAnimation\n    );\n    this.logEventIfMounted({\n      kind: LogEventKind.ButtonPressed,\n      buttonKind: \"ConfirmResetToLevelOne\",\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  onCancelResetToLevelOneButtonClick(): void {\n    const currentTimestamp = getCurrentTimestamp();\n    this.setState((prevState) => ({\n      ...prevState,\n      screen: {\n        ...prevState.screen,\n        animationKind: AnimationKind.StaticSettings,\n        animationStartTime: currentTimestamp,\n        currentTimestamp,\n      },\n    }));\n    this.logEventIfMounted({\n      kind: LogEventKind.ButtonPressed,\n      buttonKind: \"CancelResetToLevelOne\",\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  onLiteralEditorFormSubmit(event: SubmitEvent): void {\n    event.preventDefault();\n    this.closeLiteralEditor();\n  }\n\n  onLiteralEditorInputChange(): void {\n    const newLiteralSource = this.blockLiteralEditorInput.value;\n    this.setState(\n      (state): State => {\n        const { screen } = state;\n\n        if (screen.blockEditor.literalEditor === null) {\n          return state;\n        }\n\n        const newLiteralEditorState = {\n          ...screen.blockEditor.literalEditor,\n          literalSource: newLiteralSource,\n        };\n\n        return {\n          ...state,\n          screen: {\n            ...screen,\n            blockEditor: {\n              ...screen.blockEditor,\n              canvas: updateCanvasToMatchLiteralEditor(\n                screen.blockEditor.canvas,\n                newLiteralEditorState\n              ),\n              literalEditor: newLiteralEditorState,\n            },\n          },\n        };\n      },\n      () => this.setBlockEditorState(identity)\n    );\n  }\n\n  onCloseLiteralEditorButtonClick(): void {\n    this.closeLiteralEditor();\n  }\n\n  closeLiteralEditor(): void {\n    this.setState((state): State => {\n      const { screen } = state;\n\n      if (screen.blockEditor.literalEditor === null) {\n        return state;\n      }\n\n      return {\n        ...state,\n        screen: {\n          ...screen,\n          blockEditor: {\n            ...screen.blockEditor,\n            canvas: updateCanvasToMatchLiteralEditor(\n              screen.blockEditor.canvas,\n              screen.blockEditor.literalEditor\n            ),\n            literalEditor: null,\n          },\n        },\n      };\n    });\n  }\n\n  measureSvgText(\n    text: string,\n    fontFamily: string,\n    fontSizePx: number\n  ): Dimensions {\n    const key = getSvgTextDimensionCacheKey(text, fontFamily, fontSizePx);\n    const cached = svgTextDimensionCache.get(key);\n    if (cached !== undefined) {\n      return cached;\n    }\n\n    const dimensions = this.measureSvgTextIgnoringCache(\n      text,\n      fontFamily,\n      fontSizePx\n    );\n    svgTextDimensionCache.set(key, dimensions);\n    return dimensions;\n  }\n\n  measureSvgTextIgnoringCache(\n    text: string,\n    fontFamily: string,\n    fontSizePx: number\n  ): Dimensions {\n    const { ghostSvg } = this;\n    const { appWidth, appHeight } = this.state;\n\n    const svgRect = ghostSvg.getBoundingClientRect();\n    const isCorrectSize =\n      svgRect.width === appWidth && svgRect.height === appHeight;\n    if (!isCorrectSize) {\n      ghostSvg.setAttribute(\"width\", String(this.state.appWidth));\n      ghostSvg.setAttribute(\"height\", String(this.state.appHeight));\n    }\n\n    const textElement = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"text\"\n    );\n    textElement.textContent = text;\n    textElement.style.fontFamily = fontFamily;\n    textElement.style.fontSize = fontSizePx + \"px\";\n    ghostSvg.appendChild(textElement);\n    const bbox = textElement.getBBox();\n    ghostSvg.removeChild(textElement);\n\n    return bbox;\n  }\n\n  measureCanvasText({\n    text,\n    ...font\n  }: { readonly text: string } & CanvasTextFont): Dimensions {\n    const { tempCanvasCtx } = this;\n\n    applyFont(font, tempCanvasCtx);\n    const output = tempCanvasCtx.measureText(text);\n\n    return {\n      width: output.width,\n      height: output.actualBoundingBoxAscent + output.actualBoundingBoxDescent,\n    };\n  }\n\n  getMainBlockEditorConfig(): BlockEditorConfig<MainBlockEditorTypeParams> {\n    const { appHeight } = this.state;\n    const safeAreaInsets = this.state.safeAreaInsets.insets;\n    return {\n      componentInstanceUid: this.mainBlockEditorComponentInstanceUid,\n\n      sizing: {\n        ...MAIN_BLOCK_EDITOR_STATIC_CONFIG.sizingWithoutWindowDependentProperties,\n\n        editorBounds: {\n          topLeft: { x: 0, y: 0 },\n          dimensions: { width: this.state.appWidth, height: appHeight },\n        },\n        paletteBounds: {\n          topLeft: { x: 0, y: 0 },\n          dimensions: { width: SIZING.paletteWidth, height: appHeight },\n        },\n        canvasBounds: {\n          topLeft: { x: SIZING.paletteWidth, y: 0 },\n          dimensions: {\n            width: this.state.appWidth - SIZING.paletteWidth,\n            height: appHeight,\n          },\n        },\n\n        blockDropdownMenuDimensions: {\n          width: 0.5 * (this.state.appWidth - SIZING.paletteWidth),\n          height: 0.5 * appHeight,\n        },\n\n        dividers: [\n          {\n            topLeft: { x: SIZING.paletteWidth, y: 0 },\n            dimensions: {\n              width: 1,\n              height: appHeight,\n            },\n          },\n        ],\n\n        paletteLeftPadding: safeAreaInsets.left + SIZING.minPalettePadding,\n        paletteRightPadding: SIZING.minPalettePadding,\n        paletteTopPadding: safeAreaInsets.top + SIZING.minPalettePadding,\n        paletteBottomPadding: safeAreaInsets.bottom + SIZING.minPalettePadding,\n      },\n      colors: MAIN_BLOCK_EDITOR_STATIC_CONFIG.colors,\n      fonts: MAIN_BLOCK_EDITOR_STATIC_CONFIG.fonts,\n      blockDefs: disableBlockDeletionBasedOnLevel(\n        getLocalizedBlockDefs(this.state.language),\n        this.state.screen.level\n      ),\n      dropdownTexts: getLocalizedDropdownTexts(this.state.language),\n    };\n  }\n\n  setBlockEditorState(\n    updateBlockEditorState: (\n      oldState: BlockEditorState<MainBlockEditorTypeParams>\n    ) => BlockEditorState<MainBlockEditorTypeParams>,\n    optionalCallback?: (\n      newState: BlockEditorState<MainBlockEditorTypeParams>\n    ) => void\n  ): void {\n    let newBlockEditorState: null | BlockEditorState<MainBlockEditorTypeParams> =\n      null;\n    let didUpdateCanvasItems = false;\n    let shouldPlayBlockPop = false;\n\n    this.setState(\n      (oldState) => {\n        const oldBlockEditorState = oldState.screen.blockEditor;\n        newBlockEditorState = updateBlockEditorState(oldBlockEditorState);\n\n        if (oldBlockEditorState !== newBlockEditorState) {\n          this.lastBlockEditorSetStateCallTime = getCurrentTimestamp();\n        }\n\n        if (oldState.screen.level === Level.Level1) {\n          const isDraggingWhenBattleStartsBlock =\n            newBlockEditorState.uiTouch !== null &&\n            newBlockEditorState.uiTouch.kind === UiTouchStateKind.BlockDrag &&\n            newBlockEditorState.uiTouch.draggeeOriginalAddress[0] ===\n              CANVAS_ADDRESS_PART &&\n            newBlockEditorState.uiTouch.draggeeOriginalAddress[1] === 0 &&\n            newBlockEditorState.uiTouch.draggeeOriginalAddress[2] === 0;\n          const isScrollingCanvas =\n            newBlockEditorState.canvas.scrollInProgress !== null;\n          const shouldPreventUpdate =\n            isDraggingWhenBattleStartsBlock || isScrollingCanvas;\n\n          if (shouldPreventUpdate) {\n            newBlockEditorState = oldState.screen.blockEditor;\n          }\n\n          newBlockEditorState = {\n            ...newBlockEditorState,\n            canvas: {\n              ...newBlockEditorState.canvas,\n              items: newBlockEditorState.canvas.items.filter(\n                (item) =>\n                  item.content.length >= 1 &&\n                  item.content[0].kind === BlockKind.WhenBattleStarts\n              ),\n            },\n          };\n        }\n\n        const hasUserEditedLiteral = newBlockEditorState.canvas.items.some(\n          (item) => doesBlockSequenceContainNonEmptyLiteral(item.content)\n        );\n        if (oldState.screen.level === Level.Level9 && !hasUserEditedLiteral) {\n          newBlockEditorState = {\n            ...newBlockEditorState,\n            canvas: {\n              ...newBlockEditorState.canvas,\n              scroll: oldBlockEditorState.canvas.scroll,\n              scrollInProgress: null,\n            },\n          };\n        }\n\n        const isLevel1AndShouldResetMostRecentTutorialBlockEditorUpdateTime =\n          oldState.screen.level === Level.Level1 &&\n          areAnyTrue([\n            oldBlockEditorState.uiTouch !== null &&\n              newBlockEditorState.uiTouch === null,\n\n            oldBlockEditorState.palette.scrollInProgress !== null &&\n              newBlockEditorState.palette.scrollInProgress === null,\n\n            oldBlockEditorState.canvas.scrollInProgress !== null &&\n              newBlockEditorState.canvas.scroll === null,\n\n            oldBlockEditorState.canvas.items.length === 1 &&\n              newBlockEditorState.canvas.items.length === 1 &&\n              newBlockEditorState.canvas.items[0].content.length !==\n                oldBlockEditorState.canvas.items[0].content.length,\n          ]);\n        const isLevel9AndShouldResetMostRecentTutorialBlockEditorUpdateTime =\n          oldState.screen.level === Level.Level9 &&\n          areAnyTrue([\n            oldBlockEditorState.uiTouch !== null &&\n              newBlockEditorState.uiTouch === null,\n\n            oldBlockEditorState.palette.scrollInProgress !== null &&\n              newBlockEditorState.palette.scrollInProgress === null,\n\n            oldBlockEditorState.canvas.scrollInProgress !== null &&\n              newBlockEditorState.canvas.scroll === null,\n\n            oldBlockEditorState.literalEditor !== null &&\n              newBlockEditorState.literalEditor === null,\n\n            oldBlockEditorState.canvas.items.length !==\n              newBlockEditorState.canvas.items.length,\n\n            oldBlockEditorState.canvas.items.length ===\n              newBlockEditorState.canvas.items.length &&\n              oldBlockEditorState.canvas.items.some((oldItem, itemIndex) => {\n                const newItem = newBlockEditorState!.canvas.items[itemIndex];\n                return oldItem.content.length !== newItem.content.length;\n              }),\n          ]);\n        const shouldResetMostRecentTutorialBlockEditorUpdateTime =\n          isLevel1AndShouldResetMostRecentTutorialBlockEditorUpdateTime ||\n          isLevel9AndShouldResetMostRecentTutorialBlockEditorUpdateTime;\n\n        shouldPlayBlockPop =\n          shouldPlayBlockPop ||\n          didConnectBlock(oldBlockEditorState, newBlockEditorState);\n\n        didUpdateCanvasItems = !(\n          oldBlockEditorState.canvas.items.length ===\n            newBlockEditorState.canvas.items.length &&\n          oldBlockEditorState.canvas.items.every((oldItem, i) =>\n            areCanvasItemsEqual(oldItem, newBlockEditorState!.canvas.items[i])\n          )\n        );\n\n        return {\n          screen: {\n            ...oldState.screen,\n            blockEditor: newBlockEditorState,\n            mostRecentTutorialBlockEditorUpdateTime:\n              shouldResetMostRecentTutorialBlockEditorUpdateTime\n                ? getCurrentTimestamp()\n                : oldState.screen.mostRecentTutorialBlockEditorUpdateTime,\n          },\n        };\n      },\n      () => {\n        if (newBlockEditorState === null) {\n          throw new Error(\n            \"Expected newBlockEditorState to be set by the time ReactComponent.prototype.setState callback was called.\"\n          );\n        }\n\n        if (shouldPlayBlockPop) {\n          this.audioManager.scheduleSounds([\n            { kind: SoundKind.BlockPop, timeInSeconds: 0, gain: 0.2 },\n          ]);\n        }\n\n        if (didUpdateCanvasItems) {\n          this.logEventIfMounted({\n            kind: LogEventKind.BlockEditorCanvasItemsUpdated,\n            canvasItems: newBlockEditorState!.canvas.items,\n            timestampDateDotNow: Date.now(),\n          });\n        }\n\n        if (optionalCallback !== undefined) {\n          optionalCallback(newBlockEditorState);\n        }\n      }\n    );\n  }\n\n  onHomeScreenStartButtonClick(): void {\n    this.audioManager.cancel(this.homeMusicId);\n    this.playPuzzleMusic();\n\n    const animationStartTime = getCurrentTimestamp();\n    const { screen } = this.state;\n    this.setState(\n      {\n        screen: {\n          blockEditor: screen.blockEditor,\n          level: screen.level,\n\n          animationKind: AnimationKind.HomeToView,\n          animationStartTime,\n          currentTimestamp: animationStartTime,\n          battleAnimationOffsetSeconds: 0,\n          prevLevelBlockEditor: getDummyBlockEditorState(),\n          mostRecentTutorialBlockEditorUpdateTime:\n            this.state.screen.mostRecentTutorialBlockEditorUpdateTime,\n        },\n      },\n      this.getViewScreenEnterAnimationUpdater(\n        animationStartTime,\n        AnimationKind.HomeToView\n      )\n    );\n\n    this.logEventIfMounted({\n      kind: LogEventKind.ButtonPressed,\n      buttonKind: \"HomeScreenStart\",\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  playPuzzleMusic(): void {\n    this.audioManager.cancel(this.puzzleMusicId);\n    this.puzzleMusicId = this.audioManager.scheduleSounds([PUZZLE_MUSIC]);\n  }\n\n  onHomeScreenSettingsButtonClick(): void {\n    const animationStartTime = getCurrentTimestamp();\n    const updateAnimationTimeIfAnimationIsStillInProgress = (): void => {\n      const currentState = this.state;\n      if (\n        !(\n          currentState.screen.animationKind === AnimationKind.OpenSettings &&\n          areTimestampsEqual(\n            currentState.screen.animationStartTime,\n            animationStartTime\n          )\n        )\n      ) {\n        return;\n      }\n\n      const currentTimestamp = getCurrentTimestamp();\n      const elapsedSeconds = getElapsedSeconds(\n        currentTimestamp,\n        currentState.screen.animationStartTime\n      );\n\n      if (elapsedSeconds > SCREEN_TRANSITION_ANIMATION_SECONDS) {\n        this.setState({\n          ...currentState,\n          screen: {\n            ...currentState.screen,\n            animationKind: AnimationKind.StaticSettings,\n          },\n        });\n        return;\n      }\n\n      this.setState({\n        ...currentState,\n        screen: {\n          ...currentState.screen,\n          currentTimestamp,\n        },\n      });\n\n      requestAnimationFrame(updateAnimationTimeIfAnimationIsStillInProgress);\n    };\n\n    const { screen } = this.state;\n    this.setState(\n      {\n        screen: {\n          blockEditor: screen.blockEditor,\n          level: screen.level,\n\n          animationKind: AnimationKind.OpenSettings,\n          animationStartTime,\n          currentTimestamp: animationStartTime,\n          battleAnimationOffsetSeconds: 0,\n          prevLevelBlockEditor: getDummyBlockEditorState(),\n          mostRecentTutorialBlockEditorUpdateTime:\n            this.state.screen.mostRecentTutorialBlockEditorUpdateTime,\n        },\n      },\n      updateAnimationTimeIfAnimationIsStillInProgress\n    );\n\n    this.logEventIfMounted({\n      kind: LogEventKind.ButtonPressed,\n      buttonKind: \"OpenSettings\",\n      timestampDateDotNow: Date.now(),\n    });\n  }\n\n  onReturnHomeButtonClick(): void {\n    const { screen } = this.state;\n\n    this.audioManager.cancel(this.battleSoundsId);\n    this.audioManager.cancel(this.puzzleMusicId);\n    allowSleep();\n    this.playHomeMusic();\n\n    if (screen.animationKind === AnimationKind.Edit) {\n      this.startEditToHomeAnimation();\n      this.logEventIfMounted({\n        kind: LogEventKind.ButtonPressed,\n        buttonKind: \"ReturnHome\",\n        timestampDateDotNow: Date.now(),\n      });\n      return;\n    }\n\n    if (\n      [AnimationKind.PlayBattle, AnimationKind.PauseBattle].includes(\n        screen.animationKind\n      )\n    ) {\n      this.startViewToHomeAnimation();\n      this.logEventIfMounted({\n        kind: LogEventKind.ButtonPressed,\n        buttonKind: \"ReturnHome\",\n        timestampDateDotNow: Date.now(),\n      });\n      return;\n    }\n  }\n\n  playHomeMusic(timeInSecondsOverride?: number): void {\n    this.audioManager.cancel(this.homeMusicId);\n    this.homeMusicId = this.audioManager.scheduleSounds([\n      timeInSecondsOverride === undefined\n        ? HOME_MUSIC\n        : { ...HOME_MUSIC, timeInSeconds: timeInSecondsOverride },\n    ]);\n  }\n\n  startEditToHomeAnimation(): void {\n    const currentScreen = this.state.screen;\n    const currentTimestamp = getCurrentTimestamp();\n    this.setState(\n      {\n        screen: {\n          blockEditor: currentScreen.blockEditor,\n          level: currentScreen.level,\n\n          animationKind: AnimationKind.EditToHome,\n          animationStartTime: currentTimestamp,\n          currentTimestamp,\n          battleAnimationOffsetSeconds: 0,\n          prevLevelBlockEditor: getDummyBlockEditorState(),\n          mostRecentTutorialBlockEditorUpdateTime:\n            this.state.screen.mostRecentTutorialBlockEditorUpdateTime,\n        },\n      },\n      this.getHomeScreenEnterAnimationUpdater(\n        currentTimestamp,\n        AnimationKind.EditToHome,\n        false\n      )\n    );\n  }\n\n  startViewToHomeAnimation(): void {\n    const currentScreen = this.state.screen;\n    const currentTimestamp = getCurrentTimestamp();\n    const levelUpOnHomeScreen =\n      isScreenShowingVictory(currentScreen, this.getCurrentLevelBattleEvents) &&\n      currentScreen.level < LAST_LEVEL;\n    this.setState(\n      {\n        screen: {\n          blockEditor: currentScreen.blockEditor,\n          level: currentScreen.level,\n\n          animationKind: AnimationKind.ViewToHome,\n          animationStartTime: currentTimestamp,\n          currentTimestamp,\n          battleAnimationOffsetSeconds: 0,\n          prevLevelBlockEditor: getDummyBlockEditorState(),\n          mostRecentTutorialBlockEditorUpdateTime:\n            this.state.screen.mostRecentTutorialBlockEditorUpdateTime,\n        },\n      },\n      this.getHomeScreenEnterAnimationUpdater(\n        currentTimestamp,\n        AnimationKind.ViewToHome,\n        levelUpOnHomeScreen\n      )\n    );\n  }\n\n  getHomeScreenEnterAnimationUpdater(\n    animationStartTime: Timestamp,\n    animationKind: AnimationKind,\n    levelUpOnHomeScreen: boolean\n  ): () => void {\n    const updateAnimationTimeIfAnimationIsStillInProgress = (): void => {\n      const currentState = this.state;\n      if (\n        !(\n          currentState.screen.animationKind === animationKind &&\n          areTimestampsEqual(\n            currentState.screen.animationStartTime,\n            animationStartTime\n          )\n        )\n      ) {\n        return;\n      }\n\n      const currentTimestamp = getCurrentTimestamp();\n      const elapsedSeconds = getElapsedSeconds(\n        currentTimestamp,\n        currentState.screen.animationStartTime\n      );\n\n      if (elapsedSeconds > SCREEN_TRANSITION_ANIMATION_SECONDS) {\n        const unsafeNextLevel = currentState.screen.level + 1;\n        const newLevelAndBlockEditorState: Partial<ScreenState> =\n          levelUpOnHomeScreen\n            ? {\n                level: unsafeNextLevel,\n                blockEditor:\n                  getStartingBlockEditorStateForLevel(unsafeNextLevel),\n              }\n            : {};\n        this.setState({\n          ...currentState,\n          screen: {\n            ...currentState.screen,\n            ...newLevelAndBlockEditorState,\n            animationKind: AnimationKind.StaticHome,\n          },\n        });\n        return;\n      }\n\n      this.setState({\n        ...currentState,\n        screen: {\n          ...currentState.screen,\n          currentTimestamp,\n        },\n      });\n\n      requestAnimationFrame(updateAnimationTimeIfAnimationIsStillInProgress);\n    };\n    return updateAnimationTimeIfAnimationIsStillInProgress;\n  }\n\n  getViewScreenEnterAnimationUpdater(\n    animationStartTime: Timestamp,\n    animationKind: AnimationKind\n  ): () => void {\n    const updateAnimationTimeIfAnimationIsStillInProgress = (): void => {\n      const currentState = this.state;\n      if (\n        !(\n          currentState.screen.animationKind === animationKind &&\n          areTimestampsEqual(\n            currentState.screen.animationStartTime,\n            animationStartTime\n          )\n        )\n      ) {\n        return;\n      }\n\n      const currentTimestamp = getCurrentTimestamp();\n      const elapsedSeconds = getElapsedSeconds(\n        currentTimestamp,\n        currentState.screen.animationStartTime\n      );\n\n      if (elapsedSeconds > SCREEN_TRANSITION_ANIMATION_SECONDS) {\n        this.setState(\n          {\n            ...currentState,\n            screen: {\n              ...currentState.screen,\n              animationKind: AnimationKind.PauseBattle,\n              animationStartTime: currentTimestamp,\n              currentTimestamp,\n              battleAnimationOffsetSeconds: 0,\n            },\n          },\n          this.getPauseScreenAnimationUpdater(currentTimestamp)\n        );\n        return;\n      }\n\n      this.setState({\n        ...currentState,\n        screen: {\n          ...currentState.screen,\n          currentTimestamp,\n        },\n      });\n\n      requestAnimationFrame(updateAnimationTimeIfAnimationIsStillInProgress);\n    };\n    return updateAnimationTimeIfAnimationIsStillInProgress;\n  }\n\n  getPauseScreenAnimationUpdater(animationStartTime: Timestamp): () => void {\n    const updateAnimationTimeIfAnimationIsStillInProgress = (): void => {\n      const currentState = this.state;\n      if (\n        !(\n          currentState.screen.animationKind === AnimationKind.PauseBattle &&\n          areTimestampsEqual(\n            currentState.screen.animationStartTime,\n            animationStartTime\n          )\n        )\n      ) {\n        return;\n      }\n\n      const battleAnimationData = this.getCurrentLevelBattleAnimationData();\n\n      if (\n        battleAnimationData.battleStatus === BattleStatus.Victory &&\n        !this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption\n      ) {\n        this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption =\n          true;\n\n        this.logEventIfMounted({\n          kind: LogEventKind.LevelCompleted,\n          completedLevel: currentState.screen.level,\n          canvasItems: currentState.screen.blockEditor.canvas.items,\n          timestampDateDotNow: Date.now(),\n        });\n      }\n\n      if (\n        (battleAnimationData.battleStatus === BattleStatus.Defeat ||\n          battleAnimationData.didHeroSurviveLevelButFailToReachStairs) &&\n        !this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption\n      ) {\n        this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption =\n          true;\n\n        this.logEventIfMounted({\n          kind: LogEventKind.LevelFailed,\n          failedLevel: currentState.screen.level,\n          didHeroSurvive: battleAnimationData.levelState.squares.some(\n            (square) => square.kind === SquareKind.Hero && square.health > 0\n          ),\n          canvasItems: currentState.screen.blockEditor.canvas.items,\n          timestampDateDotNow: Date.now(),\n        });\n      }\n\n      const currentTimestamp = getCurrentTimestamp();\n      this.setState({\n        ...currentState,\n        screen: {\n          ...currentState.screen,\n          currentTimestamp,\n        },\n      });\n\n      requestAnimationFrame(updateAnimationTimeIfAnimationIsStillInProgress);\n    };\n    return updateAnimationTimeIfAnimationIsStillInProgress;\n  }\n\n  getEditScreenAnimationUpdaterIfOnTutorialLevel(\n    animationStartTime: Timestamp\n  ): () => void {\n    if (![Level.Level1, Level.Level9].includes(this.state.screen.level)) {\n      return noOp;\n    }\n\n    const updateAnimationTimeIfAnimationIsStillInProgress = (): void => {\n      const currentState = this.state;\n      if (\n        !(\n          currentState.screen.animationKind === AnimationKind.Edit &&\n          areTimestampsEqual(\n            currentState.screen.animationStartTime,\n            animationStartTime\n          )\n        )\n      ) {\n        return;\n      }\n\n      if (\n        currentState.screen.blockEditor.uiTouch === null &&\n        currentState.screen.blockEditor.palette.scrollInProgress === null &&\n        currentState.screen.blockEditor.canvas.scrollInProgress === null &&\n        currentState.screen.blockEditor.literalEditor === null\n      ) {\n        const currentTimestamp = getCurrentTimestamp();\n        this.setState({\n          ...currentState,\n          screen: {\n            ...currentState.screen,\n            currentTimestamp,\n          },\n        });\n      }\n\n      requestAnimationFrame(updateAnimationTimeIfAnimationIsStillInProgress);\n    };\n    return updateAnimationTimeIfAnimationIsStillInProgress;\n  }\n\n  getButtonClickDetectorResources(): ButtonClickDetectorResources {\n    return {\n      tempCanvasCtx: this.tempCanvasCtx,\n      measureCanvasText: this.measureCanvasText,\n      getCurrentLevelBattleEvents: this.getCurrentLevelBattleEvents,\n      renderTutorialCanvasElement: this.renderTutorialCanvasElement,\n    };\n  }\n\n  getCurrentLevelBattleAnimationData(): BattleAnimationData {\n    const { screen } = this.state;\n    const elapsedSeconds = getElapsedSeconds(\n      screen.currentTimestamp,\n      screen.animationStartTime\n    );\n    const battleEvents = this.getCurrentLevelBattleEvents();\n    const battleElapsedSeconds =\n      screen.animationKind === AnimationKind.PlayBattle\n        ? screen.battleAnimationOffsetSeconds + elapsedSeconds\n        : screen.animationKind === AnimationKind.PauseBattle\n        ? screen.battleAnimationOffsetSeconds\n        : 0;\n    return getBattleAnimationData(\n      getInitialLevelState(screen.level),\n      battleEvents,\n      battleElapsedSeconds\n    );\n  }\n\n  getCurrentLevelBattleEvents(): readonly BattleEvent[] {\n    const {\n      currentLevelBattleEventsCache: battleEventsCache,\n      lastBlockEditorSetStateCallTime,\n    } = this;\n    if (\n      lastBlockEditorSetStateCallTime.millisecondsSinceEpoch <=\n      battleEventsCache.timeCached.millisecondsSinceEpoch\n    ) {\n      return battleEventsCache.events;\n    }\n\n    const { screen } = this.state;\n    const newCache: BattleEventsCache = {\n      timeCached: getCurrentTimestamp(),\n      events: getBattleEvents(\n        screen.blockEditor.canvas,\n        getInitialLevelState(screen.level)\n      ),\n    };\n    this.currentLevelBattleEventsCache = newCache;\n    return newCache.events;\n  }\n\n  getPrevLevelBattleEvents(): readonly BattleEvent[] {\n    const {\n      prevLevelBattleEventsCache: battleEventsCache,\n      lastBlockEditorSetStateCallTime,\n    } = this;\n    if (\n      lastBlockEditorSetStateCallTime.millisecondsSinceEpoch <=\n      battleEventsCache.timeCached.millisecondsSinceEpoch\n    ) {\n      return battleEventsCache.events;\n    }\n\n    const { screen } = this.state;\n    const newCache: BattleEventsCache = {\n      timeCached: getCurrentTimestamp(),\n      events: getBattleEvents(\n        screen.prevLevelBlockEditor.canvas,\n        getInitialLevelState(screen.level - 1)\n      ),\n    };\n    this.prevLevelBattleEventsCache = newCache;\n    return newCache.events;\n  }\n\n  getLevel9DragStatus(): {\n    readonly needsLessThanBlockDrag: boolean;\n    readonly needsHealthBlockDrag: boolean;\n  } {\n    if (this.state.screen.level !== Level.Level9) {\n      return { needsLessThanBlockDrag: false, needsHealthBlockDrag: false };\n    }\n\n    const hasUserEditedLiteral =\n      this.state.screen.blockEditor.canvas.items.some((item) =>\n        doesBlockSequenceContainNonEmptyLiteral(item.content)\n      );\n    if (hasUserEditedLiteral) {\n      return { needsLessThanBlockDrag: false, needsHealthBlockDrag: false };\n    }\n\n    const { appHeight, appWidth, screen } = this.state;\n    const fingerWidth = 60;\n    const fingerHeight =\n      fingerWidth *\n      (images.tutorial.finger.naturalHeight /\n        images.tutorial.finger.naturalWidth);\n    const readonlyMainBlockEditorProps: BlockEditorProps<MainBlockEditorTypeParams> =\n      {\n        config: this.getMainBlockEditorConfig(),\n        state: this.state.screen.blockEditor,\n        measureText: this.measureSvgText,\n        setState: noOp,\n      };\n    const paletteSpecs = getPaletteBlockRenderSpecs(\n      readonlyMainBlockEditorProps\n    );\n\n    const paletteLessThanBlockRbox = paletteSpecs.find(\n      (spec) => spec.block.kind === BlockKind.LessThan\n    )!.rbox;\n    const paletteLessThanBlockRboxTop = paletteLessThanBlockRbox.topLeft.y;\n    const paletteLessThanBlockRboxBottom =\n      paletteLessThanBlockRbox.topLeft.y +\n      paletteLessThanBlockRbox.dimensions.height;\n    const PADDING = 20 + 0.3 * fingerHeight;\n    const requiredPaletteScrollYForLessThanBlock =\n      paletteLessThanBlockRboxTop < 0\n        ? -paletteLessThanBlockRboxTop + PADDING\n        : paletteLessThanBlockRboxBottom > appHeight\n        ? appHeight - paletteLessThanBlockRboxBottom - PADDING\n        : 0;\n\n    const paletteHealthBlockRbox = paletteSpecs.find(\n      (spec) => spec.block.kind === BlockKind.Health\n    )!.rbox;\n    const paletteHealthBlockRboxTop = paletteHealthBlockRbox.topLeft.y;\n    const paletteHealthBlockRboxBottom =\n      paletteHealthBlockRbox.topLeft.y +\n      paletteHealthBlockRbox.dimensions.height;\n    const requiredPaletteScrollYForHealthBlock =\n      paletteHealthBlockRboxTop < 0\n        ? -paletteHealthBlockRboxTop + PADDING\n        : paletteHealthBlockRboxBottom > appHeight\n        ? appHeight - paletteHealthBlockRboxBottom - PADDING\n        : 0;\n\n    const { canvas } = screen.blockEditor;\n    const totalScroll =\n      canvas.scrollInProgress === null\n        ? canvas.scroll\n        : {\n            x:\n              canvas.scroll.x +\n              canvas.scrollInProgress.currentClientPosition.x -\n              canvas.scrollInProgress.startClientPosition.x,\n            y:\n              canvas.scroll.y +\n              canvas.scrollInProgress.currentClientPosition.y -\n              canvas.scrollInProgress.startClientPosition.y,\n          };\n    const onScreenEmptyLessThanBlockSpec =\n      ((): null | BlockRenderSpec<MainBlockEditorTypeParams> => {\n        function isOnScreenEmptyLessThanBlockSpec(\n          spec: BlockRenderSpec<MainBlockEditorTypeParams>\n        ): boolean {\n          const translatedTopLeft = addVec(totalScroll, spec.rbox.topLeft);\n          const left = translatedTopLeft.x;\n          const top = translatedTopLeft.y;\n          const right = left + spec.rbox.dimensions.width;\n          const bottom = top + spec.rbox.dimensions.height;\n          const isOnScreen =\n            0 <= left && right <= appWidth && 0 <= top && bottom <= appHeight;\n\n          const isEmpty = spec.block.args.expressions.every(\n            (expr) => expr.isLiteral && expr.source === \"\"\n          );\n\n          return (\n            isOnScreen && spec.block.kind === BlockKind.LessThan && isEmpty\n          );\n        }\n\n        const specs = getCanvasItemRenderSpecs(readonlyMainBlockEditorProps);\n        for (const seqSpec of specs) {\n          const blockSpec = getBlockSpecFromBlockSequenceSpecSatisfying(\n            seqSpec,\n            isOnScreenEmptyLessThanBlockSpec\n          );\n          if (blockSpec !== null) {\n            return blockSpec;\n          }\n        }\n\n        return null;\n      })();\n    const onScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec =\n      ((): null | BlockRenderSpec<MainBlockEditorTypeParams> => {\n        function isOnScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec(\n          spec: BlockRenderSpec<MainBlockEditorTypeParams>\n        ): boolean {\n          const translatedTopLeft = addVec(totalScroll, spec.rbox.topLeft);\n          const left = translatedTopLeft.x;\n          const top = translatedTopLeft.y;\n          const right = left + spec.rbox.dimensions.width;\n          const bottom = top + spec.rbox.dimensions.height;\n          const isOnScreen =\n            0 <= left && right <= appWidth && 0 <= top && bottom <= appHeight;\n\n          const lhs = spec.block.args.expressions[0];\n          const isLhsHealthBlock =\n            lhs !== undefined &&\n            !lhs.isLiteral &&\n            lhs.kind === BlockKind.Health;\n\n          const rhs = spec.block.args.expressions[1];\n          const isRhsEmptyLiteral =\n            rhs !== undefined && rhs.isLiteral && rhs.source === \"\";\n\n          return (\n            isOnScreen &&\n            spec.block.kind === BlockKind.LessThan &&\n            isLhsHealthBlock &&\n            isRhsEmptyLiteral\n          );\n        }\n\n        const specs = getCanvasItemRenderSpecs(readonlyMainBlockEditorProps);\n        for (const seqSpec of specs) {\n          const blockSpec = getBlockSpecFromBlockSequenceSpecSatisfying(\n            seqSpec,\n            isOnScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec\n          );\n          if (blockSpec !== null) {\n            return blockSpec;\n          }\n        }\n\n        return null;\n      })();\n\n    const noBlockEditorUiAction =\n      screen.blockEditor.uiTouch === null &&\n      screen.blockEditor.palette.scrollInProgress === null &&\n      screen.blockEditor.canvas.scrollInProgress === null &&\n      screen.blockEditor.literalEditor === null;\n\n    const needsLessThanBlockDrag =\n      onScreenEmptyLessThanBlockSpec === null &&\n      onScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec === null &&\n      requiredPaletteScrollYForLessThanBlock === 0 &&\n      noBlockEditorUiAction;\n\n    const needsHealthBlockDrag =\n      onScreenEmptyLessThanBlockSpec !== null &&\n      onScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec === null &&\n      requiredPaletteScrollYForHealthBlock === 0 &&\n      noBlockEditorUiAction;\n\n    return { needsLessThanBlockDrag, needsHealthBlockDrag };\n  }\n\n  getLoadingScreenAnimationUpdater(animationStartTime: Timestamp): () => void {\n    const updateAnimationTimeIfAnimationIsStillInProgress = (): void => {\n      const currentState = this.state;\n\n      if (\n        !(\n          currentState.screen.animationKind === AnimationKind.Loading &&\n          areTimestampsEqual(\n            currentState.screen.animationStartTime,\n            animationStartTime\n          )\n        )\n      ) {\n        return;\n      }\n\n      const currentTimestamp = getCurrentTimestamp();\n\n      if (this.getLoadCompletionFactor() >= 1) {\n        this.setState({\n          ...currentState,\n          screen: {\n            ...currentState.screen,\n            animationKind: AnimationKind.StaticHome,\n            animationStartTime: currentTimestamp,\n            currentTimestamp,\n          },\n        });\n\n        if (Capacitor.isNativePlatform()) {\n          // If we try to immediately play audio on the web,\n          // it won't work as planned.\n          // This is because the browser blocks\n          // audio until the user interacts with the page.\n          // On some browsers, the request to play audio doesn't\n          // get completely ignored, but rathered deferred until the user\n          // interacts with the page.\n          // This leads to some nasty bugs, where the user will tap a button,\n          // and the browser will (undesirably) play the deferred sounds,\n          // which are not _supposed_ to be associated with that button.\n          // So, we only run this code on native platforms,\n          // where the webview should be configured to allow sounds\n          // even without previous user interactions.\n          this.playHomeMusic(0);\n        }\n\n        this.logEventIfMounted({\n          kind: LogEventKind.AppLifeCycleMilestone,\n          milestoneKind: \"LoadingScreenFinished\",\n          gameVersionWithoutV: GAME_VERSION_WITHOUT_V,\n          timestampDateDotNow: Date.now(),\n        });\n\n        return;\n      }\n\n      this.setState({\n        ...currentState,\n        screen: {\n          ...currentState.screen,\n          currentTimestamp,\n        },\n      });\n\n      requestAnimationFrame(updateAnimationTimeIfAnimationIsStillInProgress);\n    };\n    return updateAnimationTimeIfAnimationIsStillInProgress;\n  }\n\n  getLoadCompletionFactor(): number {\n    const { currentTimestamp, animationStartTime } = this.state.screen;\n    const elapsedSeconds = getElapsedSeconds(\n      currentTimestamp,\n      animationStartTime\n    );\n    return Math.min(\n      1,\n      evaluateSimpleClampedFunction(\n        {\n          kind: \"StepwiseLinearFunction\",\n          points: [\n            { x: 0, y: 0 },\n            { x: 0.3, y: 0.3 },\n            { x: 0.6, y: 0.3 },\n            { x: 1, y: 1 },\n          ],\n        },\n        elapsedSeconds\n      )\n    );\n  }\n\n  renderTextAndIconsAroundCenter(\n    text: string,\n    center: Vec2,\n    maxDimensions: Dimensions\n  ): CanvasElement {\n    const elements: CanvasElement[] = [];\n\n    const { puzzleButtonIconDimensions, font, textColor } =\n      this.getInstructionsBoxRenderInfo();\n\n    const lines: readonly (readonly string[])[] = text\n      .split(\"\\n\")\n      .map((rawLine) =>\n        typesafeCast<readonly TextSentinel[]>(\n          ALL_PUZZLE_SCREEN_BUTTON_ICON_SENTINELS\n        )\n          .concat(ALL_FONT_CHANGE_SENTINELS)\n          .reduce(\n            (currentText, sentinel) =>\n              currentText.replace(sentinel, `\\n${sentinel}\\n`),\n            rawLine\n          )\n          .split(\"\\n\")\n          .map((part) => part.trim())\n          .filter((part) => part !== \"\")\n      );\n    const { allLinePartWidths, lineHeights, fontSize } =\n      this.getLineDimensionsAndOverrideFontSize(text, maxDimensions);\n\n    let y = center.y - 0.5 * sum(lineHeights);\n    for (let lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n      const lineHeight = lineHeights[lineIndex];\n      const parts = lines[lineIndex];\n      const partWidths = allLinePartWidths[lineIndex];\n      let x = center.x - 0.5 * sum(partWidths);\n\n      let fontFamilyOverride = font.fontFamily;\n\n      for (let partIndex = 0; partIndex < parts.length; ++partIndex) {\n        const part = parts[partIndex];\n        const partWidth = partWidths[partIndex];\n\n        if (\n          typesafeCast<readonly string[]>(\n            ALL_PUZZLE_SCREEN_BUTTON_ICON_SENTINELS\n          ).includes(part)\n        ) {\n          elements.push({\n            kind: CanvasElementKind.Image,\n            source:\n              PUZZLE_SCREEN_BUTTON_ICON_SENTINEL_IMAGES[\n                part as PuzzleScreenButtonIconTextSentinel\n              ],\n            dx: x + 0.5 * partWidth - 0.5 * puzzleButtonIconDimensions.width,\n            dy: y + 0.5 * lineHeight - 0.5 * puzzleButtonIconDimensions.height,\n            dw: puzzleButtonIconDimensions.width,\n            dh: puzzleButtonIconDimensions.height,\n          });\n        } else if (\n          typesafeCast<readonly string[]>(ALL_FONT_CHANGE_SENTINELS).includes(\n            part\n          )\n        ) {\n          fontFamilyOverride =\n            FONT_CHANGE_SENTINEL_FONT_FAMILIES[part as FontChangeTextSentinel];\n        } else {\n          elements.push({\n            kind: CanvasElementKind.Text,\n            text: part,\n            x: x + 0.5 * partWidth,\n            y: y + 0.5 * lineHeight,\n            fill: textColor,\n            ...font,\n            fontSize,\n            fontFamily: fontFamilyOverride,\n            textAlign: \"center\",\n            textBaseline: \"middle\",\n          });\n        }\n\n        x += partWidth;\n      }\n\n      y += lineHeight;\n    }\n\n    return {\n      kind: CanvasElementKind.Group,\n      children: elements,\n    };\n  }\n\n  getLineDimensionsAndOverrideFontSize(\n    text: string,\n    maxDimensions: Dimensions\n  ): {\n    readonly allLinePartWidths: readonly (readonly number[])[];\n    readonly lineHeights: readonly number[];\n    readonly fontSize: number;\n  } {\n    const naiveDimensions = this.getLineDimensionsUsingDefaultFont(text);\n    const naiveTotalHeight = sum(naiveDimensions.lineHeights);\n    const naiveLineWidths = naiveDimensions.allLinePartWidths.map(sum);\n    const naiveMaxWidth = Math.max(0, ...naiveLineWidths);\n    const { font: defaultFont, minLineHeight: defaultMinLineHeight } =\n      this.getInstructionsBoxRenderInfo();\n\n    if (\n      naiveTotalHeight <= maxDimensions.height &&\n      naiveMaxWidth <= maxDimensions.width\n    ) {\n      return { ...naiveDimensions, fontSize: defaultFont.fontSize };\n    }\n\n    const scaleFactor = Math.min(\n      maxDimensions.height / naiveTotalHeight,\n      maxDimensions.width / naiveMaxWidth\n    );\n    const fontSize = scaleFactor * defaultFont.fontSize;\n    const minLineHeight = scaleFactor * defaultMinLineHeight;\n    const lineDimensions = this.getLineDimensionsUsingFont(\n      text,\n      { ...defaultFont, fontSize },\n      minLineHeight\n    );\n    return {\n      ...lineDimensions,\n      fontSize,\n    };\n  }\n\n  getLineDimensionsUsingDefaultFont(text: string): {\n    readonly allLinePartWidths: readonly (readonly number[])[];\n    readonly lineHeights: readonly number[];\n  } {\n    const { font, minLineHeight } = this.getInstructionsBoxRenderInfo();\n    return this.getLineDimensionsUsingFont(text, font, minLineHeight);\n  }\n\n  getLineDimensionsUsingFont(\n    text: string,\n    font: CanvasTextFont,\n    minLineHeight: number\n  ): {\n    readonly allLinePartWidths: readonly (readonly number[])[];\n    readonly lineHeights: readonly number[];\n  } {\n    const { puzzleButtonIconDimensions, puzzleButtonIconHorizontalMargin } =\n      this.getInstructionsBoxRenderInfo();\n\n    const lines: readonly (readonly string[])[] = text\n      .split(\"\\n\")\n      .map((rawLine) =>\n        typesafeCast<readonly TextSentinel[]>(\n          ALL_PUZZLE_SCREEN_BUTTON_ICON_SENTINELS\n        )\n          .concat(ALL_FONT_CHANGE_SENTINELS)\n          .reduce(\n            (currentText, sentinel) =>\n              currentText.replace(sentinel, `\\n${sentinel}\\n`),\n            rawLine\n          )\n          .split(\"\\n\")\n          .map((part) => part.trim())\n          .filter((part) => part !== \"\")\n      );\n    const allLinePartWidths: readonly (readonly number[])[] = lines.map(\n      (line) => {\n        let fontFamilyOverride = font.fontFamily;\n        return line.map((part) => {\n          if (\n            typesafeCast<readonly string[]>(\n              ALL_PUZZLE_SCREEN_BUTTON_ICON_SENTINELS\n            ).includes(part)\n          ) {\n            return (\n              puzzleButtonIconDimensions.width +\n              2 * puzzleButtonIconHorizontalMargin\n            );\n          }\n\n          if (\n            typesafeCast<readonly string[]>(ALL_FONT_CHANGE_SENTINELS).includes(\n              part\n            )\n          ) {\n            fontFamilyOverride =\n              FONT_CHANGE_SENTINEL_FONT_FAMILIES[\n                part as FontChangeTextSentinel\n              ];\n            return 0;\n          }\n\n          return this.measureCanvasText({\n            ...font,\n            fontFamily: fontFamilyOverride,\n            text: part,\n          }).width;\n        });\n      }\n    );\n    const lineHeights: readonly number[] = lines.map((line) => {\n      let fontFamilyOverride = font.fontFamily;\n      return Math.max(\n        minLineHeight,\n        ...line.map((part) => {\n          if (\n            typesafeCast<readonly string[]>(\n              ALL_PUZZLE_SCREEN_BUTTON_ICON_SENTINELS\n            ).includes(part)\n          ) {\n            return puzzleButtonIconDimensions.height;\n          }\n\n          if (\n            typesafeCast<readonly string[]>(ALL_FONT_CHANGE_SENTINELS).includes(\n              part\n            )\n          ) {\n            fontFamilyOverride =\n              FONT_CHANGE_SENTINEL_FONT_FAMILIES[\n                part as FontChangeTextSentinel\n              ];\n            return 0;\n          }\n\n          return this.measureCanvasText({\n            ...font,\n            fontFamily: fontFamilyOverride,\n            text: part,\n          }).height;\n        })\n      );\n    });\n    return { allLinePartWidths, lineHeights };\n  }\n\n  getInstructionsBoxRenderInfo(): InstructionsBoxRenderInfo {\n    const { appWidth } = this.state;\n\n    const backgroundImageScale = appWidth / SIZING.castleInteriorImage.width;\n\n    const buttonIconWidth = backgroundImageScale * 50;\n\n    const { minLineHeight, fontSize } = {\n      [UiLanguage.English]: {\n        minLineHeight: backgroundImageScale * 33,\n        fontSize: backgroundImageScale * 22,\n      },\n      [UiLanguage.Japanese]: {\n        minLineHeight: backgroundImageScale * 42,\n        fontSize: backgroundImageScale * 28,\n      },\n      [UiLanguage.JapaneseHiragana]: {\n        minLineHeight: backgroundImageScale * 42,\n        fontSize: backgroundImageScale * 28,\n      },\n    }[this.state.language];\n\n    return {\n      puzzleButtonIconDimensions: {\n        width: buttonIconWidth,\n        height:\n          buttonIconWidth *\n          (images.buttons.puzzle.edit.naturalHeight /\n            images.buttons.puzzle.edit.naturalWidth),\n      },\n      puzzleButtonIconHorizontalMargin: backgroundImageScale * 10,\n      minLineHeight,\n      font: {\n        fontSize,\n        fontFamily: UI_TEXT_FONT_FAMILY,\n      },\n      textColor: COLOR_THEME.textBrown,\n    };\n  }\n\n  getBattleSoundsForCurrentLevel(): readonly Sound[] {\n    const { screen } = this.state;\n    const elapsedSeconds = getElapsedSeconds(\n      screen.currentTimestamp,\n      screen.animationStartTime\n    );\n\n    const initialLevelState = getInitialLevelState(screen.level);\n    const battleEvents = this.getCurrentLevelBattleEvents();\n    const soundsAssumingLevelJustStarted =\n      getBattleSoundsAssumingLevelJustStarted(initialLevelState, battleEvents);\n\n    const battleElapsedSeconds =\n      screen.animationKind === AnimationKind.PlayBattle\n        ? screen.battleAnimationOffsetSeconds + elapsedSeconds\n        : screen.animationKind === AnimationKind.PauseBattle\n        ? screen.battleAnimationOffsetSeconds\n        : 0;\n\n    return soundsAssumingLevelJustStarted.map((sound) => ({\n      ...sound,\n      timeInSeconds: sound.timeInSeconds - battleElapsedSeconds,\n    }));\n  }\n}\n\nfunction getUiText(language: UiLanguage, kind: UiTextKind): string {\n  return LOCALIZED_UI_TEXT[language][kind];\n}\n\nfunction getCurrentTimestamp(): Timestamp {\n  return {\n    millisecondsSinceEpoch: Date.now(),\n  };\n}\n\nfunction areTimestampsEqual(a: Timestamp, b: Timestamp): boolean {\n  return a.millisecondsSinceEpoch === b.millisecondsSinceEpoch;\n}\n\nfunction getBattleEvents(\n  canvas: BlockCanvasState<MainBlockEditorTypeParams>,\n  initialLevelState: LevelState\n): readonly BattleEvent[] {\n  const canvasItem = canvas.items.find(\n    (item) =>\n      item.content.length > 0 &&\n      item.content[0].kind === BlockKind.WhenBattleStarts\n  );\n  if (canvasItem === undefined) {\n    return [];\n  }\n\n  const mbec: MutableBlockExecutionContext = {\n    gas: 999,\n    stack: canvasItem.content\n      .slice(1)\n      .map(\n        (block, blockIndexMinusOne): AddressedCommand => ({\n          block,\n          blockSource: [CANVAS_ADDRESS_PART, 0, blockIndexMinusOne + 1],\n        })\n      )\n      .reverse(),\n    levelState: initialLevelState,\n    events: [],\n  };\n\n  while (\n    mbec.gas > 0 &&\n    mbec.stack.length > 0 &&\n    isBattleStillOngoing(mbec.levelState)\n  ) {\n    evalAndPopTopStackBlock(mbec, true);\n  }\n\n  const { events } = mbec;\n  const TURNS_ALLOWED_FOR_ENEMIES_TO_ATTACK_UNOPPOSED = 100;\n  for (\n    let i = 0;\n    i < TURNS_ALLOWED_FOR_ENEMIES_TO_ATTACK_UNOPPOSED &&\n    isBattleStillOngoing(mbec.levelState);\n    ++i\n  ) {\n    const [eventsFromEnemyTurn, levelStateAfterEnemyTurn] =\n      getBattleEventsAndNewLevelStateAfterEnemyTurn(\n        mbec.levelState,\n        mbec,\n        true\n      );\n    events.push(...eventsFromEnemyTurn);\n    mbec.levelState = levelStateAfterEnemyTurn;\n  }\n\n  // If the hero hasn't finished the level and there are no more\n  // commands, the player fails the level.\n  if (getHeroIndex(mbec.levelState) < mbec.levelState.squares.length - 1) {\n    addFailLevelEventIfNotAlreadyPresent(events);\n  }\n  return events;\n}\n\nfunction evalAndPopTopStackBlock(\n  mbec: MutableBlockExecutionContext,\n  canEnemiesSummon: boolean\n): string {\n  if (!(mbec.gas > 0 && mbec.stack.length > 0)) {\n    return \"\";\n  }\n\n  const command = mbec.stack.pop();\n  if (command === undefined) {\n    return \"\";\n  }\n\n  --mbec.gas;\n\n  const { events } = mbec;\n  let { levelState } = mbec;\n\n  const { block, blockSource } = command;\n  events.push({\n    kind: BattleEventKind.EvalBlock,\n    block,\n    source: blockSource,\n  });\n\n  if (block.kind === BlockKind.MoveForward) {\n    const canAdvance =\n      levelState.squares[getHeroIndex(levelState) + 1].kind ===\n      SquareKind.Empty;\n    const advanceAttempt: BattleEvent = canAdvance\n      ? {\n          kind: BattleEventKind.Advance,\n          source: blockSource,\n        }\n      : {\n          kind: BattleEventKind.FailHeroAction,\n          failedActionKind: HeroActionKind.Advance,\n          source: blockSource,\n        };\n    events.push(advanceAttempt);\n    levelState = applyBattleEventUnchecked(advanceAttempt, levelState);\n\n    if (getHeroIndex(levelState) === levelState.squares.length - 1) {\n      events.push({ kind: BattleEventKind.ClimbStairs });\n      mbec.gas = 0;\n      mbec.levelState = levelState;\n      return \"\";\n    }\n  }\n\n  if (block.kind === BlockKind.MoveBackward) {\n    const canRetreat =\n      getHeroIndex(levelState) > 0 &&\n      levelState.squares[getHeroIndex(levelState) - 1].kind ===\n        SquareKind.Empty;\n    const retreatAttempt: BattleEvent = canRetreat\n      ? {\n          kind: BattleEventKind.Retreat,\n          source: blockSource,\n        }\n      : {\n          kind: BattleEventKind.FailHeroAction,\n          failedActionKind: HeroActionKind.Retreat,\n          source: blockSource,\n        };\n    events.push(retreatAttempt);\n    levelState = applyBattleEventUnchecked(retreatAttempt, levelState);\n  }\n\n  if (block.kind === BlockKind.Attack) {\n    const connectsWithTarget =\n      getHeroIndex(levelState) < levelState.squares.length - 1 &&\n      (levelState.squares[getHeroIndex(levelState) + 1].kind ===\n        SquareKind.Goblin ||\n        levelState.squares[getHeroIndex(levelState) + 1].kind ===\n          SquareKind.Witch);\n    const attackAttempt: BattleEvent = connectsWithTarget\n      ? {\n          kind: BattleEventKind.Attack,\n          attackerIndex: getHeroIndex(levelState),\n          targetIndex: getHeroIndex(levelState) + 1,\n          damage: BATTLE_CONFIG.heroDamage,\n          source: blockSource,\n        }\n      : {\n          kind: BattleEventKind.FailHeroAction,\n          failedActionKind: HeroActionKind.Attack,\n          source: blockSource,\n        };\n    events.push(attackAttempt);\n    levelState = applyBattleEventUnchecked(attackAttempt, levelState);\n  }\n\n  if (block.kind === BlockKind.Heal) {\n    const canHeal =\n      getHeroIndex(levelState) < levelState.squares.length - 1 &&\n      (levelState.squares[getHeroIndex(levelState)] as HeroSquareState).health <\n        (levelState.squares[getHeroIndex(levelState)] as HeroSquareState)\n          .maxHealth;\n    const healAttempt: BattleEvent = canHeal\n      ? {\n          kind: BattleEventKind.Heal,\n          targetIndex: getHeroIndex(levelState),\n          healAmount: Math.min(\n            (levelState.squares[getHeroIndex(levelState)] as HeroSquareState)\n              .maxHealth -\n              (levelState.squares[getHeroIndex(levelState)] as HeroSquareState)\n                .health,\n            BATTLE_CONFIG.heroHeal\n          ),\n          source: blockSource,\n        }\n      : {\n          kind: BattleEventKind.FailHeroAction,\n          failedActionKind: HeroActionKind.Heal,\n          source: blockSource,\n        };\n    events.push(healAttempt);\n    levelState = applyBattleEventUnchecked(healAttempt, levelState);\n  }\n\n  if (block.kind === BlockKind.Forever) {\n    mbec.stack.push({ block, blockSource });\n    mbec.stack.push(\n      ...block.args.sequences[0]\n        .map(\n          (sequenceBlock, sequenceBlockIndex): AddressedCommand => ({\n            block: sequenceBlock,\n            blockSource: blockSource.concat([\n              ARG_COMMAND_SEQUENCE_ADDRESS_PART,\n              0,\n              sequenceBlockIndex,\n            ]),\n          })\n        )\n        .reverse()\n    );\n  }\n\n  if (block.kind === BlockKind.If) {\n    const shouldExecuteBody = evalArgExpression(\n      block.args.expressions[0],\n      blockSource.concat([ARG_EXPRESSION_ADDRESS_PART, 0]),\n      mbec\n    );\n    if (shouldExecuteBody === \"true\") {\n      mbec.stack.push(\n        ...block.args.sequences[0]\n          .map(\n            (sequenceBlock, sequenceBlockIndex): AddressedCommand => ({\n              block: sequenceBlock,\n              blockSource: blockSource.concat([\n                ARG_COMMAND_SEQUENCE_ADDRESS_PART,\n                0,\n                sequenceBlockIndex,\n              ]),\n            })\n          )\n          .reverse()\n      );\n    }\n  }\n\n  if (block.kind === BlockKind.And) {\n    const left = evalArgExpression(\n      block.args.expressions[0],\n      blockSource.concat([ARG_EXPRESSION_ADDRESS_PART, 0]),\n      mbec\n    );\n    const right = evalArgExpression(\n      block.args.expressions[1],\n      blockSource.concat([ARG_EXPRESSION_ADDRESS_PART, 1]),\n      mbec\n    );\n    return String(left === \"true\" && right === \"true\");\n  }\n\n  if (block.kind === BlockKind.Or) {\n    const left = evalArgExpression(\n      block.args.expressions[0],\n      blockSource.concat([ARG_EXPRESSION_ADDRESS_PART, 0]),\n      mbec\n    );\n    const right = evalArgExpression(\n      block.args.expressions[1],\n      blockSource.concat([ARG_EXPRESSION_ADDRESS_PART, 1]),\n      mbec\n    );\n    return String(left === \"true\" || right === \"true\");\n  }\n\n  if (block.kind === BlockKind.Not) {\n    const operand = evalArgExpression(\n      block.args.expressions[0],\n      blockSource.concat([ARG_EXPRESSION_ADDRESS_PART, 0]),\n      mbec\n    );\n    return String(operand !== \"true\");\n  }\n\n  if (block.kind === BlockKind.XInFront) {\n    const dropdownValue = block.args.dropdowns[0];\n    if (!X_IN_FRONT_DROPDOWN_VALUES.includes(dropdownValue)) {\n      return \"\";\n    }\n    const expected = {\n      [DropdownValueKind.Nothing]: SquareKind.Empty,\n      [DropdownValueKind.Goblin]: SquareKind.Goblin,\n      [DropdownValueKind.Witch]: SquareKind.Witch,\n    }[dropdownValue];\n\n    const heroIndex = getHeroIndex(levelState);\n    if (heroIndex === -1 || heroIndex === levelState.squares.length - 1) {\n      return \"\";\n    }\n\n    const inspectedIndex = heroIndex + 1;\n    return String(levelState.squares[inspectedIndex].kind === expected);\n  }\n\n  if (block.kind === BlockKind.Health) {\n    const heroIndex = getHeroIndex(levelState);\n    if (heroIndex === -1) {\n      return \"0\";\n    }\n    const hero = levelState.squares[heroIndex] as HeroSquareState;\n\n    return String(hero.health);\n  }\n\n  if (block.kind === BlockKind.LessThan) {\n    const lhsStr = evalArgExpression(\n      block.args.expressions[0],\n      blockSource.concat([ARG_EXPRESSION_ADDRESS_PART, 0]),\n      mbec\n    );\n    const lhs = Number.parseFloat(lhsStr);\n\n    const rhsStr = evalArgExpression(\n      block.args.expressions[1],\n      blockSource.concat([ARG_EXPRESSION_ADDRESS_PART, 1]),\n      mbec\n    );\n    const rhs = Number.parseFloat(rhsStr);\n\n    return String(lhs < rhs);\n  }\n\n  if (block.kind === BlockKind.Equal) {\n    const lhsStr = evalArgExpression(\n      block.args.expressions[0],\n      blockSource.concat([ARG_EXPRESSION_ADDRESS_PART, 0]),\n      mbec\n    );\n    const lhs = Number.parseFloat(lhsStr);\n\n    const rhsStr = evalArgExpression(\n      block.args.expressions[1],\n      blockSource.concat([ARG_EXPRESSION_ADDRESS_PART, 1]),\n      mbec\n    );\n    const rhs = Number.parseFloat(rhsStr);\n\n    return String(lhs === rhs);\n  }\n\n  if (block.kind === BlockKind.GreaterThan) {\n    const lhsStr = evalArgExpression(\n      block.args.expressions[0],\n      blockSource.concat([ARG_EXPRESSION_ADDRESS_PART, 0]),\n      mbec\n    );\n    const lhs = Number.parseFloat(lhsStr);\n\n    const rhsStr = evalArgExpression(\n      block.args.expressions[1],\n      blockSource.concat([ARG_EXPRESSION_ADDRESS_PART, 1]),\n      mbec\n    );\n    const rhs = Number.parseFloat(rhsStr);\n\n    return String(lhs > rhs);\n  }\n\n  if (doesBlockKindConsumeHeroTurn(block.kind)) {\n    const [eventsFromEnemyTurn, levelStateAfterEnemyTurn] =\n      getBattleEventsAndNewLevelStateAfterEnemyTurn(\n        levelState,\n        mbec,\n        canEnemiesSummon\n      );\n    events.push(...eventsFromEnemyTurn);\n    levelState = levelStateAfterEnemyTurn;\n  }\n\n  const hero = levelState.squares[getHeroIndex(levelState)];\n  if (hero.kind === SquareKind.Hero && hero.health <= 0) {\n    addFailLevelEventIfNotAlreadyPresent(events);\n    mbec.gas = 0;\n    mbec.levelState = levelState;\n    return \"\";\n  }\n\n  mbec.levelState = levelState;\n  return \"\";\n}\n\nfunction evalArgExpression(\n  expression: Literal | Block<MainBlockEditorTypeParams>,\n  address: NodeAddress,\n  mbec: MutableBlockExecutionContext\n): string {\n  if (expression.isLiteral) {\n    return expression.source;\n  }\n\n  mbec.stack.push({ block: expression, blockSource: address });\n  return evalAndPopTopStackBlock(mbec, true);\n}\n\nfunction getBattleEventsAndNewLevelStateAfterEnemyTurn(\n  initialLevelState: LevelState,\n  ibec: ImmutableBlockExecutionContext,\n  canEnemiesSummon: boolean\n): readonly [readonly BattleEvent[], LevelState] {\n  const events = [];\n  let levelState = initialLevelState;\n\n  if (\n    getHeroIndex(levelState) < levelState.squares.length - 1 &&\n    levelState.squares[getHeroIndex(levelState) + 1].kind === SquareKind.Goblin\n  ) {\n    const goblinAttack: BattleEvent = {\n      kind: BattleEventKind.Attack,\n      attackerIndex: getHeroIndex(levelState) + 1,\n      targetIndex: getHeroIndex(levelState),\n      damage: BATTLE_CONFIG.goblinDamage,\n      source: null,\n    };\n    events.push(goblinAttack);\n    levelState = applyBattleEventUnchecked(goblinAttack, levelState);\n  }\n\n  if (\n    getHeroIndex(levelState) < levelState.squares.length - 1 &&\n    getFrontAttackingWitchIndex(levelState) !== -1\n  ) {\n    const witchAttack: BattleEvent = {\n      kind: BattleEventKind.Attack,\n      attackerIndex: getFrontAttackingWitchIndex(levelState),\n      targetIndex: getHeroIndex(levelState),\n      damage: BATTLE_CONFIG.witchDamage,\n      source: null,\n    };\n\n    const attackingWitchIndex = getFrontAttackingWitchIndex(levelState);\n    const heroDistance = attackingWitchIndex - getHeroIndex(levelState);\n    if (\n      canEnemiesSummon &&\n      heroDistance > 1 &&\n      willHeroKillEnemyAtIndexAssumingEnemiesCannotSummon(\n        {\n          ...ibec,\n          levelState: applyBattleEventUnchecked(witchAttack, levelState),\n        },\n        attackingWitchIndex\n      ) &&\n      (levelState.squares[attackingWitchIndex] as WitchSquareState).health >\n        BATTLE_CONFIG.witchSummonGoblinHealthCost\n    ) {\n      const summon: BattleEvent = {\n        kind: BattleEventKind.Summon,\n        summonee: {\n          kind: SquareKind.Goblin,\n          color: GoblinColor.Purple,\n          health: 3,\n          maxHealth: 3,\n        },\n        summonerIndex: getFrontAttackingWitchIndex(levelState),\n        summonerHealthCost: BATTLE_CONFIG.witchSummonGoblinHealthCost,\n        targetIndex: getHeroIndex(levelState) + 1,\n        source: null,\n      };\n      events.push(summon);\n      levelState = applyBattleEventUnchecked(summon, levelState);\n    } else {\n      events.push(witchAttack);\n      levelState = applyBattleEventUnchecked(witchAttack, levelState);\n    }\n  }\n\n  return [events, levelState];\n}\n\nfunction getHeroIndex(levelState: LevelState): number {\n  return levelState.squares.findIndex((s) => s.kind === SquareKind.Hero);\n}\n\nfunction applyBattleEventUnchecked(\n  event: BattleEvent,\n  currentState: LevelState\n): LevelState {\n  if (\n    event.kind === BattleEventKind.FailHeroAction ||\n    event.kind === BattleEventKind.EvalBlock\n  ) {\n    return currentState;\n  }\n\n  const heroIndex = getHeroIndex(currentState);\n\n  if (event.kind === BattleEventKind.Advance) {\n    const newSquares: SquareState[] = currentState.squares.map(\n      (currentSquare, i): SquareState => {\n        if (i === heroIndex) {\n          return { kind: SquareKind.Empty };\n        }\n        if (i === heroIndex + 1 && currentSquare.kind === SquareKind.Empty) {\n          return currentState.squares[heroIndex];\n        }\n        return currentSquare;\n      }\n    );\n    return { squares: newSquares };\n  }\n\n  if (event.kind === BattleEventKind.Retreat) {\n    const newSquares: SquareState[] = currentState.squares.map(\n      (currentSquare, i): SquareState => {\n        if (i === heroIndex) {\n          return { kind: SquareKind.Empty };\n        }\n        if (i === heroIndex - 1 && currentSquare.kind === SquareKind.Empty) {\n          return currentState.squares[heroIndex];\n        }\n        return currentSquare;\n      }\n    );\n    return { squares: newSquares };\n  }\n\n  if (event.kind === BattleEventKind.Attack) {\n    const newSquares: SquareState[] = currentState.squares.map(\n      (currentSquare, i): SquareState => {\n        if (i !== event.targetIndex) {\n          return currentSquare;\n        }\n\n        if (currentSquare.kind === SquareKind.Goblin) {\n          const damagedGoblin: GoblinSquareState = {\n            ...currentSquare,\n            health: currentSquare.health - event.damage,\n          };\n          if (damagedGoblin.health <= 0) {\n            return { kind: SquareKind.Empty };\n          }\n          return damagedGoblin;\n        }\n\n        if (currentSquare.kind === SquareKind.Witch) {\n          const damagedWitch: WitchSquareState = {\n            ...currentSquare,\n            health: currentSquare.health - event.damage,\n          };\n          if (damagedWitch.health <= 0) {\n            return { kind: SquareKind.Empty };\n          }\n          return damagedWitch;\n        }\n\n        if (currentSquare.kind === SquareKind.Hero) {\n          return {\n            ...currentSquare,\n            health: currentSquare.health - event.damage,\n          };\n        }\n\n        return currentSquare;\n      }\n    );\n    return { squares: newSquares };\n  }\n\n  if (event.kind === BattleEventKind.Summon) {\n    const newSquares: SquareState[] = currentState.squares.map(\n      (currentSquare, i): SquareState => {\n        if (i === event.targetIndex) {\n          return event.summonee;\n        }\n\n        if (i !== event.summonerIndex) {\n          return currentSquare;\n        }\n\n        if (currentSquare.kind === SquareKind.Goblin) {\n          const damagedGoblin: GoblinSquareState = {\n            ...currentSquare,\n            health: currentSquare.health - event.summonerHealthCost,\n          };\n          if (damagedGoblin.health <= 0) {\n            return { kind: SquareKind.Empty };\n          }\n          return damagedGoblin;\n        }\n\n        if (currentSquare.kind === SquareKind.Witch) {\n          const damagedWitch: WitchSquareState = {\n            ...currentSquare,\n            health: currentSquare.health - event.summonerHealthCost,\n          };\n          if (damagedWitch.health <= 0) {\n            return { kind: SquareKind.Empty };\n          }\n          return damagedWitch;\n        }\n\n        if (currentSquare.kind === SquareKind.Hero) {\n          return {\n            ...currentSquare,\n            health: currentSquare.health - event.summonerHealthCost,\n          };\n        }\n\n        return currentSquare;\n      }\n    );\n    return { squares: newSquares };\n  }\n\n  if (event.kind === BattleEventKind.Heal) {\n    const newSquares: SquareState[] = currentState.squares.map(\n      (currentSquare, i): SquareState => {\n        if (i !== event.targetIndex) {\n          return currentSquare;\n        }\n\n        if (currentSquare.kind === SquareKind.Goblin) {\n          const healedGoblin: GoblinSquareState = {\n            ...currentSquare,\n            health: currentSquare.health + event.healAmount,\n          };\n          if (healedGoblin.health <= 0) {\n            return { kind: SquareKind.Empty };\n          }\n          return healedGoblin;\n        }\n\n        if (currentSquare.kind === SquareKind.Hero) {\n          return {\n            ...currentSquare,\n            health: currentSquare.health + event.healAmount,\n          };\n        }\n\n        return currentSquare;\n      }\n    );\n    return { squares: newSquares };\n  }\n\n  if (\n    event.kind === BattleEventKind.ClimbStairs ||\n    event.kind === BattleEventKind.FailLevel\n  ) {\n    return currentState;\n  }\n\n  const exhaustivenessCheck: never = event;\n  return exhaustivenessCheck;\n}\n\nfunction getBattleAnimationData(\n  initialLevelState: LevelState,\n  events: readonly BattleEvent[],\n  elapsedSeconds: number\n): BattleAnimationData {\n  const STAIR_CLIMB_OFFSET_X = 0.5;\n  const STAIR_CLIMB_DISTANCE = 3.5;\n  const SQUARE_WIDTH = 150;\n\n  const seed = 42;\n  const prng = prand.xoroshiro128plus(seed);\n\n  let levelState = initialLevelState;\n  let timeCursor = BATTLE_START_DELAY_SECONDS;\n  let inInterEventDelay = false;\n  let executedBlockAddress: null | NodeAddress = null;\n  let hasFailLevelEventBeenEmitted = false;\n\n  for (let eventIndex = 0; eventIndex < events.length; ++eventIndex) {\n    const event = events[eventIndex];\n    const eventDuration = getBattleEventDuration(event, levelState);\n    const remainingTime = elapsedSeconds - timeCursor;\n\n    if (timeCursor > elapsedSeconds) {\n      inInterEventDelay = true;\n      break;\n    }\n\n    if (event.kind === BattleEventKind.EvalBlock) {\n      executedBlockAddress = event.source;\n    }\n\n    if (event.kind === BattleEventKind.FailLevel) {\n      hasFailLevelEventBeenEmitted = true;\n    }\n\n    if (eventDuration <= remainingTime) {\n      levelState = applyBattleEventUnchecked(event, levelState);\n\n      timeCursor += eventDuration;\n\n      const nextEventIsClimbStairs =\n        eventIndex + 1 < events.length &&\n        events[eventIndex + 1].kind === BattleEventKind.ClimbStairs;\n      if (!nextEventIsClimbStairs && event.kind !== BattleEventKind.EvalBlock) {\n        timeCursor += INTER_EVENT_DELAY_SECONDS;\n      }\n\n      continue;\n    }\n\n    const completionFactor = remainingTime / eventDuration;\n    const characterDisplacements = levelState.squares.map((square, i): Vec2 => {\n      if (\n        square.kind === SquareKind.Hero &&\n        event.kind === BattleEventKind.Advance\n      ) {\n        return { x: SQUARE_WIDTH * completionFactor, y: 0 };\n      }\n\n      if (\n        square.kind === SquareKind.Hero &&\n        event.kind === BattleEventKind.Retreat\n      ) {\n        return { x: SQUARE_WIDTH * -completionFactor, y: 0 };\n      }\n\n      if (\n        square.kind === SquareKind.Hero &&\n        event.kind === BattleEventKind.FailHeroAction &&\n        event.failedActionKind === HeroActionKind.Advance\n      ) {\n        return {\n          x:\n            SQUARE_WIDTH *\n            evaluateSimpleClampedFunction(\n              {\n                kind: \"StepwiseLinearFunction\",\n                points: [\n                  { x: 0, y: 0 },\n                  { x: 0.15, y: 0.2 },\n                  { x: 0.85, y: 0.2 },\n                  { x: 1, y: 0 },\n                ],\n              },\n              completionFactor\n            ),\n          y: 0,\n        };\n      }\n\n      if (\n        square.kind === SquareKind.Hero &&\n        event.kind === BattleEventKind.FailHeroAction &&\n        event.failedActionKind === HeroActionKind.Retreat\n      ) {\n        return {\n          x:\n            SQUARE_WIDTH *\n            evaluateSimpleClampedFunction(\n              {\n                kind: \"StepwiseLinearFunction\",\n                points: [\n                  { x: 0, y: 0 },\n                  { x: 0.15, y: -0.2 },\n                  { x: 0.85, y: -0.2 },\n                  { x: 1, y: 0 },\n                ],\n              },\n              completionFactor\n            ),\n          y: 0,\n        };\n      }\n\n      if (\n        square.kind === SquareKind.Hero &&\n        ((event.kind === BattleEventKind.Attack && i === event.attackerIndex) ||\n          (event.kind === BattleEventKind.FailHeroAction &&\n            event.failedActionKind === HeroActionKind.Attack))\n      ) {\n        const attackCompletionFactor = Math.min(\n          remainingTime / ATTACK_DURATION_IN_SECONDS,\n          1\n        );\n        return {\n          x: SQUARE_WIDTH * 0.8 * Math.sin(Math.PI * attackCompletionFactor),\n          y: 0,\n        };\n      }\n\n      if (\n        square.kind === SquareKind.Hero &&\n        event.kind === BattleEventKind.ClimbStairs\n      ) {\n        const x =\n          SQUARE_WIDTH *\n          evaluateSimpleClampedFunction(\n            horizontallyStretchSimpleFunction(\n              {\n                kind: \"StepwiseLinearFunction\",\n                points: [\n                  { x: 0, y: 0 },\n                  { x: 0.15, y: STAIR_CLIMB_OFFSET_X },\n                  { x: 0.15 + 0.05, y: STAIR_CLIMB_OFFSET_X },\n                  { x: 1.25, y: STAIR_CLIMB_OFFSET_X + STAIR_CLIMB_DISTANCE },\n                ],\n              },\n              1 / 1.25\n            ),\n            completionFactor\n          );\n        const y =\n          SQUARE_WIDTH *\n          evaluateSimpleClampedFunction(\n            horizontallyStretchSimpleFunction(\n              {\n                kind: \"StepwiseLinearFunction\",\n                points: [\n                  { x: 0, y: 0 },\n                  { x: 0.15 + 0.05, y: 0 },\n                  { x: 1.25, y: -STAIR_CLIMB_DISTANCE },\n                ],\n              },\n              1 / 1.25\n            ),\n            completionFactor\n          );\n        return { x, y };\n      }\n\n      if (\n        square.kind === SquareKind.Goblin &&\n        event.kind === BattleEventKind.Attack &&\n        i === event.attackerIndex\n      ) {\n        return {\n          x: SQUARE_WIDTH * -0.8 * Math.sin(Math.PI * completionFactor),\n          y: 0,\n        };\n      }\n\n      return { x: 0, y: 0 };\n    });\n\n    const damageOverlayAlphas = levelState.squares.map(\n      (_square, squareIndex, squares): number => {\n        if (\n          !(\n            event.kind === BattleEventKind.Attack &&\n            event.targetIndex === squareIndex\n          )\n        ) {\n          return 0;\n        }\n\n        const attackerSquareKind = squares[event.attackerIndex].kind;\n        if (MELEE_ATTACKERS.includes(attackerSquareKind)) {\n          if (completionFactor < MELEE_DAMAGE_OVERLAY_FLASH_START_FACTOR) {\n            return 0;\n          }\n\n          const flashCompletionFactor = Math.min(\n            1,\n            (completionFactor - MELEE_DAMAGE_OVERLAY_FLASH_START_FACTOR) /\n              (MELEE_DAMAGE_OVERLAY_FLASH_END_FACTOR -\n                MELEE_DAMAGE_OVERLAY_FLASH_START_FACTOR)\n          );\n\n          return 0.5 * Math.sin(Math.PI * flashCompletionFactor);\n        }\n\n        if (attackerSquareKind === SquareKind.Witch) {\n          if (completionFactor < FIREBALL_DAMAGE_OVERLAY_FLASH_START_FACTOR) {\n            return 0;\n          }\n\n          const flashCompletionFactor = Math.min(\n            1,\n            (completionFactor - FIREBALL_DAMAGE_OVERLAY_FLASH_START_FACTOR) /\n              (FIREBALL_DAMAGE_OVERLAY_FLASH_END_FACTOR -\n                FIREBALL_DAMAGE_OVERLAY_FLASH_START_FACTOR)\n          );\n\n          return 0.5 * Math.sin(Math.PI * flashCompletionFactor);\n        }\n\n        return 0;\n      }\n    );\n    const hasDamageOverlayAlphaPeaked = levelState.squares.map(\n      (_square, squareIndex, squares): boolean => {\n        if (\n          !(\n            event.kind === BattleEventKind.Attack &&\n            event.targetIndex === squareIndex\n          )\n        ) {\n          return false;\n        }\n\n        const attackerSquareKind = squares[event.attackerIndex].kind;\n        if (MELEE_ATTACKERS.includes(attackerSquareKind)) {\n          if (completionFactor < MELEE_DAMAGE_OVERLAY_FLASH_START_FACTOR) {\n            return false;\n          }\n\n          const flashCompletionFactor = Math.min(\n            1,\n            (completionFactor - MELEE_DAMAGE_OVERLAY_FLASH_START_FACTOR) /\n              (MELEE_DAMAGE_OVERLAY_FLASH_END_FACTOR -\n                MELEE_DAMAGE_OVERLAY_FLASH_START_FACTOR)\n          );\n\n          return flashCompletionFactor >= 0.5;\n        }\n\n        if (attackerSquareKind === SquareKind.Witch) {\n          if (completionFactor < FIREBALL_DAMAGE_OVERLAY_FLASH_START_FACTOR) {\n            return false;\n          }\n\n          const flashCompletionFactor = Math.min(\n            1,\n            (completionFactor - FIREBALL_DAMAGE_OVERLAY_FLASH_START_FACTOR) /\n              (FIREBALL_DAMAGE_OVERLAY_FLASH_END_FACTOR -\n                FIREBALL_DAMAGE_OVERLAY_FLASH_START_FACTOR)\n          );\n\n          return flashCompletionFactor >= 0.5;\n        }\n\n        return false;\n      }\n    );\n\n    const battleStatus =\n      (levelState.squares[getHeroIndex(levelState)] as HeroSquareState)\n        .health <= 0\n        ? BattleStatus.Defeat\n        : BattleStatus.InProgress;\n\n    const displayHeroHealingAnimation =\n      (event.kind === BattleEventKind.Heal &&\n        event.targetIndex === getHeroIndex(levelState)) ||\n      (event.kind === BattleEventKind.FailHeroAction &&\n        event.failedActionKind === HeroActionKind.Heal &&\n        remainingTime <= HEAL_ANIMATION_DURATION_IN_SECONDS);\n\n    const errorAlertOpacityFactorFor1SecondAnimations = ((): number => {\n      const part1DurationFactor = 0.15 / 1;\n      const part2DurationFactor = 0.7 / 1;\n      if (completionFactor < part1DurationFactor) {\n        const partCompletionFactor = completionFactor / part1DurationFactor;\n        return Math.sin(partCompletionFactor * (Math.PI / 2));\n      }\n\n      const part2CumulativeFactor = part1DurationFactor + part2DurationFactor;\n      if (completionFactor < part2CumulativeFactor) {\n        return 1;\n      }\n\n      const partCompletionFactor =\n        (completionFactor - part2CumulativeFactor) /\n        (1 - part2CumulativeFactor);\n      return Math.sin((1 - partCompletionFactor) * (Math.PI / 2));\n    })();\n    const errorAlert =\n      event.kind === BattleEventKind.FailHeroAction &&\n      event.failedActionKind === HeroActionKind.Advance\n        ? {\n            message: UiTextKind.CannotAdvance,\n            index: getHeroIndex(levelState) + 0.5,\n            opacityFactor: errorAlertOpacityFactorFor1SecondAnimations,\n          }\n        : event.kind === BattleEventKind.FailHeroAction &&\n          event.failedActionKind === HeroActionKind.Retreat\n        ? {\n            message: UiTextKind.CannotRetreat,\n            index: getHeroIndex(levelState) + 0.5,\n            opacityFactor: errorAlertOpacityFactorFor1SecondAnimations,\n          }\n        : event.kind === BattleEventKind.FailHeroAction &&\n          event.failedActionKind === HeroActionKind.Attack\n        ? {\n            message: UiTextKind.CannotAttack,\n            index: getHeroIndex(levelState) + 1 + 0.5,\n            opacityFactor: errorAlertOpacityFactorFor1SecondAnimations,\n          }\n        : event.kind === BattleEventKind.FailHeroAction &&\n          event.failedActionKind === HeroActionKind.Heal\n        ? {\n            message: UiTextKind.CannotHeal,\n            index: getHeroIndex(levelState) + 0.5,\n            opacityFactor: errorAlertOpacityFactorFor1SecondAnimations,\n          }\n        : null;\n\n    const isWitchAttack =\n      event.kind === BattleEventKind.Attack &&\n      levelState.squares[event.attackerIndex].kind === SquareKind.Witch;\n    const isWitchSummon =\n      event.kind === BattleEventKind.Summon &&\n      levelState.squares[event.summonerIndex].kind === SquareKind.Witch;\n\n    const witchAnimationFrame =\n      isWitchAttack || isWitchSummon\n        ? Math.floor(\n            evaluateSimpleClampedFunction(\n              {\n                kind: \"StepwiseLinearFunction\",\n                points: [\n                  { x: 0, y: 0 },\n                  { x: 0.1, y: 1 },\n                  { x: 0.3, y: 2 },\n                  { x: 0.7, y: 3 },\n                ],\n              },\n              completionFactor\n            )\n          )\n        : 0;\n\n    const rawParticleSystemCompletionFactor = evaluateSimpleClampedFunction(\n      {\n        kind: \"StepwiseLinearFunction\",\n        points: [\n          { x: 0, y: 0 },\n          { x: 0.3, y: 0 },\n          { x: 0.5, y: 1 },\n          { x: 0.5 + 1000, y: 1 + (1000 * (1 - 0)) / (0.5 - 0.3) },\n        ],\n      },\n      completionFactor\n    );\n    const clampedParticleSystemCompletionFactor = Math.min(\n      rawParticleSystemCompletionFactor,\n      1\n    );\n\n    const timedParticles: (AnimationParticle & {\n      readonly birthTimeFactor: number;\n      readonly isExplosion: boolean;\n    })[] = [];\n    const spellCastingWitchIndex = isWitchAttack\n      ? event.attackerIndex\n      : isWitchSummon\n      ? event.summonerIndex\n      : -1;\n    const spellTargetIndex =\n      isWitchAttack || isWitchSummon ? event.targetIndex : -1;\n    if (spellCastingWitchIndex !== -1 && witchAnimationFrame === 2) {\n      const emitterStartPosition = {\n        x: SQUARE_WIDTH * spellCastingWitchIndex + 10,\n        y: 740 + 405,\n      };\n      const emitterEndPosition = addVec(emitterStartPosition, {\n        x:\n          SQUARE_WIDTH * (spellTargetIndex - spellCastingWitchIndex) +\n          0.65 * SQUARE_WIDTH,\n        y: 0,\n      });\n      const emitterFinalStepCount = 100;\n      for (\n        let stepCount = 0;\n        stepCount <\n        Math.floor(\n          emitterFinalStepCount * clampedParticleSystemCompletionFactor\n        );\n        ++stepCount\n      ) {\n        const emitterPosition = evaluateSimpleClampedFunction(\n          {\n            kind: \"StepwiseLinearFunction\",\n            points: [\n              { x: 0, y: emitterStartPosition },\n              { x: 1, y: emitterEndPosition },\n            ],\n          },\n          stepCount / emitterFinalStepCount,\n          VEC2_VSO\n        );\n        for (let particleIndex = 0; particleIndex < 10; ++particleIndex) {\n          const particle: AnimationParticle & {\n            readonly birthTimeFactor: number;\n            readonly isExplosion: boolean;\n          } = {\n            position: emitterPosition,\n            radius: prand.unsafeUniformIntDistribution(300, 500, prng) / 100,\n            color: parseColorHexString(\"#ff000033\"),\n            birthTimeFactor: stepCount / emitterFinalStepCount,\n            isExplosion: false,\n          };\n          timedParticles.push(particle);\n        }\n      }\n    }\n\n    if (\n      spellCastingWitchIndex !== -1 &&\n      (witchAnimationFrame === 2 || witchAnimationFrame === 3)\n    ) {\n      const emitterStartPosition = {\n        x: SQUARE_WIDTH * spellCastingWitchIndex + 10,\n        y: 740 + 405,\n      };\n      const emitterEndPosition = addVec(emitterStartPosition, {\n        x:\n          SQUARE_WIDTH * (spellTargetIndex - spellCastingWitchIndex) +\n          0.65 * SQUARE_WIDTH,\n        y: 0,\n      });\n      const emitterFinalStepCount = 100;\n\n      for (\n        let stepCount = 0;\n        stepCount <\n        Math.floor(\n          emitterFinalStepCount * clampedParticleSystemCompletionFactor\n        );\n        ++stepCount\n      ) {\n        for (let particleIndex = 0; particleIndex < 10; ++particleIndex) {\n          const particle: AnimationParticle & {\n            readonly birthTimeFactor: number;\n            readonly isExplosion: boolean;\n          } = {\n            position: emitterEndPosition,\n            radius:\n              (3 * prand.unsafeUniformIntDistribution(300, 500, prng)) / 100,\n            color: parseColorHexString(\"#ff000033\"),\n            birthTimeFactor: 1 + stepCount / emitterFinalStepCount,\n            isExplosion: true,\n          };\n          timedParticles.push(particle);\n        }\n      }\n    }\n\n    const transformedParticles = timedParticles.map(\n      (particle): AnimationParticle => {\n        const particleCompletionFactor = particle.isExplosion\n          ? 1.0 * (rawParticleSystemCompletionFactor - particle.birthTimeFactor)\n          : rawParticleSystemCompletionFactor - particle.birthTimeFactor;\n        if (particleCompletionFactor < 0) {\n          return { ...particle, color: TRANSPARENT };\n        }\n        const angle =\n          (prand.unsafeUniformIntDistribution(0, 360, prng) / 360) *\n          Math.PI *\n          2;\n        const unit = { x: Math.cos(angle), y: Math.sin(angle) };\n        const scaleFactor =\n          particle.isExplosion && isWitchAttack\n            ? 3\n            : particle.isExplosion && isWitchSummon\n            ? 6\n            : 1;\n        const speed =\n          (scaleFactor *\n            (SQUARE_WIDTH * prand.unsafeUniformIntDistribution(5, 15, prng))) /\n          100;\n        const position = addVec(\n          particle.position,\n          scaleVec(unit, speed * particleCompletionFactor)\n        );\n\n        const particleGrowthRate =\n          (scaleFactor * prand.unsafeUniformIntDistribution(300, 700, prng)) /\n          100;\n        const radius =\n          particle.radius + particleGrowthRate * particleCompletionFactor;\n\n        const color = applyElementwiseToColor32(\n          evaluateSimpleClampedFunction(\n            {\n              kind: \"StepwiseLinearFunction\",\n              points: isWitchAttack\n                ? [\n                    { x: 0, y: parseColorHexString(\"#ffffcc\") },\n                    { x: 0.2, y: parseColorHexString(\"#ffcc00\") },\n                    { x: 1, y: parseColorHexString(\"#a0000000\") },\n                  ]\n                : [\n                    { x: 0, y: parseColorHexString(\"#ffccff\") },\n                    { x: 0.2, y: parseColorHexString(\"#cc00ff\") },\n                    { x: 1, y: parseColorHexString(\"#0000a000\") },\n                  ],\n            },\n            particleCompletionFactor,\n            COLOR32_VSO\n          ),\n          Math.floor\n        );\n\n        return { position, radius, color };\n      }\n    );\n\n    const advanceHealthChanges = isWitchAttack\n      ? levelState.squares.map((_square, i) => {\n          if (i === event.targetIndex && completionFactor >= 0.5) {\n            return -event.damage;\n          }\n          return 0;\n        })\n      : isWitchSummon\n      ? levelState.squares.map((_square, i) => {\n          if (i === event.summonerIndex && witchAnimationFrame >= 2) {\n            return -event.summonerHealthCost;\n          }\n          return 0;\n        })\n      : levelState.squares.map((_square, squareIndex, squares) => {\n          if (\n            !(\n              event.kind === BattleEventKind.Attack &&\n              squareIndex === event.targetIndex &&\n              MELEE_ATTACKERS.includes(squares[event.attackerIndex].kind) &&\n              completionFactor >= MELEE_DAMAGE_OVERLAY_FLASH_START_FACTOR\n            )\n          ) {\n            return 0;\n          }\n\n          return -event.damage;\n        });\n\n    const advanceSummon: null | AdvanceSummon =\n      isWitchSummon && witchAnimationFrame === 3\n        ? {\n            summonee: event.summonee,\n            summoneeIndex: event.targetIndex,\n          }\n        : null;\n\n    const squareOccupantAlphas = levelState.squares.map(\n      (square, squareIndex, squares): number => {\n        if (\n          !(\n            event.kind === BattleEventKind.Attack &&\n            event.targetIndex === squareIndex &&\n            \"health\" in square &&\n            square.health + advanceHealthChanges[squareIndex] <= 0\n          )\n        ) {\n          return 1;\n        }\n\n        const attackerSquareKind = squares[event.attackerIndex].kind;\n        if (MELEE_ATTACKERS.includes(attackerSquareKind)) {\n          if (completionFactor < MELEE_DAMAGE_OVERLAY_FLASH_START_FACTOR) {\n            return 1;\n          }\n\n          const flashCompletionFactor = Math.min(\n            1,\n            (completionFactor - MELEE_DAMAGE_OVERLAY_FLASH_START_FACTOR) /\n              (MELEE_DAMAGE_OVERLAY_FLASH_END_FACTOR -\n                MELEE_DAMAGE_OVERLAY_FLASH_START_FACTOR)\n          );\n\n          if (flashCompletionFactor < 0.5) {\n            return 1;\n          }\n\n          return 0.5 * Math.sin(Math.PI * flashCompletionFactor);\n        }\n\n        if (attackerSquareKind === SquareKind.Witch) {\n          if (completionFactor < FIREBALL_DAMAGE_OVERLAY_FLASH_START_FACTOR) {\n            return 0;\n          }\n\n          const flashCompletionFactor = Math.min(\n            1,\n            (completionFactor - FIREBALL_DAMAGE_OVERLAY_FLASH_START_FACTOR) /\n              (FIREBALL_DAMAGE_OVERLAY_FLASH_END_FACTOR -\n                FIREBALL_DAMAGE_OVERLAY_FLASH_START_FACTOR)\n          );\n\n          if (flashCompletionFactor < 0.5) {\n            return 1;\n          }\n\n          return 0.5 * Math.sin(Math.PI * flashCompletionFactor);\n        }\n\n        return 1;\n      }\n    );\n\n    return {\n      levelState,\n      characterDisplacements,\n      advanceHealthChanges,\n      battleStatus,\n      displayHeroHealingAnimation,\n      errorAlert,\n      witchAnimationFrame,\n      particles: transformedParticles.filter((p) => p.color.a > 0),\n      executedBlockAddress,\n      advanceSummon,\n      didHeroDefeatAllEnemiesButForgetToMoveToStairs:\n        didHeroDefeatAllEnemiesButForgetToMoveToStairs(\n          levelState,\n          hasFailLevelEventBeenEmitted\n        ),\n      didHeroSurviveLevelButFailToReachStairs:\n        didHeroSurviveLevelButFailToReachStairs(\n          levelState,\n          hasFailLevelEventBeenEmitted\n        ),\n      damageOverlayAlphas,\n      hasDamageOverlayAlphaPeaked,\n      squareOccupantAlphas,\n    };\n  }\n\n  const battleStatus =\n    (levelState.squares[getHeroIndex(levelState)] as HeroSquareState).health <=\n    0\n      ? BattleStatus.Defeat\n      : !inInterEventDelay &&\n        getHeroIndex(levelState) === levelState.squares.length - 1\n      ? BattleStatus.Victory\n      : BattleStatus.InProgress;\n  const characterDisplacements =\n    battleStatus === BattleStatus.Victory\n      ? levelState.squares.map((square, i): Vec2 => {\n          if (square.kind === SquareKind.Hero) {\n            return {\n              x: SQUARE_WIDTH * (STAIR_CLIMB_OFFSET_X + STAIR_CLIMB_DISTANCE),\n              y: SQUARE_WIDTH * -STAIR_CLIMB_DISTANCE,\n            };\n          }\n          return { x: 0, y: 0 };\n        })\n      : levelState.squares.map(() => ({ x: 0, y: 0 }));\n\n  return {\n    levelState,\n    characterDisplacements,\n    advanceHealthChanges: levelState.squares.map(() => 0),\n    battleStatus,\n    displayHeroHealingAnimation: false,\n    errorAlert: null,\n    witchAnimationFrame: 0,\n    particles: [],\n    executedBlockAddress,\n    advanceSummon: null,\n    didHeroDefeatAllEnemiesButForgetToMoveToStairs:\n      didHeroDefeatAllEnemiesButForgetToMoveToStairs(\n        levelState,\n        hasFailLevelEventBeenEmitted\n      ),\n    didHeroSurviveLevelButFailToReachStairs:\n      didHeroSurviveLevelButFailToReachStairs(\n        levelState,\n        hasFailLevelEventBeenEmitted\n      ),\n    damageOverlayAlphas: levelState.squares.map(() => 0),\n    hasDamageOverlayAlphaPeaked: levelState.squares.map(() => false),\n    squareOccupantAlphas: levelState.squares.map(() => 1),\n  };\n}\n\nfunction getBattleEventDuration(\n  event: BattleEvent,\n  levelState: LevelState\n): number {\n  if (event.kind === BattleEventKind.EvalBlock) {\n    return 0.25;\n  }\n\n  if (event.kind === BattleEventKind.Advance) {\n    return 0.15;\n  }\n\n  if (event.kind === BattleEventKind.Retreat) {\n    return 0.15;\n  }\n\n  const isWitchAttack =\n    event.kind === BattleEventKind.Attack &&\n    levelState.squares[event.attackerIndex].kind === SquareKind.Witch;\n  if (isWitchAttack) {\n    return 1.5;\n  }\n\n  if (event.kind === BattleEventKind.Summon) {\n    return 1.5;\n  }\n\n  if (event.kind === BattleEventKind.Attack) {\n    return ATTACK_DURATION_IN_SECONDS;\n  }\n\n  if (event.kind === BattleEventKind.Heal) {\n    return HEAL_ANIMATION_DURATION_IN_SECONDS;\n  }\n\n  if (event.kind === BattleEventKind.ClimbStairs) {\n    return 1.25;\n  }\n\n  if (event.kind === BattleEventKind.FailLevel) {\n    return 1;\n  }\n\n  if (event.kind === BattleEventKind.FailHeroAction) {\n    const { failedActionKind } = event;\n    if (\n      failedActionKind === HeroActionKind.Advance ||\n      failedActionKind === HeroActionKind.Retreat\n    ) {\n      return 1;\n    }\n\n    if (failedActionKind === HeroActionKind.Attack) {\n      return 1;\n    }\n\n    if (failedActionKind === HeroActionKind.Heal) {\n      return 1;\n    }\n\n    const exhaustivenessCheck: never = failedActionKind;\n    return exhaustivenessCheck;\n  }\n\n  const exhaustivenessCheck: never = event;\n  return exhaustivenessCheck;\n}\n\nfunction getInitialLevelState(level: Level): LevelState {\n  switch (level) {\n    case Level.Level1:\n      return getLevel1InitialState();\n    case Level.Level2:\n      return getLevel2InitialState();\n    case Level.Level3:\n      return getLevel3InitialState();\n    case Level.Level4:\n      return getLevel4InitialState();\n    case Level.Level5:\n      return getLevel5InitialState();\n    case Level.Level6:\n      return getLevel6InitialState();\n    case Level.Level7:\n      return getLevel7InitialState();\n    case Level.Level8:\n      return getLevel8InitialState();\n    case Level.Level9:\n      return getLevel9InitialState();\n    case Level.Level10:\n      return getLevel10InitialState();\n  }\n}\n\nfunction getLevel1InitialState(): LevelState {\n  const empty: SquareState = { kind: SquareKind.Empty };\n  const hero: SquareState = {\n    kind: SquareKind.Hero,\n    health: 2,\n    maxHealth: 2,\n  };\n  return {\n    squares: [empty, empty, empty, hero, empty, empty, empty],\n  };\n}\n\nfunction getLevel2InitialState(): LevelState {\n  const empty: SquareState = { kind: SquareKind.Empty };\n  const hero: SquareState = {\n    kind: SquareKind.Hero,\n    health: 2,\n    maxHealth: 2,\n  };\n  const goblin: SquareState = {\n    kind: SquareKind.Goblin,\n    color: GoblinColor.Green,\n    health: 1,\n    maxHealth: 1,\n  };\n  return {\n    squares: [empty, empty, empty, empty, empty, hero, goblin],\n  };\n}\n\nfunction getLevel3InitialState(): LevelState {\n  const empty: SquareState = { kind: SquareKind.Empty };\n  const hero: SquareState = {\n    kind: SquareKind.Hero,\n    health: 2,\n    maxHealth: 2,\n  };\n  const goblin: SquareState = {\n    kind: SquareKind.Goblin,\n    color: GoblinColor.Green,\n    health: 1,\n    maxHealth: 1,\n  };\n  return {\n    squares: [empty, empty, empty, hero, goblin, goblin, empty],\n  };\n}\n\nfunction getLevel4InitialState(): LevelState {\n  const empty: SquareState = { kind: SquareKind.Empty };\n  const hero: SquareState = {\n    kind: SquareKind.Hero,\n    health: 2,\n    maxHealth: 2,\n  };\n  const goblin: SquareState = {\n    kind: SquareKind.Goblin,\n    color: GoblinColor.Green,\n    health: 1,\n    maxHealth: 1,\n  };\n  return {\n    squares: [empty, empty, empty, hero, empty, goblin, goblin],\n  };\n}\n\nfunction getLevel5InitialState(): LevelState {\n  const empty: SquareState = { kind: SquareKind.Empty };\n  const hero: SquareState = {\n    kind: SquareKind.Hero,\n    health: 2,\n    maxHealth: 2,\n  };\n  const goblin: SquareState = {\n    kind: SquareKind.Goblin,\n    color: GoblinColor.Green,\n    health: 1,\n    maxHealth: 1,\n  };\n  return {\n    squares: [empty, hero, empty, goblin, goblin, empty, goblin],\n  };\n}\n\nfunction getLevel6InitialState(): LevelState {\n  const empty: SquareState = { kind: SquareKind.Empty };\n  const hero: SquareState = {\n    kind: SquareKind.Hero,\n    health: 3,\n    maxHealth: 3,\n  };\n  const pinkGoblin: SquareState = {\n    kind: SquareKind.Goblin,\n    color: GoblinColor.Purple,\n    health: 3,\n    maxHealth: 3,\n  };\n  return {\n    squares: [empty, empty, empty, empty, hero, empty, pinkGoblin],\n  };\n}\n\nfunction getLevel7InitialState(): LevelState {\n  const empty: SquareState = { kind: SquareKind.Empty };\n  const hero: SquareState = {\n    kind: SquareKind.Hero,\n    health: 3,\n    maxHealth: 3,\n  };\n  return {\n    squares: [hero, empty, empty, empty, empty, empty, empty],\n  };\n}\n\nfunction getLevel8InitialState(): LevelState {\n  const empty: SquareState = { kind: SquareKind.Empty };\n  const hero: SquareState = {\n    kind: SquareKind.Hero,\n    health: 3,\n    maxHealth: 3,\n  };\n  const goblin: SquareState = {\n    kind: SquareKind.Goblin,\n    color: GoblinColor.Green,\n    health: 1,\n    maxHealth: 1,\n  };\n  return {\n    squares: [hero, goblin, empty, empty, empty, goblin, empty],\n  };\n}\n\nfunction getLevel9InitialState(): LevelState {\n  const empty: SquareState = { kind: SquareKind.Empty };\n  const hero: SquareState = {\n    kind: SquareKind.Hero,\n    health: 3,\n    maxHealth: 3,\n  };\n  const goblin: SquareState = {\n    kind: SquareKind.Goblin,\n    color: GoblinColor.Green,\n    health: 1,\n    maxHealth: 1,\n  };\n  return {\n    squares: [hero, goblin, goblin, empty, goblin, goblin, empty],\n  };\n}\n\nfunction getLevel10InitialState(): LevelState {\n  const empty: SquareState = { kind: SquareKind.Empty };\n  const hero: SquareState = {\n    kind: SquareKind.Hero,\n    health: 5,\n    maxHealth: 5,\n  };\n  const witch: SquareState = {\n    kind: SquareKind.Witch,\n    health: 3,\n    maxHealth: 3,\n  };\n  return {\n    squares: [hero, empty, empty, witch, empty, empty, empty],\n  };\n}\n\nfunction getNextLevel(level: Level): null | Level {\n  if (level < LAST_LEVEL) {\n    return level + 1;\n  }\n  return null;\n}\n\nfunction periodicColorSinInterp(\n  a: Color32,\n  b: Color32,\n  elapsedSeconds: number,\n  frequencyHertz: number\n): Color32 {\n  const f =\n    Math.cos(frequencyHertz * 2 * Math.PI * elapsedSeconds) * -0.5 + 0.5;\n  return {\n    r: Math.round(a.r + f * (b.r - a.r)),\n    g: Math.round(a.g + f * (b.g - a.g)),\n    b: Math.round(a.b + f * (b.b - a.b)),\n    a: Math.round(a.a + f * (b.a - a.a)),\n  };\n}\n\nexport function parseColorHexString(s: string): Color32 {\n  const withoutHash = s.charAt(0) === \"#\" ? s.slice(1) : s;\n\n  if (!(withoutHash.length === 6 || withoutHash.length === 8)) {\n    throw new Error(\"Invalid color hex string.\");\n  }\n\n  return {\n    r: parseInt(withoutHash.slice(0, 2), 16),\n    g: parseInt(withoutHash.slice(2, 4), 16),\n    b: parseInt(withoutHash.slice(4, 6), 16),\n    a: withoutHash.length === 8 ? parseInt(withoutHash.slice(6, 8), 16) : 255,\n  };\n}\n\nfunction getStartingBlockEditorStateForLevel(\n  level: Level\n): BlockEditorState<MainBlockEditorTypeParams> {\n  return {\n    palette: {\n      blockKinds: getPaletteBlockKinds(level),\n      scroll: { x: 0, y: 0 },\n      scrollInProgress: null,\n    },\n    uiTouch: null,\n    literalEditor: null,\n    dropdownMenu: null,\n    canvas: {\n      items: getStartingCanvasItemsForLevel(level),\n      scroll: { x: 0, y: 0 },\n      scrollInProgress: null,\n    },\n    cursor: \"default\",\n  };\n}\n\nfunction getStartingCanvasItemsForLevel(\n  level: Level\n): readonly CanvasItem<MainBlockEditorTypeParams>[] {\n  switch (level) {\n    case Level.Level1:\n    case Level.Level2:\n    case Level.Level3:\n    case Level.Level4:\n    case Level.Level5:\n    case Level.Level6:\n    case Level.Level10:\n      return [\n        {\n          position: {\n            x: SIZING.paletteWidth + SIZING.minPalettePadding,\n            y: SIZING.minPalettePadding,\n          },\n          content: [\n            {\n              isLiteral: false,\n              kind: BlockKind.WhenBattleStarts,\n              args: {\n                expressions: [],\n                dropdowns: [],\n                sequences: [],\n              },\n            },\n          ],\n        },\n      ];\n\n    case Level.Level7:\n      return [\n        {\n          position: {\n            x: SIZING.paletteWidth + SIZING.minPalettePadding,\n            y: SIZING.minPalettePadding,\n          },\n          content: [\n            {\n              isLiteral: false,\n              kind: BlockKind.WhenBattleStarts,\n              args: {\n                expressions: [],\n                dropdowns: [],\n                sequences: [],\n              },\n            },\n          ],\n        },\n        {\n          position: {\n            x: SIZING.paletteWidth + SIZING.minPalettePadding + 220,\n            y: SIZING.minPalettePadding,\n          },\n          content: [\n            {\n              isLiteral: false,\n              kind: BlockKind.MoveForward,\n              args: {\n                expressions: [],\n                dropdowns: [],\n                sequences: [],\n              },\n            },\n          ],\n        },\n      ];\n\n    case Level.Level8:\n      return [\n        {\n          position: {\n            x: SIZING.paletteWidth + SIZING.minPalettePadding,\n            y: SIZING.minPalettePadding,\n          },\n          content: [\n            {\n              isLiteral: false,\n              kind: BlockKind.WhenBattleStarts,\n              args: {\n                expressions: [],\n                dropdowns: [],\n                sequences: [],\n              },\n            },\n          ],\n        },\n        {\n          position: {\n            x: SIZING.paletteWidth + SIZING.minPalettePadding + 220,\n            y: SIZING.minPalettePadding,\n          },\n          content: [\n            {\n              isLiteral: false,\n              kind: BlockKind.MoveForward,\n              args: {\n                expressions: [],\n                dropdowns: [],\n                sequences: [],\n              },\n            },\n          ],\n        },\n        {\n          position: {\n            x: SIZING.paletteWidth + SIZING.minPalettePadding + 340,\n            y: SIZING.minPalettePadding + 50,\n          },\n          content: [\n            {\n              isLiteral: false,\n              kind: BlockKind.Attack,\n              args: {\n                expressions: [],\n                dropdowns: [],\n                sequences: [],\n              },\n            },\n          ],\n        },\n        {\n          position: {\n            x: SIZING.paletteWidth + SIZING.minPalettePadding + 220,\n            y: SIZING.minPalettePadding + 120,\n          },\n          content: [\n            {\n              isLiteral: false,\n              kind: BlockKind.If,\n              args: {\n                expressions: [\n                  {\n                    isLiteral: false,\n                    kind: BlockKind.XInFront,\n                    args: {\n                      expressions: [],\n                      dropdowns: [DropdownValueKind.Nothing],\n                      sequences: [],\n                    },\n                  },\n                ],\n                dropdowns: [],\n                sequences: [[]],\n              },\n            },\n          ],\n        },\n      ];\n\n    case Level.Level9:\n      return [\n        {\n          position: {\n            x: SIZING.paletteWidth + SIZING.minPalettePadding,\n            y: SIZING.minPalettePadding,\n          },\n          content: [\n            {\n              isLiteral: false,\n              kind: BlockKind.WhenBattleStarts,\n              args: {\n                expressions: [],\n                dropdowns: [],\n                sequences: [],\n              },\n            },\n          ],\n        },\n        {\n          position: {\n            x: SIZING.paletteWidth + SIZING.minPalettePadding + 340,\n            y: SIZING.minPalettePadding + 50,\n          },\n          content: [\n            {\n              isLiteral: false,\n              kind: BlockKind.MoveForward,\n              args: {\n                expressions: [],\n                dropdowns: [],\n                sequences: [],\n              },\n            },\n          ],\n        },\n        {\n          position: {\n            x: SIZING.paletteWidth + SIZING.minPalettePadding + 220,\n            y: SIZING.minPalettePadding,\n          },\n          content: [\n            {\n              isLiteral: false,\n              kind: BlockKind.Attack,\n              args: {\n                expressions: [],\n                dropdowns: [],\n                sequences: [],\n              },\n            },\n          ],\n        },\n\n        {\n          position: {\n            x: SIZING.paletteWidth + SIZING.minPalettePadding + 220,\n            y: SIZING.minPalettePadding + 100,\n          },\n          content: [\n            {\n              isLiteral: false,\n              kind: BlockKind.Heal,\n              args: {\n                expressions: [],\n                dropdowns: [],\n                sequences: [],\n              },\n            },\n          ],\n        },\n      ];\n  }\n}\n\nexport function stringifyColor(color: Color32): string {\n  if (!isValidColor(color)) {\n    throw new Error(\n      `Cannot stringify color because it is invalid. color: ${JSON.stringify(\n        color\n      )}.`\n    );\n  }\n\n  return (\n    \"#\" +\n    leftpadWithZero(color.r.toString(16), 2) +\n    leftpadWithZero(color.g.toString(16), 2) +\n    leftpadWithZero(color.b.toString(16), 2) +\n    leftpadWithZero(color.a.toString(16), 2)\n  );\n}\n\nfunction isValidColor(color: Color32): boolean {\n  const { r, g, b, a } = color;\n  return (\n    Number.isInteger(r) &&\n    0 <= r &&\n    r <= 255 &&\n    Number.isInteger(g) &&\n    0 <= g &&\n    g <= 255 &&\n    Number.isInteger(b) &&\n    0 <= b &&\n    b <= 255 &&\n    Number.isInteger(a) &&\n    0 <= a &&\n    a <= 255\n  );\n}\n\nfunction leftpadWithZero(s: string, desiredLength: number): string {\n  if (!Number.isInteger(desiredLength)) {\n    throw new Error(\n      `Cannot leftpad because desiredLength is not an integer. desiredLength: ${desiredLength}.`\n    );\n  }\n\n  if (s.length > desiredLength) {\n    throw new Error(\n      `Cannot leftpad because string is too long to pad. desiredLength: ${desiredLength}. Actual length: ${\n        s.length\n      }. String: ${JSON.stringify(s)}`\n    );\n  }\n\n  return \"0\".repeat(desiredLength - s.length) + s;\n}\n\nfunction getLocalizedBlockDefs(\n  language: UiLanguage\n): BlockDefs<MainBlockEditorTypeParams> {\n  return BLOCK_DEFS[language];\n}\n\nfunction getLocalizedTutorialBlockDefs(\n  language: UiLanguage\n): BlockDefs<TutorialBlockEditorTypeParams> {\n  return getLocalizedBlockDefs(\n    language\n  ) as BlockDefs<TutorialBlockEditorTypeParams>;\n}\n\nfunction getLocalizedDropdownTexts(\n  language: UiLanguage\n): ReadonlyRecord<DropdownValueKind, string> {\n  return DROPDOWN_TEXTS[language];\n}\n\nfunction getPaletteBlockKinds(level: Level): readonly BlockKind[] {\n  const dict: ReadonlyRecord<Level, readonly BlockKind[]> = {\n    [Level.Level1]: [BlockKind.MoveForward],\n    [Level.Level2]: [BlockKind.MoveForward, BlockKind.Attack],\n    [Level.Level3]: [BlockKind.MoveForward, BlockKind.Attack],\n    [Level.Level4]: [BlockKind.MoveForward, BlockKind.Attack, BlockKind.Heal],\n    [Level.Level5]: [BlockKind.MoveForward, BlockKind.Attack, BlockKind.Heal],\n    [Level.Level6]: [\n      BlockKind.MoveForward,\n      BlockKind.Attack,\n      BlockKind.Heal,\n      BlockKind.MoveBackward,\n    ],\n    [Level.Level7]: [BlockKind.Forever],\n    [Level.Level8]: [BlockKind.Forever, BlockKind.If, BlockKind.XInFront],\n    [Level.Level9]: [\n      BlockKind.Forever,\n      BlockKind.If,\n      BlockKind.XInFront,\n      BlockKind.Health,\n      BlockKind.LessThan,\n      BlockKind.Equal,\n    ],\n    [Level.Level10]: [\n      BlockKind.MoveForward,\n      BlockKind.MoveBackward,\n      BlockKind.Attack,\n      BlockKind.Heal,\n      BlockKind.Forever,\n      BlockKind.If,\n      BlockKind.XInFront,\n      BlockKind.Health,\n      BlockKind.LessThan,\n      BlockKind.Equal,\n    ],\n  };\n  return dict[level];\n}\n\nfunction getFrontAttackingWitchIndex(levelState: LevelState): number {\n  const heroIndex = getHeroIndex(levelState);\n  if (heroIndex === -1) {\n    return -1;\n  }\n\n  const maxAttackerIndex = Math.min(\n    levelState.squares.length - 1,\n    heroIndex + BATTLE_CONFIG.witchAttackRange\n  );\n  for (let i = heroIndex + 1; i <= maxAttackerIndex; ++i) {\n    const square = levelState.squares[i];\n    if (square.kind === SquareKind.Witch) {\n      return i;\n    }\n\n    // A witch can't attack the hero if something is between the two.\n    if (square.kind !== SquareKind.Empty) {\n      return -1;\n    }\n  }\n\n  return -1;\n}\n\nfunction evaluateSimpleClampedFunction(\n  f: SimpleFunction<number>,\n  x: number\n): number;\nfunction evaluateSimpleClampedFunction<T>(\n  f: SimpleFunction<T>,\n  x: number,\n  vso: VectorSpaceOperations<T>\n): T;\nfunction evaluateSimpleClampedFunction<T>(\n  f: SimpleFunction<T>,\n  x: number,\n  optVso?: VectorSpaceOperations<T>\n): T {\n  const { points } = f;\n  if (points.length === 0) {\n    throw new Error(\n      \"Cannot evaluate a stepwise linear function with no points.\"\n    );\n  }\n\n  if (optVso === undefined && typeof points[0].y !== \"number\") {\n    throw new Error(\n      \"You must provide a VectorSpaceOperations argument for functions on non-number types.\"\n    );\n  }\n\n  const vso = optVso ?? (REAL_VSO as unknown as VectorSpaceOperations<T>);\n\n  if (points.length === 1) {\n    return points[0].y;\n  }\n\n  const firstPoint = points[0];\n  if (x <= firstPoint.x) {\n    return firstPoint.y;\n  }\n\n  const lastPoint = points[points.length - 1];\n  if (x >= lastPoint.x) {\n    return lastPoint.y;\n  }\n\n  for (let i = 1; i < points.length; ++i) {\n    const prevPoint = points[i - 1];\n    const nextPoint = points[i];\n    if (prevPoint.x <= x && x <= nextPoint.x) {\n      const t = (x - prevPoint.x) / (nextPoint.x - prevPoint.x);\n      return vso.add(\n        prevPoint.y,\n        vso.scale(vso.add(nextPoint.y, vso.scale(prevPoint.y, -1)), t)\n      );\n    }\n  }\n\n  throw new Error(\n    \"Malformed StepwiseLinearFunction. Points: \" + JSON.stringify(points)\n  );\n}\n\nfunction horizontallyStretchSimpleFunction<T, F extends SimpleFunction<T>>(\n  f: F,\n  stretchFactor: number\n): F;\nfunction horizontallyStretchSimpleFunction<T>(\n  f: SimpleFunction<T>,\n  stretchFactor: number\n): SimpleFunction<T> {\n  return {\n    kind: \"StepwiseLinearFunction\",\n    points: f.points.map((point) => ({\n      x: point.x * stretchFactor,\n      y: point.y,\n    })),\n  };\n}\n\nfunction applyElementwiseToColor32(\n  c: Color32,\n  f: (x: number) => number\n): Color32 {\n  return {\n    r: f(c.r),\n    g: f(c.g),\n    b: f(c.b),\n    a: f(c.a),\n  };\n}\n\n/** Returns `later - earlier` in seconds. */\nfunction getElapsedSeconds(later: Timestamp, earlier: Timestamp): number {\n  return (later.millisecondsSinceEpoch - earlier.millisecondsSinceEpoch) * 1e-3;\n}\n\nfunction isScreenShowingVictory(\n  screen: ScreenState,\n  getCurrentLevelBattleEvents: () => readonly BattleEvent[]\n): boolean {\n  if (\n    ![AnimationKind.PlayBattle, AnimationKind.PauseBattle].includes(\n      screen.animationKind\n    )\n  ) {\n    return false;\n  }\n\n  const elapsedSeconds = getElapsedSeconds(\n    screen.currentTimestamp,\n    screen.animationStartTime\n  );\n  const battleElapsedSeconds =\n    screen.animationKind === AnimationKind.PlayBattle\n      ? screen.battleAnimationOffsetSeconds + elapsedSeconds\n      : screen.animationKind === AnimationKind.PauseBattle\n      ? screen.battleAnimationOffsetSeconds\n      : 0;\n\n  if (battleElapsedSeconds === 0) {\n    return false;\n  }\n\n  const levelState = getInitialLevelState(screen.level);\n  const { battleStatus } = getBattleAnimationData(\n    levelState,\n    getCurrentLevelBattleEvents(),\n    battleElapsedSeconds\n  );\n  return battleStatus === BattleStatus.Victory;\n}\n\nfunction isScreenShowingDefeat(\n  screen: ScreenState,\n  getCurrentLevelBattleEvents: () => readonly BattleEvent[]\n): boolean {\n  if (\n    ![AnimationKind.PlayBattle, AnimationKind.PauseBattle].includes(\n      screen.animationKind\n    )\n  ) {\n    return false;\n  }\n\n  const elapsedSeconds = getElapsedSeconds(\n    screen.currentTimestamp,\n    screen.animationStartTime\n  );\n  const battleElapsedSeconds =\n    screen.animationKind === AnimationKind.PlayBattle\n      ? screen.battleAnimationOffsetSeconds + elapsedSeconds\n      : screen.animationKind === AnimationKind.PauseBattle\n      ? screen.battleAnimationOffsetSeconds\n      : 0;\n\n  if (battleElapsedSeconds === 0) {\n    return false;\n  }\n\n  const levelState = getInitialLevelState(screen.level);\n  const { battleStatus } = getBattleAnimationData(\n    levelState,\n    getCurrentLevelBattleEvents(),\n    battleElapsedSeconds\n  );\n  return battleStatus === BattleStatus.Defeat;\n}\n\nexport function typecheckedAssertNever(impossible: never): never {\n  return impossible;\n}\n\nfunction renderRect(rect: CanvasRect): CanvasElement {\n  // Based on https://github.com/jarek-foksa/path-data-polyfill/blob/master/path-data-polyfill.js\n  const { x, y, w, h } = rect;\n  const rx = Math.min(rect.rx ?? 0, w / 2);\n  const ry = Math.min(rect.ry ?? 0, h / 2);\n\n  const unfilteredPathData = [\n    { type: \"M\", values: [x + rx, y] },\n    { type: \"H\", values: [x + w - rx] },\n    { type: \"A\", values: [rx, ry, 0, 0, 1, x + w, y + ry] },\n    { type: \"V\", values: [y + h - ry] },\n    { type: \"A\", values: [rx, ry, 0, 0, 1, x + w - rx, y + h] },\n    { type: \"H\", values: [x + rx] },\n    { type: \"A\", values: [rx, ry, 0, 0, 1, x, y + h - ry] },\n    { type: \"V\", values: [y + ry] },\n    { type: \"A\", values: [rx, ry, 0, 0, 1, x + rx, y] },\n    { type: \"Z\", values: [] },\n  ];\n\n  // Get rid of redundant \"A\" segs when either rx or ry is 0\n  const pathData = unfilteredPathData.filter(function (s) {\n    return s.type === \"A\" && (s.values[0] === 0 || s.values[1] === 0)\n      ? false\n      : true;\n  });\n\n  const path = new Path2D(\n    pathData\n      .map((command) => command.type + command.values.join(\" \"))\n      .join(\"\\n\")\n  );\n\n  return {\n    kind: CanvasElementKind.Path,\n    path,\n    stroke: rect.stroke,\n    strokeWidth: rect.strokeWidth,\n    fill: rect.fill,\n  };\n}\n\nfunction renderCircle(circle: CanvasCircle): CanvasElement {\n  const { cx, cy, r } = circle;\n  return renderRect({\n    x: cx - r,\n    y: cy - r,\n    w: 2 * r,\n    h: 2 * r,\n    rx: r,\n    ry: r,\n    stroke: circle.stroke,\n    strokeWidth: circle.strokeWidth,\n    fill: circle.fill,\n  });\n}\n\nfunction getDummyBlockEditorState(): BlockEditorState<MainBlockEditorTypeParams> {\n  return getStartingBlockEditorStateForLevel(Level.Level1);\n}\n\nfunction noOp(): void {}\n\nfunction getButtonAt(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): null | ButtonKind {\n  const { screen } = state;\n\n  if (\n    screen.animationKind === AnimationKind.Edit &&\n    screen.blockEditor.literalEditor !== null\n  ) {\n    const elements = document.elementsFromPoint(\n      clientPosition.x,\n      clientPosition.y\n    );\n    if (\n      elements.some((elem) => elem.id === DOM_ELEMENT_IDS.blockLiteralEditor)\n    ) {\n      return null;\n    }\n  }\n\n  if (screen.animationKind === AnimationKind.StaticHome) {\n    return getButtonAtPositionAssumingHomeScreen(\n      clientPosition,\n      state,\n      resources\n    );\n  }\n\n  if (screen.animationKind === AnimationKind.StaticSettings) {\n    return getButtonAtPositionAssumingSettingsScreen(\n      clientPosition,\n      state,\n      resources\n    );\n  }\n\n  if (screen.animationKind === AnimationKind.StaticConfirmResetToLevelOne) {\n    return getButtonAtPositionAssumingConfirmResetToLevelOne(\n      clientPosition,\n      state,\n      resources\n    );\n  }\n\n  if (screen.animationKind === AnimationKind.Credits) {\n    return getButtonAtPositionAssumingCreditsScreen(\n      clientPosition,\n      state,\n      resources\n    );\n  }\n\n  if (\n    [\n      AnimationKind.Edit,\n      AnimationKind.PlayBattle,\n      AnimationKind.PauseBattle,\n    ].includes(screen.animationKind)\n  ) {\n    return getButtonAtPositionAssumingPuzzleScreen(\n      clientPosition,\n      state,\n      resources\n    );\n  }\n\n  return null;\n}\n\nfunction getButtonAtPositionAssumingHomeScreen(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): null | ButtonKind {\n  if (isWithinHomeScreenStartButton(clientPosition, state, resources)) {\n    return ButtonKind.HomeScreenStart;\n  }\n\n  if (isWithinHomeScreenSettingsButton(clientPosition, state, resources)) {\n    return ButtonKind.Settings;\n  }\n\n  return null;\n}\n\nfunction getButtonAtPositionAssumingSettingsScreen(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): null | ButtonKind {\n  if (isWithinSettingsScreenLanguageButton(clientPosition, state, resources)) {\n    return ButtonKind.Language;\n  }\n\n  if (isWithinSettingsScreenCreditsButton(clientPosition, state, resources)) {\n    return ButtonKind.Credits;\n  }\n\n  if (isWithinSettingsScreenResetButton(clientPosition, state, resources)) {\n    return ButtonKind.OpenConfirmResetToLevelOneScreen;\n  }\n\n  if (isWithinSettingsScreenCloseButton(clientPosition, state, resources)) {\n    return ButtonKind.SettingsScreenClose;\n  }\n\n  if (\n    isWithinSettingsScreenSecondaryCloseButton(clientPosition, state, resources)\n  ) {\n    return ButtonKind.SettingsScreenSecondaryClose;\n  }\n\n  return null;\n}\n\nfunction getButtonAtPositionAssumingConfirmResetToLevelOne(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): null | ButtonKind {\n  const hypotheticalButton = getButtonAtPositionAssumingSettingsScreen(\n    clientPosition,\n    state,\n    resources\n  );\n\n  if (hypotheticalButton === ButtonKind.Credits) {\n    return ButtonKind.ConfirmResetToLevelOne;\n  }\n\n  if (hypotheticalButton === ButtonKind.OpenConfirmResetToLevelOneScreen) {\n    return ButtonKind.CancelResetToLevelOne;\n  }\n\n  if (hypotheticalButton === ButtonKind.SettingsScreenClose) {\n    return ButtonKind.ConfirmResetToLevelOneScreenClose;\n  }\n\n  if (hypotheticalButton === ButtonKind.SettingsScreenSecondaryClose) {\n    return hypotheticalButton;\n  }\n\n  return null;\n}\n\nfunction getButtonAtPositionAssumingCreditsScreen(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): null | ButtonKind {\n  // If the user taps anywhere, we close the credits screen.\n  return ButtonKind.CreditsScreenClose;\n}\n\nfunction getButtonAtPositionAssumingPuzzleScreen(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): null | ButtonKind {\n  if (isWithinPuzzleScreenLeftButton(clientPosition, state, resources)) {\n    return ButtonKind.PuzzleScreenLeft;\n  }\n\n  if (isWithinPuzzleScreenMiddleButton(clientPosition, state, resources)) {\n    return ButtonKind.PuzzleScreenMiddle;\n  }\n\n  if (isWithinPuzzleScreenRightButton(clientPosition, state, resources)) {\n    return ButtonKind.PuzzleScreenRight;\n  }\n\n  if (\n    isScreenShowingVictory(\n      state.screen,\n      resources.getCurrentLevelBattleEvents\n    ) &&\n    isWithinNextLevelButton(clientPosition, state, resources)\n  ) {\n    return ButtonKind.NextLevel;\n  }\n\n  if (\n    state.screen.animationKind === AnimationKind.Edit &&\n    resources.renderTutorialCanvasElement() === NULL_CANVAS_ELEMENT &&\n    clientPosition.x >=\n      (1 - IN_EDITOR_MINI_BATTLE_SCREEN_SCALE_FACTOR) * state.appWidth &&\n    clientPosition.y >=\n      (1 - IN_EDITOR_MINI_BATTLE_SCREEN_SCALE_FACTOR) * state.appHeight\n  ) {\n    return ButtonKind.InEditorMiniBattleScreen;\n  }\n\n  return null;\n}\n\nfunction isWithinHomeScreenStartButton(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): boolean {\n  return isWithinButtonWithNonextendedHomePosition(\n    clientPosition,\n    START_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft,\n    images.buttons.home.start,\n    state,\n    resources\n  );\n}\n\nfunction isWithinHomeScreenSettingsButton(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): boolean {\n  return isWithinButtonWithNonextendedHomePosition(\n    clientPosition,\n    SETTINGS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft,\n    images.buttons.home.settings,\n    state,\n    resources\n  );\n}\n\nfunction isWithinSettingsScreenLanguageButton(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): boolean {\n  return isWithinButtonWithNonextendedHomePosition(\n    clientPosition,\n    LANGUAGE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft,\n    images.buttons.settings.language,\n    state,\n    resources\n  );\n}\n\nfunction isWithinSettingsScreenCreditsButton(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): boolean {\n  return isWithinButtonWithNonextendedHomePosition(\n    clientPosition,\n    CREDITS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft,\n    images.buttons.settings.credits,\n    state,\n    resources\n  );\n}\n\nfunction isWithinSettingsScreenResetButton(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): boolean {\n  return isWithinButtonWithNonextendedHomePosition(\n    clientPosition,\n    RESET_TO_LEVEL_ONE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft,\n    images.buttons.settings.reset_to_level_one,\n    state,\n    resources\n  );\n}\n\nfunction isWithinSettingsScreenCloseButton(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): boolean {\n  return isWithinButtonWithNonextendedHomePosition(\n    clientPosition,\n    SETTINGS_SCREEN_CLOSE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft,\n    images.buttons.settings.close,\n    state,\n    resources\n  );\n}\n\nfunction isWithinSettingsScreenSecondaryCloseButton(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): boolean {\n  // If the user clicks _outside_ the settings box,\n  // we consider that to be a click on the secondary close button.\n  return !isWithinButtonWithNonextendedHomePosition(\n    clientPosition,\n    SETTINGS_BOX_BBOX_IN_NONEXTENDED_HOME_COORDS.topLeft,\n    images.settings_box,\n    state,\n    resources\n  );\n}\n\nfunction isWithinButtonWithNonextendedHomePosition(\n  clientPosition: Vec2,\n  bboxInNonextendedHomeCoords: Vec2,\n  buttonImage: HTMLImageElement,\n  state: State,\n  resources: ButtonClickDetectorResources\n): boolean {\n  const MAIN_DIMENSIONS: Dimensions = {\n    width: 2039,\n    height: 1447,\n  };\n  const minimumHorizontalScale = state.appWidth / MAIN_DIMENSIONS.width;\n  const minimumVerticalScale = state.appHeight / MAIN_DIMENSIONS.height;\n  const scale = Math.min(minimumHorizontalScale, minimumVerticalScale);\n  const mainRbox: Rectangle = ((): Rectangle => {\n    const scaledWidth = MAIN_DIMENSIONS.width * scale;\n    const scaledHeight = MAIN_DIMENSIONS.height * scale;\n    const x = (state.appWidth - scaledWidth) / 2;\n    const y = (state.appHeight - scaledHeight) / 1;\n    return {\n      topLeft: { x, y },\n      dimensions: { width: scaledWidth, height: scaledHeight },\n    };\n  })();\n\n  const touchPositionInNonextendedHomeCoords = {\n    x: Math.floor((clientPosition.x - mainRbox.topLeft.x) / scale),\n    y: Math.floor((clientPosition.y - mainRbox.topLeft.y) / scale),\n  };\n  const touchPositionInImageCoords = subVec(\n    touchPositionInNonextendedHomeCoords,\n    bboxInNonextendedHomeCoords\n  );\n  const imageX = touchPositionInImageCoords.x;\n  const imageY = touchPositionInImageCoords.y;\n\n  if (buttonImage.naturalWidth === 0 || buttonImage.naturalHeight === 0) {\n    return false;\n  }\n\n  const ctx = resources.tempCanvasCtx;\n  ctx.canvas.width = NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.width;\n  ctx.canvas.height = NONEXTENDED_HOME_BACKGROUND_DIMENSIONS.height;\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  ctx.drawImage(buttonImage, imageX, imageY, 1, 1, imageX, imageY, 1, 1);\n  const imageData = ctx.getImageData(imageX, imageY, 1, 1).data;\n  return imageData[3] > 0;\n}\n\nfunction isWithinPuzzleScreenLeftButton(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): boolean {\n  const { appWidth, appHeight } = state;\n  const backgroundImageScale = appWidth / SIZING.castleInteriorImage.width;\n  const safeAreaInsets = state.safeAreaInsets.insets;\n\n  const buttonImage = images.buttons.puzzle.edit;\n  const bbox = getNondepressedPuzzleScreenButtonBBoxes(\n    backgroundImageScale,\n    safeAreaInsets\n  ).nondepressedLeftButtonBBox;\n  const button: CanvasElement = {\n    kind: CanvasElementKind.Image,\n    source: buttonImage,\n    dx: bbox.topLeft.x,\n    dy: bbox.topLeft.y,\n    dw: bbox.dimensions.width,\n    dh: bbox.dimensions.height,\n  };\n\n  const ctx = resources.tempCanvasCtx;\n  ctx.canvas.width = appWidth;\n  ctx.canvas.height = appHeight;\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  paintCanvasElement(button, ctx);\n  const imageX = Math.floor(clientPosition.x);\n  const imageY = Math.floor(clientPosition.y);\n  const imageData = ctx.getImageData(imageX, imageY, 1, 1).data;\n  return imageData[3] > 0;\n}\n\nfunction isWithinPuzzleScreenMiddleButton(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): boolean {\n  const { appWidth, appHeight } = state;\n  const backgroundImageScale = appWidth / SIZING.castleInteriorImage.width;\n  const safeAreaInsets = state.safeAreaInsets.insets;\n\n  // The View, Play, and Pause buttons all have the same dimensions.\n  // So we arbitrarily choose to use View here,\n  // but this code will work correctly for all 3 buttons.\n  const buttonImage = images.buttons.puzzle.view;\n  const bbox = getNondepressedPuzzleScreenButtonBBoxes(\n    backgroundImageScale,\n    safeAreaInsets\n  ).nondepressedMiddleButtonBBox;\n  const button: CanvasElement = {\n    kind: CanvasElementKind.Image,\n    source: buttonImage,\n    dx: bbox.topLeft.x,\n    dy: bbox.topLeft.y,\n    dw: bbox.dimensions.width,\n    dh: bbox.dimensions.height,\n  };\n\n  const ctx = resources.tempCanvasCtx;\n  ctx.canvas.width = appWidth;\n  ctx.canvas.height = appHeight;\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  paintCanvasElement(button, ctx);\n  const imageX = Math.floor(clientPosition.x);\n  const imageY = Math.floor(clientPosition.y);\n  const imageData = ctx.getImageData(imageX, imageY, 1, 1).data;\n  return imageData[3] > 0;\n}\n\nfunction isWithinPuzzleScreenRightButton(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): boolean {\n  const { appWidth, appHeight } = state;\n  const backgroundImageScale = appWidth / SIZING.castleInteriorImage.width;\n  const safeAreaInsets = state.safeAreaInsets.insets;\n\n  const buttonImage = images.buttons.puzzle.home;\n  const bbox = getNondepressedPuzzleScreenButtonBBoxes(\n    backgroundImageScale,\n    safeAreaInsets\n  ).nondepressedRightButtonBBox;\n  const button: CanvasElement = {\n    kind: CanvasElementKind.Image,\n    source: buttonImage,\n    dx: bbox.topLeft.x,\n    dy: bbox.topLeft.y,\n    dw: bbox.dimensions.width,\n    dh: bbox.dimensions.height,\n  };\n\n  const ctx = resources.tempCanvasCtx;\n  ctx.canvas.width = appWidth;\n  ctx.canvas.height = appHeight;\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  paintCanvasElement(button, ctx);\n  const imageX = Math.floor(clientPosition.x);\n  const imageY = Math.floor(clientPosition.y);\n  const imageData = ctx.getImageData(imageX, imageY, 1, 1).data;\n  return imageData[3] > 0;\n}\n\nfunction isWithinNextLevelButton(\n  clientPosition: Vec2,\n  state: State,\n  resources: ButtonClickDetectorResources\n): boolean {\n  if (state.screen.level >= LAST_LEVEL) {\n    return false;\n  }\n\n  const { appWidth, appHeight, language } = state;\n\n  const backgroundImageScale = appWidth / SIZING.castleInteriorImage.width;\n  const battleOutcomeTextDimensions = resources.measureCanvasText({\n    text: getUiText(language, UiTextKind.LevelCleared),\n    fontSize: SIZING.unscaledBattleOutcomeTextSizePx * backgroundImageScale,\n    fontFamily: BATTLE_OUTCOME_TEXT_FONT_FAMILY,\n  });\n  const nextLevelButtonTextDimensions = resources.measureCanvasText({\n    text: getUiText(language, UiTextKind.NextLevel),\n    fontSize: SIZING.unscaledButtonTextSizePx * backgroundImageScale,\n    fontFamily: BUTTON_TEXT_FONT_FAMILY,\n  });\n  const nextLevelButtonPadding = nextLevelButtonTextDimensions.height;\n  const victoryButton = renderRect({\n    x:\n      state.appWidth / 2 -\n      (nextLevelButtonTextDimensions.width + 2 * nextLevelButtonPadding) / 2,\n    y:\n      0 +\n      0.5 * appHeight +\n      0.5 * battleOutcomeTextDimensions.height +\n      2 * battleOutcomeTextDimensions.height,\n    w: nextLevelButtonTextDimensions.width + 2 * nextLevelButtonPadding,\n    h: nextLevelButtonTextDimensions.height + 2 * nextLevelButtonPadding,\n    fill: COLOR_THEME.buttonBlue,\n    rx: 5,\n    ry: 5,\n  });\n\n  const ctx = resources.tempCanvasCtx;\n  ctx.canvas.width = appWidth;\n  ctx.canvas.height = appHeight;\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  paintCanvasElement(victoryButton, ctx);\n  const imageX = Math.floor(clientPosition.x);\n  const imageY = Math.floor(clientPosition.y);\n  const imageData = ctx.getImageData(imageX, imageY, 1, 1).data;\n  return imageData[3] > 0;\n}\n\nfunction getDepressedButtonBBox(nondepressedBBox: Rectangle): Rectangle {\n  const nondepressedWidth = nondepressedBBox.dimensions.width;\n  const nondepressedHeight = nondepressedBBox.dimensions.height;\n  const width = nondepressedWidth * SIZING.depressedButtonScale;\n  const height = nondepressedHeight * SIZING.depressedButtonScale;\n  const topLeft = addVec(nondepressedBBox.topLeft, {\n    x: 0.5 * (nondepressedWidth - width),\n    y: 0.5 * (nondepressedHeight - height),\n  });\n  return {\n    topLeft,\n    dimensions: { width, height },\n  };\n}\n\nfunction areAnyBlocksReachable(screen: ScreenState): boolean {\n  return screen.blockEditor.canvas.items.some(\n    (item) =>\n      item.content[0].kind === BlockKind.WhenBattleStarts &&\n      item.content.length >= 2\n  );\n}\n\nfunction withAlpha(alpha: number, e: CanvasElement): CanvasElement {\n  return {\n    kind: CanvasElementKind.Group,\n    alpha,\n    children: [e],\n  };\n}\n\nfunction getSavedStateOrDefault(): Promise<SavableState> {\n  return loadData(LOCAL_STORAGE_STATE_KEY).then(\n    (savedString): Promise<SavableState> => {\n      const parsed = parseStringAsState(savedString);\n\n      if (parsed === null) {\n        return getDefaultSavableStateByGuessingPreferredLanguageBasedOnDeviceLanguage();\n      }\n\n      return Promise.resolve(parsed);\n    }\n  );\n}\n\nfunction getStateSavedInLocalStorageOrDefault(): SavableState {\n  const savedStr = localStorage.getItem(LOCAL_STORAGE_STATE_KEY);\n  return (\n    parseStringAsState(savedStr) ??\n    getDefaultSavableStateByGuessingPreferredLanguageBasedOnBrowserLanguage()\n  );\n}\n\nfunction parseStringAsState(s: null | string): null | SavableState {\n  if (s === null) {\n    return null;\n  }\n\n  try {\n    const parsed = JSON.parse(s);\n    if (parsed.version !== SETTINGS_VERSION) {\n      return null;\n    }\n\n    const { language, blockEditor, level } = parsed;\n    return { language, blockEditor, level };\n  } catch {\n    console.error(\"Failed to parse saved state: \" + JSON.stringify(s));\n    return null;\n  }\n}\n\nasync function getDefaultSavableStateByGuessingPreferredLanguageBasedOnDeviceLanguage(): Promise<SavableState> {\n  const level = Level.Level1;\n  const blockEditor = getStartingBlockEditorStateForLevel(level);\n  const deviceLanguage =\n    await tryToGuessPreferredLanguageBasedOnDeviceLanguage();\n  const language =\n    deviceLanguage ?? guessPreferredLanguageBasedOnBrowserLanguage();\n  return { language, blockEditor, level };\n}\n\nfunction getDefaultSavableStateByGuessingPreferredLanguageBasedOnBrowserLanguage(): SavableState {\n  const level = Level.Level1;\n  const blockEditor = getStartingBlockEditorStateForLevel(level);\n  const language = guessPreferredLanguageBasedOnBrowserLanguage();\n  return { language, blockEditor, level };\n}\n\nasync function tryToGuessPreferredLanguageBasedOnDeviceLanguage(): Promise<null | UiLanguage> {\n  try {\n    const deviceLang = await Device.getLanguageTag();\n    return tryToGuessPreferredLanguageBasedOnString(deviceLang.value);\n  } catch {\n    return null;\n  }\n}\n\nfunction guessPreferredLanguageBasedOnBrowserLanguage(): UiLanguage {\n  const navLang = navigator.language;\n  return tryToGuessPreferredLanguageBasedOnString(navLang) ?? DEFAULT_LANGUAGE;\n}\n\nfunction tryToGuessPreferredLanguageBasedOnString(\n  langStr: string\n): null | UiLanguage {\n  return langStr.startsWith(\"en\")\n    ? UiLanguage.English\n    : langStr.startsWith(\"ja\")\n    ? UiLanguage.Japanese\n    : null;\n}\n\nfunction saveState(\n  state: State,\n  getCurrentLevelBattleEvents: () => readonly BattleEvent[]\n): void {\n  const { language, screen } = state;\n  const unsafeNextLevel = screen.level + 1;\n  const { blockEditor, level } =\n    isScreenShowingVictory(screen, getCurrentLevelBattleEvents) &&\n    screen.level < LAST_LEVEL\n      ? {\n          blockEditor: getStartingBlockEditorStateForLevel(unsafeNextLevel),\n          level: unsafeNextLevel,\n        }\n      : screen;\n  const savableState = {\n    version: SETTINGS_VERSION,\n    language,\n    blockEditor,\n    level,\n  };\n  const stateString = JSON.stringify(savableState);\n  saveData(LOCAL_STORAGE_STATE_KEY, stateString);\n}\n\nfunction typesafeCast<T>(x: T): T {\n  return x;\n}\n\nfunction getLaterTimestamp(a: Timestamp, b: Timestamp): Timestamp {\n  return {\n    millisecondsSinceEpoch: Math.max(\n      a.millisecondsSinceEpoch,\n      b.millisecondsSinceEpoch\n    ),\n  };\n}\n\nfunction areAnyTrue(bools: readonly boolean[]): boolean {\n  return bools.some(identity);\n}\n\nfunction identity<T>(x: T): T {\n  return x;\n}\n\nfunction flagBlockSequenceAsInactiveExcept(\n  activeBlockAddress: NodeAddress,\n  sequence: BlockSequence<MinimapBlockEditorTypeParams>,\n  sequenceAddress: NodeAddress\n): BlockSequence<MinimapBlockEditorTypeParams> {\n  return sequence.map((block, i) =>\n    flagBlockAsInactiveExcept(\n      activeBlockAddress,\n      block,\n      sequenceAddress.concat([i])\n    )\n  );\n}\n\nfunction flagBlockAsInactiveExcept(\n  activeBlockAddress: NodeAddress,\n  block: Block<MinimapBlockEditorTypeParams>,\n  blockAddress: NodeAddress\n): Block<MinimapBlockEditorTypeParams> {\n  return {\n    kind: areNodeAddressesEqual(activeBlockAddress, blockAddress)\n      ? getActiveVersionOfBlockKind(block.kind)\n      : getInactiveVersionOfBlockKind(block.kind),\n    isLiteral: block.isLiteral,\n    args: {\n      expressions: block.args.expressions.map((expression, expressionIndex) =>\n        expression.isLiteral\n          ? expression\n          : flagBlockAsInactiveExcept(\n              activeBlockAddress,\n              expression,\n              blockAddress.concat([\n                ARG_EXPRESSION_ADDRESS_PART,\n                expressionIndex,\n              ])\n            )\n      ),\n      dropdowns: block.args.dropdowns,\n      sequences: block.args.sequences.map((sequence, sequenceIndex) =>\n        flagBlockSequenceAsInactiveExcept(\n          activeBlockAddress,\n          sequence,\n          blockAddress.concat([\n            ARG_COMMAND_SEQUENCE_ADDRESS_PART,\n            sequenceIndex,\n          ])\n        )\n      ),\n    },\n  };\n}\n\nfunction getActiveVersionOfBlockKind(kind: MinimapBlockKind): BlockKind {\n  const halfDict: ReadonlyRecord<BlockKind, BlockKind> = mapBlockKindRecord(\n    BLOCK_DEF_STRINGS,\n    (_val, kind) => kind\n  );\n  const dict: ReadonlyRecord<MinimapBlockKind, BlockKind> = {\n    ...halfDict,\n    ...mapBlockKindRecordToInactiveBlockKindRecord(halfDict, identity),\n  };\n  return dict[kind];\n}\n\nfunction getInactiveVersionOfBlockKind(\n  kind: MinimapBlockKind\n): MinimapBlockKind {\n  const halfDict: ReadonlyRecord<BlockKind, InactiveBlockKind> = {\n    [BlockKind.WhenBattleStarts]: InactiveBlockKind.WhenBattleStarts,\n    [BlockKind.MoveForward]: InactiveBlockKind.MoveForward,\n    [BlockKind.Attack]: InactiveBlockKind.Attack,\n    [BlockKind.Heal]: InactiveBlockKind.Heal,\n    [BlockKind.MoveBackward]: InactiveBlockKind.MoveBackward,\n    [BlockKind.Forever]: InactiveBlockKind.Forever,\n    [BlockKind.If]: InactiveBlockKind.If,\n    [BlockKind.XInFront]: InactiveBlockKind.XInFront,\n    [BlockKind.And]: InactiveBlockKind.And,\n    [BlockKind.Or]: InactiveBlockKind.Or,\n    [BlockKind.Not]: InactiveBlockKind.Not,\n    [BlockKind.Health]: InactiveBlockKind.Health,\n    [BlockKind.LessThan]: InactiveBlockKind.LessThan,\n    [BlockKind.Equal]: InactiveBlockKind.Equal,\n    [BlockKind.GreaterThan]: InactiveBlockKind.GreaterThan,\n  };\n  const dict: ReadonlyRecord<MinimapBlockKind, InactiveBlockKind> = {\n    ...halfDict,\n    ...mapBlockKindRecordToInactiveBlockKindRecord(halfDict, identity),\n  };\n  return dict[kind];\n}\n\nexport function toU8(n: number): number {\n  const out = Math.min(255, Math.max(0, Math.round(n)));\n\n  if (!Number.isInteger(out)) {\n    return 0;\n  }\n\n  return out;\n}\n\nfunction getRboxAtAddressFromBlockSequence(\n  targetAddress: NodeAddress,\n  spec: BlockSequenceRenderSpec<any>\n): null | Rectangle {\n  if (areNodeAddressesEqual(targetAddress, spec.address)) {\n    return spec.rbox;\n  }\n\n  for (const blockSpec of spec.blockSpecs) {\n    const subRbox = getRboxAtAddressFromBlock(targetAddress, blockSpec);\n    if (subRbox !== null) {\n      return subRbox;\n    }\n  }\n\n  return null;\n}\n\nfunction getRboxAtAddressFromBlock(\n  targetAddress: NodeAddress,\n  spec: BlockRenderSpec<any>\n): null | Rectangle {\n  if (areNodeAddressesEqual(targetAddress, spec.address)) {\n    return spec.rbox;\n  }\n\n  for (const expressionSpec of spec.subexpressionSpecs) {\n    if (expressionSpec.kind === RenderSpecKind.Literal) {\n      continue;\n    }\n\n    const subRbox = getRboxAtAddressFromBlock(targetAddress, expressionSpec);\n    if (subRbox !== null) {\n      return subRbox;\n    }\n  }\n\n  for (const sequenceSpec of spec.subsequenceSpecs) {\n    const subRbox = getRboxAtAddressFromBlockSequence(\n      targetAddress,\n      sequenceSpec\n    );\n    if (subRbox !== null) {\n      return subRbox;\n    }\n  }\n\n  return null;\n}\n\nfunction disableBlockDeletionBasedOnLevel(\n  original: BlockDefs<MainBlockEditorTypeParams>,\n  level: Level\n): BlockDefs<MainBlockEditorTypeParams> {\n  switch (level) {\n    case Level.Level1:\n    case Level.Level2:\n    case Level.Level3:\n    case Level.Level4:\n    case Level.Level5:\n    case Level.Level6:\n    case Level.Level10:\n      return original;\n\n    case Level.Level7: {\n      const NORMALLY_DELETABLE_BLOCK_KINDS_THAT_ARE_UNDELETABLE = [\n        BlockKind.MoveForward,\n      ];\n      return mapBlockKindRecord(original, (originalDef, kind) =>\n        NORMALLY_DELETABLE_BLOCK_KINDS_THAT_ARE_UNDELETABLE.includes(kind)\n          ? { ...originalDef, isDeletable: false }\n          : originalDef\n      );\n    }\n\n    case Level.Level8: {\n      const NORMALLY_DELETABLE_BLOCK_KINDS_THAT_ARE_UNDELETABLE = [\n        BlockKind.MoveForward,\n        BlockKind.Attack,\n      ];\n      return mapBlockKindRecord(original, (originalDef, kind) =>\n        NORMALLY_DELETABLE_BLOCK_KINDS_THAT_ARE_UNDELETABLE.includes(kind)\n          ? { ...originalDef, isDeletable: false }\n          : originalDef\n      );\n    }\n\n    case Level.Level9: {\n      const NORMALLY_DELETABLE_BLOCK_KINDS_THAT_ARE_UNDELETABLE = [\n        BlockKind.MoveForward,\n        BlockKind.Attack,\n        BlockKind.Heal,\n      ];\n      return mapBlockKindRecord(original, (originalDef, kind) =>\n        NORMALLY_DELETABLE_BLOCK_KINDS_THAT_ARE_UNDELETABLE.includes(kind)\n          ? { ...originalDef, isDeletable: false }\n          : originalDef\n      );\n    }\n  }\n}\n\nfunction doesBlockKindConsumeHeroTurn(kind: BlockKind): boolean {\n  switch (kind) {\n    case BlockKind.MoveForward:\n    case BlockKind.MoveBackward:\n    case BlockKind.Attack:\n    case BlockKind.Heal:\n      return true;\n\n    // Control structures do not consume a turn.\n    case BlockKind.WhenBattleStarts:\n    case BlockKind.Forever:\n    case BlockKind.If:\n      return false;\n\n    // Queries do not consume a turn.\n    case BlockKind.XInFront:\n    case BlockKind.And:\n    case BlockKind.Or:\n    case BlockKind.Not:\n    case BlockKind.Health:\n    case BlockKind.LessThan:\n    case BlockKind.Equal:\n    case BlockKind.GreaterThan:\n      return false;\n  }\n}\n\nfunction doesBlockSequenceContainNonEmptyLiteral(\n  sequence: BlockSequence<BlockEditorTypeParams>\n): boolean {\n  return sequence.some(doesBlockContainNonEmptyLiteral);\n}\n\nfunction doesBlockContainNonEmptyLiteral(\n  block: Block<BlockEditorTypeParams>\n): boolean {\n  return (\n    block.args.expressions.some((expr) =>\n      expr.isLiteral\n        ? expr.source.length > 0\n        : doesBlockContainNonEmptyLiteral(expr)\n    ) || block.args.sequences.some(doesBlockSequenceContainNonEmptyLiteral)\n  );\n}\n\nfunction getBlockSpecFromBlockSequenceSpecSatisfying<\n  B extends BlockEditorTypeParams\n>(\n  seqSpec: BlockSequenceRenderSpec<B>,\n  predicate: (blockSpec: BlockRenderSpec<B>) => boolean\n): null | BlockRenderSpec<B> {\n  for (const blockSpec of seqSpec.blockSpecs) {\n    if (predicate(blockSpec)) {\n      return blockSpec;\n    }\n  }\n\n  for (const blockSpec of seqSpec.blockSpecs) {\n    const subBlockSpec = getSubBlockSpecFromBlockSpecSatisfying(\n      blockSpec,\n      predicate\n    );\n    if (subBlockSpec !== null) {\n      return subBlockSpec;\n    }\n  }\n\n  return null;\n}\n\nfunction getSubBlockSpecFromBlockSpecSatisfying<\n  B extends BlockEditorTypeParams\n>(\n  blockSpec: BlockRenderSpec<B>,\n  predicate: (blockSpec: BlockRenderSpec<B>) => boolean\n): null | BlockRenderSpec<B> {\n  for (const subBlockSpec of blockSpec.subexpressionSpecs) {\n    if (subBlockSpec.kind === RenderSpecKind.Literal) {\n      continue;\n    }\n\n    if (predicate(subBlockSpec)) {\n      return subBlockSpec;\n    }\n  }\n\n  for (const subSeqSpec of blockSpec.subsequenceSpecs) {\n    const subBlockSpec = getBlockSpecFromBlockSequenceSpecSatisfying(\n      subSeqSpec,\n      predicate\n    );\n    if (subBlockSpec !== null) {\n      return subBlockSpec;\n    }\n  }\n\n  return null;\n}\n\nfunction mapTriplet(\n  src: ColorTriplet,\n  f: (preim: Color32) => Color32\n): ColorTriplet {\n  return {\n    primary: f(src.primary),\n    secondary: f(src.secondary),\n    tertiary: f(src.tertiary),\n  };\n}\n\nfunction compositeColor32(foreground: Color32, background: Color32): Color32 {\n  const fgAlpha = foreground.a / 255;\n  const bgAlpha = background.a / 255;\n  const outAlpha = fgAlpha + bgAlpha * (1.0 - fgAlpha);\n\n  const unrounded = {\n    r:\n      (foreground.r * fgAlpha + background.r * bgAlpha * (1.0 - fgAlpha)) /\n      outAlpha,\n    g:\n      (foreground.g * fgAlpha + background.g * bgAlpha * (1.0 - fgAlpha)) /\n      outAlpha,\n    b:\n      (foreground.b * fgAlpha + background.b * bgAlpha * (1.0 - fgAlpha)) /\n      outAlpha,\n    a: 255 * outAlpha,\n  };\n\n  return {\n    r: toU8(unrounded.r),\n    g: toU8(unrounded.g),\n    b: toU8(unrounded.b),\n    a: toU8(unrounded.a),\n  };\n}\n\nfunction getSvgTextDimensionCacheKey(\n  text: string,\n  fontFamily: string,\n  fontSizePx: number\n): string {\n  if (text.includes(SVG_TEXT_DIMENSION_CACHE_KEY_SEPARATOR)) {\n    throw new Error(\n      \"Text cannot include SVG_TEXT_DIMENSION_CACHE_KEY_SEPARATOR. Text: \" +\n        JSON.stringify(text)\n    );\n  }\n\n  return `${fontSizePx} ${text}${SVG_TEXT_DIMENSION_CACHE_KEY_SEPARATOR}${fontFamily}`;\n}\n\nfunction willHeroKillEnemyAtIndexAssumingEnemiesCannotSummon(\n  ibec: ImmutableBlockExecutionContext,\n  enemyIndex: number\n): boolean {\n  const enemyKind = ibec.levelState.squares[enemyIndex].kind;\n\n  if (enemyKind === SquareKind.Empty || enemyKind === SquareKind.Hero) {\n    throw new Error(\n      `Illegal enemyIndex passed to willHeroKillEnemyAtIndexAssumingEnemiesCannotSummon: ${enemyIndex}. The square at ${enemyIndex} contains ${enemyKind}.`\n    );\n  }\n\n  const mbec = cloneBlockExecutionContext(ibec);\n\n  while (\n    mbec.gas > 0 &&\n    mbec.stack.length > 0 &&\n    isBattleStillOngoing(mbec.levelState)\n  ) {\n    evalAndPopTopStackBlock(mbec, false);\n\n    if (mbec.levelState.squares[enemyIndex].kind !== enemyKind) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction cloneBlockExecutionContext(\n  ibec: ImmutableBlockExecutionContext\n): MutableBlockExecutionContext {\n  return {\n    gas: ibec.gas,\n    stack: ibec.stack.slice(),\n    levelState: ibec.levelState,\n    events: ibec.events.slice(),\n  };\n}\n\nfunction isBattleStillOngoing(levelState: LevelState): boolean {\n  const heroIndex = getHeroIndex(levelState);\n\n  if (heroIndex === -1) {\n    return false;\n  }\n\n  if ((levelState.squares[heroIndex] as HeroSquareState).health <= 0) {\n    return false;\n  }\n\n  if (heroIndex === levelState.squares.length - 1) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction addFailLevelEventIfNotAlreadyPresent(events: BattleEvent[]): void {\n  if (events.some((e) => e.kind === BattleEventKind.FailLevel)) {\n    return;\n  }\n\n  events.push({ kind: BattleEventKind.FailLevel });\n}\n\nfunction renderCastleSquareOccupant({\n  square,\n  squareIndex,\n  backgroundImageTop,\n  backgroundImageScale,\n  elapsedSeconds,\n  battleAnimationData,\n}: {\n  readonly square: SquareState;\n  readonly squareIndex: number;\n  readonly backgroundImageTop: number;\n  readonly backgroundImageScale: number;\n  readonly elapsedSeconds: number;\n  readonly battleAnimationData: BattleAnimationData;\n}): CanvasElement {\n  const {\n    characterDisplacements,\n    witchAnimationFrame,\n    battleStatus,\n    displayHeroHealingAnimation,\n    damageOverlayAlphas,\n    squareOccupantAlphas,\n  } = battleAnimationData;\n\n  if (square.kind === SquareKind.Empty) {\n    return NULL_CANVAS_ELEMENT;\n  }\n\n  if (square.kind === SquareKind.Hero) {\n    if (square.health <= 0 || battleStatus !== BattleStatus.InProgress) {\n      return NULL_CANVAS_ELEMENT;\n    }\n\n    const characterBBox: Rectangle = {\n      topLeft: {\n        x:\n          (40 + squareIndex * 150 + characterDisplacements[squareIndex].x) *\n          backgroundImageScale,\n        y:\n          backgroundImageTop +\n          (1020 + characterDisplacements[squareIndex].y) * backgroundImageScale,\n      },\n      dimensions: {\n        width: 150 * backgroundImageScale,\n        height:\n          150 *\n          backgroundImageScale *\n          (images.hero.naturalHeight / images.hero.naturalWidth),\n      },\n    };\n\n    const heartElements = getCharacterHeartsCanvasElements({\n      characterBBox,\n      square,\n      squareIndex,\n      backgroundImageScale,\n      battleAnimationData,\n    });\n\n    return {\n      kind: CanvasElementKind.Group,\n      alpha: squareOccupantAlphas[squareIndex],\n      children: [\n        heartElements.all,\n\n        {\n          kind: CanvasElementKind.Group,\n          alpha: !displayHeroHealingAnimation\n            ? 0\n            : periodicColorSinInterp(\n                { r: 128, g: 0, b: 0, a: 0 },\n                { r: 255, g: 128, b: 128, a: 255 },\n                elapsedSeconds,\n                3\n              ).a / 255,\n          children: heartElements.orderedHeartMarkImageElements.map(\n            (image, heartIndex) => {\n              if (\n                heartIndex < square.health + BATTLE_CONFIG.heroHeal &&\n                square.health <= heartIndex\n              ) {\n                return {\n                  ...image,\n                  source: images.heart_mark,\n                };\n              }\n\n              return NULL_CANVAS_ELEMENT;\n            }\n          ),\n        },\n\n        {\n          kind: CanvasElementKind.Image,\n          source: images.hero,\n          dx: characterBBox.topLeft.x,\n          dy: characterBBox.topLeft.y,\n          dw: characterBBox.dimensions.width,\n          dh: characterBBox.dimensions.height,\n        },\n\n        {\n          kind: CanvasElementKind.Group,\n          alpha: damageOverlayAlphas[squareIndex],\n          children: [\n            {\n              kind: CanvasElementKind.Image,\n              source: damageOverlays.hero,\n              dx: characterBBox.topLeft.x,\n              dy: characterBBox.topLeft.y,\n              dw: characterBBox.dimensions.width,\n              dh: characterBBox.dimensions.height,\n            },\n          ],\n        },\n      ],\n    };\n  }\n\n  if (square.kind === SquareKind.Goblin) {\n    const imageSource =\n      square.color === GoblinColor.Green\n        ? images.green_goblin\n        : square.color === GoblinColor.Purple\n        ? images.purple_goblin\n        : typecheckedAssertNever(square.color);\n    const characterBBox: Rectangle = {\n      topLeft: {\n        x:\n          (40 + squareIndex * 150 + characterDisplacements[squareIndex].x) *\n          backgroundImageScale,\n        y: backgroundImageTop + 1020 * backgroundImageScale,\n      },\n      dimensions: {\n        width: 150 * backgroundImageScale,\n        height:\n          150 *\n          backgroundImageScale *\n          (imageSource.naturalHeight / imageSource.naturalWidth),\n      },\n    };\n    return {\n      kind: CanvasElementKind.Group,\n      alpha: squareOccupantAlphas[squareIndex],\n      children: [\n        getCharacterHeartsCanvasElements({\n          characterBBox,\n          square,\n          squareIndex,\n          backgroundImageScale,\n          battleAnimationData,\n        }).all,\n\n        {\n          kind: CanvasElementKind.Image,\n          source: imageSource,\n          dx: characterBBox.topLeft.x,\n          dy: characterBBox.topLeft.y,\n          dw: characterBBox.dimensions.width,\n          dh: characterBBox.dimensions.height,\n        },\n\n        {\n          kind: CanvasElementKind.Group,\n          alpha: damageOverlayAlphas[squareIndex],\n          children: [\n            {\n              kind: CanvasElementKind.Image,\n              source: damageOverlays.goblin,\n              dx: characterBBox.topLeft.x,\n              dy: characterBBox.topLeft.y,\n              dw: characterBBox.dimensions.width,\n              dh: characterBBox.dimensions.height,\n            },\n          ],\n        },\n      ],\n    };\n  }\n\n  if (square.kind === SquareKind.Witch) {\n    const witchImage: HTMLImageElement = [\n      images.witch_idle,\n      images.witch_wand_raised,\n      images.witch_wand_lowered,\n      images.witch_idle,\n    ][witchAnimationFrame];\n\n    const characterBBox: Rectangle = {\n      topLeft: {\n        x:\n          (40 + squareIndex * 150 + characterDisplacements[squareIndex].x) *\n          backgroundImageScale,\n        y: backgroundImageTop + 1020 * backgroundImageScale,\n      },\n      dimensions: {\n        width: 150 * backgroundImageScale,\n        height:\n          150 *\n          backgroundImageScale *\n          (witchImage.naturalHeight / witchImage.naturalWidth),\n      },\n    };\n\n    return {\n      kind: CanvasElementKind.Group,\n      alpha: squareOccupantAlphas[squareIndex],\n      children: [\n        getCharacterHeartsCanvasElements({\n          characterBBox,\n          square,\n          squareIndex,\n          backgroundImageScale,\n          battleAnimationData,\n        }).all,\n\n        {\n          kind: CanvasElementKind.Image,\n          source: witchImage,\n          dx: characterBBox.topLeft.x,\n          dy: characterBBox.topLeft.y,\n          dw: characterBBox.dimensions.width,\n          dh: characterBBox.dimensions.height,\n        },\n\n        witchImage !== images.witch_idle\n          ? NULL_CANVAS_ELEMENT\n          : {\n              kind: CanvasElementKind.Group,\n              alpha: damageOverlayAlphas[squareIndex],\n              children: [\n                {\n                  kind: CanvasElementKind.Image,\n                  source: damageOverlays.witch_idle,\n                  dx: characterBBox.topLeft.x,\n                  dy: characterBBox.topLeft.y,\n                  dw: characterBBox.dimensions.width,\n                  dh: characterBBox.dimensions.height,\n                },\n              ],\n            },\n      ],\n    };\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const exhaustivenessCheck: never = square;\n  return exhaustivenessCheck;\n}\n\nfunction sum(nums: readonly number[]): number {\n  let total = 0;\n  for (const n of nums) {\n    total += n;\n  }\n  return total;\n}\n\nfunction getRectCenter(r: Rectangle): Vec2 {\n  return {\n    x: r.topLeft.x + 0.5 * r.dimensions.width,\n    y: r.topLeft.y + 0.5 * r.dimensions.height,\n  };\n}\n\nfunction didHeroDefeatAllEnemiesButForgetToMoveToStairs(\n  levelState: LevelState,\n  hasFailLevelEventBeenEmitted: boolean\n): boolean {\n  const heroIndex = getHeroIndex(levelState);\n  if (heroIndex === -1) {\n    return false;\n  }\n\n  const { squares } = levelState;\n\n  return (\n    (squares[heroIndex] as HeroSquareState).health > 0 &&\n    squares\n      .slice(heroIndex + 1)\n      .every((square) => square.kind === SquareKind.Empty) &&\n    hasFailLevelEventBeenEmitted\n  );\n}\n\nfunction didHeroSurviveLevelButFailToReachStairs(\n  levelState: LevelState,\n  hasFailLevelEventBeenEmitted: boolean\n): boolean {\n  const heroIndex = getHeroIndex(levelState);\n  if (heroIndex === -1) {\n    return false;\n  }\n\n  const { squares } = levelState;\n\n  return (\n    (squares[heroIndex] as HeroSquareState).health > 0 &&\n    hasFailLevelEventBeenEmitted\n  );\n}\n\nfunction containsEnemy(square: SquareState): boolean {\n  return [SquareKind.Goblin, SquareKind.Witch].includes(square.kind);\n}\n\nfunction getEnemyCombinationKindOfEnemiesInitiallyBlockingHeroFromStairs(\n  level: Level\n): \"NoEnemies\" | EnemyCombinationKind {\n  const initialLevelState = getInitialLevelState(level);\n  const enemiesInitiallyBetweenHeroAndStairs = initialLevelState.squares\n    .slice(getHeroIndex(initialLevelState) + 1)\n    .filter(containsEnemy);\n\n  if (enemiesInitiallyBetweenHeroAndStairs.length === 0) {\n    return \"NoEnemies\";\n  }\n\n  const everyInitialEnemyWasGoblin = enemiesInitiallyBetweenHeroAndStairs.every(\n    (square) => square.kind === SquareKind.Goblin\n  );\n  const everyInitialEnemyWasWitch = enemiesInitiallyBetweenHeroAndStairs.every(\n    (square) => [SquareKind.Witch].includes(square.kind)\n  );\n\n  if (\n    everyInitialEnemyWasGoblin &&\n    enemiesInitiallyBetweenHeroAndStairs.length === 1\n  ) {\n    return EnemyCombinationKind.SingleGoblin;\n  }\n\n  if (\n    everyInitialEnemyWasGoblin &&\n    enemiesInitiallyBetweenHeroAndStairs.length >= 2\n  ) {\n    return EnemyCombinationKind.MultipleGoblins;\n  }\n\n  if (\n    everyInitialEnemyWasWitch &&\n    enemiesInitiallyBetweenHeroAndStairs.length === 1\n  ) {\n    return EnemyCombinationKind.SingleWitch;\n  }\n\n  throw new Error(\"Impossible enemy combination kind for level \" + level);\n}\n\nfunction performPreflightSanityCheckIfNotAlreadyPerformed(): void {\n  if (hasPerformedPreflightSanityCheck) {\n    return;\n  }\n\n  performPreflightSanityCheck();\n\n  console.log(\"Finished preflight sanity check.\");\n  hasPerformedPreflightSanityCheck = true;\n}\n\nfunction performPreflightSanityCheck(): void {\n  performEnemyCombinationSanityCheckOnAllLevels();\n}\n\nfunction performEnemyCombinationSanityCheckOnAllLevels(): void {\n  for (let level = Level.Level1; level <= LAST_LEVEL; ++level) {\n    // This will throw if the level has a supposedly impossible enemy combination.\n    getEnemyCombinationKindOfEnemiesInitiallyBlockingHeroFromStairs(level);\n  }\n}\n\nfunction getBattleSoundsAssumingLevelJustStarted(\n  initialLevelState: LevelState,\n  events: readonly BattleEvent[]\n): readonly Sound[] {\n  const sounds: Sound[] = [];\n\n  let levelState = initialLevelState;\n  let timeCursor = BATTLE_START_DELAY_SECONDS;\n\n  for (let eventIndex = 0; eventIndex < events.length; ++eventIndex) {\n    const event = events[eventIndex];\n\n    const nonoffsetSounds = getNonoffsetBattleEventSounds(event, levelState);\n    sounds.push(\n      ...nonoffsetSounds.map(\n        // eslint-disable-next-line no-loop-func\n        (nonoffset): Sound => ({\n          ...nonoffset,\n          timeInSeconds: timeCursor + nonoffset.timeInSeconds,\n        })\n      )\n    );\n\n    const eventDuration = getBattleEventDuration(event, levelState);\n    timeCursor += eventDuration;\n\n    const nextEventIsClimbStairs =\n      eventIndex + 1 < events.length &&\n      events[eventIndex + 1].kind === BattleEventKind.ClimbStairs;\n    if (!nextEventIsClimbStairs && event.kind !== BattleEventKind.EvalBlock) {\n      timeCursor += INTER_EVENT_DELAY_SECONDS;\n    }\n\n    levelState = applyBattleEventUnchecked(event, levelState);\n  }\n\n  return sounds;\n}\n\nfunction getNonoffsetBattleEventSounds(\n  event: BattleEvent,\n  levelState: LevelState\n): readonly Sound[] {\n  const sounds: Sound[] = [];\n\n  const isClubAttack =\n    event.kind === BattleEventKind.Attack &&\n    CLUB_ATTACKERS.includes(levelState.squares[event.attackerIndex].kind);\n  if (isClubAttack) {\n    sounds.push({ kind: SoundKind.ClubAttack, timeInSeconds: 0 });\n  }\n\n  const isSwordAttack =\n    event.kind === BattleEventKind.Attack &&\n    SWORD_ATTACKERS.includes(levelState.squares[event.attackerIndex].kind);\n  if (isSwordAttack) {\n    sounds.push({ kind: SoundKind.SwordAttack, timeInSeconds: 0 });\n  }\n\n  const isFireballAttack =\n    event.kind === BattleEventKind.Attack &&\n    FIREBALL_ATTACKERS.includes(levelState.squares[event.attackerIndex].kind);\n  const isWitchSummon =\n    event.kind === BattleEventKind.Summon &&\n    levelState.squares[event.summonerIndex].kind === SquareKind.Witch;\n  if (isFireballAttack || isWitchSummon) {\n    sounds.push({\n      kind: SoundKind.FireballLaunch,\n      timeInSeconds: 0.3,\n      durationInSeconds: 0.3,\n    });\n    sounds.push({ kind: SoundKind.FireballExplosion, timeInSeconds: 0.6 });\n  }\n\n  if ([BattleEventKind.Advance, BattleEventKind.Retreat].includes(event.kind)) {\n    sounds.push({ kind: SoundKind.CharacterMovement, timeInSeconds: -0.1 });\n  }\n\n  if (event.kind === BattleEventKind.ClimbStairs) {\n    sounds.push({\n      kind: SoundKind.SuccessMusic,\n      timeInSeconds: getBattleEventDuration(event, levelState) + 0.05,\n    });\n  }\n\n  if (event.kind === BattleEventKind.Attack) {\n    const target = levelState.squares[event.targetIndex];\n    if (\n      \"health\" in target &&\n      target.health <= event.damage &&\n      target.kind === SquareKind.Goblin\n    ) {\n      sounds.push({\n        kind: SoundKind.GoblinYelp,\n        timeInSeconds: 0.75 * getBattleEventDuration(event, levelState),\n      });\n    }\n  }\n\n  if (event.kind === BattleEventKind.Attack) {\n    const target = levelState.squares[event.targetIndex];\n    if (\n      \"health\" in target &&\n      target.health <= event.damage &&\n      target.kind === SquareKind.Witch\n    ) {\n      sounds.push({\n        kind: SoundKind.WitchYelp,\n        timeInSeconds: 0.5 * getBattleEventDuration(event, levelState),\n      });\n    }\n  }\n\n  if (event.kind === BattleEventKind.Attack) {\n    const target = levelState.squares[event.targetIndex];\n    if (\n      \"health\" in target &&\n      target.health <= event.damage &&\n      target.kind === SquareKind.Hero\n    ) {\n      sounds.push({\n        kind: SoundKind.HeroYelp,\n        timeInSeconds: 0.5 * getBattleEventDuration(event, levelState),\n      });\n    }\n  }\n\n  if (event.kind === BattleEventKind.FailHeroAction) {\n    sounds.push({\n      kind: SoundKind.ErrorBuzzer,\n      timeInSeconds: 0,\n    });\n  }\n\n  if (event.kind === BattleEventKind.Heal) {\n    sounds.push({\n      kind: SoundKind.Heal,\n      timeInSeconds: 0,\n    });\n  }\n\n  return sounds;\n}\n\nfunction didConnectBlock(\n  oldBlockEditorState: BlockEditorState<MainBlockEditorTypeParams>,\n  newBlockEditorState: BlockEditorState<MainBlockEditorTypeParams>\n): boolean {\n  if (\n    !(\n      oldBlockEditorState.uiTouch !== null &&\n      oldBlockEditorState.uiTouch.kind === UiTouchStateKind.BlockDrag &&\n      newBlockEditorState.uiTouch === null\n    )\n  ) {\n    return false;\n  }\n\n  const oldItems = oldBlockEditorState.canvas.items;\n  const newItems = newBlockEditorState.canvas.items;\n\n  const oldBlockCount = sum(\n    oldItems.map((item) => getBlockSequenceRecursiveBlockCount(item.content))\n  );\n  const newBlockCount = sum(\n    newItems.map((item) => getBlockSequenceRecursiveBlockCount(item.content))\n  );\n\n  if (\n    oldBlockEditorState.uiTouch.draggeeOriginalAddress[0] ===\n    PALETTE_ADDRESS_PART\n  ) {\n    // If the user releases a palette block sequence that they were dragging,\n    // exactly one of the following must happen:\n    // 1. The sequence gets deleted. In other words, nothing gets connected.\n    // 2. The sequence starts a new canvas item. In other words, nothing gets connected.\n    // 3. The sequence is added to an existing canvas item.\n\n    // Check Case 2 (\"sequence starts new canvas item\").\n    // If Case 2 is true, then there will now be more items than before.\n    if (newItems.length > oldItems.length) {\n      return false;\n    }\n\n    // Check Case 1 (\"sequence gets deleted\").\n    // If Case 1 is true, than there will now be the same number of canvas blocks as before,\n    // since the palette block sequence was not added to the canvas.\n    if (newBlockCount === oldBlockCount) {\n      return false;\n    }\n\n    // By process of elimination, we must be in Case 3.\n    return true;\n  }\n\n  // If the user releases a canvas block sequence that they were dragging,\n  // exactly one of the following must happen:\n  //\n  // 1. The sequence gets deleted.\n  // 2. The sequence starts a new canvas item.\n  // 3. The sequence is an item's top-level sequence, and only changes\n  //    position (but no content changes were made).\n  // 4. The sequence gets connected to a block that it was not previously connected to.\n  //\n  // We want to return `true` if and only if it's Case 4.\n\n  // Check Case 2 (\"sequence starts new canvas item\").\n  // If Case 2 is true, then there will now be more items than before.\n  if (newItems.length > oldItems.length) {\n    return false;\n  }\n\n  // Check Case 1 (\"sequence gets deleted\").\n  // If Case 1 is true, than there will now be less total blocks than before.\n  if (newBlockCount < oldBlockCount) {\n    return false;\n  }\n\n  // Check Case 3 (\"top-level sequence only changes position\").\n  const isDraggeeATopLevelSequenceThatOnlyChangedPosition =\n    oldBlockEditorState.uiTouch.draggeeOriginalAddress.length === 3 &&\n    oldBlockEditorState.uiTouch.draggeeOriginalAddress[0] ===\n      CANVAS_ADDRESS_PART &&\n    oldBlockEditorState.uiTouch.draggeeOriginalAddress[2] === 0 &&\n    newItems.length === oldItems.length;\n  if (isDraggeeATopLevelSequenceThatOnlyChangedPosition) {\n    return false;\n  }\n\n  // By process of elimination, we must be in Case 4.\n  return true;\n}\n\nfunction getBlockSequenceRecursiveBlockCount(\n  sequence: BlockSequence<BlockEditorTypeParams>\n): number {\n  return sum(sequence.map(getBlockRecursiveBlockCount));\n}\n\nfunction getBlockRecursiveBlockCount(\n  block: Block<BlockEditorTypeParams>\n): number {\n  return (\n    1 +\n    sum(\n      block.args.expressions.map((expr) =>\n        expr.isLiteral ? 0 : getBlockRecursiveBlockCount(expr)\n      )\n    ) +\n    sum(block.args.sequences.map(getBlockSequenceRecursiveBlockCount))\n  );\n}\n\nfunction getCurrentScreenOrientation(): OrientationType {\n  const naiveType: undefined | OrientationType =\n    window.screen.orientation?.type;\n\n  if (naiveType === undefined) {\n    return window.innerWidth >= window.innerHeight\n      ? \"landscape-primary\"\n      : \"portrait-primary\";\n  }\n\n  return naiveType;\n}\n\nfunction getCharacterHeartsCanvasElements({\n  characterBBox,\n  square,\n  squareIndex,\n  backgroundImageScale,\n  battleAnimationData,\n}: {\n  readonly characterBBox: Rectangle;\n  readonly square: { readonly health: number; readonly maxHealth: number };\n  readonly squareIndex: number;\n  readonly backgroundImageScale: number;\n  readonly battleAnimationData: BattleAnimationData;\n}): {\n  readonly all: CanvasElement;\n  readonly orderedHeartMarkImageElements: readonly CanvasImage[];\n} {\n  const {\n    advanceHealthChanges,\n    damageOverlayAlphas,\n    hasDamageOverlayAlphaPeaked,\n  } = battleAnimationData;\n  const heartMarkDimensions: Dimensions = {\n    width: 32 * backgroundImageScale,\n    height:\n      32 *\n      backgroundImageScale *\n      (images.heart_mark.naturalHeight / images.heart_mark.naturalWidth),\n  };\n\n  const topRowHeartCount = Math.max(\n    0,\n    Math.min(MAX_HEARTS_PER_ROW, square.maxHealth - MAX_HEARTS_PER_ROW)\n  );\n  const bottomRowHeartCount = Math.min(MAX_HEARTS_PER_ROW, square.maxHealth);\n  const scaledInterHeartMarkHorizontalMargin =\n    backgroundImageScale * UNSCALED_INTER_HEART_MARK_HORIZONTAL_MARGIN;\n  const bottomRowHeartMarks: CanvasImage[] = new Array(bottomRowHeartCount)\n    .fill(undefined)\n    .map((_, heartIndex) => {\n      return {\n        kind: CanvasElementKind.Image,\n        source:\n          heartIndex < square.health + advanceHealthChanges[squareIndex]\n            ? images.heart_mark\n            : images.empty_heart_mark,\n        dx:\n          characterBBox.topLeft.x +\n          0.5 * characterBBox.dimensions.width -\n          0.5 *\n            (bottomRowHeartCount * heartMarkDimensions.width +\n              bottomRowHeartCount * scaledInterHeartMarkHorizontalMargin) +\n          heartIndex *\n            (heartMarkDimensions.width + scaledInterHeartMarkHorizontalMargin),\n        dy: characterBBox.topLeft.y - 40 * backgroundImageScale,\n        dw: heartMarkDimensions.width,\n        dh: heartMarkDimensions.height,\n      };\n    });\n  const topRowHeartMarks: CanvasImage[] = new Array(topRowHeartCount)\n    .fill(undefined)\n    .map((_, heartIndex) => {\n      return {\n        kind: CanvasElementKind.Image,\n        source:\n          heartIndex + MAX_HEARTS_PER_ROW <\n          square.health + advanceHealthChanges[squareIndex]\n            ? images.heart_mark\n            : images.empty_heart_mark,\n        dx:\n          characterBBox.topLeft.x +\n          0.5 * characterBBox.dimensions.width -\n          0.5 *\n            (topRowHeartCount * heartMarkDimensions.width +\n              topRowHeartCount * scaledInterHeartMarkHorizontalMargin) +\n          heartIndex *\n            (heartMarkDimensions.width + scaledInterHeartMarkHorizontalMargin),\n        dy: characterBBox.topLeft.y - 70 * backgroundImageScale,\n        dw: heartMarkDimensions.width,\n        dh: heartMarkDimensions.height,\n      };\n    });\n  const orderedHeartMarkImageElements =\n    bottomRowHeartMarks.concat(topRowHeartMarks);\n\n  const damagedHearts: CanvasGroup = {\n    kind: CanvasElementKind.Group,\n    children: orderedHeartMarkImageElements.map((image, heartIndex) => {\n      if (\n        advanceHealthChanges[squareIndex] < 0 &&\n        heartIndex < square.health &&\n        square.health - 1 <= heartIndex\n      ) {\n        return {\n          kind: CanvasElementKind.Group,\n          children: [\n            {\n              kind: CanvasElementKind.Group,\n              alpha: !hasDamageOverlayAlphaPeaked[squareIndex]\n                ? 1\n                : damageOverlayAlphas[squareIndex],\n              children: [\n                {\n                  ...image,\n                  source: images.heart_mark,\n                },\n              ],\n            },\n            {\n              kind: CanvasElementKind.Group,\n              alpha: damageOverlayAlphas[squareIndex],\n              children: [\n                {\n                  ...image,\n                  source: damageOverlays.heart_mark,\n                },\n              ],\n            },\n          ],\n        };\n      }\n\n      return NULL_CANVAS_ELEMENT;\n    }),\n  };\n\n  const all: CanvasGroup = {\n    kind: CanvasElementKind.Group,\n    children: typesafeCast<readonly CanvasElement[]>(\n      orderedHeartMarkImageElements\n    ).concat(damagedHearts),\n  };\n\n  return { all, orderedHeartMarkImageElements };\n}\n\nfunction getNondepressedPuzzleScreenButtonBBoxes(\n  backgroundImageScale: number,\n  safeAreaInsets: SafeAreaInsets[\"insets\"]\n): {\n  readonly nondepressedLeftButtonBBox: Rectangle;\n  readonly nondepressedMiddleButtonBBox: Rectangle;\n  readonly nondepressedRightButtonBBox: Rectangle;\n} {\n  const nondepressedLeftButtonBBox: Rectangle = {\n    topLeft: {\n      x: 890 * backgroundImageScale - safeAreaInsets.right,\n      y: 5,\n    },\n    dimensions: {\n      width: 120 * backgroundImageScale,\n      height:\n        120 *\n        backgroundImageScale *\n        (images.buttons.puzzle.edit.naturalHeight /\n          images.buttons.puzzle.edit.naturalWidth),\n    },\n  };\n\n  const nondepressedMiddleButtonBBox: Rectangle = {\n    topLeft: {\n      x: 1020 * backgroundImageScale - safeAreaInsets.right,\n      y: 5,\n    },\n    dimensions: {\n      width: 120 * backgroundImageScale,\n      height:\n        120 *\n        backgroundImageScale *\n        // The View, Play, and Pause buttons all have the same dimensions\n        // (and thus the same aspect ratio).\n        // So we arbitrarily choose to use View here,\n        // but this code will work correctly for all 3 buttons.\n        (images.buttons.puzzle.view.naturalHeight /\n          images.buttons.puzzle.view.naturalWidth),\n    },\n  };\n\n  const nondepressedRightButtonBBox: Rectangle = {\n    topLeft: {\n      x: 1150 * backgroundImageScale - safeAreaInsets.right,\n      y: 5,\n    },\n    dimensions: {\n      width: 120 * backgroundImageScale,\n      height:\n        120 *\n        backgroundImageScale *\n        (images.buttons.puzzle.home.naturalHeight /\n          images.buttons.puzzle.home.naturalWidth),\n    },\n  };\n\n  return {\n    nondepressedLeftButtonBBox,\n    nondepressedMiddleButtonBBox,\n    nondepressedRightButtonBBox,\n  };\n}\n\nfunction areCanvasItemsEqual(\n  itemA: CanvasItem<MainBlockEditorTypeParams>,\n  itemB: CanvasItem<MainBlockEditorTypeParams>\n): boolean {\n  return (\n    areVecsEqual(itemA.position, itemB.position) &&\n    areBlockSequencesEqual(itemA.content, itemB.content)\n  );\n}\n\nfunction areBlockSequencesEqual(\n  a: BlockSequence<MainBlockEditorTypeParams>,\n  b: BlockSequence<MainBlockEditorTypeParams>\n): boolean {\n  return (\n    a.length === b.length &&\n    a.every((aBlock, i) => areBlocksEqual(aBlock, b[i]))\n  );\n}\n\nfunction areBlocksEqual(\n  a: Block<MainBlockEditorTypeParams>,\n  b: Block<MainBlockEditorTypeParams>\n): boolean {\n  return (\n    a.kind === b.kind &&\n    a.args.dropdowns.length === b.args.dropdowns.length &&\n    a.args.dropdowns.every(\n      (aDropdown, i) => aDropdown === b.args.dropdowns[i]\n    ) &&\n    a.args.expressions.length === b.args.expressions.length &&\n    a.args.expressions.every((aExpression, i) => {\n      const bExpression = b.args.expressions[i];\n\n      if (aExpression.isLiteral && bExpression.isLiteral) {\n        return aExpression.source === bExpression.source;\n      }\n\n      if (!aExpression.isLiteral && !bExpression.isLiteral) {\n        return areBlocksEqual(aExpression, bExpression);\n      }\n\n      return false;\n    }) &&\n    a.args.sequences.length === b.args.sequences.length &&\n    a.args.sequences.every((aSequence, i) =>\n      areBlockSequencesEqual(aSequence, b.args.sequences[i])\n    )\n  );\n}\n\nfunction getMultilinePrettyPrintedLoggerIdOrDefault(): string {\n  const possiblyLoadingLoggerIdBytes = getPossiblyLoadingLoggerIdBytes();\n\n  if (possiblyLoadingLoggerIdBytes === \"Loading\") {\n    return \"ffff ffff ffff ffff\\nffff ffff ffff ffff\";\n  }\n\n  const [b0, b1, b2, b3, b4, b5, b6, b7, b8, b9, b10, b11, b12, b13, b14, b15] =\n    possiblyLoadingLoggerIdBytes;\n\n  const part1 = [\n    [b0, b1],\n    [b2, b3],\n    [b4, b5],\n    [b6, b7],\n  ]\n    .map(\n      ([left, right]) =>\n        byteAsTwoCharacterLowerHexString(left) +\n        byteAsTwoCharacterLowerHexString(right)\n    )\n    .join(\" \");\n\n  const part2 = [\n    [b8, b9],\n    [b10, b11],\n    [b12, b13],\n    [b14, b15],\n  ]\n    .map(\n      ([left, right]) =>\n        byteAsTwoCharacterLowerHexString(left) +\n        byteAsTwoCharacterLowerHexString(right)\n    )\n    .join(\" \");\n\n  return part1 + \"\\n\" + part2;\n}\n\nfunction byteAsTwoCharacterLowerHexString(byte: number): string {\n  if (!(Number.isInteger(byte) && 0 <= byte && byte <= 255)) {\n    throw new Error(`byteAsHexString: ${byte} is not a byte.`);\n  }\n\n  const raw = byte.toString(16);\n\n  if (raw.length === 1) {\n    return \"0\" + raw;\n  }\n\n  return raw;\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config): void {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://cra.link/PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config): void {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = (): void => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = (): void => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller !== null) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://cra.link/PWA.\"\n              );\n\n              // Execute callback\n              if (config !== undefined && config.onUpdate !== undefined) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config !== undefined && config.onSuccess !== undefined) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config): void {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister(): void {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler): void => {\n  if (onPerfEntry !== undefined && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport { App } from \"./App\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { GAME_VERSION_WITHOUT_V } from \"./GAME_VERSION\";\nimport \"./firebase\";\nimport { compressJson, decompressJson } from \"./jsonCompression\";\nimport { LogEventKind, logEvents } from \"./log\";\nimport { stringifyError } from \"./stringifyError\";\n\nconst root = ReactDOM.createRoot(\n  document.getElementById(\"Root\") as HTMLElement\n);\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n\nconsole.log(`Castle Coders v${GAME_VERSION_WITHOUT_V}`);\n\n(window as any).compressJson = compressJson;\n(window as any).decompressJson = decompressJson;\n\nwindow.addEventListener(\"error\", (errorEvent) => {\n  const error = {\n    rawError: errorEvent.error,\n    message: errorEvent.message,\n    filename: errorEvent.filename,\n    lineno: errorEvent.lineno,\n    colno: errorEvent.colno,\n  };\n\n  console.error(\n    error,\n    \"This error was caught by the global error handler and logged.\"\n  );\n\n  logEvents([\n    {\n      kind: LogEventKind.Error,\n      errorMessage: stringifyError(error),\n      timestampDateDotNow: Date.now(),\n    },\n  ]);\n});\n\nwindow.addEventListener(\n  \"unhandledrejection\",\n  (rejectionEvent: PromiseRejectionEvent) => {\n    const error = {\n      isTrusted: rejectionEvent.isTrusted,\n      promise: rejectionEvent.promise,\n      reason: rejectionEvent.reason,\n      timeStamp: rejectionEvent.timeStamp,\n    };\n\n    console.error(\n      \"Unhandled rejection: \",\n      rejectionEvent,\n      \"This error was caught by the global error handler and logged as \",\n      error\n    );\n\n    logEvents([\n      {\n        kind: LogEventKind.Error,\n        errorMessage: stringifyError(error),\n        timestampDateDotNow: Date.now(),\n      },\n    ]);\n  }\n);\n\nlogEvents([\n  {\n    kind: LogEventKind.AppLifeCycleMilestone,\n    milestoneKind: \"IndexDotTsFinished\",\n    gameVersionWithoutV: GAME_VERSION_WITHOUT_V,\n    timestampDateDotNow: Date.now(),\n  },\n]);\n"],"names":["CapacitorPlatforms","win","defaultPlatformMap","Map","set","name","capPlatforms","currentPlatform","platforms","addPlatform","platform","setPlatform","has","get","createCapacitorPlatforms","initPlatforms","globalThis","self","window","global","ExceptionCode","CapacitorException","Error","constructor","message","code","data","super","this","createCapacitor","_a","_b","_c","_d","_e","capCustomPlatform","CapacitorCustomPlatform","cap","Capacitor","Plugins","getPlatform","defaultGetPlatform","androidBridge","webkit","messageHandlers","bridge","getPlatformId","isNativePlatform","defaultIsNativePlatform","isPluginAvailable","pluginName","plugin","registeredPlugins","getPluginHeader","PluginHeaders","find","h","registerPlugin","jsImplementations","arguments","length","undefined","registeredPlugin","console","warn","concat","proxy","pluginHeader","jsImplementation","createPluginMethodWrapper","prop","remove","wrapper","_len","args","Array","_key","p","async","loadPluginImplementation","then","impl","fn","createPluginMethod","bind","Unimplemented","methodHeader","methods","m","rtype","options","nativePromise","toString","callback","nativeCallback","Object","defineProperty","value","writable","configurable","addListener","removeListener","addListenerNative","eventName","call","callbackId","Promise","resolve","Proxy","_","Set","keys","convertFileSrc","filePath","handleError","err","error","pluginMethodNoop","_target","reject","Exception","DEBUG","isLoggingEnabled","isNative","initCapacitorGlobal","WebPlugin","config","listeners","retainedEventArguments","windowListeners","listenerFunc","firstListener","push","windowListener","registered","addWindowListener","sendRetainedArgumentsForEvent","removeAllListeners","listener","removeWindowListener","notifyListeners","retainUntilConsumed","forEach","hasListeners","registerWindowListener","windowEventName","pluginEventName","handler","event","unimplemented","msg","unavailable","Unavailable","index","indexOf","splice","handle","addEventListener","removeEventListener","arg","encode","str","encodeURIComponent","replace","decodeURIComponent","escape","decode","CapacitorCookiesPluginWeb","getCookies","cookies","document","cookie","cookieMap","split","key","trim","setCookie","encodedKey","encodedValue","expires","path","domain","url","deleteCookie","clearCookies","Date","toUTCString","clearAllCookies","web","buildRequestInit","extra","output","assign","method","headers","originalKeys","map","k","toLocaleLowerCase","reduce","acc","normalizeHttpHeaders","type","body","includes","params","URLSearchParams","entries","FormData","form","append","Headers","delete","JSON","stringify","CapacitorHttpPluginWeb","request","requestInit","webFetchExtra","urlParams","shouldEncode","accumulator","entry","item","isArray","slice","substr","buildUrlParams","shouldEncodeUrlParams","response","fetch","contentType","blob","responseType","ok","reader","FileReader","onload","base64String","result","onerror","readAsDataURL","readBlobAsBase64","json","text","status","post","put","patch","aa","require","ca","a","b","c","da","ea","fa","ha","add","ia","createElement","ja","prototype","hasOwnProperty","ka","la","ma","v","d","e","f","g","acceptsBooleans","attributeName","attributeNamespace","mustUseProperty","propertyName","sanitizeURL","removeEmptyString","z","toLowerCase","ra","sa","toUpperCase","ta","pa","isNaN","qa","test","oa","removeAttribute","setAttribute","setAttributeNS","xlinkHref","ua","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","va","Symbol","for","wa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Ia","Ja","iterator","Ka","La","A","Ma","stack","match","Na","Oa","prepareStackTrace","Reflect","construct","l","displayName","Pa","tag","render","Qa","$$typeof","_context","_payload","_init","Ra","Sa","Ta","nodeName","Va","_valueTracker","getOwnPropertyDescriptor","enumerable","getValue","setValue","stopTracking","Ua","Wa","checked","Xa","activeElement","Ya","defaultChecked","defaultValue","_wrapperState","initialChecked","Za","initialValue","controlled","ab","bb","cb","db","ownerDocument","eb","fb","selected","defaultSelected","disabled","gb","dangerouslySetInnerHTML","children","hb","ib","jb","textContent","kb","lb","mb","nb","namespaceURI","innerHTML","valueOf","firstChild","removeChild","appendChild","MSApp","execUnsafeLocalFunction","ob","lastChild","nodeType","nodeValue","pb","animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","qb","rb","sb","style","setProperty","charAt","substring","tb","menuitem","area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","ub","vb","is","wb","xb","target","srcElement","correspondingUseElement","parentNode","yb","zb","Ab","Bb","Cb","stateNode","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","Nb","apply","onError","Ob","Pb","Qb","Rb","Sb","Tb","Vb","alternate","return","flags","Wb","memoizedState","dehydrated","Xb","Zb","child","sibling","current","Yb","$b","ac","unstable_scheduleCallback","bc","unstable_cancelCallback","cc","unstable_shouldYield","dc","unstable_requestPaint","B","unstable_now","ec","unstable_getCurrentPriorityLevel","fc","unstable_ImmediatePriority","gc","unstable_UserBlockingPriority","hc","unstable_NormalPriority","ic","unstable_LowPriority","jc","unstable_IdlePriority","kc","lc","oc","Math","clz32","pc","qc","log","LN2","rc","sc","tc","uc","pendingLanes","suspendedLanes","pingedLanes","entangledLanes","entanglements","vc","xc","yc","zc","Ac","eventTimes","Cc","C","Dc","Ec","Fc","Gc","Hc","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Pc","Qc","Rc","Sc","pointerId","Tc","nativeEvent","blockedOn","domEventName","eventSystemFlags","targetContainers","Vc","Wc","priority","isDehydrated","containerInfo","Xc","Yc","dispatchEvent","shift","Zc","$c","ad","bd","cd","ReactCurrentBatchConfig","dd","ed","transition","fd","gd","hd","id","Uc","stopPropagation","jd","kd","ld","md","nd","od","keyCode","charCode","pd","qd","rd","_reactName","_targetInst","currentTarget","isDefaultPrevented","defaultPrevented","returnValue","isPropagationStopped","preventDefault","cancelBubble","persist","isPersistent","wd","xd","yd","sd","eventPhase","bubbles","cancelable","timeStamp","now","isTrusted","td","ud","view","detail","vd","Ad","screenX","screenY","clientX","clientY","pageX","pageY","ctrlKey","shiftKey","altKey","metaKey","getModifierState","zd","button","buttons","relatedTarget","fromElement","toElement","movementX","movementY","Bd","Dd","dataTransfer","Fd","Hd","animationName","elapsedTime","pseudoElement","Id","clipboardData","Jd","Ld","Md","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","Nd","Od","Alt","Control","Meta","Shift","Pd","Qd","String","fromCharCode","location","repeat","locale","which","Rd","Td","width","height","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","Vd","touches","targetTouches","changedTouches","Xd","Yd","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","Zd","$d","ae","be","documentMode","ce","de","ee","fe","ge","he","ie","le","color","date","datetime","email","month","number","password","range","search","tel","time","week","me","ne","oe","pe","qe","re","se","te","ue","ve","we","xe","ye","ze","oninput","Ae","detachEvent","Be","Ce","attachEvent","De","Ee","Fe","He","Ie","Je","Ke","node","offset","nextSibling","Le","contains","compareDocumentPosition","Me","HTMLIFrameElement","contentWindow","href","Ne","contentEditable","Oe","focusedElem","selectionRange","documentElement","start","end","selectionStart","selectionEnd","min","defaultView","getSelection","extend","rangeCount","anchorNode","anchorOffset","focusNode","focusOffset","createRange","setStart","removeAllRanges","addRange","setEnd","element","left","scrollLeft","top","scrollTop","focus","Pe","Qe","Re","Se","Te","Ue","Ve","We","animationend","animationiteration","animationstart","transitionend","Xe","Ye","Ze","animation","$e","af","bf","cf","df","ef","ff","gf","hf","lf","mf","nf","Ub","instance","D","of","pf","qf","rf","random","sf","capture","passive","n","t","J","x","u","w","F","tf","uf","parentWindow","vf","wf","na","xa","$a","ba","je","char","ke","unshift","xf","yf","zf","Af","Bf","Cf","Df","Ef","__html","Ff","setTimeout","Gf","clearTimeout","Hf","Jf","queueMicrotask","catch","If","Kf","Lf","Mf","previousSibling","Nf","Of","Pf","Qf","Rf","Sf","Tf","Uf","E","G","Vf","H","Wf","Xf","Yf","contextTypes","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","Zf","childContextTypes","$f","ag","bg","getChildContext","cg","__reactInternalMemoizedMergedChildContext","dg","eg","fg","gg","hg","jg","kg","lg","mg","ng","og","pg","qg","rg","sg","tg","ug","vg","wg","xg","yg","I","zg","Ag","Bg","elementType","deletions","Cg","pendingProps","overflow","treeContext","retryLane","Dg","mode","Eg","Fg","Gg","memoizedProps","Hg","Ig","Jg","Kg","Lg","defaultProps","Mg","Ng","Og","Pg","Qg","Rg","_currentValue","Sg","childLanes","Tg","dependencies","firstContext","lanes","Ug","Vg","context","memoizedValue","next","Wg","Xg","Yg","interleaved","Zg","$g","ah","updateQueue","baseState","firstBaseUpdate","lastBaseUpdate","shared","pending","effects","bh","ch","eventTime","lane","payload","dh","K","eh","fh","gh","q","r","y","hh","ih","jh","Component","refs","kh","nh","isMounted","_reactInternals","enqueueSetState","L","lh","mh","enqueueReplaceState","enqueueForceUpdate","oh","shouldComponentUpdate","isPureReactComponent","ph","contextType","state","updater","qh","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","rh","props","getDerivedStateFromProps","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","sh","ref","_owner","_stringRef","th","join","uh","vh","wh","xh","yh","implementation","zh","Ah","done","Bh","Ch","Dh","Eh","Fh","Gh","Hh","Ih","tagName","Jh","Kh","Lh","M","Mh","revealOrder","Nh","Oh","_workInProgressVersionPrimary","Ph","ReactCurrentDispatcher","Qh","Rh","N","O","P","Sh","Th","Uh","Vh","Q","Wh","Xh","Yh","Zh","$h","ai","bi","ci","baseQueue","queue","di","ei","fi","lastRenderedReducer","action","hasEagerState","eagerState","lastRenderedState","dispatch","gi","hi","ii","ji","ki","getSnapshot","li","mi","R","ni","lastEffect","stores","oi","pi","qi","ri","create","destroy","deps","si","ti","ui","vi","wi","xi","yi","zi","Ai","Bi","Ci","Di","Ei","Fi","Gi","Hi","Ii","Ji","readContext","useCallback","useContext","useEffect","useImperativeHandle","useInsertionEffect","useLayoutEffect","useMemo","useReducer","useRef","useState","useDebugValue","useDeferredValue","useTransition","useMutableSource","useSyncExternalStore","useId","unstable_isNewReconciler","identifierPrefix","Ki","digest","Li","Mi","Ni","WeakMap","Oi","Pi","Qi","Ri","getDerivedStateFromError","componentDidCatch","Si","componentStack","Ti","pingCache","Ui","Vi","Wi","Xi","ReactCurrentOwner","Yi","Zi","$i","aj","bj","compare","cj","dj","ej","baseLanes","cachePool","transitions","fj","gj","hj","ij","jj","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","kj","lj","pendingContext","mj","Aj","Bj","Cj","Dj","nj","oj","pj","fallback","qj","rj","tj","dataset","dgst","uj","vj","_reactRetry","sj","subtreeFlags","wj","xj","isBackwards","rendering","renderingStartTime","last","tail","tailMode","yj","Ej","S","Fj","Gj","wasMultiple","multiple","suppressHydrationWarning","onClick","onclick","size","createElementNS","autoFocus","createTextNode","T","Hj","Ij","Jj","Kj","U","Lj","WeakSet","V","Mj","W","Nj","Oj","Qj","Rj","Sj","Tj","Uj","Vj","Wj","insertBefore","_reactRootContainer","Xj","X","Yj","Zj","ak","onCommitFiberUnmount","componentWillUnmount","bk","ck","dk","ek","fk","isHidden","gk","hk","display","ik","jk","kk","lk","__reactInternalSnapshotBeforeUpdate","src","Wk","mk","ceil","nk","pk","Y","Z","qk","rk","sk","tk","uk","Infinity","vk","wk","xk","yk","zk","Ak","Bk","Ck","Dk","Ek","callbackNode","expirationTimes","expiredLanes","wc","callbackPriority","ig","Fk","Gk","Hk","Ik","Jk","Kk","Lk","Mk","Nk","Ok","Pk","finishedWork","finishedLanes","Qk","timeoutHandle","Rk","Sk","Tk","Uk","Vk","mutableReadLanes","Bc","Pj","onCommitFiberRoot","mc","onRecoverableError","Xk","onPostCommitFiberRoot","Yk","Zk","al","isReactComponent","pendingChildren","bl","mutableSourceEagerHydrationData","cl","cache","pendingSuspenseBoundaries","el","fl","gl","hl","il","jl","zj","$k","ll","reportError","ml","_internalRoot","nl","ol","pl","ql","sl","rl","unmount","unstable_scheduleHydration","querySelectorAll","tl","usingClientEntryPoint","Events","ul","findFiberByHostInstance","bundleType","version","rendererPackageName","vl","rendererConfig","overrideHookState","overrideHookStateDeletePath","overrideHookStateRenamePath","overrideProps","overridePropsDeletePath","overridePropsRenamePath","setErrorHandler","setSuspenseHandler","scheduleUpdate","currentDispatcherRef","findHostInstanceByFiber","findHostInstancesForRefresh","scheduleRefresh","scheduleRoot","setRefreshHandler","getCurrentFiber","reconcilerVersion","__REACT_DEVTOOLS_GLOBAL_HOOK__","wl","isDisabled","supportsFiber","inject","exports","createPortal","dl","createRoot","unstable_strictMode","findDOMNode","flushSync","hydrate","hydrateRoot","hydratedSources","_getVersion","_source","unmountComponentAtNode","unstable_batchedUpdates","unstable_renderSubtreeIntoContainer","checkDCE","module","__self","__source","Fragment","jsx","jsxs","setState","forceUpdate","_status","_result","default","Children","count","toArray","only","Profiler","PureComponent","StrictMode","Suspense","cloneElement","createContext","_currentValue2","_threadCount","Provider","Consumer","_defaultValue","_globalName","createFactory","createRef","forwardRef","isValidElement","lazy","memo","startTransition","unstable_act","pop","sortIndex","performance","setImmediate","startTime","expirationTime","priorityLevel","navigator","scheduling","isInputPending","MessageChannel","port2","port1","onmessage","postMessage","unstable_Profiling","unstable_continueExecution","unstable_forceFrameRate","floor","unstable_getFirstCallbackNode","unstable_next","unstable_pauseExecution","unstable_runWithPriority","delay","unstable_wrapCallback","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","o","chunkId","all","promises","miniCssF","Function","obj","inProgress","dataWebpackPrefix","script","needAttach","scripts","getElementsByTagName","i","s","getAttribute","charset","timeout","nc","onScriptComplete","prev","doneFns","head","toStringTag","installedChunks","j","installedChunkData","promise","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","some","chunkLoadingGlobal","unsafeGenerateN","rng","num","out","idx","unsafeNext","generateN","nextRng","clone","unsafeSkipN","skipN","computeNextSeed","seed","computeValueFromNextSeed","nextseed","LinearCongruential32","s1","v1","s2","v2","getState","congruential32","fromState","__read","ar","__spreadArray","to","from","pack","MersenneTwister","states","mt","y_1","MASK_UPPER","MASK_LOWER","y_2","seeded","xored","imul","pow","XorShift128Plus","s01","s00","s11","s10","a0","a1","b0","b1","jump","unsafeJump","ns01","ns00","ns11","ns10","mask","xorshift128plus","XoroShiro128Plus","xoroshiro128plus","addArrayIntToNew","arrayIntA","arrayIntB","sign","substractArrayIntToNew","reminder","dataA","dataB","indexA","indexB","reverse","maxLength","max","vA","vB","isStrictlySmaller","trimArrayIntInplace","arrayInt","firstNonZero","fromNumberToArrayInt64","posN","unsafeUniformIntDistributionInternal","rangeSize","MaxAllowed","deltaV","unsafeUniformArrayIntDistributionInternal","rangeLength","currentInRange","unsafeUniformArrayIntDistribution","addOneToPositiveArrayInt","uniformArrayIntDistribution","SBigInt","BigInt","unsafeUniformBigIntDistribution","diff","MinRng","NumValues","FinalNumValues","NumIterations","MaxAcceptedRandom","uniformBigIntDistribution","safeNumberMaxSafeInteger","Number","MAX_SAFE_INTEGER","sharedA","sharedB","sharedC","sharedData","unsafeUniformIntDistribution","rangeSizeArrayIntValue","lowA","highA","signA","lowB","highB","signB","low_1","high","lowFirst","highFirst","lowSecond","highSecond","reminderLow","low","substractArrayInt64","uniformLargeIntInternal","uniformIntDistribution","__type","__version","__commitHash","images","castle_interior","loadImage","green_goblin","purple_goblin","hero","heart_mark","empty_heart_mark","witch_idle","witch_wand_raised","witch_wand_lowered","extended_home_background","settings_box","language_dropdown_arrow","loading_screen_castle_coders_text","home","home_screen_start_button","shop","home_screen_shop_button","settings","home_screen_settings_button","puzzle","edit","puzzle_screen_edit_button","puzzle_screen_view_button","play","puzzle_screen_play_button","pause","puzzle_screen_pause_button","puzzle_screen_home_button","language","language_button","credits","credits_button","reset_to_level_one","reset_to_level_one_button","close","settings_screen_close_button","tutorial","finger","short_instructions_box","tall_instructions_box","buttonOverlays","whiteOverlay","all_purpose","damageOverlays","redOverlay","goblin","loadingImg","getOverlay","NONEXTENDED_HOME_BACKGROUND_DIMENSIONS","MAIN_AREA_DIMENSIONS_IN_EXTENDED_HOME_COORDS","START_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS","topLeft","dimensions","SETTINGS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS","JAPANESE_TEXT_BBOX_IN_EXTENDED_HOME_COORDS","SETTINGS_BOX_BBOX_IN_NONEXTENDED_HOME_COORDS","LANGUAGE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS","CREDITS_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS","RESET_TO_LEVEL_ONE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS","SETTINGS_SCREEN_CLOSE_BUTTON_BBOX_IN_NONEXTENDED_HOME_COORDS","LOADING_SCREEN_CASTLE_CODERS_TEXT_BBOX_IN_EXTENDED_HOME_COORDS","convertRectangleFromExtendedHomeCoordsToNonextendedHomeCoords","extended","Image","hasLoaded","ready","canvas","ctx","getContext","naturalWidth","naturalHeight","drawImage","imgData","getImageData","bytes","clearRect","putImageData","fonts","checkpoint","waitForFont","notoSans","twemojiCountryFlags","fontFamily","pollForFont","fontSet","targetFont","values","font","family","load","loaded","requestAnimationFrame","addVec","subVec","invertY","scaleVec","cornerTangentDistance","sqrt","sideLength","legTangentOffsetY","legTangentOffsetX","DROPDOWN_ARROW","radius","TRASH_CAN","BlockDefKind","BlockSignaturePartKind","RenderSpecKind","UiTouchStateKind","BlockPartKind","CANVAS_ADDRESS_PART","PALETTE_ADDRESS_PART","DRAGGEE_ADDRESS_PART","ARG_DROPDOWN_ADDRESS_PART","ARG_EXPRESSION_ADDRESS_PART","ARG_COMMAND_SEQUENCE_ADDRESS_PART","INSERTION_MARK_ADDRESS_PART","NODE_ADDRESS_PART_STRINGS","COMMAND_INSERTION_MARK_SENTINEL","MINIMAL_LOREM_IPSUM_TEXT_FOR_FONT_MEASUREMENT","DATA_TOUCH_ROLES","canvasBackground","paletteBackground","blockAddressPrefix","dropdownAddressPrefix","literalAddressPrefix","dropdownChoicePrefix","DOM_ID_SUFFIXES","root","editorClipPath","backgroundDotPattern","paletteClipPath","dropdownMenuClipPath","TRANSPARENT","BlockEditor","React","generateComponentInstanceUid","bindMethods","onEditorOverlayTouchStart","onEditorOverlayMouseDown","onWindowTouchMove","onWindowMouseMove","onWindowTouchEnd","onWindowMouseUp","addEventListeners","removeEventListeners","colors","sizing","componentInstanceUid","dropdownMenu","uiTouch","totalScroll","scrollInProgress","scroll","currentClientPosition","startClientPosition","draggeeSpec","getDraggeeSpecOrNull","showTrashCan","kind","BlockDrag","hasPositionChangedSinceDragStart","isPointInBlockCanvasDomElement","trashCanScale","paletteBounds","paletteTrashCanHorizontalMargin","paletteTrashCanVerticalMargin","trashCanOffset","trashCanPosition","trashCan","_jsx","transform","fill","stringifyColor","paletteTrashCan","_jsxs","cursor","userSelect","patternUnits","cx","cy","backgroundDotRadius","backgroundDot","editorBounds","clipPath","background","canvasBounds","getCanvasItemRenderSpecs","spec","BlockSequenceView","editor","address","stringifyNodeAddressPart","getPaletteBlockRenderSpecs","BlockView","dividers","divider","dividerIndex","DropdownMenu","menu","editorProps","onTouchStart","onMouseDown","onEditorOverlayPointerDown","pointerClientPosition","touchRole","getTouchRoleAtClientPosition","onBlockCanvasBackgroundPointerDown","onBlockPaletteBackgroundPointerDown","blockAddress","role","startsWith","parsed","parseNodeAddressPart","part","getBlockAddressFromDataTouchRole","onBlockPointerDown","literalAddress","getLiteralAddressFromDataTouchRole","onLiteralPointerDown","dropdownAddress","getDropdownAddressFromDataTouchRole","onDropdownPointerDown","dropdownChoiceIndex","withoutPrefix","parseInt","isInteger","getDropdownChoiceIndexFromDataTouchRole","onDropdownMenuChoicePointerDown","onWindowPointerMove","oldState","palette","blockKinds","blockDefs","defs","paletteSpecs","scrollDisplacement","paletteSpecMaxWidth","rbox","minScrollX","paletteLeftPadding","paletteRightPadding","lastPaletteSpec","lastPaletteSpecDef","block","maleSocketBonusHeight","Command","hasMaleSocket","commandSocket","paletteSpecTotalHeight","minScrollY","paletteTopPadding","paletteBottomPadding","startClientPositionAdjustment","hypotheticalCanvasItemSpecsAssumingDragPositionMovedSinceDragStart","getDraggeeSpec","isDisplacementZero","areVectorsEqual","insertionMarkAddress","getInsertionMarkAddressBasedOnDraggee","draggeeOriginalAddress","Literal","Dropdown","dropdownOrLiteralParentBlockAddress","hypotheticalPropsAssumingDragPositionMovedSinceDragStart","hypotheticalDraggeeSpec","DropdownMenuScroll","DropdownMenuChoice","dropdownMenuSpec","getDropdownMenuRenderSpec","displacement","choiceSpecs","choiceSpec","blockDropdownMenuBorder","choiceTotalHeight","getBlockEditorCursorBasedOnMousePosition","onWindowPointerUp","items","applyDragToCanvasItems","canvasItems","insertionAddress","literalParentBlock","subexpressionAddress","getLongestPossibleSubsequenceSpecFromSequenceSpecStartingAtLocalAddress","expectNumericAddressPart","blockSpecs","getSubexpressionParentBlockSpec","literalIndex","literal","expressions","isLiteral","literalEditor","literalSource","dropdownParentBlock","getDropdownParentBlockSpec","dropdownIndex","dropdownValue","dropdowns","dropdownChoices","signature","filter","choices","choiceIndex","updateDropdownValueInCanvas","updateCanvasToMatchLiteralEditor","itemIndex","position","content","updateBlockSequenceToMatchLiteralEditor","sequence","blockIndex","updateBlockToMatchLiteralEditor","expression","expressionIndex","expressionAddress","areNodeAddressesEqual","sequences","sequenceIndex","isValidColor","leftpadWithZero","desiredLength","_ref","blockColorTriplet","primary","commandInsertionMark","secondary","tertiary","isUnreachable","unreachableBlocks","blocks","blockBody","CommandBlockBody","teeth","editorSizing","outerColor","innerColor","QueryBlockBody","labelViews","labelSpecs","labelSpec","fontSize","blockLabelTextSizePx","blockLabelFont","dominantBaseline","blockLabelText","dropdownViews","dropdownSpecs","dropdownSpec","DropdownView","_Fragment","subexpressionSpecs","subSpec","Block","LiteralView","subsequenceSpecs","subsequenceSpec","_ref2","outerPath","innerRadius","blockBorderRadius","outerRadius","blockBorder","toothIndex","get_blockTLe_to_omTLe_path","get_omTLe_to_firstToothBlockTLe_path","get_omTLe_to_nextToothBlockTLe_assumingSequenceArgIndent_path","getCommandBlockOuterBodyPath","innerPath","borderWidth","get_blockTLe_to_imTLe_path","get_imTLe_to_firstToothBlockTLe_path","get_imTLe_to_nextToothBlockTLe_assumingSequenceArgIndent_path","getCommandBlockInnerBodyPath","tooth","hasFemaleSocket","toothX","toothY","points","getCommandBlockFemaleSocketPathPoints","femaleSocketIndent","commandSequenceArgIndent","ofTLs","ofTLe","ofBLs","ofBLe","ofBRs","ofBRe","ofTRs","ofTRe","get_blockTLe_to_ofTRe_path","toothWidth","toothHeight","get_ofTRe_to_blockBRe_path","maleOffsetY","maleSocketIndent","ifTRe","ifTRs","ifBRe","ifBRs","ifBLe","ifBLs","ifTLe","ifTLs","get_blockBRe_to_omTLe_path","get_blockTLe_to_ifTRe_path","get_ifTRe_to_blockBRe_path","get_blockBRe_to_imTLe_path","firstTooth","firstToothX","firstToothY","nextToothY","_ref3","getLandscapePillOuterAndInnerPathsFromBoundingBox","bbox","getLandscapePillPathFromBoundingBox","_ref4","dropdownTexts","dropdownDimensions","parentBlockKind","blockDropdownBorder","borderRadius","dropdownText","naiveTextDimensions","measureText","blockDropdownFont","blockDropdownTextSizePx","minimumTextDimensions","textDimensions","arrowScale","blockDropdownArrowWidth","haloBody","queryInsertionMarkHaloRadius","hasPendingEditMark","queryInsertionMarkHalo","blockDropdownHorizontalPadding","blockDropdownText","blockDropdownArrowLeftMargin","_ref5","literalDimensions","literalBody","blockLiteralBorder","hasQueryInsertionMark","blockLiteralBackground","blockLiteralHorizontalPadding","blockLiteralTextSizePx","blockLiteralFont","blockLiteralText","_ref6","blockSpec","getCanvasItemRenderSpec","_ref7","insertionMark","hasDragPositionChangedSinceDragStart","dropdownMenuDropdownAddress","getBlockSequenceRenderSpec","isFirstCommandEntryPoint","_ref8","rawPosition","localDraggeeAddress","commandsAfterRemovingDraggee","localInsertionMarkAddress","adjustedPosition","getDefaultCommandBlockHeight","commandlikes","nonInsertionMarkIndex","commandlike","getBlockRenderSpec","getInsertionMarkCommand","draggee","getMinimumCommandBlockHeight","command","BlockSequence","_ref9","blockDef","getCommandBlockRenderSpec","_ref11","parts","getBlockParts","currentY","rboxDimensions","blockParts","queryAddress","partDimensions","Label","getDropdownDimensions","getLiteralDimensions","dummyAddress","dummyInsertionMark","dummyIsUnreachable","CommandSequence","totalWidth","arr","rboxHeight","queryBlockVerticalPadding","totalInterBlockPartHorizontalMargin","interBlockPartHorizontalMargin","leftPadding","rightPadding","getQueryRboxDimensionsFromParts","queryRadius","currentX","misplacedButCorrectlySizedSpec","getQueryBlockRenderSpec","_ref10","minimumNonLabelNonSequencePartX","toothPartLists","currentToothParts","groupBlockPartsByTooth","previousSequence","toothParts","toothDimensions","getCommandToothDimensionsFromParts","isLastTooth","originalSequenceIndex","lastTooth","lastToothBottom","maxToothWidth","teethWithAdjustedWidth","commandAddress","totalExpressionsInPreviousTeeth","commandBlockHorizontalPadding","maxHeight","partIndex","leftMargin","minToothWidth","indent","commandBlockVerticalPadding","textDimensionsWithPadding","blockDropdownVerticalPadding","arrowDimensions","arrowDimensionsWithMargin","blockDropdownArrowVerticalMargin","blockLiteralVerticalPadding","signaturePart","Expression","border","bmin","minorBase","bmaj","majorBase","halfDiff","theta","atan","ro","fTLc","cos","sin","ofTLt","ofBLt","ofBLf","fBLc","ofBRt","fBRc","ofTRt","fTRc","commands","def","isEntryPoint","prefix","list","topCommand","topDef","translateBlockSpec","translateLabelSpec","translateDropdownSpec","translateLiteralSpec","translateExpressionSpec","translateBlockSequenceSpec","readdressBlockSpecAndMarkAsReachableAndRemovePendingEditMark","newAddress","readdressDropdownSpecAndMarkAsReachableAndRemovePendingEditMark","readdressLiteralSpecAndMarkAsReachableAndRemovePendingEditMark","readdressExpressionSpecAndMarkAsReachableAndRemovePendingEditMark","readdressBlockSequenceSpecAndMarkAsReachableAndRemovePendingEditMark","localAddress","commandIndex","getLongestPossibleSubsequenceSpecFromBlockSpecStartingAtLocalAddress","dragIndex","slicedSpecs","lastSlicedSpec","dummySequenceAddress","subexpressionIndex","subexpression","subsequenceIndex","isNodeAddressPartString","asNumber","Boolean","clientPosition","editorComponentInstanceUid","getElementById","elements","elementsFromPoint","getTouchRoleOrNearestAncestorTouchRole","parentElement","nodeTouch","drag","dragDisplacement","totalDisplacement","translatedSpec","getDraggeeFromBlockSequenceUsingLocalAddress","specs","blockKind","defaultArgs","paletteInterblockMargin","canvasItemSpecs","dragCurrentClientPosition","Query","snapHorizontalRange","snapVerticalRange","candidates","flatMap","getQueryInsertionMarkCandidatesFromBlockSequenceSpec","closest","minSquareDistance","candidate","getDisplacementBetweenQueryBodyLeftCircleCenters","squareDistance","abs","getQueryInsertionMarkAddressBasedOnDraggeeAssumingDragIsInBlockCanvas","naiveAddress","getCommandInsertionMarkAddressBasedOnDraggeeWithinBlocklikeSpec","getCommandInsertionMarkAddressBasedOnDraggeeIgnoringSocketFit","afterInsertion","getCanvasItemFromSpec","firstCommand","doBlockSubsequencesContainMaleOrNonFinalFemaleSocket","firstCommandDef","commandIndexMinusOne","isMale","isNonFinalFemaleSocket","doCanvasItemsContainIllegalSocketMatches","translatedCanvasBounds","aLeft","aRight","aTop","aBottom","bLeft","bRight","bTop","bBottom","doRectanglesOverlap","getCommandInsertionMarkAddressBasedOnDraggeeAssumingDragIsInBlockCanvas","getQueryInsertionMarkCandidatesFromBlockSpec","literalSpec","aRadius","aCenterX","aCenterY","bRadius","_ref12","originalCanvasItems","afterRemoval","removalAddress","originalItem","updatedContent","removeNodeAtLocalAddressFromBlockSequence","doesBlockSequenceContainUndeletableBlock","afterInsertionOrDisplacement","insertNodeAtLocalAddressIntoBlockSequence","applyInsertionToCanvasItems","removeNodeAtLocalAddressFromBlock","removalIndex","original","insertNodeAtLocalAddressIntoBlock","insertionIndex","doesBlockSequenceContainMaleOrNonFinalFemaleSocket","canvasItemRenderSpecs","sortedCandidates","getCommandInsertionMarkCandidatesFromBlockSequenceSpec","sort","draggeeLeft","draggeeTop","draggeeBottom","topCandidate","topCandidateLeft","topCandidateTop","xDistanceFromTopCandidate","topAddress","bottomCandidate","bottomCandidateLeft","bottomCandidateTop","bottomCandidateBottom","xDistanceFromBottomCandidate","bottomAddress","currentIndex","currentLeft","currentTop","previous","previousLeft","previousTop","xDistance","sequenceSpec","commandSpec","draggeeeSpec","canvasItemContents","getToothTopAddress","getToothBottomAddress","getCommandInsertionMarkCandidatesFromBlockSpec","sequenceAboveThisToothAddress","specForSequenceAboveThisTooth","getBlockSequenceSpecFromAncestorBlockSequenceSpecAndLocalAddress","getBlockSequenceSpecFromAncestorBlockSpecAndLocalAddress","lastPart","isBlockOrAnyDescendantUndeletable","isDeletable","_ref13","dropdownParentBlockSpec","menuSpec","rx","blockDropdownMenuBorderRadius","ry","textRbox","blockDropdownMenuFont","blockDropdownMenuTextSizePx","blockDropdownMenuInterChoiceDividerHeight","_ref14","totalCanvasScroll","dropdownSvgCoords","dropdownSvgCenter","canvasCenter","totalMenuScroll","choiceSpecsWithUnadjustedRboxes","choice","choiceText","blockDropdownMenuHorizontalPadding","blockDropdownMenuChoiceVerticalMargin","maxChoiceSpecWidth","lastUnadjustedRbox","menuHeight","blockDropdownMenuDimensions","menuY","menuOuterRbox","newDropdownValue","updateDropdownValueInBlockSequenceUsingLocalAddress","localDropdownAddress","updateDropdownValueInBlockUsingLocalAddress","targetId","touchRoleAtClientPosition","CanvasElementKind","PathInstructionKind","TransformKind","NULL_CANVAS_ELEMENT","Group","paintCanvasElement","save","_element$transform","_element$alpha","transforms","applyTransform","applyTransforms","globalAlpha","alpha","beginPath","instruction","executePathInstruction","closePath","clip","applyGroupModifications","restore","dx","dy","dw","Text","applyFont","fillStyle","fillText","maxWidth","Path","Path2D","stroke","strokeStyle","lineWidth","Clear","_font$fontWeight","_font$textBaseline","_font$textAlign","textBaseline","textAlign","Translate","translate","Rotate","rotate","angle","Scale","scale","inst","MoveTo","moveTo","LineTo","lineTo","ArcTo","arcTo","x1","y1","x2","y2","SETTINGS_VERSION","SafeArea","SafeAreaWeb","getSafeAreaInsets","Preferences","PreferencesWeb","saveData","localStorage","setItem","loadData","res","SplashScreen","SplashScreenWeb","audioUrls","button_pop","club_attack","sword_attack","character_movement","success_music","goblin_yelp","witch_yelp","hero_yelp","error_buzzer","heal","fireball_launch","fireball_explosion","greensleeves","puzzle_music","block_pop","SoundKind","AudioManagerImpl","nodeCollections","nextAvailableSoundCollectionRawId","buttonPopBuffer","clubAttackBuffer","swordAttackBuffer","characterMovementBuffer","successMusicBuffer","goblinYelpBuffer","witchYelpBuffer","heroYelpBuffer","errorBuzzerBuffer","healBuffer","fireballLaunchBuffer","fireballExplosionBuffer","greensleevesBuffer","puzzleMusicBuffer","blockPopBuffer","AudioContext","loadAudio","buffer","audioUrl","decodeAudioData","arrayBuffer","scheduleSounds","sounds","currentTime","nodes","sound","_sound$loop","getBufferForSoundKind","timeInSeconds","offsetTime","createBufferSource","loop","gain","connect","destination","gainNode","createGain","durationInSeconds","collection","soundCollectionRawId","ButtonPop","ClubAttack","SwordAttack","CharacterMovement","SuccessMusic","GoblinYelp","WitchYelp","HeroYelp","ErrorBuzzer","Heal","FireballLaunch","FireballExplosion","Greensleeves","PuzzleMusic","BlockPop","cancel","disconnect","resume","App","AppWeb","KeepAwake","KeepAwakeWeb","allowSleep","noOp","Device","DeviceWeb","GAME_VERSION_WITHOUT_V","UiLanguage","UiTextKind","BlockKind","DropdownValueKind","InactiveBlockKind","BattleEventKind","SquareKind","AnimationKind","Level","LAST_LEVEL","UI_TEXT_FONT_FAMILY","ERROR_ALERT_TEXT_FONT_FAMILY","BATTLE_OUTCOME_TEXT_FONT_FAMILY","BUTTON_TEXT_FONT_FAMILY","BLOCK_TEXT_FONT_FAMILY","TEXT_SENTINELS","ALL_PUZZLE_SCREEN_BUTTON_ICON_SENTINELS","PUZZLE_SCREEN_BUTTON_ICON_SENTINEL_IMAGES","ALL_FONT_CHANGE_SENTINELS","FONT_CHANGE_SENTINEL_FONT_FAMILIES","CREDITS_SCREEN_BODY","LOCALIZED_UI_TEXT","English","PleaseSwitchToLandscape","LevelCleared","LevelFailed","NextLevel","CannotAdvance","CannotRetreat","CannotAttack","CannotHeal","CloseLiteralEditor","StartPuzzleFromBeginning","StartPuzzleFromLastSaved","Settings","FlagAndCurrentLanguage","Credits","ResetToLevelOne","CreditScreenTitle","Stage2ComingSoon","LoadingDotDotDot","TutorialLevel1Part1_MoveTheHero","TutorialLevel1Part2_DragBlueBlock","TutorialLevel1Part3_DragAnotherBlock","TutorialLevel1Part4_PressView","TutorialLevel1Part5_PressPlay","TutorialLevel1Part6_TryAgain","TutorialLevel2Part1_MoveTheHero","UseForeverBlockHint","TutorialLevel9Part1_ScrollDown","TutorialLevel9Part2_ScrollUp","TutorialLevel9Part3_DragLessThan","TutorialLevel9Part4_DragHealth","TutorialLevel9Part5_Type3","AreYouSureYouWantToResetToLevelOne","ConfirmReset","CancelReset","Japanese","JapaneseHiragana","EnemyCombinationKind","LOCALIZED_DEFEATED_ENEMIES_BUT_FORGOT_TO_MOVE_HERO_TO_STAIRS_MESSAGE_TEXT","SingleGoblin","MultipleGoblins","SingleWitch","BattleStatus","HeroActionKind","ButtonKind","GoblinColor","COLOR_THEME","white","parseColorHexString","gray","unreachableBlockGray","backgroundDotGray","errorAlertRed","paletteBackgroundWhite","dividerGray","buttonBlue","red","fire","orange","yellow","lime","emerald","cyan","blue","purple","magenta","pink","insertionMarkTransparentBlack","textWhite","textBrown","squareWhite","heartMarkRed","heartMarkBorderPink","UNSCALED_INTER_HEART_MARK_HORIZONTAL_MARGIN","MAX_HEARTS_PER_ROW","SIZING","paletteWidth","blockPadding","minPalettePadding","battleOutcomeAlertWidthFactor","blockTextSizePx","unscaledErrorAlertTextSizePx","unscaledBattleOutcomeTextSizePx","unscaledButtonTextSizePx","castleInteriorImage","interCommandPartMargin","healthTextBorder","depressedButtonScale","BATTLE_CONFIG","heroDamage","goblinDamage","witchDamage","witchAttackRange","witchSummonGoblinHealthCost","heroHeal","MAIN_BLOCK_EDITOR_BLOCK_COLORS","MoveForward","Attack","WhenBattleStarts","MoveBackward","Forever","XInFront","And","Or","Not","Health","LessThan","Equal","GreaterThan","MAIN_BLOCK_EDITOR_STATIC_CONFIG","sizingWithoutWindowDependentProperties","mapBlockKindRecord","TRANSPARENT_TRIPLET","TUTORIAL_BLOCK_EDITOR_STATIC_CONFIG","tripletWithAlpha","MINIMAP_BLOCK_EDITOR_STATIC_CONFIG","triplet","saturate","mapBlockKindRecordToInactiveBlockKindRecord","X_IN_FRONT_DROPDOWN_VALUES","Nothing","Goblin","Witch","BLOCK_DEF_STRINGS","DROPDOWN_TEXTS","BLOCK_DEFS","dict","parseBlockDefString","DOM_ELEMENT_IDS","SCREEN_TRANSITION_ANIMATION_SECONDS","REAL_VSO","VEC2_VSO","COLOR32_VSO","LOCAL_STORAGE_STATE_KEY","DEFAULT_LANGUAGE","LEVEL_1_TUTORIAL_DRAG_CYCLE","totalDurationInSeconds","movingPhaseDurationInSeconds","insertionMarkTimeInSeconds","blockReleaseTimeInSeconds","firstDragEnd","secondDragEnd","LEVEL_9_TUTORIAL_ANIMATION_CYCLE","paletteScroll","fingerDownTimeInSeconds","dragStartTimeInSeconds","dragEndTimeInSeconds","fingerUpTimeInSeconds","paletteToCanvasDrag","healthBlockIntoLessThanBlockInsertionMarkTimeInSeconds","lessThanBlockDragEnd","literalTap","fingerFlashPeriod","INTER_EVENT_DELAY_SECONDS","BATTLE_START_DELAY_SECONDS","ATTACK_DURATION_IN_SECONDS","HEAL_ANIMATION_DURATION_IN_SECONDS","MELEE_ATTACKERS","Hero","CLUB_ATTACKERS","SWORD_ATTACKERS","FIREBALL_ATTACKERS","MELEE_DAMAGE_OVERLAY_FLASH_START_FACTOR","MELEE_DAMAGE_OVERLAY_FLASH_END_FACTOR","FIREBALL_DAMAGE_OVERLAY_FLASH_START_FACTOR","FIREBALL_DAMAGE_OVERLAY_FLASH_END_FACTOR","svgTextDimensionCache","SVG_TEXT_DIMENSION_CACHE_KEY_SEPARATOR","UI_FONT_SIZE","ONE_SECOND_AFTER_FILE_LOAD","HOME_MUSIC","PUZZLE_MUSIC","SHORT_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR","SHORT_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR","TALL_INSTRUCTIONS_BOX_TEXT_MAX_WIDTH_FACTOR","TALL_INSTRUCTIONS_BOX_TEXT_MAX_HEIGHT_FACTOR","IN_EDITOR_MINI_BATTLE_SCREEN_SCALE_FACTOR","newG","newB","toU8","blockDefString","undeletable","hermaphroditeCommand","maleCommand","femaleCommand","query","entryPoint","remaining","dropdownDefaults","literalDefaults","expressionMatch","dropdownMatch","every","sequenceMatch","indexOfNextPart","labelText","trimmedLabelText","stringToByteArray$1","charCodeAt","base64","byteToCharMap_","charToByteMap_","byteToCharMapWebSafe_","charToByteMapWebSafe_","ENCODED_VALS_BASE","ENCODED_VALS","ENCODED_VALS_WEBSAFE","HAS_NATIVE_SUPPORT","atob","encodeByteArray","webSafe","init_","byteToCharMap","byte1","haveByte2","byte2","haveByte3","byte3","outByte1","outByte2","outByte3","outByte4","encodeString","btoa","decodeString","pos","c1","c2","c3","byteArrayToString","decodeStringToByteArray","charToByteMap","byte4","DecodeBase64StringError","base64urlEncodeWithoutPadding","utf8Bytes","base64Encode","base64Decode","getDefaultsFromGlobal","getGlobal","__FIREBASE_DEFAULTS__","getDefaults","getDefaultsFromEnvVariable","process","defaultsJsonString","parse","getDefaultsFromCookie","decoded","info","getDefaultEmulatorHostnameAndPort","productName","host","emulatorHosts","getDefaultEmulatorHost","separatorIndex","lastIndexOf","port","getDefaultAppConfig","Deferred","wrapCallback","FirebaseError","customData","setPrototypeOf","captureStackTrace","ErrorFactory","service","serviceName","errors","fullCode","template","PATTERN","replaceTemplate","fullMessage","deepEqual","aKeys","bKeys","aProp","bProp","isObject","thing","getModularInstance","_delegate","instanceFactory","multipleInstances","serviceProps","instantiationMode","onInstanceCreated","setInstantiationMode","setMultipleInstances","setServiceProps","setInstanceCreatedCallback","DEFAULT_ENTRY_NAME","container","component","instances","instancesDeferred","instancesOptions","onInitCallbacks","identifier","normalizedIdentifier","normalizeInstanceIdentifier","deferred","isInitialized","shouldAutoInitialize","getOrInitializeService","instanceIdentifier","getImmediate","optional","getComponent","setComponent","isComponentEager","instanceDeferred","clearInstance","services","INTERNAL","_delete","isComponentSet","getOptions","initialize","opts","onInit","existingCallbacks","existingInstance","invokeOnInitCallbacks","callbacks","ComponentContainer","providers","addComponent","provider","getProvider","addOrOverwriteComponent","getProviders","LogLevel","levelStringToEnum","VERBOSE","INFO","WARN","ERROR","SILENT","defaultLogLevel","ConsoleMethod","defaultLogHandler","logType","logLevel","toISOString","instanceOfAny","object","constructors","idbProxyableTypes","cursorAdvanceMethods","cursorRequestMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","idbProxyTraps","receiver","IDBTransaction","objectStoreNames","objectStore","wrap","wrapFunction","func","IDBDatabase","transaction","IDBCursor","advance","continue","continuePrimaryKey","_len2","_key2","unwrap","_len3","_key3","storeNames","tx","transformCachableValue","unlisten","complete","DOMException","cacheDonePromiseForTransaction","IDBObjectStore","IDBIndex","IDBRequest","success","promisifyRequest","newValue","readMethods","writeMethods","cachedMethods","getMethod","targetFuncName","useIndex","isWrite","storeName","store","oldTraps","PlatformLoggerServiceImpl","getPlatformInfoString","isVersionServiceProvider","library","logString","logger","_logLevel","_logHandler","_userLogHandler","val","TypeError","setLogLevel","logHandler","userLogHandler","debug","_len4","_key4","_len5","_key5","_len6","_key6","PLATFORM_LOG_STRING","name$p","name$o","name$m","name$n","name$k","name$l","name$j","name$i","name$h","name$g","name$f","name$e","name$d","name$c","name$b","name$a","name$9","name$8","name$7","name$6","name$5","name$4","name$3","name$1","name$2","_apps","_serverApps","_components","_addComponent","app","_registerComponent","componentName","serverApp","_getProvider","heartbeatController","triggerHeartbeat","ERROR_FACTORY","FirebaseAppImpl","_isDeleted","_options","_config","_name","_automaticDataCollectionEnabled","automaticDataCollectionEnabled","_container","checkDestroyed","isDeleted","appName","SDK_VERSION","initializeApp","rawConfig","existingApp","newApp","registerVersion","libraryKeyOrName","variant","libraryMismatch","versionMismatch","warning","DB_NAME","DB_VERSION","STORE_NAME","dbPromise","getDbPromise","blocked","upgrade","blocking","terminated","indexedDB","open","openPromise","oldVersion","newVersion","openDB","createObjectStore","originalErrorMessage","writeHeartbeatsToIndexedDB","heartbeatObject","computeKey","idbGetError","appId","HeartbeatServiceImpl","_heartbeatsCache","_storage","HeartbeatStorageImpl","_heartbeatsCachePromise","read","agent","getUTCDateString","heartbeats","lastSentHeartbeatDate","singleDateHeartbeat","hbTimestamp","overwrite","getHeartbeatsHeader","heartbeatsToSend","unsentEntries","heartbeatsCache","maxSize","heartbeatEntry","dates","countBytes","extractHeartbeatsForHeader","headerString","_canUseIndexedDBPromise","runIndexedDBEnvironmentCheck","isIndexedDBAvailable","preExist","DB_CHECK_NAME","onsuccess","deleteDatabase","onupgradeneeded","idbHeartbeatObject","readHeartbeatsFromIndexedDB","heartbeatsObject","existingHeartbeatsObject","version$1","DEFAULT_HOST","CONFIG_STORAGE_BUCKET_KEY","StorageError","status_","prependCode","serverResponse","_baseMessage","_codeEquals","StorageErrorCode","ErrorCode","unknown","UNKNOWN","retryLimitExceeded","RETRY_LIMIT_EXCEEDED","canceled","CANCELED","cannotSliceBlob","CANNOT_SLICE_BLOB","invalidArgument","INVALID_ARGUMENT","appDeleted","APP_DELETED","invalidFormat","format","INVALID_FORMAT","internalError","INTERNAL_ERROR","Location","bucket","path_","isRoot","fullServerUrl","bucketOnlyServerUrl","makeFromBucketSpec","bucketString","bucketLocation","makeFromUrl","INVALID_DEFAULT_BUCKET","bucketDomain","gsRegex","RegExp","httpModify","loc","firebaseStorageHost","groups","regex","indices","postModify","group","captures","exec","bucketValue","pathValue","INVALID_URL","invalidUrl","FailRequest","promise_","getPromise","isString","isNativeBlob","isNativeBlobDefined","Blob","validateNumber","argument","minValue","maxValue","makeUrl","urlPart","protocol","origin","makeQueryString","queryPart","isRetryStatusCode","additionalRetryCodes","isFiveHundredCode","isExtraRetryCode","isAdditionalRetryCode","NetworkRequest","url_","method_","headers_","body_","successCodes_","additionalRetryCodes_","callback_","errorCallback_","timeout_","progressCallback_","connectionFactory_","retry","pendingConnection_","backoffId_","canceled_","appDelete_","resolve_","reject_","start_","doTheRequest","backoffCallback","RequestEndStatus","connection","progressListener","progressEvent","total","lengthComputable","addUploadProgressListener","send","removeUploadProgressListener","hitServer","getErrorCode","NO_ERROR","getStatus","wasCanceled","ABORT","successCode","backoffDone","requestWentThrough","wasSuccessCode","getResponse","getErrorText","doRequest","backoffCompleteCb","waitSeconds","retryTimeoutId","globalTimeoutId","hitTimeout","cancelState","triggeredCallback","triggerCallback","callWithDelay","millis","responseHandler","clearGlobalTimeout","waitMillis","stopped","stop","wasTimeout","appDelete","abort","getBlobBuilder","BlobBuilder","WebKitBlobBuilder","getBlob$1","getBlob","UNSUPPORTED_ENVIRONMENT","decodeBase64","encoded","polyFill","StringFormat","RAW","BASE64","BASE64URL","DATA_URL","StringData","dataFromString","stringData","utf8Bytes_","base64Bytes_","dataUrl","DataURLParts","rest","percentEncodedBytes_","dataURLBytes_","Uint8Array","hasMinus","hasUnder","hasPlus","hasSlash","array","dataURL","matches","middle","endsWith","FbsBlob","elideCopy","blobType","data_","ArrayBuffer","byteLength","size_","type_","startByte","endByte","sliced","webkitSlice","mozSlice","sliceBlob","blobby","uint8Arrays","finalLength","merged","uploadData","jsonObjectOrNull","lastComponent","noXform_","metadata","Mapping","server","local","xform","mappings_","getMappings","mappings","nameMapping","_metadata","fullPath","xformPath","sizeMapping","fromResource","resource","len","mapping","_makeStorageReference","addRef","fromResourceString","resourceString","toResourceString","RequestInfo","errorHandler","progressCallback","successCodes","handlerCheck","cndn","metadataHandler","xhr","sharedErrorHandler","newErr","UNAUTHORIZED_APP","UNAUTHENTICATED","QUOTA_EXCEEDED","UNAUTHORIZED","unauthorized","metadataForUpload_","metadataClone","determineContentType_","multipartUpload","boundary","genBoundary","metadata_","preBlobPart","postBlobPart","_protocol","maxUploadRetryTime","requestInfo","textFactoryOverride","XhrConnection","sent_","xhr_","XMLHttpRequest","initXhr","errorCode_","sendPromise_","NETWORK_ERROR","setRequestHeader","statusText","getResponseHeader","header","upload","XhrTextConnection","newTextConnection","Reference","_service","_location","_newRef","storage","parent","newPath","_throwIfRoot","INVALID_ROOT_OPERATION","invalidRootOperation","uploadBytes$1","makeRequestWithTokens","finalMetadata","_getChild$1","childPath","canonicalChildPath","refFromPath","FirebaseStorageImpl","_bucket","NO_DEFAULT_BUCKET","reference","ref$1","serviceOrRef","pathOrUrl","isUrl","extractBucket","connectStorageEmulator$1","mockUserToken","_overrideAuthToken","token","projectId","uid","project","iat","sub","user_id","iss","aud","exp","auth_time","firebase","sign_in_provider","identities","alg","createMockUserToken","_authProvider","_appCheckProvider","_url","_firebaseVersion","_host","_appId","_deleted","_maxOperationRetryTime","_maxUploadRetryTime","_requests","POSITIVE_INFINITY","maxOperationRetryTime","_getAuthToken","auth","tokenData","getToken","accessToken","_getAppCheckToken","appCheck","clear","_makeRequest","requestFactory","authToken","appCheckToken","firebaseVersion","addGmpidHeader_","addAuthHeader_","addVersionHeader_","addAppCheckHeader_","makeRequest","STORAGE_TYPE","factory","authProvider","appCheckProvider","getApp","bucketUrl","storageInstance","emulator","connectStorageEmulator","getStorage","apiKey","authDomain","storageBucket","messagingSenderId","measurementId","writeToFirebaseStorage","uploadBytes","Code","MAX_UINT_1_BYTE","MAX_UINT_2_BYTE","MAX_UINT_4_BYTE","NonReusableJsonAnalyzer","implicitTable","handleInvalidJsonValue","lookupTable","isUsed","writeNodeAndMarkAnalyzerAsUsed","pushByte","writeNode","writeTaggedInt","Float64","writeUntaggedF64","isFinite","ConstNull","ConstFalse","ConstTrue","ConstEmptyString","ConstEmptyArray","existingRef","getRefOfNodeThatEquals","writeTaggedRef","writeTaggedArray","Int8Array","Uint8ClampedArray","Uint16Array","Int16Array","Uint32Array","Int32Array","Float32Array","Float64Array","TextEncoder","utf8Length","smallStringTag","String1Byte","StringLen1Byte","StringLen2Byte","StringLen4Byte","writeUntaggedUnoffsetSafeUint","ConstEmptyObject","commandQueue","nextUnprocessedEntryIndex","prefixObjectRef","prefixLength","getLongestPrefixObjectRefAndEntryCount","isObjectCopy","commandCount","smallObjectTag","Object1Command","ObjectCommandCount1Byte","ObjectCommandCount2Byte","ObjectCommandCount4Byte","OffsetPosInt1Byte","OffsetNegInt1Byte","Int2Byte","DataView","setInt16","u8s","Int4Byte","setInt32","uint","setFloat64","refTag","Ref1Byte","Ref2Byte","Ref4Byte","byteArrayTag","elementCount","ByteArray4Element","ByteArray8Element","ByteArray16Element","ByteArray32Element","ByteArray64Element","elementCountToByteArrayTag","smallArrayTag","Array1Element","ArrayLen1Byte","ArrayLen2Byte","ArrayLen4Byte","goalEntries","bestRef","bestEntryCount","candidateRef","referent","candidateEntries","candidateKey","candidateValue","jsonDeepEquals","readNodeAndMarkAnalyzerAsUsed","readNode","getReferent","bytesConsumed","readTaggedInt","getUntaggedF64","subarray","readTaggedArray","readTaggedObject","readReferentOfTaggedBigRef","BigUint","NegBigInt","readTaggedString","readTaggedByteArray","getInt16","getInt32","Int8Byte","getFloat64","arrayLength","firstElementIndex","getLengthAndFirstElementIndexOfTaggedNonEmptyArray","nextElementIndex","Array8Element","getUntaggedU16","getUntaggedU32","getUint16","getUint32","firstCommandIndex","getLengthAndFirstCommandIndexOfTaggedNonEmptyObject","nextCommandIndex","part1","part2","fromEntries","Object8Command","stringUtf8Length","firstByteIndex","getLengthAndFirstCharIndexOfTaggedNonEmptyString","TextDecoder","String15Byte","PushableUint8Array","byte","newBuffer","pushBytes","requiredLen","newBufferLen","unpushableSlice","unpushableSubarray","getLength","compressJson","analyzer","pushByteToBody","aElement","aEntries","bEntries","aKey","aValue","EvalError","RangeError","ReferenceError","SyntaxError","URIError","AssertionError","SystemError","commonProperties","property","toJsonWasCalled","getErrorConstructor","_errorConstructors$ge","errorConstructors","destroyCircular","seen","forceEnumerable","maxDepth","depth","useToJSON","serialize","isErrorLike","toJSON","continueDestroyCircular","pipe","stringifyError","serializeError","LOG_SCHEMA_VERSION","LOG_COMPRESSION_SCHEME_VERSION","LOG_CACHE_LOCAL_STORAGE_KEY","LOGGER_ID_BYTES_LOCAL_STORAGE_KEY","LOG_CACHE_MAX_SIZE","LOG_UPLOAD_COOLDOWN_SECONDS","LogEventKind","JSON_COMPRESSION_TABLE","possiblyLoadingLoggerIdBytes","wasLoggerIdJustCreated","pendingLogUploadCompletionListeners","loggerIdBytesPromise","loggerIdBytesOrNull","isUint8","tryParseLoggerBytesString","newLoggerIdBytes","getBytesForNewLoggerId","pendingLogEvents","pendingLogEventsPushedPromise","loggerIdBytes","logEventsWithLoggerId","logEvents","errorMessage","timestampDateDotNow","newEvents","logCache","getAndSaveUpToDateLogCacheOrDefault","nextUploadTimeDateDotNow","lastEmptiedDateDotNow","allEvents","updateLogCache","onLine","uploadLogEvents","emptyLogCacheAssumingLoggerIdBytesHavedLoaded","savedStr","getItem","getAndSaveDefaultLogCache","saved","logSchemaVersion","defaultCache","LoggerIdCreated","lastUpdatedDateDotNow","newCache","timestampedCache","events","logCompressionSchemeVersion","gameVersion","encodeLogEvents","endTime","loggerIdString","targetLength","nowStr","getPossiblyLoadingLoggerIdBytes","hasPerformedPreflightSanityCheck","mainBlockEditorComponentInstanceUid","tutorialBlockEditorComponentInstanceUid","minimapBlockEditorComponentInstanceUid","ghostSvg","tempCanvasCtx","frontCanvasCtx","blockLiteralEditor","blockLiteralEditorForm","blockLiteralEditorInput","blockLiteralEditorCloseButton","initialSavedStateOrDefault","audioManager","isMounted_","lastBlockEditorSetStateCallTime","currentLevelBattleEventsCache","prevLevelBattleEventsCache","battleSoundsId","homeMusicId","puzzleMusicId","hasRecordedLevelCompletionOrFailureSinceLastBattleResumption","__debug__pause","level","Level1","getEnemyCombinationKindOfEnemiesInitiallyBlockingHeroFromStairs","performEnemyCombinationSanityCheckOnAllLevels","performPreflightSanityCheckIfNotAlreadyPerformed","tempCanvas","willReadFrequently","frontCanvas","savedString","parseStringAsState","blockEditor","getStartingBlockEditorStateForLevel","deviceLanguage","tryToGuessPreferredLanguageBasedOnString","getLanguageTag","tryToGuessPreferredLanguageBasedOnDeviceLanguage","guessPreferredLanguageBasedOnBrowserLanguage","getDefaultSavableStateByGuessingPreferredLanguageBasedOnDeviceLanguage","getCurrentTimestamp","timeCached","millisecondsSinceEpoch","_parseStringAsState","getDefaultSavableStateByGuessingPreferredLanguageBasedOnBrowserLanguage","getStateSavedInLocalStorageOrDefault","appWidth","innerWidth","appHeight","innerHeight","orientationType","getCurrentScreenOrientation","screen","animationKind","Loading","animationStartTime","currentTimestamp","battleAnimationOffsetSeconds","prevLevelBlockEditor","getDummyBlockEditorState","mostRecentTutorialBlockEditorUpdateTime","onlyTouchStartButton","onlyTouchDepressedButton","mouseClientPosition","safeAreaInsets","insets","right","bottom","hasFailedLevelOneAtLeastOnce","uncheckedLogEvents","AppLifeCycleMilestone","milestoneKind","gameVersionWithoutV","onResize","onDocumentVisibilityChange","onCapacitorAppStateChange","onWindowTouchStart","onWindowMouseDown","onLiteralEditorFormSubmit","onLiteralEditorInputChange","onCloseLiteralEditorButtonClick","measureCanvasText","measureSvgText","setBlockEditorState","updateCanvas","getCurrentLevelBattleEvents","startLoadingBarProgressAnimation","renderTutorialCanvasElement","CapacitorApp","removeProperty","prevState","hide","skipToLevel","reload","logEventIfMounted","getLoadingScreenAnimationUpdater","removeSafeAreaChangeListener","logEventsIfMounted","unsafeNextLevel","isScreenShowingVictory","savableState","stateString","saveState","getButtonAt","getButtonClickDetectorResources","updateBlockLiteralEditor","dualRender","reactElement","shouldShowEditor","Edit","classList","toggle","innerText","getUiText","dualRenderAssumingLandscapeOrientation","dualRenderAssumingPortraitOrientation","dualRenderLoadingScreen","StaticHome","dualRenderHomeScreen","dualRenderEditScreen","StaticSettings","dualRenderSettingsScreen","StaticConfirmResetToLevelOne","dualRenderConfirmResetToLevelOneScreen","HomeToView","dualRenderHomeToViewAnimation","EditToView","dualRenderEditToViewAnimation","ViewToEdit","dualRenderViewToEditAnimation","ViewToHome","dualRenderViewToHomeAnimation","EditToHome","dualRenderEditToHomeAnimation","PlayBattle","PauseBattle","dualRenderBattleScreen","dualRenderNextLevelAnimation","OpenSettings","dualRenderOpenSettingsAnimation","CloseSettings","dualRenderCloseSettingsAnimation","dualRenderCreditsAnimation","className","canvasElement","renderLoadingScreenCanvasElement","minimumHorizontalScale","minimumVerticalScale","loadCompletionFactor","getLoadCompletionFactor","castleCodersTextBBox","scaledWidth","scaledHeight","SCALED_CASTLE_CODERS_TEXT_BOTTOM_MARGIN","loadingText","loadingTextDimensions","loadingTextBottom","SCALED_LOADING_TEXT_BOTTOM_MARGIN","SCALED_LOADING_BAR_DEPTH_ILLUSION_OFFSET","renderHomeScreenBackgroundCanvasElement","renderRect","renderHomeScreenCanvasElement","renderHomeScreenButtonsCanvasElement","extendedHomeBackgroundBBox","nonextendedHomeBackgroundBBox","nondepressedStartButtonBBox","startButtonBBox","HomeScreenStart","getDepressedButtonBBox","nonDepressedSettingsButtonBBox","settingsButtonBBox","nondepressedStartButtonTextBBox","startButtonTextBBox","nondepressedSettingsTextBBox","settingsTextBBox","getRectCenter","blockEditorProps","getMainBlockEditorConfig","noBlockEditorUiAction","tutorialBlockEditorProps","getTutorialBlockEditorConfig","getTutorialBlockEditorState","puzzleButtonsCanvasElement","puzzleButtonsDragBlocker","dualRenderPuzzleScreenButtons","tutorialCanvasElement","miniBattleScreenCanvasElement","miniBattleScreenDragBlocker","dualRenderInEditorMiniBattleScreenAssumingNoTutorial","Level9","pointerEvents","battleEvents","battleAnimationData","getBattleAnimationData","getInitialLevelState","renderBattleAndOutcomeScreenCanvasElement","InEditorMiniBattleScreen","dualRenderSettingsBoxOverHomeScreen","settingsScreenDy","renderSettingsBoxCanvasElement","settingsBoxBBox","nondepressedCloseButtonBBox","closeButtonBBox","SettingsScreenClose","nondepressedLanguageButtonBBox","languageButtonBBox","Language","nondepressedCreditsButtonBBox","creditsButtonBBox","nondepressedResetButtonBBox","resetButtonBBox","OpenConfirmResetToLevelOneScreen","withAlpha","renderConfirmResetTOLevelOneBoxCanvasElement","ConfirmResetToLevelOneScreenClose","ConfirmResetToLevelOne","CancelResetToLevelOne","elapsedSeconds","getElapsedSeconds","homeScreenDy","battleElapsedSeconds","blockEditorDy","renderPuzzleScreenButtonsCanvasElement","protectedAreaScalePoint","protectedAreaScale","getBattleScreenProtectedAreaScalePointAndScaleFactor","minimapBBox","getMinimapBBox","minimapBlockEditorProps","getMinimapBlockEditorConfig","getMinimapBlockEditorState","renderTutorial","renderKilledEnemiesButForgotToMoveHeroToStairsHintIfNeeded","prevBattleEvents","getPrevLevelBattleEvents","prevBattleElapsedSeconds","prevBattleAnimationData","creditTextDy","textElements","getUntransformedCreditScreenTextElementsAndFinalYCursor","title","titleFont","titleTextDimensions","titleElement","sectionBottomMargin","bodyFont","lineBottomMargin","bodySections","replaceAll","b2","b3","b4","b5","b6","b7","b8","b9","b10","b11","b12","b13","b14","b15","byteAsTwoCharacterLowerHexString","getMultilinePrettyPrintedLoggerIdOrDefault","section","lines","line","getCreditRollDurationInSeconds","untransformedYCursor","_options$renderTutori","backgroundImageScale","backgroundImageTop","protectedAreaTransform","levelState","currentLevelState","battleStatus","errorAlert","particles","advanceSummon","battleOutcomeTextDimensions","Victory","Defeat","nondepressedNextLevelButtonTextDimensions","nondepressedNextLevelButtonPadding","nondepressedNextLevelButtonBBox","nextLevelButtonBBox","nextLevelButtonFontSize","victoryElements","periodicColorSinInterp","defeatElements","renderMinimapHoleCanvasElement","squares","_square","square","squareIndex","renderCastleSquareOccupant","summonee","summoneeIndex","particle","circle","renderCircle","textElement","rectWidth","opacityFactor","renderStage2ComingSoonCanvasElement","protectedAreaLeft","lastSquareBBoxBottomRight","protectedAreaWidth","areAnyBlocksReachable_","areAnyBlocksReachable","isBattleFinished","isScreenShowingDefeat","blockEditorCanvasItems","doesUserNeedToWriteIncorrectCodeForLevelOne","doesUserNeedToFixInitialIncorrectCodeForLevelOne","doesUserNeedToExecuteIncorrectCodeForLevelOne","isUserReadyToExecuteCorrectCodeForLevelOne","isBlockCanvasIsInInitialState","nondepressedLeftButtonBBox","nondepressedMiddleButtonBBox","nondepressedRightButtonBBox","getNondepressedPuzzleScreenButtonBBoxes","leftButtonBBox","PuzzleScreenLeft","editButton","disabledEditButton","flashingEditButton","leftButton","getCurrentLevelBattleAnimationData","didHeroSurviveLevelButFailToReachStairs","leftButtonOverlay","middleButtonBBox","PuzzleScreenMiddle","viewButtonSpec","disabledViewButtonSpec","flashingViewButtonSpec","flashing","playButtonSpec","disabledPlayButtonSpec","flashingPlayButtonSpec","pauseButtonSpec","disabledPauseButtonSpec","ENTER_VIEW_SCREEN_ANIMATIONS","middleButtonSpec","middleButton","middleButtonDepressionOverlay","middleButtonFlashOverlay","rightButtonBBox","PuzzleScreenRight","rightButton","rightButtonOverlay","comingSoonTextLines","bodyLines","renderLevel1TutorialCanvasElementAssumingNoBlockEditorUiAction","Level2","renderLevel2TutorialCanvasElementAssumingNoBlockEditorUiAction","Level8","renderLevel8TutorialCanvasElementAssumingNoBlockEditorUiAction","renderLevel9TutorialCanvasElementAssumingNoBlockEditorUiAction","isReadyToFailLevelForTheFirstTime","bBoxOfTallInstructionsBoxForCastleBackground","bBoxOfShortInstructionsBoxForBlockEditor","bBoxOfShortInstructionsBoxForCastleBackground","instructionsBoxBBox","instructionsText","renderTextAndIconsAroundCenter","fingerHeight","paletteMoveForwardBlockRbox","fingerStart","fingerEnd","secondsIntoDragCycle","getLaterTimestamp","fingerPosition","isAnimationInDragPhase","isBlockCanvasInInitialState","instructionsBoxSource","instructionsBoxCanvasElement","renderUseForeverBlockHintIfNeeded","entryPointItemContent","didHeroDefeatAllEnemiesButForgetToMoveToStairs","hasUserEditedLiteral","doesBlockSequenceContainNonEmptyLiteral","instructionsWidth","instructionsHeight","fingerWidth","paletteLessThanBlockRbox","paletteLessThanBlockRboxTop","paletteLessThanBlockRboxBottom","PADDING","MAX_RBOX_RIGHT","requiredPaletteScrollYForLessThanBlock","onScreenEmptyLessThanBlockSpec","isOnScreenEmptyLessThanBlockSpec","translatedTopLeft","isOnScreen","isEmpty","expr","seqSpec","getBlockSpecFromBlockSequenceSpecSatisfying","onScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec","isOnScreenLessThanWithHealthLhsAndEmptyRhsBlockSpec","lhs","isLhsHealthBlock","rhs","isRhsEmptyLiteral","unpaddedExclusionZones","CANDIDATE_STEP","highestDragStartYCandidate","zone","lowestDragStartYCandidate","dragStart","dragEnd","completionFactor","paletteHealthBlockRbox","paletteHealthBlockRboxTop","paletteHealthBlockRboxBottom","requiredPaletteScrollYForHealthBlock","secondsElapsedAfterLastEdit","PI","enemyCombinationKind","getLevel9DragStatus","needsHealthBlockDrag","unreachableBlockColor","foreground","fgAlpha","bgAlpha","outAlpha","unrounded","compositeColor32","getLocalizedBlockDefs","getTutorialBlockEditorStateAssumingLevel1","getTutorialBlockEditorStateAssumingLevel9","showInsertionMark","isDragging","offscreenBlockPosition","startDisplacement","endDisplacement","offscreenMoveForward","onscreenWhenBattleStarts","onscreenWhenBattleStartsMoveForward","onscreenWhenBattleStartsMoveForwardTwice","unsafeUiTouch","EMPTY_BLOCK_EDITOR_STATE","readonlyMainBlockEditorProps","needsLessThanBlockDrag","offscreenLessThan","offscreenHealth","onscreenEmptyLessThan","hypotheticalOnscreenEmptyLessThan","hypotheticalOnscreenFilledLessThan","mainConfig","identity","_getBattleAnimationDa","executedBlockAddress","activeCanvasItemPosition","activeCanvasItem","flagBlockSequenceAsInactiveExcept","withoutCanvasScroll","getRboxAtAddressFromBlockSequence","requestContent","segmentText","devicePixelRatio","resetTransform","visibilityState","onAppDeactivated","AppActiveStatusChanged","statusChangeKind","onAppReactivated","capacitorAppState","isActive","pauseBattle","onOnlyPointerDown","touchedButton","onOnlyPointerMove","onOnlyPointerUp","SettingsScreenSecondaryClose","CreditsScreenClose","onHomeScreenStartButtonClick","onHomeScreenSettingsButtonClick","onNextLevelButtonClick","onPuzzleScreenLeftButtonClick","onPuzzleScreenMiddleButtonClick","onPuzzleScreenRightButtonClick","onLanguageButtonClick","onCreditsButtonClick","onOpenConfirmResetToLevelOneScreenButtonClick","onSettingsScreenCloseButtonClick","onSettingsScreenSecondaryCloseButtonClick","onConfirmResetToLevelOneCloseButtonClick","onCreditsScreenCloseButtonClick","onConfirmResetToLevelOneButtonClick","onCancelResetToLevelOneButtonClick","onInEditorMiniBattleScreenClick","onEditBlocksButtonClick","updateAnimationTimeIfAnimationIsStillInProgress","currentState","areTimestampsEqual","getEditScreenAnimationUpdaterIfOnTutorialLevel","ButtonPressed","buttonKind","onViewMapButtonClick","startEditToViewAnimation","getViewScreenEnterAnimationUpdater","onResumeBattleButtonClick","getBattleSoundsForCurrentLevel","getPauseScreenAnimationUpdater","LevelCompleted","completedLevel","failedLevel","didHeroSurvive","health","BattleResumed","onPauseBattleButtonClick","BattlePaused","nextLevel","getNextLevel","playPuzzleMusic","isLevelOneAndCodeExecutionForbidden","onReturnHomeButtonClick","_UiLanguage$English$U","newLanguage","LanguageChanged","closeSettingsScreen","closeLiteralEditor","newLiteralSource","newLiteralEditorState","fontSizePx","getSvgTextDimensionCacheKey","cached","measureSvgTextIgnoringCache","svgRect","getBoundingClientRect","getBBox","actualBoundingBoxAscent","actualBoundingBoxDescent","disableBlockDeletionBasedOnLevel","updateBlockEditorState","optionalCallback","newBlockEditorState","didUpdateCanvasItems","shouldPlayBlockPop","oldBlockEditorState","isDraggingWhenBattleStartsBlock","isScrollingCanvas","isLevel1AndShouldResetMostRecentTutorialBlockEditorUpdateTime","areAnyTrue","isLevel9AndShouldResetMostRecentTutorialBlockEditorUpdateTime","oldItem","newItem","shouldResetMostRecentTutorialBlockEditorUpdateTime","oldItems","newItems","oldBlockCount","sum","getBlockSequenceRecursiveBlockCount","newBlockCount","isDraggeeATopLevelSequenceThatOnlyChangedPosition","didConnectBlock","itemA","itemB","areBlockSequencesEqual","areCanvasItemsEqual","BlockEditorCanvasItemsUpdated","playHomeMusic","startEditToHomeAnimation","startViewToHomeAnimation","timeInSecondsOverride","currentScreen","getHomeScreenEnterAnimationUpdater","levelUpOnHomeScreen","newLevelAndBlockEditorState","battleEventsCache","getBattleEvents","evaluateSimpleClampedFunction","center","maxDimensions","puzzleButtonIconDimensions","textColor","getInstructionsBoxRenderInfo","rawLine","currentText","sentinel","allLinePartWidths","lineHeights","getLineDimensionsAndOverrideFontSize","lineIndex","partWidths","fontFamilyOverride","partWidth","naiveDimensions","getLineDimensionsUsingDefaultFont","naiveTotalHeight","naiveLineWidths","naiveMaxWidth","defaultFont","minLineHeight","defaultMinLineHeight","scaleFactor","getLineDimensionsUsingFont","puzzleButtonIconHorizontalMargin","buttonIconWidth","soundsAssumingLevelJustStarted","initialLevelState","timeCursor","eventIndex","nonoffsetSounds","getNonoffsetBattleEventSounds","nonoffset","eventDuration","getBattleEventDuration","ClimbStairs","EvalBlock","applyBattleEventUnchecked","getBattleSoundsAssumingLevelJustStarted","canvasItem","mbec","gas","blockIndexMinusOne","blockSource","isBattleStillOngoing","evalAndPopTopStackBlock","eventsFromEnemyTurn","levelStateAfterEnemyTurn","getBattleEventsAndNewLevelStateAfterEnemyTurn","getHeroIndex","addFailLevelEventIfNotAlreadyPresent","canEnemiesSummon","advanceAttempt","Empty","Advance","FailHeroAction","failedActionKind","retreatAttempt","Retreat","attackAttempt","attackerIndex","targetIndex","damage","healAttempt","maxHealth","healAmount","sequenceBlock","sequenceBlockIndex","evalArgExpression","operand","expected","heroIndex","inspectedIndex","lhsStr","parseFloat","rhsStr","doesBlockKindConsumeHeroTurn","ibec","goblinAttack","getFrontAttackingWitchIndex","witchAttack","attackingWitchIndex","heroDistance","enemyIndex","enemyKind","cloneBlockExecutionContext","willHeroKillEnemyAtIndexAssumingEnemiesCannotSummon","summon","Summon","Purple","summonerIndex","summonerHealthCost","findIndex","currentSquare","damagedGoblin","damagedWitch","healedGoblin","FailLevel","STAIR_CLIMB_OFFSET_X","SQUARE_WIDTH","prng","prand","inInterEventDelay","hasFailLevelEventBeenEmitted","remainingTime","characterDisplacements","attackCompletionFactor","horizontallyStretchSimpleFunction","damageOverlayAlphas","attackerSquareKind","flashCompletionFactor","hasDamageOverlayAlphaPeaked","InProgress","displayHeroHealingAnimation","errorAlertOpacityFactorFor1SecondAnimations","part1DurationFactor","partCompletionFactor","part2CumulativeFactor","isWitchAttack","isWitchSummon","witchAnimationFrame","rawParticleSystemCompletionFactor","clampedParticleSystemCompletionFactor","timedParticles","spellCastingWitchIndex","spellTargetIndex","emitterStartPosition","emitterEndPosition","emitterFinalStepCount","stepCount","emitterPosition","particleIndex","birthTimeFactor","isExplosion","transformedParticles","particleCompletionFactor","unit","speed","particleGrowthRate","advanceHealthChanges","squareOccupantAlphas","empty","getLevel1InitialState","Green","getLevel2InitialState","Level3","getLevel3InitialState","Level4","getLevel4InitialState","Level5","getLevel5InitialState","Level6","pinkGoblin","getLevel6InitialState","Level7","getLevel7InitialState","getLevel8InitialState","getLevel9InitialState","Level10","witch","getLevel10InitialState","frequencyHertz","round","withoutHash","getPaletteBlockKinds","getStartingCanvasItemsForLevel","maxAttackerIndex","optVso","vso","firstPoint","lastPoint","prevPoint","nextPoint","stretchFactor","point","later","earlier","rect","_rect$rx","_rect$ry","pathData","resources","elem","isWithinButtonWithNonextendedHomePosition","isWithinHomeScreenStartButton","isWithinHomeScreenSettingsButton","getButtonAtPositionAssumingHomeScreen","getButtonAtPositionAssumingSettingsScreen","hypotheticalButton","getButtonAtPositionAssumingConfirmResetToLevelOne","buttonImage","imageX","imageY","isWithinPuzzleScreenLeftButton","isWithinPuzzleScreenMiddleButton","isWithinPuzzleScreenRightButton","nextLevelButtonTextDimensions","nextLevelButtonPadding","victoryButton","isWithinNextLevelButton","getButtonAtPositionAssumingPuzzleScreen","isWithinSettingsScreenLanguageButton","isWithinSettingsScreenCreditsButton","isWithinSettingsScreenResetButton","isWithinSettingsScreenCloseButton","isWithinSettingsScreenSecondaryCloseButton","bboxInNonextendedHomeCoords","MAIN_DIMENSIONS","mainRbox","touchPositionInImageCoords","nondepressedBBox","nondepressedWidth","nondepressedHeight","_tryToGuessPreferredL","langStr","bools","activeBlockAddress","sequenceAddress","flagBlockAsInactiveExcept","getActiveVersionOfBlockKind","getInactiveVersionOfBlockKind","halfDict","_val","targetAddress","subRbox","getRboxAtAddressFromBlock","expressionSpec","NORMALLY_DELETABLE_BLOCK_KINDS_THAT_ARE_UNDELETABLE","originalDef","doesBlockContainNonEmptyLiteral","predicate","subBlockSpec","getSubBlockSpecFromBlockSpecSatisfying","subSeqSpec","characterBBox","heartElements","getCharacterHeartsCanvasElements","orderedHeartMarkImageElements","image","heartIndex","imageSource","witchImage","nums","containsEnemy","enemiesInitiallyBetweenHeroAndStairs","everyInitialEnemyWasGoblin","everyInitialEnemyWasWitch","isFireballAttack","getBlockRecursiveBlockCount","_window$screen$orient","naiveType","orientation","heartMarkDimensions","topRowHeartCount","bottomRowHeartCount","scaledInterHeartMarkHorizontalMargin","bottomRowHeartMarks","topRowHeartMarks","damagedHearts","aBlock","areBlocksEqual","aDropdown","aExpression","bExpression","aSequence","raw","isLocalhost","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","URL","unregister","checkValidServiceWorker","serviceWorkerRegistration","reportWebVitals","decompressJson","errorEvent","rawError","filename","lineno","colno","rejectionEvent","reason"],"sourceRoot":""}