/*! For license information please see main.e61d118a.js.LICENSE.txt */
(()=>{"use strict";var e={5403:(e,t,n)=>{n.d(t,{E_:()=>c,F3:()=>l,Ii:()=>s});const r=(e=>e.CapacitorPlatforms=(e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return n.addPlatform=(e,t)=>{n.platforms.set(e,t)},n.setPlatform=e=>{n.platforms.has(e)&&(n.currentPlatform=n.platforms.get(e))},n})(e))("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});r.addPlatform,r.setPlatform;var o;!function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(o||(o={}));class i extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const a=e=>{var t,n,r,a,s;const l=e.CapacitorCustomPlatform||null,c=e.Capacitor||{},u=c.Plugins=c.Plugins||{},d=e.CapacitorPlatforms,h=(null===(t=null===d||void 0===d?void 0:d.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==l?l.name:(e=>{var t,n;return(null===e||void 0===e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null===e||void 0===e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e)),f=(null===(n=null===d||void 0===d?void 0:d.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==h()),p=(null===(r=null===d||void 0===d?void 0:d.currentPlatform)||void 0===r?void 0:r.isPluginAvailable)||(e=>{const t=g.get(e);return!!(null===t||void 0===t?void 0:t.platforms.has(h()))||!!m(e)}),m=(null===(a=null===d||void 0===d?void 0:d.currentPlatform)||void 0===a?void 0:a.getPluginHeader)||(e=>{var t;return null===(t=c.PluginHeaders)||void 0===t?void 0:t.find((t=>t.name===e))}),g=new Map,v=(null===(s=null===d||void 0===d?void 0:d.currentPlatform)||void 0===s?void 0:s.registerPlugin)||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=g.get(e);if(n)return console.warn('Capacitor plugin "'.concat(e,'" already registered. Cannot register plugins twice.')),n.proxy;const r=h(),a=m(e);let s;const d=n=>{let u;const d=function(){for(var d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];const p=(async()=>(!s&&r in t?s=s="function"===typeof t[r]?await t[r]():t[r]:null!==l&&!s&&"web"in t&&(s=s="function"===typeof t.web?await t.web():t.web),s))().then((t=>{const s=((t,n)=>{var s,l;if(!a){if(t)return null===(l=t[n])||void 0===l?void 0:l.bind(t);throw new i('"'.concat(e,'" plugin is not implemented on ').concat(r),o.Unimplemented)}{const r=null===a||void 0===a?void 0:a.methods.find((e=>n===e.name));if(r)return"promise"===r.rtype?t=>c.nativePromise(e,n.toString(),t):(t,r)=>c.nativeCallback(e,n.toString(),t,r);if(t)return null===(s=t[n])||void 0===s?void 0:s.bind(t)}})(t,n);if(s){const e=s(...h);return u=null===e||void 0===e?void 0:e.remove,e}throw new i('"'.concat(e,".").concat(n,'()" is not implemented on ').concat(r),o.Unimplemented)}));return"addListener"===n&&(p.remove=async()=>u()),p};return d.toString=()=>"".concat(n.toString(),"() { [capacitor code] }"),Object.defineProperty(d,"name",{value:n,writable:!1,configurable:!1}),d},f=d("addListener"),p=d("removeListener"),v=(e,t)=>{const n=f({eventName:e},t),r=async()=>{const r=await n;p({eventName:e,callbackId:r},t)},o=new Promise((e=>n.then((()=>e({remove:r})))));return o.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},o},b=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return a?v:f;case"removeListener":return p;default:return d(t)}}});return u[e]=b,g.set(e,{name:e,proxy:b,platforms:new Set([...Object.keys(t),...a?[r]:[]])}),b};return c.convertFileSrc||(c.convertFileSrc=e=>e),c.getPlatform=h,c.handleError=t=>e.console.error(t),c.isNativePlatform=f,c.isPluginAvailable=p,c.pluginMethodNoop=(e,t,n)=>Promise.reject("".concat(n,' does not have an implementation of "').concat(t,'".')),c.registerPlugin=v,c.Exception=i,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,c.platform=c.getPlatform(),c.isNative=c.isNativePlatform(),c},s=(e=>e.Capacitor=a(e))("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}),l=s.registerPlugin;s.Plugins;class c{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn('Capacitor WebPlugin "'.concat(e.name,'" config object was deprecated in v3 and will be removed in v4.')),this.config=e)}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),n&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const r=this.listeners[e];if(r)r.forEach((e=>e(t)));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not implemented";return new s.Exception(e,o.Unimplemented)}unavailable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not available";return new s.Exception(e,o.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach((t=>{this.notifyListeners(e,t)})))}}const u=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),d=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class h extends c{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach((e=>{if(e.length<=0)return;let[n,r]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=d(n).trim(),r=d(r).trim(),t[n]=r})),t}async setCookie(e){try{const t=u(e.key),n=u(e.value),r="; expires=".concat((e.expires||"").replace("expires=","")),o=(e.path||"/").replace("path=",""),i=null!=e.url&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(t,"=").concat(n||"").concat(r,"; path=").concat(o,"; ").concat(i,";")}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat((new Date).toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}l("CapacitorCookies",{web:()=>new h});const f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e);return Object.keys(e).map((e=>e.toLocaleLowerCase())).reduce(((n,r,o)=>(n[r]=e[t[o]],n)),{})}(e.headers),o=r["content-type"]||"";if("string"===typeof e.data)n.body=e.data;else if(o.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,r]of Object.entries(e.data||{}))t.set(n,r);n.body=t.toString()}else if(o.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach(((e,n)=>{t.append(n,e)}));else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const r=new Headers(n.headers);r.delete("content-type"),n.headers=r}else(o.includes("application/json")||"object"===typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class p extends c{async request(e){const t=f(e,e.webFetchExtra),n=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?Object.entries(e).reduce(((e,n)=>{const[r,o]=n;let i,a;return Array.isArray(o)?(a="",o.forEach((e=>{i=t?encodeURIComponent(e):e,a+="".concat(r,"=").concat(i,"&")})),a.slice(0,-1)):(i=t?encodeURIComponent(o):o,a="".concat(r,"=").concat(i)),"".concat(e,"&").concat(a)}),"").substr(1):null}(e.params,e.shouldEncodeUrlParams),r=n?"".concat(e.url,"?").concat(n):e.url,o=await fetch(r,t),i=o.headers.get("content-type")||"";let a,s,{responseType:l="text"}=o.ok?e:{};switch(i.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":s=await o.blob(),a=await(async e=>new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},r.onerror=e=>n(e),r.readAsDataURL(e)})))(s);break;case"json":a=await o.json();break;default:a=await o.text()}const c={};return o.headers.forEach(((e,t)=>{c[t]=e})),{data:a,headers:c,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}l("CapacitorHttp",{web:()=>new p})},2730:(e,t,n)=>{var r=n(5043),o=n(8853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var O,N=Object.assign;function z(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var F=!1;function H(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function U(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 1:return e=H(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case x:return"Portal";case E:return"Profiler";case L:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case B:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function j(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ie(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Se=null,Le=null;function Ee(e){if(e=ko(e)){if("function"!==typeof xe)throw Error(i(280));var t=e.stateNode;t&&(t=xo(t),xe(e.stateNode,e.type,t))}}function Ce(e){Se?Le?Le.push(e):Le=[e]:Se=e}function Te(){if(Se){var e=Se,t=Le;if(Le=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Be(e,t){return e(t)}function Ae(){}var Pe=!1;function Ie(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Be(e,t,n)}finally{Pe=!1,(null!==Se||null!==Le)&&(Ae(),Te())}}function _e(e,t){var n=e.stateNode;if(null===n)return null;var r=xo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var De=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){De=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){De=!1}function Re(e,t,n,r,o,i,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Ne=null,ze=!1,Fe=null,He={onError:function(e){Oe=!0,Ne=e}};function Ue(e,t,n,r,o,i,a,s,l){Oe=!1,Ne=null,Re.apply(He,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(We(e)!==e)throw Error(i(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return qe(o),e;if(a===r)return qe(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=o.unstable_scheduleCallback,Je=o.unstable_cancelCallback,Ye=o.unstable_shouldYield,Qe=o.unstable_requestPaint,Xe=o.unstable_now,Ze=o.unstable_getCurrentPriorityLevel,$e=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=dt(s):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~o)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var yt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,St,Lt,Et,Ct=!1,Tt=[],Bt=null,At=null,Pt=null,It=new Map,_t=new Map,Dt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Bt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_t.delete(t.pointerId)}}function Ot(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=ko(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Nt(e){var t=yo(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=je(n)))return e.blockedOn=t,void Et(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ko(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ke=r,n.target.dispatchEvent(r),ke=null,t.shift()}return!0}function Ft(e,t,n){zt(e)&&n.delete(t)}function Ht(){Ct=!1,null!==Bt&&zt(Bt)&&(Bt=null),null!==At&&zt(At)&&(At=null),null!==Pt&&zt(Pt)&&(Pt=null),It.forEach(Ft),_t.forEach(Ft)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ht)))}function Wt(e){function t(t){return Ut(t,e)}if(0<Tt.length){Ut(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Bt&&Ut(Bt,e),null!==At&&Ut(At,e),null!==Pt&&Ut(Pt,e),It.forEach(t),_t.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Nt(n),null===n.blockedOn&&Dt.shift()}var jt=k.ReactCurrentBatchConfig,qt=!0;function Vt(e,t,n,r){var o=yt,i=jt.transition;jt.transition=null;try{yt=1,Gt(e,t,n,r)}finally{yt=o,jt.transition=i}}function Kt(e,t,n,r){var o=yt,i=jt.transition;jt.transition=null;try{yt=4,Gt(e,t,n,r)}finally{yt=o,jt.transition=i}}function Gt(e,t,n,r){if(qt){var o=Yt(e,t,n,r);if(null===o)qr(e,t,r,Jt,n),Rt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Bt=Ot(Bt,e,t,n,r,o),!0;case"dragenter":return At=Ot(At,e,t,n,r,o),!0;case"mouseover":return Pt=Ot(Pt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return It.set(i,Ot(It.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,_t.set(i,Ot(_t.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==o;){var i=ko(o);if(null!==i&&wt(i),null===(i=Yt(e,t,n,r))&&qr(e,t,r,Jt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Jt=null;function Yt(e,t,n,r){if(Jt=null,null!==(e=yo(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=je(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,o="value"in Xt?Xt.value:Xt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return $t=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=N({},cn,{view:0,detail:0}),hn=on(dn),fn=N({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),mn=on(N({},fn,{dataTransfer:0})),gn=on(N({},dn,{relatedTarget:0})),vn=on(N({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=N({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=on(bn),kn=on(N({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ln(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return Ln}var Cn=N({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=on(Cn),Bn=on(N({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(N({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=on(N({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=N({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_n=on(In),Dn=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var On=u&&"TextEvent"in window&&!Rn,Nn=u&&(!Mn||Rn&&8<Rn&&11>=Rn),zn=String.fromCharCode(32),Fn=!1;function Hn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function Vn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Jn(e){zr(e,0)}function Yn(e){if(G(wo(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Zn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Vn(t,Gn,e,we(e)),Ie(Jn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ir(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=ur(n,i);var a=ur(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,br=null,yr=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==gr||gr!==J(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Kr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Lr={};function Er(e){if(Sr[e])return Sr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Lr)return Sr[e]=n[t];return e}u&&(Lr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Cr=Er("animationend"),Tr=Er("animationiteration"),Br=Er("animationstart"),Ar=Er("transitionend"),Pr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){Pr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Ir.length;Dr++){var Mr=Ir[Dr];_r(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}_r(Cr,"onAnimationEnd"),_r(Tr,"onAnimationIteration"),_r(Br,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Nr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,s,l,c){if(Ue.apply(this,arguments),Oe){if(!Oe)throw Error(i(198));var u=Ne;Oe=!1,Ne=null,ze||(ze=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;Nr(o,s,c),i=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;Nr(o,s,c),i=l}}}if(ze)throw e=Fe,ze=!1,Fe=null,e}function Fr(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(jr(t,e,2,!1),n.add(r))}function Hr(e,t,n){var r=0;t&&(r|=4),jr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Ur]){e[Ur]=!0,a.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Hr(t,!1,e),Hr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Hr("selectionchange",!1,t))}}function jr(e,t,n,r){switch(Qt(t)){case 1:var o=Vt;break;case 4:o=Kt;break;default:o=Gt}n=o.bind(null,t,n,e),o=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=yo(s)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}s=s.parentNode}}r=r.return}Ie((function(){var r=i,o=we(n),a=[];e:{var s=Pr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Cr:case Tr:case Br:l=vn;break;case Ar:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=_n;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Bn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=_e(p,h))&&u.push(Vr(p,m,f)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,o),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===ke||!(c=n.relatedTarget||n.fromElement)||!yo(c)&&!c[mo])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yo(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Bn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:wo(l),f=null==c?s:wo(c),(s=new u(m,p+"leave",l,n,o)).target=d,s.relatedTarget=f,m=null,yo(o)===r&&((u=new u(h,p+"enter",c,n,o)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Jr(a,s,l,u,!1),null!==c&&null!==d&&Jr(a,d,c,u,!0)}if("select"===(l=(s=r?wo(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Qn;else if(qn(s))if(Xn)g=ar;else{g=or;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ir);switch(g&&(g=g(e,r))?Vn(a,g,n,o):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?wo(r):window,e){case"focusin":(qn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,br=null);break;case"focusout":br=vr=gr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,kr(a,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":kr(a,n,o)}var b;if(Mn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Wn?Hn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Nn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Wn&&(b=en()):(Zt="value"in(Xt=o)?Xt.value:Xt.textContent,Wn=!0)),0<(v=Kr(r,y)).length&&(y=new kn(y,e,null,n,o),a.push({event:y,listeners:v}),b?y.data=b:null!==(b=Un(n))&&(y.data=b))),(b=On?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,zn);case"textInput":return(e=t.data)===zn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Mn&&Hn(e,t)?(e=en(),$t=Zt=Xt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(o=new kn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=b))}zr(a,t)}))}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=_e(e,n))&&r.unshift(Vr(e,i,o)),null!=(i=_e(e,t))&&r.push(Vr(e,i,o))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Jr(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=_e(n,i))&&a.unshift(Vr(n,l,s)):o||null!=(l=_e(n,i))&&a.push(Vr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Qr,"")}function Zr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(i(425))}function $r(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout((function(){throw e}))}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Wt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),fo="__reactFiber$"+ho,po="__reactProps$"+ho,mo="__reactContainer$"+ho,go="__reactEvents$"+ho,vo="__reactListeners$"+ho,bo="__reactHandles$"+ho;function yo(e){var t=e[fo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[fo]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[fo])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function ko(e){return!(e=e[fo]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function xo(e){return e[po]||null}var So=[],Lo=-1;function Eo(e){return{current:e}}function Co(e){0>Lo||(e.current=So[Lo],So[Lo]=null,Lo--)}function To(e,t){Lo++,So[Lo]=e.current,e.current=t}var Bo={},Ao=Eo(Bo),Po=Eo(!1),Io=Bo;function _o(e,t){var n=e.type.contextTypes;if(!n)return Bo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Do(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mo(){Co(Po),Co(Ao)}function Ro(e,t,n){if(Ao.current!==Bo)throw Error(i(168));To(Ao,t),To(Po,n)}function Oo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,j(e)||"Unknown",o));return N({},n,r)}function No(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bo,Io=Ao.current,To(Ao,e),To(Po,Po.current),!0}function zo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Oo(e,t,Io),r.__reactInternalMemoizedMergedChildContext=e,Co(Po),Co(Ao),To(Ao,e)):Co(Po),To(Po,n)}var Fo=null,Ho=!1,Uo=!1;function Wo(e){null===Fo?Fo=[e]:Fo.push(e)}function jo(){if(!Uo&&null!==Fo){Uo=!0;var e=0,t=yt;try{var n=Fo;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fo=null,Ho=!1}catch(o){throw null!==Fo&&(Fo=Fo.slice(e+1)),Ge($e,jo),o}finally{yt=t,Uo=!1}}return null}var qo=[],Vo=0,Ko=null,Go=0,Jo=[],Yo=0,Qo=null,Xo=1,Zo="";function $o(e,t){qo[Vo++]=Go,qo[Vo++]=Ko,Ko=e,Go=t}function ei(e,t,n){Jo[Yo++]=Xo,Jo[Yo++]=Zo,Jo[Yo++]=Qo,Qo=e;var r=Xo;e=Zo;var o=32-at(r)-1;r&=~(1<<o),n+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Xo=1<<32-at(t)+o|n<<o|r,Zo=i+e}else Xo=1<<i|n<<o|r,Zo=e}function ti(e){null!==e.return&&($o(e,1),ei(e,1,0))}function ni(e){for(;e===Ko;)Ko=qo[--Vo],qo[Vo]=null,Go=qo[--Vo],qo[Vo]=null;for(;e===Qo;)Qo=Jo[--Yo],Jo[Yo]=null,Zo=Jo[--Yo],Jo[Yo]=null,Xo=Jo[--Yo],Jo[Yo]=null}var ri=null,oi=null,ii=!1,ai=null;function si(e,t){var n=_c(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function li(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qo?{id:Xo,overflow:Zo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=_c(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var n=t;if(!li(e,t)){if(ci(e))throw Error(i(418));t=co(n.nextSibling);var r=ri;t&&li(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function hi(e){if(e!==ri)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw fi(),Error(i(418));for(;t;)si(e,t),t=co(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?co(e.stateNode.nextSibling):null;return!0}function fi(){for(var e=oi;e;)e=co(e.nextSibling)}function pi(){oi=ri=null,ii=!1}function mi(e){null===ai?ai=[e]:ai.push(e)}var gi=k.ReactCurrentBatchConfig;function vi(e,t){if(e&&e.defaultProps){for(var n in t=N({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var bi=Eo(null),yi=null,ki=null,wi=null;function xi(){wi=ki=yi=null}function Si(e){var t=bi.current;Co(bi),e._currentValue=t}function Li(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t){yi=e,wi=ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ks=!0),e.firstContext=null)}function Ci(e){var t=e._currentValue;if(wi!==e)if(e={context:e,memoizedValue:t,next:null},null===ki){if(null===yi)throw Error(i(308));ki=e,yi.dependencies={lanes:0,firstContext:e}}else ki=ki.next=e;return t}var Ti=null;function Bi(e){null===Ti?Ti=[e]:Ti.push(e)}function Ai(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Bi(t)):(n.next=o.next,o.next=n),t.interleaved=n,Pi(e,r)}function Pi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ii=!1;function _i(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Di(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ri(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Pi(e,n)}return null===(o=r.interleaved)?(t.next=t,Bi(r)):(t.next=o.next,o.next=t),r.interleaved=t,Pi(e,n)}function Oi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Ni(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zi(e,t,n,r){var o=e.updateQueue;Ii=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(a=0,u=c=l=null,s=i;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=N({},d,h);break e;case 2:Ii=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Nl|=a,e.lanes=a,e.memoizedState=d}}function Fi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var Hi=(new r.Component).refs;function Ui(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:N({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Wi={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),o=nc(e),i=Mi(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ri(e,i,o))&&(rc(t,e,o,r),Oi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),o=nc(e),i=Mi(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ri(e,i,o))&&(rc(t,e,o,r),Oi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),o=Mi(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Ri(e,o,r))&&(rc(t,e,r,n),Oi(t,e,r))}};function ji(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(o,i))}function qi(e,t,n){var r=!1,o=Bo,i=t.contextType;return"object"===typeof i&&null!==i?i=Ci(i):(o=Do(t)?Io:Ao.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?_o(e,o):Bo),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Wi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function Vi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Wi.enqueueReplaceState(t,t.state,null)}function Ki(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=Hi,_i(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Ci(i):(i=Do(t)?Io:Ao.current,o.context=_o(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(Ui(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&Wi.enqueueReplaceState(o,o.state,null),zi(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function Gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;t===Hi&&(t=o.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Ji(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yi(e){return(0,e._init)(e._payload)}function Qi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===_&&Yi(i)===t.type)?((r=o(t,n.props)).ref=Gi(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=Gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=Gi(e,null,t),n.return=e,n;case x:return(t=Fc(t,e.mode,n)).return=e,t;case _:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Oc(t,e.mode,n,null)).return=e,t;Ji(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?c(e,t,n,r):null;case x:return n.key===o?u(e,t,n,r):null;case _:return f(e,t,(o=n._init)(n._payload),r)}if(te(n)||R(n))return null!==o?null:d(e,t,n,r,null);Ji(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case _:return p(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||R(r))return d(t,e=e.get(n)||null,r,o,null);Ji(t,r)}return null}function m(o,i,s,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(o,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(o,d),i=a(v,i,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===s.length)return n(o,d),ii&&$o(o,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(o,s[m],l))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return ii&&$o(o,m),c}for(d=r(o,d);m<s.length;m++)null!==(g=p(d,o,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(o,e)})),ii&&$o(o,m),c}function g(o,s,l,c){var u=R(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=s,g=s=0,v=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=f(o,m,b.value,c);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(o,m),s=a(y,s,g),null===d?u=y:d.sibling=y,d=y,m=v}if(b.done)return n(o,m),ii&&$o(o,g),u;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=h(o,b.value,c))&&(s=a(b,s,g),null===d?u=b:d.sibling=b,d=b);return ii&&$o(o,g),u}for(m=r(o,m);!b.done;g++,b=l.next())null!==(b=p(m,o,g,b.value,c))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),s=a(b,s,g),null===d?u=b:d.sibling=b,d=b);return e&&m.forEach((function(e){return t(o,e)})),ii&&$o(o,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(i=o(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===_&&Yi(c)===u.type){n(r,u.sibling),(i=o(u,a.props)).ref=Gi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((i=Oc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Rc(a.type,a.key,a.props,null,r.mode,l)).ref=Gi(r,i,a),l.return=r,r=l)}return s(r);case x:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Fc(a,r.mode,l)).return=r,r=i}return s(r);case _:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(R(a))return g(r,i,a,l);Ji(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=zc(a,r.mode,l)).return=r,r=i),s(r)):n(r,i)}}var Xi=Qi(!0),Zi=Qi(!1),$i={},ea=Eo($i),ta=Eo($i),na=Eo($i);function ra(e){if(e===$i)throw Error(i(174));return e}function oa(e,t){switch(To(na,t),To(ta,e),To(ea,$i),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Co(ea),To(ea,t)}function ia(){Co(ea),Co(ta),Co(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=le(t,e.type);t!==n&&(To(ta,e),To(ea,n))}function sa(e){ta.current===e&&(Co(ea),Co(ta))}var la=Eo(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function da(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var ha=k.ReactCurrentDispatcher,fa=k.ReactCurrentBatchConfig,pa=0,ma=null,ga=null,va=null,ba=!1,ya=!1,ka=0,wa=0;function xa(){throw Error(i(321))}function Sa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function La(e,t,n,r,o,a){if(pa=a,ma=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=null===e||null===e.memoizedState?ss:ls,e=n(r,o),ya){a=0;do{if(ya=!1,ka=0,25<=a)throw Error(i(301));a+=1,va=ga=null,t.updateQueue=null,ha.current=cs,e=n(r,o)}while(ya)}if(ha.current=as,t=null!==ga&&null!==ga.next,pa=0,va=ga=ma=null,ba=!1,t)throw Error(i(300));return e}function Ea(){var e=0!==ka;return ka=0,e}function Ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===va?ma.memoizedState=va=e:va=va.next=e,va}function Ta(){if(null===ga){var e=ma.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===va?ma.memoizedState:va.next;if(null!==t)va=t,ga=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===va?ma.memoizedState=va=e:va=va.next=e}return va}function Ba(e,t){return"function"===typeof t?t(e):t}function Aa(e){var t=Ta(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ga,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((pa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,ma.lanes|=d,Nl|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(ks=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,ma.lanes|=a,Nl|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Pa(e){var t=Ta(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);sr(a,t.memoizedState)||(ks=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ia(){}function _a(e,t){var n=ma,r=Ta(),o=t(),a=!sr(r.memoizedState,o);if(a&&(r.memoizedState=o,ks=!0),r=r.queue,qa(Ra.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==va&&1&va.memoizedState.tag){if(n.flags|=2048,Fa(9,Ma.bind(null,n,r,o,t),void 0,null),null===Pl)throw Error(i(349));0!==(30&pa)||Da(n,t,o)}return o}function Da(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ma(e,t,n,r){t.value=n,t.getSnapshot=r,Oa(t)&&Na(e)}function Ra(e,t,n){return n((function(){Oa(t)&&Na(e)}))}function Oa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Na(e){var t=Pi(e,1);null!==t&&rc(t,e,1,-1)}function za(e){var t=Ca();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,ma,e),[t.memoizedState,e]}function Fa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ha(){return Ta().memoizedState}function Ua(e,t,n,r){var o=Ca();ma.flags|=e,o.memoizedState=Fa(1|t,n,void 0,void 0===r?null:r)}function Wa(e,t,n,r){var o=Ta();r=void 0===r?null:r;var i=void 0;if(null!==ga){var a=ga.memoizedState;if(i=a.destroy,null!==r&&Sa(r,a.deps))return void(o.memoizedState=Fa(t,n,i,r))}ma.flags|=e,o.memoizedState=Fa(1|t,n,i,r)}function ja(e,t){return Ua(8390656,8,e,t)}function qa(e,t){return Wa(2048,8,e,t)}function Va(e,t){return Wa(4,2,e,t)}function Ka(e,t){return Wa(4,4,e,t)}function Ga(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ja(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Wa(4,4,Ga.bind(null,t,e),n)}function Ya(){}function Qa(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xa(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Za(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,ks=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),ma.lanes|=n,Nl|=n,e.baseState=!0),t)}function $a(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=fa.transition;fa.transition={};try{e(!1),t()}finally{yt=n,fa.transition=r}}function es(){return Ta().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))os(t,n);else if(null!==(n=Ai(e,t,n,r))){rc(n,e,r,tc()),is(n,t,r)}}function ns(e,t,n){var r=nc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))os(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(o.next=o,Bi(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=Ai(e,t,o,r))&&(rc(n,e,r,o=tc()),is(n,t,r))}}function rs(e){var t=e.alternate;return e===ma||null!==t&&t===ma}function os(e,t){ya=ba=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function is(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var as={readContext:Ci,useCallback:xa,useContext:xa,useEffect:xa,useImperativeHandle:xa,useInsertionEffect:xa,useLayoutEffect:xa,useMemo:xa,useReducer:xa,useRef:xa,useState:xa,useDebugValue:xa,useDeferredValue:xa,useTransition:xa,useMutableSource:xa,useSyncExternalStore:xa,useId:xa,unstable_isNewReconciler:!1},ss={readContext:Ci,useCallback:function(e,t){return Ca().memoizedState=[e,void 0===t?null:t],e},useContext:Ci,useEffect:ja,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4194308,4,Ga.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ua(4,2,e,t)},useMemo:function(e,t){var n=Ca();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ca();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,ma,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ca().memoizedState=e},useState:za,useDebugValue:Ya,useDeferredValue:function(e){return Ca().memoizedState=e},useTransition:function(){var e=za(!1),t=e[0];return e=$a.bind(null,e[1]),Ca().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ma,o=Ca();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Pl)throw Error(i(349));0!==(30&pa)||Da(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,ja(Ra.bind(null,r,a,e),[e]),r.flags|=2048,Fa(9,Ma.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ca(),t=Pl.identifierPrefix;if(ii){var n=Zo;t=":"+t+"R"+(n=(Xo&~(1<<32-at(Xo)-1)).toString(32)+n),0<(n=ka++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Ci,useCallback:Qa,useContext:Ci,useEffect:qa,useImperativeHandle:Ja,useInsertionEffect:Va,useLayoutEffect:Ka,useMemo:Xa,useReducer:Aa,useRef:Ha,useState:function(){return Aa(Ba)},useDebugValue:Ya,useDeferredValue:function(e){return Za(Ta(),ga.memoizedState,e)},useTransition:function(){return[Aa(Ba)[0],Ta().memoizedState]},useMutableSource:Ia,useSyncExternalStore:_a,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ci,useCallback:Qa,useContext:Ci,useEffect:qa,useImperativeHandle:Ja,useInsertionEffect:Va,useLayoutEffect:Ka,useMemo:Xa,useReducer:Pa,useRef:Ha,useState:function(){return Pa(Ba)},useDebugValue:Ya,useDeferredValue:function(e){var t=Ta();return null===ga?t.memoizedState=e:Za(t,ga.memoizedState,e)},useTransition:function(){return[Pa(Ba)[0],Ta().memoizedState]},useMutableSource:Ia,useSyncExternalStore:_a,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Mi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,Kl=r),hs(0,t)},n}function ms(e,t,n){(n=Mi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){hs(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bs(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Mi(-1,1)).tag=2,Ri(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var ys=k.ReactCurrentOwner,ks=!1;function ws(e,t,n,r){t.child=null===e?Zi(t,null,n,r):Xi(t,e.child,n,r)}function xs(e,t,n,r,o){n=n.render;var i=t.ref;return Ei(t,o),r=La(e,t,n,r,i,o),n=Ea(),null===e||ks?(ii&&n&&ti(t),t.flags|=1,ws(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Vs(e,t,o))}function Ss(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Dc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ls(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Vs(e,t,o)}return t.flags|=1,(e=Mc(i,r)).ref=t.ref,e.return=t,t.child=e}function Ls(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(ks=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Vs(e,t,o);0!==(131072&e.flags)&&(ks=!0)}}return Ts(e,t,n,r,o)}function Es(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},To(Ml,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,To(Ml,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,To(Ml,Dl),Dl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,To(Ml,Dl),Dl|=r;return ws(e,t,o,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,o){var i=Do(n)?Io:Ao.current;return i=_o(t,i),Ei(t,o),n=La(e,t,n,r,i,o),r=Ea(),null===e||ks?(ii&&r&&ti(t),t.flags|=1,ws(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Vs(e,t,o))}function Bs(e,t,n,r,o){if(Do(n)){var i=!0;No(t)}else i=!1;if(Ei(t,o),null===t.stateNode)qs(e,t),qi(t,n,r),Ki(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ci(c):c=_o(t,c=Do(n)?Io:Ao.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&Vi(t,a,r,c),Ii=!1;var h=t.memoizedState;a.state=h,zi(t,r,a,o),l=t.memoizedState,s!==r||h!==l||Po.current||Ii?("function"===typeof u&&(Ui(t,n,u,r),l=t.memoizedState),(s=Ii||ji(t,n,s,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Di(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:vi(t.type,s),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ci(l):l=_o(t,l=Do(n)?Io:Ao.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&Vi(t,a,r,l),Ii=!1,h=t.memoizedState,a.state=h,zi(t,r,a,o);var p=t.memoizedState;s!==d||h!==p||Po.current||Ii?("function"===typeof f&&(Ui(t,n,f,r),p=t.memoizedState),(c=Ii||ji(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,i,o)}function As(e,t,n,r,o,i){Cs(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&zo(t,n,!1),Vs(e,t,i);r=t.stateNode,ys.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Xi(t,e.child,null,i),t.child=Xi(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,o&&zo(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Ro(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ro(0,t.context,!1),oa(e,t.containerInfo)}function Is(e,t,n,r,o){return pi(),mi(o),t.flags|=256,ws(e,t,n,r),t.child}var _s,Ds,Ms,Rs,Os={dehydrated:null,treeContext:null,retryLane:0};function Ns(e){return{baseLanes:e,cachePool:null,transitions:null}}function zs(e,t,n){var r,o=t.pendingProps,a=la.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),To(la,1&a),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,s?(o=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Nc(l,o,0,null),e=Oc(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ns(n),t.memoizedState=Os,e):Fs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,o,a,s){if(n)return 256&t.flags?(t.flags&=-257,Hs(e,t,s,r=ds(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Nc({mode:"visible",children:r.children},o,0,null),(a=Oc(a,o,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Xi(t,e.child,null,s),t.child.memoizedState=Ns(s),t.memoizedState=Os,a);if(0===(1&t.mode))return Hs(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,Hs(e,t,s,r=ds(a=Error(i(419)),r,void 0))}if(l=0!==(s&e.childLanes),ks||l){if(null!==(r=Pl)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Pi(e,o),rc(r,e,o,-1))}return gc(),Hs(e,t,s,r=ds(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Bc.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=co(o.nextSibling),ri=t,ii=!0,ai=null,null!==e&&(Jo[Yo++]=Xo,Jo[Yo++]=Zo,Jo[Yo++]=Qo,Xo=e.id,Zo=e.overflow,Qo=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,l,o,r,a,n);if(s){s=o.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Mc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Mc(r,s):(s=Oc(s,l,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,l=null===(l=e.child.memoizedState)?Ns(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Os,o}return e=(s=e.child).sibling,o=Mc(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Fs(e,t){return(t=Nc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Hs(e,t,n,r){return null!==r&&mi(r),Xi(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Li(e.return,t,n)}function Ws(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function js(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=la.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(To(la,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ws(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ca(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ws(t,!0,n,null,i);break;case"together":Ws(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Js(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Do(t.type)&&Mo(),Gs(t),null;case 3:return r=t.stateNode,ia(),Co(Po),Co(Ao),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(sc(ai),ai=null))),Ds(e,t),Gs(t),null;case 5:sa(t);var o=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Ms(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Gs(t),null}if(e=ra(ea.current),hi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fo]=t,r[po]=a,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(o=0;o<Rr.length;o++)Fr(Rr[o],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Q(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":oe(r,a),Fr("invalid",r)}for(var l in be(n,a),o=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),o=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":K(r),$(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=$r)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fo]=t,e[po]=r,_s(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),o=r;break;case"iframe":case"object":case"embed":Fr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Rr.length;o++)Fr(Rr[o],e);o=r;break;case"source":Fr("error",e),o=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),o=r;break;case"details":Fr("toggle",e),o=r;break;case"input":Q(e,r),o=Y(e,r),Fr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=N({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Fr("invalid",e)}for(a in be(n,o),c=o)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fr("scroll",e):null!=u&&y(e,a,u,l))}switch(n){case"input":K(e),$(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Rs(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=ra(na.current),ra(ea.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[fo]=t,(a=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fo]=t,t.stateNode=r}return Gs(t),null;case 13:if(Co(la),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))fi(),pi(),t.flags|=98560,a=!1;else if(a=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[fo]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),a=!1}else null!==ai&&(sc(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&la.current)?0===Rl&&(Rl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return ia(),Ds(e,t),null===e&&Wr(t.stateNode.containerInfo),Gs(t),null;case 10:return Si(t.type._context),Gs(t),null;case 19:if(Co(la),null===(a=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ks(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ca(e))){for(t.flags|=128,Ks(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return To(la,1&la.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>jl&&(t.flags|=128,r=!0,Ks(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ii)return Gs(t),null}else 2*Xe()-a.renderingStartTime>jl&&1073741824!==n&&(t.flags|=128,r=!0,Ks(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=la.current,To(la,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ys(e,t){switch(ni(t),t.tag){case 1:return Do(t.type)&&Mo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ia(),Co(Po),Co(Ao),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Co(la),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Co(la),null;case 4:return ia(),null;case 10:return Si(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}_s=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},Ms=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ra(ea.current);var i,a=null;switch(n){case"input":o=Y(e,o),r=Y(e,r),a=[];break;case"select":o=N({},o,{value:void 0}),r=N({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in be(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Rs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qs=!1,Xs=!1,Zs="function"===typeof WeakSet?WeakSet:Set,$s=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&tl(t,n,i)}o=o.next}while(o!==r)}}function ol(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fo],delete t[po],delete t[go],delete t[vo],delete t[bo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Xs||el(n,t);case 6:var r=dl,o=hl;dl=null,fl(e,t,n),hl=o,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),Wt(e)):lo(dl,n.stateNode));break;case 4:r=dl,o=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=o;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&tl(n,t,a),o=o.next}while(o!==r)}fl(e,t,n);break;case 1:if(!Xs&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,fl(e,t,n),Xs=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zs),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(i(160));pl(a,s,o),dl=null,hl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(u){Ec(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),bl(e),4&r){try{rl(3,e,e.return),ol(3,e)}catch(g){Ec(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:gl(t,e),bl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),bl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(o,a),ye(l,s);var u=ye(l,a);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ge(o,h):"dangerouslySetInnerHTML"===d?de(o,h):"children"===d?he(o,h):y(o,d,h,u)}switch(l){case"input":Z(o,a);break;case"textarea":ie(o,a);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(o,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[po]=a}catch(g){Ec(e,e.return,g)}}break;case 6:if(gl(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(g){Ec(e,e.return,g)}}break;case 3:if(gl(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:gl(t,e),bl(e);break;case 13:gl(t,e),bl(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Wl=Xe())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(u=Xs)||d,gl(t,e),Xs=u):gl(t,e),bl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for($s=e,d=e.child;null!==d;){for(h=$s=d;null!==$s;){switch(p=(f=$s).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,$s=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,u?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Ec(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),bl(e),4&r&&ml(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(he(o,""),r.flags&=-33),ul(e,ll(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(i(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){$s=e,kl(e,t,n)}function kl(e,t,n){for(var r=0!==(1&e.mode);null!==$s;){var o=$s,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Qs;if(!a){var s=o.alternate,l=null!==s&&null!==s.memoizedState||Xs;s=Qs;var c=Xs;if(Qs=a,(Xs=l)&&!c)for($s=o;null!==$s;)l=(a=$s).child,22===a.tag&&null!==a.memoizedState?Sl(o):null!==l?(l.return=a,$s=l):Sl(o);for(;null!==i;)$s=i,kl(i,t,n),i=i.sibling;$s=o,Qs=s,Xs=c}wl(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,$s=i):wl(e)}}function wl(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||ol(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:vi(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Fi(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fi(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(i(163))}Xs||512&t.flags&&il(t)}catch(f){Ec(t,t.return,f)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function xl(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function Sl(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ol(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(l){Ec(t,o,l)}}var i=t.return;try{il(t)}catch(l){Ec(t,i,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Ec(t,a,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var Ll,El=Math.ceil,Cl=k.ReactCurrentDispatcher,Tl=k.ReactCurrentOwner,Bl=k.ReactCurrentBatchConfig,Al=0,Pl=null,Il=null,_l=0,Dl=0,Ml=Eo(0),Rl=0,Ol=null,Nl=0,zl=0,Fl=0,Hl=null,Ul=null,Wl=0,jl=1/0,ql=null,Vl=!1,Kl=null,Gl=null,Jl=!1,Yl=null,Ql=0,Xl=0,Zl=null,$l=-1,ec=0;function tc(){return 0!==(6&Al)?Xe():-1!==$l?$l:$l=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==_l?_l&-_l:null!==gi.transition?(0===ec&&(ec=mt()),ec):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function rc(e,t,n,r){if(50<Xl)throw Xl=0,Zl=null,Error(i(185));vt(e,n,r),0!==(2&Al)&&e===Pl||(e===Pl&&(0===(2&Al)&&(zl|=n),4===Rl&&lc(e,_l)),oc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(jl=Xe()+500,Ho&&jo()))}function oc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,l=o[a];-1===l?0!==(s&n)&&0===(s&r)||(o[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===Pl?_l:0);if(0===r)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){Ho=!0,Wo(e)}(cc.bind(null,e)):Wo(cc.bind(null,e)),ao((function(){0===(6&Al)&&jo()})),n=null;else{switch(kt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if($l=-1,ec=0,0!==(6&Al))throw Error(i(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=ht(e,e===Pl?_l:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var o=Al;Al|=2;var a=mc();for(Pl===e&&_l===t||(ql=null,jl=Xe()+500,fc(e,t));;)try{yc();break}catch(l){pc(e,l)}xi(),Cl.current=a,Al=o,null!==Il?t=0:(Pl=null,_l=0,t=Rl)}if(0!==t){if(2===t&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t)throw n=Ol,fc(e,0),lc(e,r),oc(e,Xe()),n;if(6===t)lc(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!sr(i(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=vc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ac(e,a))),1===t))throw n=Ol,fc(e,0),lc(e,r),oc(e,Xe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:xc(e,Ul,ql);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Wl+500-Xe())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(xc.bind(null,e,Ul,ql),t);break}xc(e,Ul,ql);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>o&&(o=s),r&=~a}if(r=o,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ro(xc.bind(null,e,Ul,ql),r);break}xc(e,Ul,ql);break;default:throw Error(i(329))}}}return oc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Hl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Ul,Ul=n,null!==t&&sc(t)),e}function sc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lc(e,t){for(t&=~Fl,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Al))throw Error(i(327));Sc();var t=ht(e,0);if(0===(1&t))return oc(e,Xe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ol,fc(e,0),lc(e,t),oc(e,Xe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ul,ql),oc(e,Xe()),null}function uc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(jl=Xe()+500,Ho&&jo())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&Sc();var t=Al;Al|=1;var n=Bl.transition,r=yt;try{if(Bl.transition=null,yt=1,e)return e()}finally{yt=r,Bl.transition=n,0===(6&(Al=t))&&jo()}}function hc(){Dl=Ml.current,Co(Ml)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Mo();break;case 3:ia(),Co(Po),Co(Ao),da();break;case 5:sa(r);break;case 4:ia();break;case 13:case 19:Co(la);break;case 10:Si(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Pl=e,Il=e=Mc(e.current,null),_l=Dl=t,Rl=0,Ol=null,Fl=zl=Nl=0,Ul=Hl=null,null!==Ti){for(t=0;t<Ti.length;t++)if(null!==(r=(n=Ti[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}Ti=null}return e}function pc(e,t){for(;;){var n=Il;try{if(xi(),ha.current=as,ba){for(var r=ma.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ba=!1}if(pa=0,va=ga=ma=null,ya=!1,ka=0,Tl.current=null,null===n||null===n.return){Rl=1,Ol=t,Il=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=_l,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=vs(s);if(null!==p){p.flags&=-257,bs(p,s,l,0,t),1&p.mode&&gs(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){gs(a,u,t),gc();break e}c=Error(i(426))}else if(ii&&1&l.mode){var v=vs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),bs(v,s,l,0,t),mi(us(c,l));break e}}a=c=us(c,l),4!==Rl&&(Rl=2),null===Hl?Hl=[a]:Hl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ni(a,ps(0,c,t));break e;case 1:l=c;var b=a.type,y=a.stateNode;if(0===(128&a.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Gl||!Gl.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t,Ni(a,ms(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(k){t=k,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function mc(){var e=Cl.current;return Cl.current=as,null===e?as:e}function gc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Pl||0===(268435455&Nl)&&0===(268435455&zl)||lc(Pl,_l)}function vc(e,t){var n=Al;Al|=2;var r=mc();for(Pl===e&&_l===t||(ql=null,fc(e,t));;)try{bc();break}catch(o){pc(e,o)}if(xi(),Al=n,Cl.current=r,null!==Il)throw Error(i(261));return Pl=null,_l=0,Rl}function bc(){for(;null!==Il;)kc(Il)}function yc(){for(;null!==Il&&!Ye();)kc(Il)}function kc(e){var t=Ll(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?wc(e):Il=t,Tl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Js(n,t,Dl)))return void(Il=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Rl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Rl&&(Rl=5)}function xc(e,t,n){var r=yt,o=Bl.transition;try{Bl.transition=null,yt=1,function(e,t,n,r){do{Sc()}while(null!==Yl);if(0!==(6&Al))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===Pl&&(Il=Pl=null,_l=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Pc(tt,(function(){return Sc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Bl.transition,Bl.transition=null;var s=yt;yt=1;var l=Al;Al|=4,Tl.current=null,function(e,t){if(eo=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==o&&3!==h.nodeType||(l=s+o),h!==a||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===o&&(l=s),f===a&&++d===r&&(c=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},qt=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:vi(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(i(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}m=nl,nl=!1}(e,n),vl(n,e),pr(to),qt=!!eo,to=eo=null,e.current=n,yl(n,e,o),Qe(),Al=l,yt=s,Bl.transition=a}else e.current=n;if(Jl&&(Jl=!1,Yl=e,Ql=o),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),oc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Vl)throw Vl=!1,e=Kl,Kl=null,e;0!==(1&Ql)&&0!==e.tag&&Sc(),a=e.pendingLanes,0!==(1&a)?e===Zl?Xl++:(Xl=0,Zl=e):Xl=0,jo()}(e,t,n,r)}finally{Bl.transition=o,yt=r}return null}function Sc(){if(null!==Yl){var e=kt(Ql),t=Bl.transition,n=yt;try{if(Bl.transition=null,yt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Ql=0,0!==(6&Al))throw Error(i(331));var o=Al;for(Al|=4,$s=e.current;null!==$s;){var a=$s,s=a.child;if(0!==(16&$s.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($s=u;null!==$s;){var d=$s;switch(d.tag){case 0:case 11:case 15:rl(8,d,a)}var h=d.child;if(null!==h)h.return=d,$s=h;else for(;null!==$s;){var f=(d=$s).sibling,p=d.return;if(al(d),d===u){$s=null;break}if(null!==f){f.return=p,$s=f;break}$s=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}$s=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,$s=s;else e:for(;null!==$s;){if(0!==(2048&(a=$s).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var b=a.sibling;if(null!==b){b.return=a.return,$s=b;break e}$s=a.return}}var y=e.current;for($s=y;null!==$s;){var k=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==k)k.return=s,$s=k;else e:for(s=y;null!==$s;){if(0!==(2048&(l=$s).flags))try{switch(l.tag){case 0:case 11:case 15:ol(9,l)}}catch(x){Ec(l,l.return,x)}if(l===s){$s=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,$s=w;break e}$s=l.return}}if(Al=o,jo(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(x){}r=!0}return r}finally{yt=n,Bl.transition=t}}return!1}function Lc(e,t,n){e=Ri(e,t=ps(0,t=us(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),oc(e,t))}function Ec(e,t,n){if(3===e.tag)Lc(e,e,n);else for(;null!==t;){if(3===t.tag){Lc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Ri(t,e=ms(t,e=us(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),oc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(_l&n)===n&&(4===Rl||3===Rl&&(130023424&_l)===_l&&500>Xe()-Wl?fc(e,0):Fl|=n),oc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Pi(e,t))&&(vt(e,t,n),oc(e,n))}function Bc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Tc(e,n)}function Pc(e,t){return Ge(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _c(e,t,n,r){return new Ic(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=_c(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,o,a){var s=2;if(r=e,"function"===typeof e)Dc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Oc(n.children,o,a,t);case L:s=8,o|=8;break;case E:return(e=_c(12,n,t,2|o)).elementType=E,e.lanes=a,e;case A:return(e=_c(13,n,t,o)).elementType=A,e.lanes=a,e;case P:return(e=_c(19,n,t,o)).elementType=P,e.lanes=a,e;case D:return Nc(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case T:s=9;break e;case B:s=11;break e;case I:s=14;break e;case _:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=_c(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Oc(e,t,n,r){return(e=_c(7,e,r,t)).lanes=n,e}function Nc(e,t,n,r){return(e=_c(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=_c(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=_c(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,o,i,a,s,l){return e=new Hc(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=_c(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_i(i),e}function Wc(e){if(!e)return Bo;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Do(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Do(n))return Oo(e,n,t)}return t}function jc(e,t,n,r,o,i,a,s,l){return(e=Uc(n,r,!0,e,0,i,0,s,l)).context=Wc(null),n=e.current,(i=Mi(r=tc(),o=nc(n))).callback=void 0!==t&&null!==t?t:null,Ri(n,i,o),e.current.lanes=o,vt(e,o,r),oc(e,r),e}function qc(e,t,n,r){var o=t.current,i=tc(),a=nc(o);return n=Wc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Mi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ri(o,t,a))&&(rc(e,o,a,i),Oi(e,o,a)),a}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Ll=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Po.current)ks=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ks=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),pi();break;case 5:aa(t);break;case 1:Do(t.type)&&No(t);break;case 4:oa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;To(bi,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(To(la,1&la.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zs(e,t,n):(To(la,1&la.current),null!==(e=Vs(e,t,n))?e.sibling:null);To(la,1&la.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return js(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),To(la,la.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Vs(e,t,n)}(e,t,n);ks=0!==(131072&e.flags)}else ks=!1,ii&&0!==(1048576&t.flags)&&ei(t,Go,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qs(e,t),e=t.pendingProps;var o=_o(t,Ao.current);Ei(t,n),o=La(null,t,r,e,o,n);var a=Ea();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Do(r)?(a=!0,No(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,_i(t),o.updater=Wi,t.stateNode=o,o._reactInternals=t,Ki(t,r,e,n),t=As(null,t,r,!0,a,n)):(t.tag=0,ii&&a&&ti(t),ws(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===B)return 11;if(e===I)return 14}return 2}(r),e=vi(r,e),o){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Bs(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,vi(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ts(e,t,r,o=t.elementType===r?o:vi(r,o),n);case 1:return r=t.type,o=t.pendingProps,Bs(e,t,r,o=t.elementType===r?o:vi(r,o),n);case 3:e:{if(Ps(t),null===e)throw Error(i(387));r=t.pendingProps,o=(a=t.memoizedState).element,Di(e,t),zi(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Is(e,t,r,n,o=us(Error(i(423)),t));break e}if(r!==o){t=Is(e,t,r,n,o=us(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,ai=null,n=Zi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===o){t=Vs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&ui(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==a&&no(r,a)&&(t.flags|=32),Cs(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ui(t),null;case 13:return zs(e,t,n);case 4:return oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xi(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,xs(e,t,r,o=t.elementType===r?o:vi(r,o),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,To(bi,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===o.children&&!Po.current){t=Vs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Mi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Li(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Li(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ei(t,n),r=r(o=Ci(o)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return o=vi(r=t.type,t.pendingProps),Ss(e,t,r,o=vi(r.type,o),n);case 15:return Ls(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:vi(r,o),qs(e,t),t.tag=1,Do(r)?(e=!0,No(t)):e=!1,Ei(t,n),qi(t,r,o),Ki(t,r,o,n),As(null,t,r,!0,e,n);case 19:return js(e,t,n);case 22:return Es(e,t,n)}throw Error(i(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function eu(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=Vc(a);s.call(e)}}qc(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=Vc(a);i.call(e)}}var a=jc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=a,e[mo]=a.current,Wr(8===e.nodeType?e.parentNode:e),dc(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=Vc(l);s.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[mo]=l.current,Wr(8===e.nodeType?e.parentNode:e),dc((function(){qc(t,l,n,r)})),l}(n,t,e,o,r);return Vc(a)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));qc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){qc(null,e,null,null)})),t[mo]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Nt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),oc(t,Xe()),0===(6&Al)&&(jl=Xe()+500,jo()))}break;case 13:dc((function(){var t=Pi(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},xt=function(e){if(13===e.tag){var t=Pi(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},St=function(e){if(13===e.tag){var t=nc(e),n=Pi(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},Lt=function(){return yt},Et=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},xe=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=xo(r);if(!o)throw Error(i(90));G(r),Z(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Be=uc,Ae=dc;var tu={usingClientEntryPoint:!1,Events:[ko,wo,xo,Ce,Te,uc]},nu={findFiberByHostInstance:yo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{ot=ou.inject(ru),it=ou}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(i(299));var n=!1,r="",o=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,o),e[mo]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(i(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",s=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=jc(t,null,e,1,null!=n?n:null,o,0,a,s),e[mo]=t.current,Wr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Qc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(i(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[mo]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,n)=>{var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},1153:(e,t,n)=>{var r=n(5043),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},4202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var k=y.prototype=new b;k.constructor=y,m(k,v.prototype),k.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,o)&&!L.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function B(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+B(l,0):i,w(a)?(o="",null!=e&&(o=e.replace(T,"$&/")+"/"),A(a,t,o,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+B(s=e[c],c);l+=A(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=A(s=s.value,t,o,u=i+B(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],o=0;return A(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var _={current:null},D={transition:null},M={ReactCurrentDispatcher:_,ReactCurrentBatchConfig:D,ReactCurrentOwner:S};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=a,t.PureComponent=y,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!L.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return _.current.useCallback(e,t)},t.useContext=function(e){return _.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return _.current.useDeferredValue(e)},t.useEffect=function(e,t){return _.current.useEffect(e,t)},t.useId=function(){return _.current.useId()},t.useImperativeHandle=function(e,t,n){return _.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return _.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.current.useMemo(e,t)},t.useReducer=function(e,t,n){return _.current.useReducer(e,t,n)},t.useRef=function(e){return _.current.useRef(e)},t.useState=function(e){return _.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return _.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return _.current.useTransition()},t.version="18.2.0"},5043:(e,t,n)=>{e.exports=n(4202)},579:(e,t,n)=>{e.exports=n(1153)},7234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,k(e),!m)if(null!==r(c))m=!0,D(x);else{var t=r(u);null!==t&&M(w,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,b(C),C=-1),p=!0;var i=f;try{for(k(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&o(c),k(n)}else o(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&M(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,L=!1,E=null,C=-1,T=5,B=-1;function A(){return!(t.unstable_now()-B<T)}function P(){if(null!==E){var e=t.unstable_now();B=e;var n=!0;try{n=E(!0,e)}finally{n?S():(L=!1,E=null)}}else L=!1}if("function"===typeof y)S=function(){y(P)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,_=I.port2;I.port1.onmessage=P,S=function(){_.postMessage(null)}}else S=function(){v(P,0)};function D(e){E=e,L||(L=!0,S())}function M(e,n){C=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(b(C),C=-1):g=!0,M(w,i-a))):(e.sortIndex=s,n(c,e),m||p||(m=!0,D(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},8853:(e,t,n)=>{e.exports=n(7234)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{453:"b53a8b75",484:"909a92b8",551:"13c46e85",707:"6cb81d88",828:"6ac05289",849:"13f74440",950:"5c30d757"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="castle-coders:";n.l=(r,o,i,a)=>{if(e[r])e[r].push(o);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[o];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/castle-coders-alpha/",(()=>{var e={792:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise(((n,r)=>o=e[t]=[n,r]));r.push(o[2]=i);var a=n.p+n.u(t),s=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,o[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var o,i,a=r[0],s=r[1],l=r[2],c=0;if(a.some((t=>0!==e[t]))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(l)l(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkcastle_coders=self.webpackChunkcastle_coders||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{var e={};n.r(e),n.d(e,{__commitHash:()=>H,__type:()=>z,__version:()=>F,congruential32:()=>d,generateN:()=>i,mersenne:()=>m,skipN:()=>s,uniformArrayIntDistribution:()=>T,uniformBigIntDistribution:()=>P,uniformIntDistribution:()=>N,unsafeGenerateN:()=>o,unsafeSkipN:()=>a,unsafeUniformArrayIntDistribution:()=>C,unsafeUniformBigIntDistribution:()=>A,unsafeUniformIntDistribution:()=>O,xoroshiro128plus:()=>y,xorshift128plus:()=>v});var t=n(5043),r=n(4391);function o(e,t){for(var n=[],r=0;r!=t;++r)n.push(e.unsafeNext());return n}function i(e,t){var n=e.clone();return[o(n,t),n]}function a(e,t){for(var n=0;n!=t;++n)e.unsafeNext()}function s(e,t){var n=e.clone();return a(n,t),n}var l=function(e){return 214013*e+2531011&4294967295},c=function(e){return(-2147483649&e)>>16},u=function(){function e(e){this.seed=e}return e.prototype.clone=function(){return new e(this.seed)},e.prototype.next=function(){var t=new e(this.seed);return[t.unsafeNext(),t]},e.prototype.unsafeNext=function(){var e=l(this.seed),t=c(e),n=l(e),r=c(n);return this.seed=l(n),0|c(this.seed)+(r+(t<<15)<<15)},e.prototype.getState=function(){return[this.seed]},e}();var d=Object.assign((function(e){return new u(e)}),{fromState:function(e){if(!(1===e.length))throw new Error("The state must have been produced by a congruential32 RandomGenerator");return new u(e[0])}}),h=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},f=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},p=function(){function e(e,t){this.states=e,this.index=t}return e.twist=function(t){for(var n=t.slice(),r=0;r!==e.N-e.M;++r){var o=(n[r]&e.MASK_UPPER)+(n[r+1]&e.MASK_LOWER);n[r]=n[r+e.M]^o>>>1^-(1&o)&e.A}for(r=e.N-e.M;r!==e.N-1;++r){var i=(n[r]&e.MASK_UPPER)+(n[r+1]&e.MASK_LOWER);n[r]=n[r+e.M-e.N]^i>>>1^-(1&i)&e.A}var a=(n[e.N-1]&e.MASK_UPPER)+(n[0]&e.MASK_LOWER);return n[e.N-1]=n[e.M-1]^a>>>1^-(1&a)&e.A,n},e.seeded=function(t){var n=Array(e.N);n[0]=t;for(var r=1;r!==e.N;++r){var o=n[r-1]^n[r-1]>>>30;n[r]=Math.imul(e.F,o)+r|0}return n},e.from=function(t){return new e(e.twist(e.seeded(t)),0)},e.prototype.clone=function(){return new e(this.states,this.index)},e.prototype.next=function(){var t=new e(this.states,this.index);return[t.unsafeNext(),t]},e.prototype.unsafeNext=function(){var t=this.states[this.index];return t^=this.states[this.index]>>>e.U,t^=t<<e.S&e.B,t^=t<<e.T&e.C,t^=t>>>e.L,++this.index>=e.N&&(this.states=e.twist(this.states),this.index=0),t},e.prototype.getState=function(){return f([this.index],h(this.states),!1)},e.fromState=function(t){if(!(t.length===e.N+1&&t[0]>=0&&t[0]<e.N))throw new Error("The state must have been produced by a mersenne RandomGenerator");return new e(t.slice(1),t[0])},e.N=624,e.M=397,e.R=31,e.A=2567483615,e.F=1812433253,e.U=11,e.S=7,e.B=2636928640,e.T=15,e.C=4022730752,e.L=18,e.MASK_LOWER=Math.pow(2,e.R)-1,e.MASK_UPPER=Math.pow(2,e.R),e}();const m=Object.assign((function(e){return p.from(e)}),{fromState:function(e){return p.fromState(e)}});var g=function(){function e(e,t,n,r){this.s01=e,this.s00=t,this.s11=n,this.s10=r}return e.prototype.clone=function(){return new e(this.s01,this.s00,this.s11,this.s10)},e.prototype.next=function(){var t=new e(this.s01,this.s00,this.s11,this.s10);return[t.unsafeNext(),t]},e.prototype.unsafeNext=function(){var e=this.s00^this.s00<<23,t=this.s01^(this.s01<<23|this.s00>>>9),n=e^this.s10^(e>>>18|t<<14)^(this.s10>>>5|this.s11<<27),r=t^this.s11^t>>>18^this.s11>>>5,o=this.s00+this.s10|0;return this.s01=this.s11,this.s00=this.s10,this.s11=r,this.s10=n,o},e.prototype.jump=function(){var t=new e(this.s01,this.s00,this.s11,this.s10);return t.unsafeJump(),t},e.prototype.unsafeJump=function(){for(var e=0,t=0,n=0,r=0,o=[1667051007,2321340297,1548169110,304075285],i=0;4!==i;++i)for(var a=1;a;a<<=1)o[i]&a&&(e^=this.s01,t^=this.s00,n^=this.s11,r^=this.s10),this.unsafeNext();this.s01=e,this.s00=t,this.s11=n,this.s10=r},e.prototype.getState=function(){return[this.s01,this.s00,this.s11,this.s10]},e}();var v=Object.assign((function(e){return new g(-1,~e,0|e,0)}),{fromState:function(e){if(!(4===e.length))throw new Error("The state must have been produced by a xorshift128plus RandomGenerator");return new g(e[0],e[1],e[2],e[3])}}),b=function(){function e(e,t,n,r){this.s01=e,this.s00=t,this.s11=n,this.s10=r}return e.prototype.clone=function(){return new e(this.s01,this.s00,this.s11,this.s10)},e.prototype.next=function(){var t=new e(this.s01,this.s00,this.s11,this.s10);return[t.unsafeNext(),t]},e.prototype.unsafeNext=function(){var e=this.s00+this.s10|0,t=this.s10^this.s00,n=this.s11^this.s01,r=this.s00,o=this.s01;return this.s00=r<<24^o>>>8^t^t<<16,this.s01=o<<24^r>>>8^n^(n<<16|t>>>16),this.s10=n<<5^t>>>27,this.s11=t<<5^n>>>27,e},e.prototype.jump=function(){var t=new e(this.s01,this.s00,this.s11,this.s10);return t.unsafeJump(),t},e.prototype.unsafeJump=function(){for(var e=0,t=0,n=0,r=0,o=[3639956645,3750757012,1261568508,386426335],i=0;4!==i;++i)for(var a=1;a;a<<=1)o[i]&a&&(e^=this.s01,t^=this.s00,n^=this.s11,r^=this.s10),this.unsafeNext();this.s01=e,this.s00=t,this.s11=n,this.s10=r},e.prototype.getState=function(){return[this.s01,this.s00,this.s11,this.s10]},e}();var y=Object.assign((function(e){return new b(-1,~e,0|e,0)}),{fromState:function(e){if(!(4===e.length))throw new Error("The state must have been produced by a xoroshiro128plus RandomGenerator");return new b(e[0],e[1],e[2],e[3])}});function k(e,t){if(e.sign!==t.sign)return w(e,{sign:-t.sign,data:t.data});for(var n=[],r=0,o=e.data,i=t.data,a=o.length-1,s=i.length-1;a>=0||s>=0;--a,--s){var l=(a>=0?o[a]:0)+(s>=0?i[s]:0)+r;n.push(l>>>0),r=~~(l/4294967296)}return 0!==r&&n.push(r),{sign:e.sign,data:n.reverse()}}function w(e,t){if(e.sign!==t.sign)return k(e,{sign:-t.sign,data:t.data});var n=e.data,r=t.data;if(function(e,t){for(var n=Math.max(e.length,t.length),r=0;r<n;++r){var o=r+e.length-n,i=r+t.length-n,a=o>=0?e[o]:0,s=i>=0?t[i]:0;if(a<s)return!0;if(a>s)return!1}return!1}(n,r)){var o=w(t,e);return o.sign=-o.sign,o}for(var i=[],a=0,s=n.length-1,l=r.length-1;s>=0||l>=0;--s,--l){var c=(s>=0?n[s]:0)-(l>=0?r[l]:0)-a;i.push(c>>>0),a=c<0?1:0}return{sign:e.sign,data:i.reverse()}}function x(e){for(var t=e.data,n=0;n!==t.length&&0===t[n];++n);return n===t.length?(e.sign=1,e.data=[0],e):(t.splice(0,n),e)}function S(e,t){if(t<0){var n=-t;e.sign=-1,e.data[0]=~~(n/4294967296),e.data[1]=n>>>0}else e.sign=1,e.data[0]=~~(t/4294967296),e.data[1]=t>>>0;return e}function L(e,t){for(var n=e>2?~~(4294967296/e)*e:4294967296,r=t.unsafeNext()+2147483648;r>=n;)r=t.unsafeNext()+2147483648;return r%e}function E(e,t,n){for(var r=t.length;;){for(var o=0;o!==r;++o){var i=L(0===o?t[0]+1:4294967296,n);e[o]=i}for(o=0;o!==r;++o){var a=e[o],s=t[o];if(a<s)return e;if(a>s)break}}}function C(e,t,n){var r=x(function(e){e.sign=1;for(var t=e.data,n=t.length-1;n>=0;--n){if(4294967295!==t[n])return t[n]+=1,e;t[n]=0}return t.unshift(1),e}(w(t,e)));return x(k({sign:1,data:E(r.data.slice(0),r.data,n)},e))}function T(e,t,n){if(null!=n){var r=n.clone();return[C(e,t,r),r]}return function(n){var r=n.clone();return[C(e,t,r),r]}}var B="undefined"!==typeof BigInt?BigInt:void 0;function A(e,t,n){for(var r=t-e+B(1),o=B(-2147483648),i=B(4294967296),a=i,s=1;a<r;)a*=i,++s;for(var l=a-a%r;;){for(var c=B(0),u=0;u!==s;++u){var d=n.unsafeNext();c=i*c+(B(d)-o)}if(c<l)return c%r+e}}function P(e,t,n){if(null!=n){var r=n.clone();return[A(e,t,r),r]}return function(n){var r=n.clone();return[A(e,t,r),r]}}var I=Number.MAX_SAFE_INTEGER,_={sign:1,data:[0,0]},D={sign:1,data:[0,0]},M={sign:1,data:[0,0]},R=[0,0];function O(e,t,n){var r=t-e;return r<=4294967295?L(r+1,n)+e:function(e,t,n,r){var o=n<=I?S(M,n):function(e,t,n){var r=t.data[1],o=t.data[0],i=t.sign,a=n.data[1],s=n.data[0],l=n.sign;if(e.sign=1,1===i&&-1===l){var c=r+a,u=o+s+(c>4294967295?1:0);return e.data[0]=u>>>0,e.data[1]=c>>>0,e}var d=r,h=o,f=a,p=s;-1===i&&(d=a,h=s,f=r,p=o);var m=0,g=d-f;return g<0&&(m=1,g>>>=0),e.data[0]=h-p-m,e.data[1]=g,e}(M,S(_,t),S(D,e));return 4294967295===o.data[1]?(o.data[0]+=1,o.data[1]=0):o.data[1]+=1,E(R,o.data,r),4294967296*R[0]+R[1]+e}(e,t,r,n)}function N(e,t,n){if(null!=n){var r=n.clone();return[O(e,t,r),r]}return function(n){var r=n.clone();return[O(e,t,r),r]}}var z="module",F="6.1.0",H="a413dd2b721516be2ef29adffb515c5ae67bfbad";const U=e,W=n.p+"static/media/castle_interior.8531ee37643c363dd999.jpg",j=n.p+"static/media/green_goblin.940426bcab991d76a040.png",q=n.p+"static/media/purple_goblin.91152ea460a6e5ad224b.png",V=n.p+"static/media/hero.b3c6e446a86fd41ca157.png",K=n.p+"static/media/heart_mark.a5218b44405da25efefa.png",G=n.p+"static/media/empty_heart_mark.f4d685688da116c6d6dc.png",J=n.p+"static/media/witch_idle.9d11e38e1b4289419703.png",Y=n.p+"static/media/witch_wand_raised.53f0d0a32e3b903270fc.png",Q=n.p+"static/media/witch_wand_lowered.8c3d90f34c476ac76124.png",X=n.p+"static/media/start.d262cfb0228bba682e26.png",Z=n.p+"static/media/shop.166f5ba7f48658fe2b24.png",$=n.p+"static/media/settings.1c45397e32718cf40e5f.png",ee=n.p+"static/media/edit.b61b6adf7c4dbaf022b0.png",te=n.p+"static/media/view.d58e38a4603f2f8f9e4c.png",ne=n.p+"static/media/play.121561b266b828ac1de7.png",re=n.p+"static/media/pause.c7744e166f82bd883613.png",oe=n.p+"static/media/home.184507ac0292a8b67475.png",ie=n.p+"static/media/language.cab99e5f5162e6a87af2.png",ae=n.p+"static/media/credits.f5854be87a7820fdf46a.png",se=n.p+"static/media/reset_to_level_one.65e5e464d7d79e2f1247.png",le=n.p+"static/media/close.b74271a41d658b416c55.png",ce=n.p+"static/media/extended_home_background.7d8d454f90e077240f24.png",ue=n.p+"static/media/settings_box.393da74ad98ab98eb37d.png",de=n.p+"static/media/finger.24ebd2feaba6d65f445c.png",he=n.p+"static/media/short_instructions_box.dcd9f067470ba62acde3.png",fe=n.p+"static/media/tall_instructions_box.68546587dfc4c6d54f4d.png",pe=n.p+"static/media/loading_screen_castle_coders_text.cbbae87a35a0ac687b9d.png",me={castle_interior:De(W),green_goblin:De(j),purple_goblin:De(q),hero:De(V),heart_mark:De(K),empty_heart_mark:De(G),witch_idle:De(J),witch_wand_raised:De(Y),witch_wand_lowered:De(Q),extended_home_background:De(ce),settings_box:De(ue),language_dropdown_arrow:De("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA7CAYAAADFJfKzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAhGVYSWZNTQAqAAAACAAFARIAAwAAAAEAAQAAARoABQAAAAEAAABKARsABQAAAAEAAABSASgAAwAAAAEAAgAAh2kABAAAAAEAAABaAAAAAAAAAJAAAAABAAAAkAAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAO6ADAAQAAAABAAAAOwAAAAALVaiSAAAACXBIWXMAABYlAAAWJQFJUiTwAAACzmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj4xNDQ8L3RpZmY6WVJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjE0NDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjIwMzk8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjE0NDc8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4K3vZotwAACsZJREFUaAXtm8GOHUcVhrt7MralyGN5AUFil1igLCK8AQkh8QpZoax5CngFEM+A2LOBR0CCNY4gEkG2hFhECVGC4kTCnsnczv/9/6m+7cnc63vv9AwLqJnbXXXq1Dn/f05VdfUdu+v+h0oP14dvfPP9cB64jV2vn1E190owrsahH3rdI3OfdGl3ug+rsZOG2hk5StarDz2XtGVjPF+t+t5j1Kt616s5jqUpvevw3/ePHj3+6J1XsC5/37GXXpiFG8S96sDSTfXBeEbdJYK97iuhBZyZMxxFLvqNbKTqjrRlOiqMgR/6+LCORNfkX/Y/wYVDCWyAgIFAuyg7JorcHSirYZCd9NFzpxoa5zrtyOi1pTKnpkoCae3yw+S4Kf8mS2w1CVN8V4adHQGhDUf/FAGJmjqZgTf9iZ0a+l3pgsxmPEsjd4yaXKJBM+S6/dt9odPNfHw35ml6CjcYjVNx0T1go8q1V2okpqbOyqzuUO2l7EA4i8ikwjLnTotl7T7aVVxpy6N8S9XrHBcYmZVd/Nuxxjiza0/NClCAq9LCohZV9h2XcjpCCAFtwEydahSR6tJ42S0dj5J3m88gj8xlcf9AKLIVeQPOxRHM1gGsgHStCKAQkqVVgG3VIzDvBZkgSN/ZUV+WTFhb/5r9C5pTlMyCC5IWBbWeMwm7gIzarMhg1OjPJxINQpXOWufYSiikoV9nT335wR7KsdHMXqd/kOGxyAKjiVLxtmGgZIIooMO8myvSCCGkIYFd6dq8L202o9INHk+NPuXa7Wv2X6inzGYy4lkfofazviCxgig1cV0PMR5GQc9MJLGTjuueKgkC7PWbIOBj1mfb+MAWfcv6lyfz9AWA/JhwgWpgAIj/iYSaFC8zsdPT2O02zROYkqkH+G5xCMGOBZKwcOnw7Xr9t/losnnSFTCjAYPoAUbguE8kkBmlrkLPKSuEdOXEqPGM9ZrnbjKMkT5j+XhVSA/bbjIidU5uFCRL+S/TXY6L4/j+OGj12Hn2TNMb+28L2d01FA0TUB1xc+Iirz4DBijjIWmQLQjYBD9Mbd9MfGE2kGA7hq7HEv+ScKKpQ4cHq+cl/j+Who+GOsrr6C0HAitM/2SorG0uDx+89jv5fftFLSPPIFiIBEaQth7fwe7ASEWCzIxkHSr8rEdijgURkrQwavPNqIVcZoKv+e9//u7jD38xqV6oeBpfkM2bwYgEwJ6isyGkxV0gM2+3LWVXSHcyWyA1J0xkyJ4hTmxyKBbRGmN7WJu1X+bfzrdcZsgv1VLwW7Spamp4TRFdQWS+EoSGDMJEG4Tpcn/xkgjlNiZdkDcIiV0Si3Ta7u7+h+68jFx+20rW/nn7Kae0c1wEsDICcVWtpz5o5qwrgA4KbQlFgOJ6U5Y2VaYy43JBUG11eprv4X/VHWFpY9lK1uCNIgj9BlRgTcYoG1kfOSZHZN2xgGF+RagG0Ffs5kQjiw7XfLju738CMqtsJYteexS43sACQ7/F248fWg1WqKgt620S0tc2AAL1QmjKUB6BNJrmnv5bBAF7SXkpWeYeQF2qzulq/cgQoPbmLyUSOfK4ECGmvKdigW8bFnRsdTK8JpjprzYiLnv4H8dzj2LkZeXlZDUqfgVeFerTa116Ss6uSicfaRURqijQ5CunVljGPK9TdEcRB17fyry70u9RBA8VDdjkv7vKmsUw684eBDSuubZau4NVYIQwwKSCFuBAHTU1yHj6uLUjpiU4Qq8c0u+PZWrs4L+7ym7MRj5tRAYJYVUKfHtWInAmyCDdmtalHv0GPFK1UhoPt4gCwWrRkC5J3sf/cJXMZo7nqO9vO8keyHwpIGbO0aAJA9jT15lmTPUB3tMUI5VE9XkTE3MHqmaC17yH7eP/Cs/ZQBIUOR0ceVUqHf6KxRkmJOiIRQNnOZesY749NHk0pd4WRPTrNURjGe7AMEMISm18O/vXkG3FLwIbFYbxN8L5p24l0IMWjZ37heH7AvaTNsX8ouc+WVL2Q2yeT8SSO//tzl5EvfS8eek8JfNeto6ho+cAZ0Kw5h2SX2nURwpwjnTDMGBster+sJEL0LZ1bur73uvf+ql20l97t2Hagc4MndIaJtM0uQngYLLp8hAzWutMvkDEOEyKuN5Z3EwERFGDv/zylTf/8o8P/jaN2bGSZbmjclPrj+Lf61igfEZ2J+aElr8gUBMhEpGsttHuth68vlawJyGxw67tcNHsokHg+tunSPYuB5Edzs1BYORPoMhUvOcKuRDM2osUbEWvBEzhSVRdaDFlPbllB9J84kx3jT1+fmumLdmO5SCyPPImoAbCVqQCa6ExFzKATJdSaT1Iq0jTytKBoYfXODVZnw4o2q0iH2f9TWbWT4NCKZDGaEDqEMDqcYboBT5xMPnWiT7FQt04Tanuw4nEhCyqpcA0lm0+x8fOtYfvczkss2yjFK5gSCsC15OdwIS8ftxQJ/qNITaq+A9l4WKz65CVcVLvmdN1Z2e3J49t/C73g8jydDBeCMjt+s0o+Sh6CQYoxNRJ0SDwGmkjb5ReFOmYaFihevGhtvvG7nh8vu60xm6Xg8hiOpGPz7ywU+fTTEqjQSL1/iVGIKbBXQoikZ80vcO72mYDWhpFYh2xZl9Ke5aDR/43/z572t3ek2bUDyLLCbQljcyQQSZwskq2eHyQQ01PJ7JlkezguOSqH/r3WazsWw4iO3eyy99HM82zLtuLgFttasog4XBxBViReOY6fpLpnmA9L+X9bgeRPeJ7LWdIzuXdsGgDxv6rAdKIre6Xh9LxKHn30s0g6+ZCKMpu7cBYpsqmfOvWTHWPatDsMQDVBw8e3P7Gs2evfqG/IqzucoJ/2p181nWnd+7c1+HqsYFpo/IbKakgpFKDO1+d+lnsFDWWwBALK1B33p+cPjv+wck9rD/tXj2/2x8dfT7KU/feez+Ut99uf5+TlYsFy4uVt966d//oP3c+vWgQSs3RvO6giGDO1uqZdeq4+fc/P/nXdy/aukr7oGm8yeHZmY856m6PjVCs2exhHJRS6ONtiFa2tykizAm9TCxdFrV49EV7TzF+IBtv1qXI6TcbDFmc9UmLNQppfzSA1tJlUbL3+UdwhhmoBT3AtbN4g0FIqvleFTXfyGw2JUcDedu2F2S8KNl/39UxXg9WsgRt56s4gdnTGSIklbBIBS2eyeZnHSSKRX0z68ZCl0XJdtoj+cLcK1DMDBtCrogOdYDDTBceW+zZbnJ1fyDpK5aIUV2oLEv23onTNxGiIsjZoBql3BMQrk6z6UTPozVoWWg4WN5i+Hmqtj93JLNhbnLi275zJrdZ56bv4Jg5/8J14bIo2RM9/NtarVmZeVtePLHZjsUb6vls+PtsPZSW5Lso2aefnWgzJSHKkt8AVKOZp0zqU76ST1YspHPRva31SY/OZcqiZDnatcITF74+HQm4sWc+OwJF8QWikZm6Nq/lp/H2L8kb8h3vT7vnp8fd8PumTlb5BoeIapP+sbJ2H9LJOlITe6JI/JUxeWixhjk/Dx8gW7I44Esa3GTr4Ruv/VEb7I9ack3aXPtfPnry4c82jVtSvug03g5M+ZrNTJZx/X32xgJ+c2T9JTDTMyFJZrnW7rU9Uov03hxZNuhsUxNwz2KdC2+q3JynYjQ/3/vpdHOJvZ4T1KWZas9dhbc9dpxo/k/Q/8vyEfgKtM6ca7/aPTMAAAAASUVORK5CYII="),loading_screen_castle_coders_text:De(pe),buttons:{home:{start:De(X),shop:De(Z),settings:De($)},puzzle:{edit:De(ee),view:De(te),play:De(ne),pause:De(re),home:De(oe)},settings:{language:De(ie),credits:De(ae),reset_to_level_one:De(se),close:De(le)}},tutorial:{finger:De(de),short_instructions_box:De(he),tall_instructions_box:De(fe)}},ge={home:{start:Me(me.buttons.home.start),shop:Me(me.buttons.home.shop),settings:Me(me.buttons.home.settings)},puzzle:{all_purpose:Me(me.buttons.puzzle.home)},settings:{language:Me(me.buttons.settings.language),credits:Me(me.buttons.settings.credits),reset_to_level_one:Me(me.buttons.settings.reset_to_level_one),close:Me(me.buttons.settings.close)}},ve={hero:Re(me.hero),goblin:Re(me.green_goblin),witch_idle:Re(me.witch_idle),heart_mark:(be=me.heart_mark,Oe(be,{r:0,g:0,b:0,a:255}))};var be;const ye={width:2039,height:1447},ke=4096/3,we=1938/2,xe={topLeft:{x:1038,y:134},dimensions:{width:935,height:348}},Se={topLeft:{x:1097,y:906},dimensions:{width:647,height:312}},Le={topLeft:{x:2270,y:1154},dimensions:{width:260,height:48}},Ee={topLeft:{x:2278,y:1670},dimensions:{width:116,height:52}},Ce={topLeft:{x:0,y:0},dimensions:{width:2039,height:1447}},Te={topLeft:{x:501,y:490},dimensions:{width:719,height:120}},Be={topLeft:{x:504,y:626},dimensions:{width:715,height:121}},Ae={topLeft:{x:505,y:757},dimensions:{width:714,height:126}},Pe={topLeft:{x:1375,y:506},dimensions:{width:157,height:137}},Ie={topLeft:{x:2107,y:1097},dimensions:{width:442,height:231}};function _e(e){return{topLeft:{x:(e.topLeft.x-ke)/ke*ye.width,y:(e.topLeft.y-we)/we*ye.height},dimensions:{width:e.dimensions.width/ke*ye.width,height:e.dimensions.height/we*ye.height}}}function De(e){const t=new Image;return t.hasLoaded=!1,t.ready=new Promise(((e,n)=>{t.addEventListener("load",(()=>{t.hasLoaded=!0,e(t)})),t.addEventListener("error",n)})),t.src=e,t}function Me(e){return Oe(e,{r:255,g:255,b:255,a:255})}function Re(e){return Oe(e,{r:255,g:0,b:0,a:255})}function Oe(e,t){const n=document.createElement("canvas"),r=n.getContext("2d");return n.hasLoaded=!1,n.ready=e.ready.then((e=>{const o=e.naturalWidth,i=e.naturalHeight;n.width=o,n.height=i,r.drawImage(e,0,0);const a=r.getImageData(0,0,o,i),s=a.data;for(let n=0;n<s.length;n+=4)s[n+3]>0&&(s[n]=t.r,s[n+1]=t.g,s[n+2]=t.b,s[n+3]=t.a);return r.clearRect(0,0,o,i),r.putImageData(a,0,0),n})),n}const Ne={checkpoint:ze("Checkpoint"),notoSans:ze("Noto Sans JP"),twemojiCountryFlags:ze("Twemoji Country Flags")};function ze(e){return new Promise(((t,n)=>{Fe(e,t,n)}))}function Fe(e,t,n){document.fonts.ready.then((r=>{const o=Array.from(r.values()).find((t=>t.family===e));if(void 0!==o)switch(o.status){case"unloaded":return void o.load().then(t,n);case"error":return void n(new Error("Failed to load ".concat(JSON.stringify(e),".")));case"loaded":case"loading":return void o.loaded.then(t,n);default:o.status}else requestAnimationFrame((()=>{Fe(e,t,n)}))}))}function He(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Ue(e,t){return{x:e.x-t.x,y:e.y-t.y}}function We(e){return{x:e.x,y:-e.y}}function je(e,t){return{x:e.x*t,y:e.y*t}}const qe=3*Math.sqrt(3),Ve=30,Ke=Math.sqrt(3)*Ve/2,Ge=Math.sqrt(3)/2*qe,Je=.5*qe,Ye={path:"M".concat(qe," 0\n\nL").concat(Ve-qe," 0\n\nA").concat(3," ").concat(3," 0 0 1 ").concat(Ve-Je," ").concat(Ge,"\n\nL").concat(15+Je," ").concat(Ke-Ge,"\n\nA").concat(3," ").concat(3," 0 0 1 ").concat(15-Je," ").concat(Ke-Ge,"\n\nL").concat(Je," ").concat(Ge,"\n\nA").concat(3," ").concat(3," 0 0 1 ").concat(qe," 0"),width:Ve,height:Ke,radius:3,cornerTangentDistance:qe},Qe="M767 336H233q-12 0-21 9t-9 21l38 505q1 13 12 21.5t30 8.5h434q18 0 29-8.5t13-21.5l38-505q0-12-9-21t-21-9zM344 841q-10 0-18-9t-8-21l-26-386q0-12 9-20.5t21-8.5 21 8.5 9 20.5l18 386q0 12-7.5 21t-18.5 9zm182-31q0 13-7.5 22t-18.5 9-18.5-9-7.5-22l-4-385q0-12 9-20.5t21-8.5 21 8.5 9 20.5zm156 1q0 12-8 21t-18 9q-11 0-18.5-9t-7.5-21l18-386q0-12 9-20.5t21-8.5 21 8.5 9 20.5zm101-605l-179-30q-12-2-15-15l-8-33q-4-20-14-26-6-3-22-3h-90q-16 0-23 3-10 6-13 26l-8 33q-2 13-15 15l-179 30q-19 3-31.5 14.5T173 249v28q0 9 6.5 15t15.5 6h610q9 0 15.5-6t6.5-15v-28q0-17-12.5-28.5T783 206z",Xe={topLeft:{x:173,y:99},dimensions:{width:654,height:802}};var Ze=n(579);let $e=function(e){return e.Command="Command",e.Query="Query",e}({}),et=function(e){return e.Label="Label",e.Dropdown="Dropdown",e.Expression="Expression",e.CommandSequence="CommandSequence",e}({}),tt=function(e){return e.Block="Block",e.BlockSequence="BlockSequence",e.Label="Label",e.Dropdown="Dropdown",e.Literal="Literal",e}({}),nt=function(e){return e.BlockDrag="BlockDrag",e.Dropdown="Dropdown",e.Literal="Literal",e.DropdownMenuChoice="DropdownMenuChoice",e.DropdownMenuScroll="DropdownMenuScroll",e}({});var rt=function(e){return e.Label="Label",e.Dropdown="Dropdown",e.Literal="Literal",e.Block="Block",e.CommandSequence="CommandSequence",e}(rt||{});const ot="canvas",it="palette",at="draggee",st="argDropdown",lt="argExpression",ct="argCommandSequence",ut="insertionMark",dt={[ot]:!0,[it]:!0,[at]:!0,[st]:!0,[lt]:!0,[ct]:!0,[ut]:!0},ht="COMMAND_INSERTION_MARK_SENTINEL",ft="M",pt={canvasBackground:"CanvasBackground",paletteBackground:"PaletteBackground",blockAddressPrefix:"BlockAddress_",dropdownAddressPrefix:"DropdownAddress_",literalAddressPrefix:"LiteralAddress_",dropdownChoicePrefix:"DropdownChoice_"},mt={root:"_Root",editorClipPath:"_EditorClipPath",backgroundDotPattern:"_BackgroundDotPattern",paletteClipPath:"_PaletteClipPath",dropdownMenuClipPath:"_DropdownMenuClipPath",canvasBackground:"_CanvasBackground"},gt={r:0,g:0,b:0,a:0};class vt extends t.Component{static generateComponentInstanceUid(){return"BlockEditor_".concat(Date.now().toString(36),"_").concat(Math.random().toString(36).replace("0.",""))}constructor(e){super(e),this.bindMethods()}bindMethods(){this.onEditorOverlayTouchStart=this.onEditorOverlayTouchStart.bind(this),this.onEditorOverlayMouseDown=this.onEditorOverlayMouseDown.bind(this),this.onWindowTouchMove=this.onWindowTouchMove.bind(this),this.onWindowMouseMove=this.onWindowMouseMove.bind(this),this.onWindowTouchEnd=this.onWindowTouchEnd.bind(this),this.onWindowMouseUp=this.onWindowMouseUp.bind(this)}addEventListeners(){window.addEventListener("touchmove",this.onWindowTouchMove),window.addEventListener("mousemove",this.onWindowMouseMove),window.addEventListener("touchend",this.onWindowTouchEnd),window.addEventListener("mouseup",this.onWindowMouseUp)}componentDidMount(){this.addEventListeners()}componentWillUnmount(){this.removeEventListeners()}removeEventListeners(){window.removeEventListener("touchmove",this.onWindowTouchMove),window.removeEventListener("mousemove",this.onWindowMouseMove),window.removeEventListener("touchend",this.onWindowTouchEnd),window.removeEventListener("mouseup",this.onWindowMouseUp)}render(){const{props:e}=this,{state:t,config:n}=e,{colors:r,sizing:o,componentInstanceUid:i}=n,{dropdownMenu:a,canvas:s,uiTouch:l}=t,c=null===s.scrollInProgress?s.scroll:{x:s.scroll.x+s.scrollInProgress.currentClientPosition.x-s.scrollInProgress.startClientPosition.x,y:s.scroll.y+s.scrollInProgress.currentClientPosition.y-s.scrollInProgress.startClientPosition.y},u=dn(e),d=null!==l&&l.kind===nt.BlockDrag&&l.hasPositionChangedSinceDragStart&&!Un(l.currentClientPosition,i),h=Math.min((o.paletteBounds.dimensions.width-2*o.paletteTrashCanHorizontalMargin)/Xe.dimensions.width,(o.paletteBounds.dimensions.height-2*o.paletteTrashCanVerticalMargin)/Xe.dimensions.height),f={x:h*Xe.dimensions.width<o.paletteBounds.dimensions.width?.5*(o.paletteBounds.dimensions.width-h*Xe.dimensions.width):0,y:h*Xe.dimensions.height<o.paletteBounds.dimensions.height?.5*(o.paletteBounds.dimensions.height-h*Xe.dimensions.height):0},p=He(o.paletteBounds.topLeft,f),m=(0,Ze.jsx)("path",{transform:"scale(".concat(h,") translate(").concat(-Xe.topLeft.x+p.x/h," ").concat(-Xe.topLeft.y+p.y/h,")"),d:Qe,fill:wt(r.paletteTrashCan)});return(0,Ze.jsxs)("g",{id:i+mt.root,style:{cursor:t.cursor,userSelect:"none"},children:[(0,Ze.jsxs)("defs",{children:[(0,Ze.jsx)("pattern",{id:i+mt.backgroundDotPattern,x:c.x,y:c.y,width:"50",height:"50",patternUnits:"userSpaceOnUse",children:(0,Ze.jsx)("circle",{cx:"25",cy:"25",r:o.backgroundDotRadius,fill:wt(r.backgroundDot)})}),(0,Ze.jsx)("clipPath",{id:i+mt.paletteClipPath,children:(0,Ze.jsx)("rect",{x:o.paletteBounds.topLeft.x,y:o.paletteBounds.topLeft.y,width:o.paletteBounds.dimensions.width,height:o.paletteBounds.dimensions.height})}),(0,Ze.jsx)("clipPath",{id:i+mt.editorClipPath,children:(0,Ze.jsx)("rect",{x:o.editorBounds.topLeft.x,y:o.editorBounds.topLeft.y,width:o.editorBounds.dimensions.width,height:o.editorBounds.dimensions.height})})]}),(0,Ze.jsxs)("g",{clipPath:"url(#".concat(i).concat(mt.editorClipPath,")"),children:[(0,Ze.jsx)("rect",{x:o.editorBounds.topLeft.x,y:o.editorBounds.topLeft.y,width:o.editorBounds.dimensions.width,height:o.editorBounds.dimensions.height,fill:wt(r.background)}),(0,Ze.jsx)("rect",{x:o.editorBounds.topLeft.x,y:o.editorBounds.topLeft.y,width:o.editorBounds.dimensions.width,height:o.editorBounds.dimensions.height,fill:"url(#".concat(i).concat(mt.backgroundDotPattern,")")}),(0,Ze.jsx)("rect",{id:i+mt.canvasBackground,"data-touch-role":pt.canvasBackground,x:o.canvasBounds.topLeft.x,y:o.canvasBounds.topLeft.y,width:o.canvasBounds.dimensions.width,height:o.canvasBounds.dimensions.height,fill:wt(gt)}),(0,Ze.jsx)("g",{transform:"translate(".concat(c.x," ").concat(c.y,")"),children:un(e).map((e=>(0,Ze.jsx)(Ot,{spec:e,editor:this},e.address.map(on).join("_"))))}),(0,Ze.jsx)("rect",{"data-touch-role":pt.paletteBackground,x:o.paletteBounds.topLeft.x,y:o.paletteBounds.topLeft.y,width:o.paletteBounds.dimensions.width,height:o.paletteBounds.dimensions.height,fill:wt(r.paletteBackground)}),(0,Ze.jsx)("g",{clipPath:"url(#".concat(i).concat(mt.paletteClipPath,")"),children:d?m:fn(e).map((e=>(0,Ze.jsx)(St,{spec:e,editor:this},e.address.map(on).join("_"))))}),o.dividers.map(((e,t)=>(0,Ze.jsx)("rect",{x:e.topLeft.x,y:e.topLeft.y,width:e.dimensions.width,height:e.dimensions.height,fill:wt(r.divider)},t))),null!==u&&(0,Ze.jsx)("g",{transform:"translate(".concat(c.x," ").concat(c.y,")"),children:(0,Ze.jsx)(Ot,{spec:u,editor:this})}),null!==a&&(0,Ze.jsx)(On,{menu:a,editorProps:e}),(0,Ze.jsx)("rect",{onTouchStart:this.onEditorOverlayTouchStart,onMouseDown:this.onEditorOverlayMouseDown,x:o.editorBounds.topLeft.x,y:o.editorBounds.topLeft.y,width:o.editorBounds.dimensions.width,height:o.editorBounds.dimensions.height,fill:"transparent"})]})]})}setState(){throw new Error("BlockEditor does not manage its own state. It defers state management to its parent. Thus, this.setState should never be called. You most likely meant to call this.props.setState.")}onEditorOverlayTouchStart(e){e.touches.length>1||this.onEditorOverlayPointerDown({x:e.touches[0].clientX,y:e.touches[0].clientY})}onEditorOverlayMouseDown(e){this.onEditorOverlayPointerDown({x:e.clientX,y:e.clientY})}onEditorOverlayPointerDown(e){const t=ln(e,this.props.config.componentInstanceUid);if(null===t)return;if(t===pt.canvasBackground)return void this.onBlockCanvasBackgroundPointerDown(e);if(t===pt.paletteBackground)return void this.onBlockPaletteBackgroundPointerDown(e);const n=function(e){if(!e.startsWith(pt.blockAddressPrefix))return null;const t=e.slice(pt.blockAddressPrefix.length).split("_").map(an);if(t.some((e=>null===e)))return null;return t}(t);if(null!==n)return void this.onBlockPointerDown(e,n);const r=function(e){if(!e.startsWith(pt.literalAddressPrefix))return null;const t=e.slice(pt.literalAddressPrefix.length).split("_").map(an);if(t.some((e=>null===e)))return null;return t}(t);if(null!==r)return void this.onLiteralPointerDown(e,r);const o=function(e){if(!e.startsWith(pt.dropdownAddressPrefix))return null;const t=e.slice(pt.dropdownAddressPrefix.length).split("_").map(an);if(t.some((e=>null===e)))return null;return t}(t);if(null!==o)return void this.onDropdownPointerDown(e,o);const i=function(e){const t=e.slice(pt.dropdownChoicePrefix.length),n=Number.parseInt(t,10);if(Number.isInteger(n)&&n>=0)return n;return null}(t);null===i||this.onDropdownMenuChoicePointerDown(e,i)}onWindowTouchMove(e){1===e.touches.length&&this.onWindowPointerMove({x:e.touches[0].clientX,y:e.touches[0].clientY})}onWindowMouseMove(e){this.onWindowPointerMove({x:e.clientX,y:e.clientY})}onWindowPointerMove(e){const{props:t}=this;t.setState((n=>{let r=n;if(null!==r.canvas.scrollInProgress&&(r={...r,canvas:{...r.canvas,scrollInProgress:{...r.canvas.scrollInProgress,currentClientPosition:e}}}),null!==r.palette.scrollInProgress&&r.palette.blockKinds.length>0){const{sizing:n,blockDefs:o}=t.config,i=fn({...t,state:r}),a=Ue(e,r.palette.scrollInProgress.startClientPosition),s=He(r.palette.scroll,a),l=Math.max(...i.map((e=>e.rbox.dimensions.width))),c=-Math.max(0,l-(n.paletteBounds.dimensions.width-(n.paletteLeftPadding+n.paletteRightPadding))),u=i[i.length-1],d=o[u.block.kind],h=d.kind===$e.Command&&d.hasMaleSocket?n.commandSocket.height:0,f=u.rbox.topLeft.y+u.rbox.dimensions.height-i[0].rbox.topLeft.y+h,p=-Math.max(0,f-(n.paletteBounds.dimensions.height-(n.paletteTopPadding+n.paletteBottomPadding))),m={x:s.x>0?s.x:s.x<c?s.x-c:0,y:s.y>0?s.y:s.y<p?s.y-p:0};r={...r,palette:{...r.palette,scrollInProgress:{startClientPosition:He(r.palette.scrollInProgress.startClientPosition,m),currentClientPosition:e}}}}if(null!==r.uiTouch&&r.uiTouch.kind===nt.BlockDrag){const n=un({...t,state:{...r,uiTouch:{...r.uiTouch,hasPositionChangedSinceDragStart:!0}}}),o=hn({...t,state:r},r.uiTouch),i=Mn(e,r.uiTouch.startClientPosition);r={...r,uiTouch:{...r.uiTouch,hasPositionChangedSinceDragStart:r.uiTouch.hasPositionChangedSinceDragStart||!i,currentClientPosition:e,insertionMarkAddress:pn(t,n,o,r.uiTouch.draggeeOriginalAddress,e)}}}if(null!==r.uiTouch&&(r.uiTouch.kind===nt.Literal||r.uiTouch.kind===nt.Dropdown)&&!Mn(r.uiTouch.startClientPosition,e)){const n=r.uiTouch.kind===nt.Literal?r.uiTouch.literalAddress.slice(0,-2):r.uiTouch.dropdownAddress.slice(0,-2),o={...t,state:{...r,uiTouch:{kind:nt.BlockDrag,draggeeOriginalAddress:n,insertionMarkAddress:null,hasPositionChangedSinceDragStart:!0,startClientPosition:r.uiTouch.startClientPosition,currentClientPosition:e}}},i=un(o),a=hn(o,o.state.uiTouch);r={...r,uiTouch:{kind:nt.BlockDrag,draggeeOriginalAddress:n,insertionMarkAddress:pn(o,i,a,n,e),hasPositionChangedSinceDragStart:!0,startClientPosition:r.uiTouch.startClientPosition,currentClientPosition:e}}}if(null!==r.uiTouch&&(r.uiTouch.kind===nt.DropdownMenuScroll||r.uiTouch.kind===nt.DropdownMenuChoice)&&null!==r.dropdownMenu){const n=Nn({menu:r.dropdownMenu,editorProps:{...t,state:r}}),o=Ue(e,r.uiTouch.startClientPosition),i=He(r.dropdownMenu.scroll,o),a=-Math.max(0,Math.max(...n.choiceSpecs.map((e=>e.rbox.dimensions.width)))-(n.rbox.dimensions.width-2*t.config.sizing.blockDropdownMenuBorder)),s=n.choiceSpecs[n.choiceSpecs.length-1].rbox.topLeft.y+n.choiceSpecs[n.choiceSpecs.length-1].rbox.dimensions.height-n.choiceSpecs[0].rbox.topLeft.y,l=-Math.max(0,s-n.rbox.dimensions.height),c={x:i.x>0?i.x:i.x<a?i.x-a:0,y:i.y>0?i.y:i.y<l?i.y-l:0};r={...r,uiTouch:{kind:nt.DropdownMenuScroll,startClientPosition:He(r.uiTouch.startClientPosition,c),currentClientPosition:e}}}return r={...r,cursor:Wn(e,this.props.config.componentInstanceUid,r)},r}))}onWindowTouchEnd(e){this.onWindowPointerUp({x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY})}onWindowMouseUp(e){this.onWindowPointerUp({x:e.clientX,y:e.clientY})}onWindowPointerUp(e){const{props:t}=this;t.setState((n=>{let r=n;if(null!==r.canvas.scrollInProgress&&(r={...r,canvas:{...r.canvas,scroll:He(r.canvas.scroll,Ue(r.canvas.scrollInProgress.currentClientPosition,r.canvas.scrollInProgress.startClientPosition)),scrollInProgress:null}}),null!==r.palette.scrollInProgress&&(r={...r,palette:{...r.palette,scroll:He(r.palette.scroll,Ue(r.palette.scrollInProgress.currentClientPosition,r.palette.scrollInProgress.startClientPosition)),scrollInProgress:null}}),null===r.uiTouch||r.uiTouch.kind!==nt.BlockDrag||r.uiTouch.hasPositionChangedSinceDragStart||(r={...r,uiTouch:null}),null!==r.uiTouch&&r.uiTouch.kind===nt.BlockDrag){const e=hn(t,r.uiTouch);r={...r,canvas:{...r.canvas,items:yn({editorProps:t,canvasItems:r.canvas.items,draggeeSpec:e,draggeeOriginalAddress:r.uiTouch.draggeeOriginalAddress,insertionAddress:r.uiTouch.insertionMarkAddress})},uiTouch:null}}if(null!==r.uiTouch&&r.uiTouch.kind===nt.Literal&&r.uiTouch.literalAddress[0]!==ot&&(r={...r,uiTouch:null}),null!==r.uiTouch&&r.uiTouch.kind===nt.Dropdown&&r.uiTouch.dropdownAddress[0]!==ot&&(r={...r,uiTouch:null}),null!==r.uiTouch&&r.uiTouch.kind===nt.Literal&&r.uiTouch.literalAddress[0]===ot){const{literalAddress:e}=r.uiTouch,n=function(e,t){return nn(un(e)[Jt(t[1])],t.slice(2,-2)).blockSpecs[0]}({...t,state:r},e).block,o=Jt(e[e.length-1]),i=n.args.expressions[o];if(!i.isLiteral)throw new Error("state.uiTouch.literalAddress points to a non-literal node.");r={...r,uiTouch:null,literalEditor:{literalAddress:e,literalSource:i.source}}}if(null!==r.uiTouch&&r.uiTouch.kind===nt.Dropdown&&r.uiTouch.dropdownAddress[0]===ot){const{dropdownAddress:e}=r.uiTouch,n=Rn({...t,state:r},e).block,o=Jt(e[e.length-1]),i=n.args.dropdowns[o],a=t.config.blockDefs[n.kind].signature.filter((e=>e.kind===et.Dropdown))[o].choices;r={...r,uiTouch:null,dropdownMenu:{dropdownAddress:e,value:i,choices:a,scroll:{x:0,y:0}}}}if(null!==r.uiTouch&&r.uiTouch.kind===nt.DropdownMenuScroll&&(null!==r.dropdownMenu&&(r={...r,dropdownMenu:{...r.dropdownMenu,scroll:He(r.dropdownMenu.scroll,Ue(r.uiTouch.currentClientPosition,r.uiTouch.startClientPosition))}}),r={...r,uiTouch:null}),null!==r.uiTouch&&r.uiTouch.kind===nt.DropdownMenuChoice){if(null!==r.dropdownMenu){const{dropdownAddress:e}=r.dropdownMenu,t=r.dropdownMenu.choices[r.uiTouch.choiceIndex];r={...r,literalEditor:null,dropdownMenu:null,canvas:zn(r.canvas,e,t)}}r={...r,uiTouch:null}}return r={...r,cursor:Wn(e,this.props.config.componentInstanceUid,r)},r}))}onBlockCanvasBackgroundPointerDown(e){this.props.setState((t=>({...t,literalEditor:null,dropdownMenu:null,canvas:{...t.canvas,scrollInProgress:{startClientPosition:e,currentClientPosition:e}}})))}onBlockPaletteBackgroundPointerDown(e){this.props.setState((t=>({...t,literalEditor:null,dropdownMenu:null,palette:{...t.palette,scrollInProgress:{startClientPosition:e,currentClientPosition:e}}})))}onBlockPointerDown(e,t){this.props.setState((n=>{let r=n;return r={...r,literalEditor:null,dropdownMenu:null},(t[0]===it||t[0]===ot&&Un(e,this.props.config.componentInstanceUid))&&(r={...r,uiTouch:{kind:nt.BlockDrag,hasPositionChangedSinceDragStart:!1,draggeeOriginalAddress:t,insertionMarkAddress:null,startClientPosition:e,currentClientPosition:e}}),r={...r,cursor:Wn(e,this.props.config.componentInstanceUid,r)},r}))}onLiteralPointerDown(e,t){this.props.setState((n=>{let r=n;return r={...r,literalEditor:null,dropdownMenu:null},r={...r,uiTouch:{kind:nt.Literal,literalAddress:t,startClientPosition:e}},r={...r,cursor:Wn(e,this.props.config.componentInstanceUid,r)},r}))}onDropdownPointerDown(e,t){this.props.setState((n=>{let r=n;return r={...r,literalEditor:null,dropdownMenu:null},(t[0]===it||t[0]===ot&&Un(e,this.props.config.componentInstanceUid))&&(r={...r,uiTouch:{kind:nt.Dropdown,dropdownAddress:t,startClientPosition:e}}),r={...r,cursor:Wn(e,this.props.config.componentInstanceUid,r)},r}))}onDropdownMenuChoicePointerDown(e,t){this.props.setState((n=>{let r=n;if(null===r.dropdownMenu)throw new Error("Impossible: a dropdown menu choice was touched, but there is no dropdown menu.");return r={...r,uiTouch:{kind:nt.DropdownMenuChoice,choiceIndex:t,startClientPosition:e}},r}))}}function bt(e,t){return{items:e.items.map(((e,n)=>({position:e.position,content:yt(e.content,[ot,n],t)}))),scroll:e.scroll,scrollInProgress:e.scrollInProgress}}function yt(e,t,n){return e.map(((e,r)=>kt(e,t.concat([r]),n)))}function kt(e,t,n){return{isLiteral:e.isLiteral,kind:e.kind,args:{expressions:e.args.expressions.map(((e,r)=>{const o=t.concat([lt,r]);return In(o,n.literalAddress)?{isLiteral:!0,source:n.literalSource}:e.isLiteral?e:kt(e,o,n)})),dropdowns:e.args.dropdowns,sequences:e.args.sequences.map(((e,r)=>yt(e,t.concat([ct,r]),n)))}}}function wt(e){if(!function(e){const{r:t,g:n,b:r,a:o}=e;return Number.isInteger(t)&&0<=t&&t<=255&&Number.isInteger(n)&&0<=n&&n<=255&&Number.isInteger(r)&&0<=r&&r<=255&&Number.isInteger(o)&&0<=o&&o<=255}(e))throw new Error("Cannot stringify color because it is invalid. color: ".concat(JSON.stringify(e),"."));return"#"+xt(e.r.toString(16),2)+xt(e.g.toString(16),2)+xt(e.b.toString(16),2)+xt(e.a.toString(16),2)}function xt(e,t){if(!Number.isInteger(t))throw new Error("Cannot leftpad because desiredLength is not an integer. desiredLength: ".concat(t,"."));if(e.length>t)throw new Error("Cannot leftpad because string is too long to pad. desiredLength: ".concat(t,". Actual length: ").concat(e.length,". String: ").concat(JSON.stringify(e)));return"0".repeat(t-e.length)+e}function St(e){let{spec:t,editor:n}=e;const{colors:r}=n.props.config,o=t.address[0]===ut?{primary:r.commandInsertionMark,secondary:gt,tertiary:gt}:t.isUnreachable?r.unreachableBlocks[t.block.kind]:r.blocks[t.block.kind],i=n.props.config.blockDefs[t.block.kind].kind===$e.Command?(0,Ze.jsx)(Lt,{teeth:t.teeth,editorSizing:n.props.config.sizing,outerColor:o.tertiary,innerColor:o.primary}):(0,Ze.jsx)(It,{rbox:t.rbox,editorSizing:n.props.config.sizing,outerColor:o.tertiary,innerColor:o.primary}),a=t.labelSpecs.map(((e,t)=>(0,Ze.jsx)("text",{x:e.rbox.topLeft.x,y:e.rbox.topLeft.y,fontSize:n.props.config.sizing.blockLabelTextSizePx,fontFamily:n.props.config.fonts.blockLabelFont,dominantBaseline:"middle",fill:wt(n.props.config.colors.blockLabelText),children:e.text},t))),s=t.dropdownSpecs.map(((e,t)=>(0,Ze.jsx)(Mt,{spec:e,editor:n},t)));return(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsxs)("g",{"data-touch-role":(l=t.address,pt.blockAddressPrefix+l.map(on).join("_")),children:[i,a]}),s,t.subexpressionSpecs.map((e=>e.kind===tt.Block?(0,Ze.jsx)(St,{spec:e,editor:n},e.address.map(on).join("_")):(0,Ze.jsx)(Rt,{spec:e,editor:n},e.address.map(on).join("_")))),t.subsequenceSpecs.map((e=>(0,Ze.jsx)(Ot,{spec:e,editor:n},e.address.map(on).join("_"))))]});var l}function Lt(e){let{teeth:t,editorSizing:n,outerColor:r,innerColor:o}=e;if(0===t.length)throw new Error("Attemped to render a CommandBlockBody with no teeth.");const i=function(e,t){if(0===e.length)throw new Error("Called getCommandBlockOuterBodyPath with an empty `teeth` argument.");const n=t.blockBorderRadius,r=n+t.blockBorder;let o="M".concat(e[0].rbox.topLeft.x+r," ").concat(e[0].rbox.topLeft.y);for(let i=0;i<e.length;++i){if(i===e.length-1){o+="\n\n"+Et(e,i,t),o+="\n\n"+Tt(e,i,t);break}o+="\n\n"+Et(e,i,t),o+="\n\n"+At(e,i,t)}return o}(t,n),a=function(e,t){if(0===e.length)throw new Error("Called getCommandBlockInnerBodyPath with an empty `teeth` argument.");const n=t.blockBorder,r=t.blockBorderRadius;let o="M".concat(e[0].rbox.topLeft.x+n+r," ").concat(e[0].rbox.topLeft.y+n);for(let i=0;i<e.length;++i){if(i===e.length-1){o+="\n\n"+Ct(e,i,t),o+="\n\n"+Bt(e,i,t);break}o+="\n\n"+Ct(e,i,t),o+="\n\n"+Pt(e,i,t)}return o}(t,n);return(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)("path",{d:i,fill:wt(r)}),(0,Ze.jsx)("path",{d:a,fill:wt(o)})]})}function Et(e,t,n){return function(e,t,n){const r=e[t];if(!r.hasFemaleSocket)return"";const o=r.rbox.topLeft.x,i=r.rbox.topLeft.y,a=Vt(n),s=n.blockBorderRadius,l=s+n.blockBorder,c=0===t?0:n.commandSequenceArgIndent-n.blockBorder;return"L".concat(o+c+a.ofTLs.x," ").concat(i+a.ofTLs.y,"\n\n    A").concat(l," ").concat(l," 0 0 1 ").concat(o+c+a.ofTLe.x," ").concat(i+a.ofTLe.y,"\n\n    L").concat(o+c+a.ofBLs.x," ").concat(i+a.ofBLs.y,"\n\n    A").concat(s," ").concat(s," 0 0 0 ").concat(o+c+a.ofBLe.x," ").concat(i+a.ofBLe.y,"\n\n    L").concat(o+c+a.ofBRs.x," ").concat(i+a.ofBRs.y,"\n\n    A").concat(s," ").concat(s," 0 0 0 ").concat(o+c+a.ofBRe.x," ").concat(i+a.ofBRe.y,"\n\n    L").concat(o+c+a.ofTRs.x," ").concat(i+a.ofTRs.y,"\n\n    A").concat(l," ").concat(l," 0 0 1 ").concat(o+c+a.ofTRe.x," ").concat(i+a.ofTRe.y)}(e,t,n)+"\n\n"+function(e,t,n){const r=e[t],o=r.rbox.topLeft.x,i=r.rbox.topLeft.y,a=r.rbox.dimensions.width,s=r.rbox.dimensions.height,l=n.blockBorderRadius,c=l+n.blockBorder;return"L".concat(o+a-c," ").concat(i,"\n      \n  A").concat(c," ").concat(c," 0 0 1 ").concat(o+a," ").concat(i+c,"\n\n  L").concat(o+a," ").concat(i+s-c,"\n\n  A").concat(c," ").concat(c," 0 0 1 ").concat(o+a-c," ").concat(i+s)}(e,t,n)+"\n\n"+function(e,t,n){const r=e[t];if(!r.hasMaleSocket)return"";const o=r.rbox.topLeft.x,i=r.rbox.topLeft.y,a=r.rbox.dimensions.height,s=Vt(n),l=n.blockBorderRadius,c=l+n.blockBorder,u=a-n.blockBorder,d=t===e.length-1?0:n.commandSequenceArgIndent-n.blockBorder;return"L".concat(o+d+s.ifTRe.x," ").concat(i+s.ifTRe.y+u,"\n\n  A").concat(l," ").concat(l," 0 0 0 ").concat(o+d+s.ifTRs.x," ").concat(i+s.ifTRs.y+u,"\n\n  L").concat(o+d+s.ifBRe.x," ").concat(i+s.ifBRe.y+u,"\n\n  A").concat(c," ").concat(c," 0 0 1 ").concat(o+d+s.ifBRs.x," ").concat(i+s.ifBRs.y+u,"\n\n  L").concat(o+d+s.ifBLe.x," ").concat(i+s.ifBLe.y+u,"\n\n  A").concat(c," ").concat(c," 0 0 1 ").concat(o+d+s.ifBLs.x," ").concat(i+s.ifBLs.y+u,"\n\n  L").concat(o+d+s.ifTLe.x," ").concat(i+s.ifTLe.y+u,"\n\n  A").concat(l," ").concat(l," 0 0 0 ").concat(o+d+s.ifTLs.x," ").concat(i+s.ifTLs.y+u)}(e,t,n)}function Ct(e,t,n){return function(e,t,n){const r=e[t];if(!r.hasFemaleSocket)return"";const o=r.rbox.topLeft.x,i=r.rbox.topLeft.y,a=Vt(n),s=n.blockBorderRadius,l=s+n.blockBorder,c=0===t?0:n.commandSequenceArgIndent-n.blockBorder;return"L".concat(o+c+a.ifTLs.x," ").concat(i+a.ifTLs.y,"\n\n    A").concat(s," ").concat(s," 0 0 1 ").concat(o+c+a.ifTLe.x," ").concat(i+a.ifTLe.y,"\n\n    L").concat(o+c+a.ifBLs.x," ").concat(i+a.ifBLs.y,"\n\n    A").concat(l," ").concat(l," 0 0 0 ").concat(o+c+a.ifBLe.x," ").concat(i+a.ifBLe.y,"\n\n    L").concat(o+c+a.ifBRs.x," ").concat(i+a.ifBRs.y,"\n\n    A").concat(l," ").concat(l," 0 0 0 ").concat(o+c+a.ifBRe.x," ").concat(i+a.ifBRe.y,"\n\n    L").concat(o+c+a.ifTRs.x," ").concat(i+a.ifTRs.y,"\n\n    A").concat(s," ").concat(s," 0 0 1 ").concat(o+c+a.ifTRe.x," ").concat(i+a.ifTRe.y)}(e,t,n)+"\n\n"+function(e,t,n){const r=e[t],o=r.rbox.topLeft.x,i=r.rbox.topLeft.y,a=r.rbox.dimensions.width,s=r.rbox.dimensions.height,l=n.blockBorder,c=n.blockBorderRadius;return"L".concat(o+a-l-c," ").concat(i+l,"\n      \n  A").concat(c," ").concat(c," 0 0 1 ").concat(o+a-l," ").concat(i+l+c,"\n\n  L").concat(o+a-l," ").concat(i+s-l-c,"\n\n  A").concat(c," ").concat(c," 0 0 1 ").concat(o+a-l-c," ").concat(i+s-l)}(e,t,n)+"\n\n"+function(e,t,n){const r=e[t];if(!r.hasMaleSocket)return"";const o=r.rbox.topLeft.x,i=r.rbox.topLeft.y,a=r.rbox.dimensions.height,s=Vt(n),l=n.blockBorderRadius,c=l+n.blockBorder,u=a-n.blockBorder,d=t===e.length-1?0:n.commandSequenceArgIndent-n.blockBorder;return"L".concat(o+d+s.ofTRe.x," ").concat(i+s.ofTRe.y+u,"\n\n  A").concat(c," ").concat(c," 0 0 0 ").concat(o+d+s.ofTRs.x," ").concat(i+s.ofTRs.y+u,"\n\n  L").concat(o+d+s.ofBRe.x," ").concat(i+s.ofBRe.y+u,"\n\n  A").concat(l," ").concat(l," 0 0 1 ").concat(o+d+s.ofBRs.x," ").concat(i+s.ofBRs.y+u,"\n\n  L").concat(o+d+s.ofBLe.x," ").concat(i+s.ofBLe.y+u,"\n\n  A").concat(l," ").concat(l," 0 0 1 ").concat(o+d+s.ofBLs.x," ").concat(i+s.ofBLs.y+u,"\n\n  L").concat(o+d+s.ofTLe.x," ").concat(i+s.ofTLe.y+u,"\n\n  A").concat(c," ").concat(c," 0 0 0 ").concat(o+d+s.ofTLs.x," ").concat(i+s.ofTLs.y+u)}(e,t,n)}function Tt(e,t,n){const r=e[t],o=r.rbox.topLeft.x,i=r.rbox.topLeft.y,a=r.rbox.dimensions.height,s=e[0],l=s.rbox.topLeft.x,c=s.rbox.topLeft.y,u=n.blockBorderRadius+n.blockBorder;return"L".concat(o+u," ").concat(i+a,"\n    \n    A").concat(u," ").concat(u," 0 0 1 ").concat(o," ").concat(i+a-u,"\n    \n    L").concat(l," ").concat(c+u,"\n    \n    A").concat(u," ").concat(u," 0 0 1 ").concat(l+u," ").concat(c)}function Bt(e,t,n){const r=e[t],o=r.rbox.topLeft.x,i=r.rbox.topLeft.y,a=r.rbox.dimensions.height,s=e[0],l=s.rbox.topLeft.x,c=s.rbox.topLeft.y,u=n.blockBorder,d=n.blockBorderRadius;return"L".concat(o+u+d," ").concat(i+a-u,"\n    \n    A").concat(d," ").concat(d," 0 0 1 ").concat(o+u," ").concat(i+a-u-d,"\n    \n    L").concat(l+u," ").concat(c+u+d,"\n    \n    A").concat(d," ").concat(d," 0 0 1 ").concat(l+u+d," ").concat(c+u)}function At(e,t,n){if(t>=e.length-1)throw new Error("Called get_omTLe_to_nextToothBlockTLe_assumingSequenceArgIndent_path when there was no next tooth.");const r=e[t],o=r.rbox.topLeft.x,i=r.rbox.topLeft.y,a=r.rbox.dimensions.height,s=e[t+1].rbox.topLeft.y,l=n.blockBorderRadius,c=n.commandSequenceArgIndent;return"L".concat(o+c+l," ").concat(i+a,"\n    \n    A").concat(l," ").concat(l," 0 0 0 ").concat(o+c," ").concat(i+a+l,"\n    \n    L").concat(o+c," ").concat(s-l,"\n    \n    A").concat(l," ").concat(l," 0 0 0 ").concat(o+c+l," ").concat(s)}function Pt(e,t,n){if(t>=e.length-1)throw new Error("Called get_imTLe_to_nextToothBlockTLe_assumingSequenceArgIndent_path when there was no next tooth.");const r=e[t],o=r.rbox.topLeft.x,i=r.rbox.topLeft.y,a=r.rbox.dimensions.height,s=e[t+1].rbox.topLeft.y,l=n.blockBorder,c=n.blockBorderRadius+l,u=n.commandSequenceArgIndent;return"L".concat(o+u-l+c," ").concat(i+a-l,"\n    \n    A").concat(c," ").concat(c," 0 0 0 ").concat(o+u-l," ").concat(i+a-l+c,"\n    \n    L").concat(o+u-l," ").concat(s+l-c,"\n    \n    A").concat(c," ").concat(c," 0 0 0 ").concat(o+u-l+c," ").concat(s+l)}function It(e){let{rbox:t,editorSizing:n,outerColor:r,innerColor:o}=e;const{outerPath:i,innerPath:a}=_t(t,n.blockBorder);return(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)("path",{d:i,fill:wt(r)}),(0,Ze.jsx)("path",{d:a,fill:wt(o)})]})}function _t(e,t){const n=Dt(e),{x:r,y:o}=e.topLeft,{width:i,height:a}=e.dimensions;return{outerPath:n,innerPath:Dt({topLeft:{x:r+t,y:o+t},dimensions:{width:i-2*t,height:a-2*t}})}}function Dt(e){const{x:t,y:n}=e.topLeft,{width:r,height:o}=e.dimensions,i=o/2;if(o>r)throw new Error("The width must be greater than or equal to the height.");return"M".concat(t+i," ").concat(n,"\n\n  L").concat(t+r-i," ").concat(n,"\n\n  A").concat(i," ").concat(i," 0 0 1 ").concat(t+r-i," ").concat(n+o,"\n  \n  L").concat(t+i," ").concat(n+o,"\n  \n  A").concat(i," ").concat(i," 0 0 1 ").concat(t+i," ").concat(n)}function Mt(e){let{spec:t,editor:n}=e;const r=n.props,{sizing:o,fonts:i,colors:a,dropdownTexts:s}=r.config,{x:l,y:c}=t.rbox.topLeft,u=t.rbox.dimensions,d=t.isUnreachable?a.unreachableBlocks[t.parentBlockKind]:a.blocks[t.parentBlockKind],{outerPath:h,innerPath:f}=_t(t.rbox,o.blockDropdownBorder),p=.5*t.rbox.dimensions.height,m=s[t.value],g=n.props.measureText(m,i.blockDropdownFont,o.blockDropdownTextSizePx),v=n.props.measureText(ft,i.blockDropdownFont,o.blockDropdownTextSizePx),b=Math.max(g.width,v.width),y=(Math.max(g.height,v.height),o.blockDropdownArrowWidth/Ye.width),k=_t({topLeft:Ue(t.rbox.topLeft,{x:o.queryInsertionMarkHaloRadius,y:o.queryInsertionMarkHaloRadius}),dimensions:{width:t.rbox.dimensions.width+2*o.queryInsertionMarkHaloRadius,height:t.rbox.dimensions.height+2*o.queryInsertionMarkHaloRadius}},0);return(0,Ze.jsxs)("g",{"data-touch-role":(w=t.address,pt.dropdownAddressPrefix+w.map(on).join("_")),children:[t.hasPendingEditMark&&(0,Ze.jsx)("path",{d:k.outerPath,fill:wt(a.queryInsertionMarkHalo)}),(0,Ze.jsx)("path",{d:h,fill:wt(d.tertiary)}),(0,Ze.jsx)("path",{d:f,fill:wt(d.secondary)}),(0,Ze.jsx)("text",{x:l+o.blockDropdownHorizontalPadding+p,y:c+.5*u.height,fontSize:o.blockDropdownTextSizePx,fontFamily:i.blockDropdownFont,dominantBaseline:"middle",fill:wt(a.blockDropdownText),children:m}),(0,Ze.jsx)("path",{transform:"scale(".concat(y,") translate(").concat(1/y*(l+o.blockDropdownHorizontalPadding+p+b+o.blockDropdownArrowLeftMargin)," ").concat(1/y*(c+.5*u.height-.5*y*Ye.height),")"),d:Ye.path,fill:wt(n.props.config.colors.blockDropdownText)})]});var w}function Rt(e){let{spec:t,editor:n}=e;const r=n.props,{sizing:o,colors:i,fonts:a}=r.config,{x:s,y:l}=t.rbox.topLeft,c=t.rbox.dimensions,u=_t({topLeft:Ue(t.rbox.topLeft,{x:o.queryInsertionMarkHaloRadius,y:o.queryInsertionMarkHaloRadius}),dimensions:{width:t.rbox.dimensions.width+2*o.queryInsertionMarkHaloRadius,height:t.rbox.dimensions.height+2*o.queryInsertionMarkHaloRadius}},0),d=_t(t.rbox,o.blockLiteralBorder),h=.5*t.rbox.dimensions.height,f=t.isUnreachable?i.unreachableBlocks[t.parentBlockKind]:i.blocks[t.parentBlockKind];return(0,Ze.jsxs)("g",{"data-touch-role":(p=t.address,pt.literalAddressPrefix+p.map(on).join("_")),children:[t.hasQueryInsertionMark&&(0,Ze.jsx)("path",{d:u.outerPath,fill:wt(i.queryInsertionMarkHalo)}),(0,Ze.jsx)("path",{d:d.outerPath,fill:wt(f.tertiary)}),(0,Ze.jsx)("path",{d:d.innerPath,fill:wt(i.blockLiteralBackground)}),(0,Ze.jsx)("text",{x:s+o.blockLiteralHorizontalPadding+h,y:l+.5*c.height,fontSize:o.blockLiteralTextSizePx,fontFamily:a.blockLiteralFont,dominantBaseline:"middle",fill:wt(i.blockLiteralText),children:t.source})]});var p}function Ot(e){let{spec:t,editor:n}=e;return(0,Ze.jsx)(Ze.Fragment,{children:t.blockSpecs.map((e=>(0,Ze.jsx)(St,{spec:e,editor:n},e.address.map(on).join("_"))))})}function Nt(e){let{editorProps:t,item:n,address:r,insertionMark:o,draggeeOriginalAddress:i,hasDragPositionChangedSinceDragStart:a,dropdownMenuDropdownAddress:s}=e;const{position:l,content:c}=n;return zt({editorProps:t,position:l,sequence:c,address:r,insertionMark:o,draggeeOriginalAddress:i,hasDragPositionChangedSinceDragStart:a,dropdownMenuDropdownAddress:s,isUnreachable:!Yt(t.config.blockDefs,c)})}function zt(e){let{editorProps:t,position:n,sequence:r,address:o,insertionMark:i,draggeeOriginalAddress:a,hasDragPositionChangedSinceDragStart:s,dropdownMenuDropdownAddress:l,isUnreachable:c}=e;const{sizing:u}=t.config,d=null===a?null:Qt(o,a),h=null!==d&&1===d.length&&s?r.slice(0,Jt(d[0])):r,f=null===i?null:Qt(o,i.address),p={x:n.x,y:n.y+(null!==i&&3===i.address.length&&null!==f&&1===f.length&&0===f[0]?-(Gt(t)-u.blockBorder):0)},m=null!==f&&1===f.length&&Jt(f[0])<=h.length?h.slice(0,Jt(f[0])).concat([ht],h.slice(Jt(f[0]))):h,g=[];let v=p.y,b=0;for(let k=0;k<m.length;++k){const e=m[k];if(e===ht){if(null===i)throw new Error("Impossible: insertionMark is null but reached command insertion mark sentinel.");const e=Ft({editorProps:t,position:{x:p.x,y:v},block:Xt(i.draggee,t.config.blockDefs),address:[ut],insertionMark:i,draggeeOriginalAddress:a,hasDragPositionChangedSinceDragStart:s,dropdownMenuDropdownAddress:l,isUnreachable:c});g.push(e),v+=e.rbox.dimensions.height-u.blockBorder;continue}const n=Ft({editorProps:t,position:{x:p.x,y:v},block:e,address:o.concat([b]),insertionMark:i,draggeeOriginalAddress:a,hasDragPositionChangedSinceDragStart:s,dropdownMenuDropdownAddress:l,isUnreachable:c});g.push(n),++b,v+=n.rbox.dimensions.height-u.blockBorder}const y=0===g.length?{width:0,height:Kt(t)}:{width:Math.max(...g.map((e=>e.rbox.dimensions.width))),height:v-p.y};return{kind:tt.BlockSequence,sequence:r,address:o,rbox:{topLeft:{x:p.x,y:p.y},dimensions:y},blockSpecs:g}}function Ft(e){let{editorProps:t,position:n,block:r,address:o,insertionMark:i,draggeeOriginalAddress:a,hasDragPositionChangedSinceDragStart:s,dropdownMenuDropdownAddress:l,isUnreachable:c}=e;const u=t.config.blockDefs[r.kind];return u.kind===$e.Command?Ht({editorProps:t,position:n,block:r,blockDef:u,address:o,insertionMark:i,draggeeOriginalAddress:a,hasDragPositionChangedSinceDragStart:s,dropdownMenuDropdownAddress:l,isUnreachable:c}):function(e){let{editorProps:t,position:n,block:r,blockDef:o,address:i,insertionMark:a,draggeeOriginalAddress:s,hasDragPositionChangedSinceDragStart:l,dropdownMenuDropdownAddress:c,isUnreachable:u}=e;const{sizing:d,fonts:h}=t.config,f=null===s?null:Qt(i,s),p=qt(o,r),m=[],g=[],v=[];let b=n.y;const y=function(e,t,n,r,o,i){const{sizing:a,fonts:s}=i.config;let l=0;const c=e.map((e=>{if(e.kind===rt.Label)return i.measureText(e.text,s.blockLabelFont,a.blockLabelTextSizePx);if(e.kind===rt.Dropdown)return Wt(e.value,i);if(e.kind===rt.Literal)return++l,jt(e.source,i);if(e.kind===rt.Block){const a=null===n?null:Qt(t,n);if(null!==a&&2===a.length&&a[0]===lt&&a[1]===l&&r)return++l,jt("",i);const s=[at],c=null,u=!1,d=Ft({editorProps:i,position:{x:0,y:0},block:e.block,address:s,insertionMark:c,draggeeOriginalAddress:n,hasDragPositionChangedSinceDragStart:r,dropdownMenuDropdownAddress:o,isUnreachable:u});return++l,d.rbox.dimensions}if(e.kind===rt.CommandSequence)throw new Error("Impossible: A query should never contain a command sequence.");return e})),u=(g=c.map((e=>e.width)),g.reduce(((e,t)=>e+t),0)),d=Math.max(...c.map((e=>e.height)))+2*a.queryBlockVerticalPadding,h=.5*d,f=a.interBlockPartHorizontalMargin*(c.length-1),p=e[0].kind===rt.Label?h:a.queryBlockVerticalPadding,m=e[e.length-1].kind===rt.Label?h:a.queryBlockVerticalPadding;var g;return{width:u+f+p+m,height:d}}(p,i,s,l,c,t),k=.5*y.height,w=p[0].kind===rt.Label?k:d.queryBlockVerticalPadding;let x=n.x+w,S=0,L=0;for(const C of p)if(C.kind!==rt.Label)if(C.kind!==rt.Dropdown)if(C.kind!==rt.Literal)if(C.kind!==rt.Block);else{if(null!==f&&2===f.length&&f[0]===lt&&f[1]===L&&l){const e=jt("",t),n=i.concat([lt,L]);v.push({kind:tt.Literal,parentBlockKind:r.kind,source:"",hasQueryInsertionMark:null!==a&&In(n,a.address),address:n,isUnreachable:u,rbox:{topLeft:{x:x,y:b+.5*y.height-.5*e.height},dimensions:e}}),++L,x+=e.width+d.interBlockPartHorizontalMargin;continue}const e=Ft({editorProps:t,position:{x:0,y:0},block:C.block,address:i.concat([lt,L]),insertionMark:a,draggeeOriginalAddress:s,hasDragPositionChangedSinceDragStart:l,dropdownMenuDropdownAddress:c,isUnreachable:u}),n=Ft({editorProps:t,position:{x:x,y:b+.5*(y.height-e.rbox.dimensions.height)},block:C.block,address:i.concat([lt,L]),insertionMark:a,draggeeOriginalAddress:s,hasDragPositionChangedSinceDragStart:l,dropdownMenuDropdownAddress:c,isUnreachable:u});v.push(n),x+=n.rbox.dimensions.width+d.interBlockPartHorizontalMargin,++L}else{const e=jt(C.source,t),n=i.concat([lt,L]);v.push({kind:tt.Literal,parentBlockKind:r.kind,source:C.source,address:n,isUnreachable:u,hasQueryInsertionMark:null!==a&&In(n,a.address),rbox:{topLeft:{x:x,y:b+.5*y.height-.5*e.height},dimensions:e}}),++L,x+=e.width+d.interBlockPartHorizontalMargin}else{const e=Wt(C.value,t),n=i.concat([st,S]);g.push({kind:tt.Dropdown,parentBlockKind:r.kind,value:C.value,hasPendingEditMark:null!==c&&In(n,c),address:n,isUnreachable:u,rbox:{topLeft:{x:x,y:b+.5*y.height-.5*e.height},dimensions:e}}),++S,x+=e.width+d.interBlockPartHorizontalMargin}else{const e=t.measureText(C.text,h.blockLabelFont,d.blockLabelTextSizePx);m.push({kind:tt.Label,text:C.text,rbox:{topLeft:{x:x,y:b+.5*y.height},dimensions:e}}),x+=e.width+d.interBlockPartHorizontalMargin}const E={topLeft:n,dimensions:y};return{kind:tt.Block,block:r,address:i,isUnreachable:u,rbox:E,teeth:[],labelSpecs:m,dropdownSpecs:g,subexpressionSpecs:v,subsequenceSpecs:[]}}({editorProps:t,position:n,block:r,blockDef:u,address:o,insertionMark:i,draggeeOriginalAddress:a,hasDragPositionChangedSinceDragStart:s,dropdownMenuDropdownAddress:l,isUnreachable:c})}function Ht(e){let{editorProps:t,position:n,block:r,blockDef:o,address:i,insertionMark:a,draggeeOriginalAddress:s,hasDragPositionChangedSinceDragStart:l,dropdownMenuDropdownAddress:c,isUnreachable:u}=e;if(1===i.length&&i[0]===ut){const e={topLeft:n,dimensions:{width:Ht({editorProps:t,position:n,block:r,blockDef:o,address:[ot,0],insertionMark:a,draggeeOriginalAddress:s,hasDragPositionChangedSinceDragStart:l,dropdownMenuDropdownAddress:c,isUnreachable:u}).rbox.dimensions.width,height:Gt(t)}},d=[{rbox:e,hasFemaleSocket:o.hasFemaleSocket,hasMaleSocket:o.hasMaleSocket}];return{kind:tt.Block,block:r,address:i,isUnreachable:u,rbox:e,teeth:d,labelSpecs:[],dropdownSpecs:[],subexpressionSpecs:[],subsequenceSpecs:[]}}const{sizing:d,blockDefs:h}=t.config,f=n.x+Vt(d).ofTRe.x,p=null===s?null:Qt(i,s),m=qt(o,r),g=function(e){const t=[],n=[];for(const r of e){if(r.kind===rt.Label||r.kind===rt.Dropdown||r.kind===rt.Literal||r.kind===rt.Block){n.push(r);continue}if(r.kind===rt.CommandSequence){t.push(n.slice()),n.splice(0,n.length);continue}}return t.push(n.slice()),t}(m),v=m.filter((e=>e.kind===rt.CommandSequence)),b=[],y=[],k=[],w=[],x=[];let S=n.y,L=null,E=0,C=0,T=0;for(let D=0;D<g.length;++D){const e=g[D],m=Ut(e,i,T,s,l,c,t);let B=n.x+d.interBlockPartHorizontalMargin;for(const n of e)if(n.kind!==rt.Label)if(n.kind!==rt.Dropdown)if(n.kind!==rt.Literal)if(n.kind!==rt.Block);else{if(B=Math.max(B,f),null!==p&&2===p.length&&p[0]===lt&&p[1]===T&&l){const e=jt("",t),n=i.concat([lt,T]);w.push({kind:tt.Literal,parentBlockKind:r.kind,source:"",hasQueryInsertionMark:null!==a&&In(n,a.address),address:n,isUnreachable:u,rbox:{topLeft:{x:B,y:S+.5*m.height-.5*e.height},dimensions:e}}),++T,B+=e.width+d.interBlockPartHorizontalMargin;continue}const e=Ft({editorProps:t,position:{x:0,y:0},block:n.block,address:i.concat([lt,T]),insertionMark:a,draggeeOriginalAddress:s,hasDragPositionChangedSinceDragStart:l,dropdownMenuDropdownAddress:c,isUnreachable:u}),o=Ft({editorProps:t,position:{x:B,y:S+.5*(m.height-e.rbox.dimensions.height)},block:n.block,address:i.concat([lt,T]),insertionMark:a,draggeeOriginalAddress:s,hasDragPositionChangedSinceDragStart:l,dropdownMenuDropdownAddress:c,isUnreachable:u});w.push(o),B+=o.rbox.dimensions.width+d.interBlockPartHorizontalMargin,++T}else{B=Math.max(B,f);const e=jt(n.source,t),o=i.concat([lt,T]);w.push({kind:tt.Literal,parentBlockKind:r.kind,source:n.source,hasQueryInsertionMark:null!==a&&In(o,a.address),address:o,isUnreachable:u,rbox:{topLeft:{x:B,y:S+.5*m.height-.5*e.height},dimensions:e}}),++T,B+=e.width+d.interBlockPartHorizontalMargin}else{B=Math.max(B,f);const e=Wt(n.value,t),o=i.concat([st,C]);k.push({kind:tt.Dropdown,parentBlockKind:r.kind,value:n.value,hasPendingEditMark:null!==c&&In(o,c),address:o,isUnreachable:u,rbox:{topLeft:{x:B,y:S+.5*m.height-.5*e.height},dimensions:e}}),++C,B+=e.width+d.interBlockPartHorizontalMargin}else{const e=t.measureText(n.text,t.config.fonts.blockLabelFont,t.config.sizing.blockLabelTextSizePx);y.push({kind:tt.Label,text:n.text,rbox:{topLeft:{x:B,y:S+.5*m.height},dimensions:e}}),B+=e.width+d.interBlockPartHorizontalMargin}const A=D===g.length-1;if(b.push({rbox:{topLeft:{x:n.x,y:S},dimensions:{width:m.width,height:Math.max(m.height,Kt(t))}},hasFemaleSocket:null===L?o.hasFemaleSocket:0===L.length||h[L[L.length-1].kind].hasMaleSocket,hasMaleSocket:!A||o.hasMaleSocket}),S+=m.height-d.blockBorder,E<v.length){const e=v[E],r=E;++E;const o=zt({editorProps:t,position:{x:n.x+d.commandSequenceArgIndent-d.blockBorder,y:S},sequence:e.sequence,address:i.concat([ct,r]),insertionMark:a,draggeeOriginalAddress:s,hasDragPositionChangedSinceDragStart:l,dropdownMenuDropdownAddress:c,isUnreachable:u});x.push(o),S+=o.rbox.dimensions.height,L=e.sequence}}const B=b[b.length-1],A=B.rbox.topLeft.y+B.rbox.dimensions.height,P=Math.max(...b.map((e=>e.rbox.dimensions.width))),I={topLeft:n,dimensions:{width:P,height:A-n.y}},_=b.map((e=>({...e,rbox:{...e.rbox,dimensions:{...e.rbox.dimensions,width:P}}})));return{kind:tt.Block,block:r,address:i,isUnreachable:u,rbox:I,teeth:_,labelSpecs:y,dropdownSpecs:k,subexpressionSpecs:w,subsequenceSpecs:x}}function Ut(e,t,n,r,o,i,a){const{sizing:s}=a.config,l=Vt(s).ofTRe.x;let c=n,u=s.commandBlockHorizontalPadding,d=0;for(let f=0;f<e.length;++f){const n=e[f],h=0===f?0:s.interBlockPartHorizontalMargin;if(n.kind===rt.Label){const e=a.measureText(n.text,a.config.fonts.blockLabelFont,a.config.sizing.blockLabelTextSizePx);u+=h+e.width,d=Math.max(d,e.height);continue}if(n.kind===rt.Dropdown){u=Math.max(u,l);const e=Wt(n.value,a);u+=h+e.width,d=Math.max(d,e.height);continue}if(n.kind===rt.Literal){u=Math.max(u,l),++c;const e=jt(n.source,a);u+=h+e.width,d=Math.max(d,e.height);continue}if(n.kind===rt.Block){u=Math.max(u,l);const e=null===r?null:Qt(t,r);if(null!==e&&2===e.length&&e[0]===lt&&e[1]===c&&o){++c;const e=jt("",a);u+=h+e.width,d=Math.max(d,e.height);continue}const s=[at],f=null,p=!1,m=Ft({editorProps:a,position:{x:0,y:0},block:n.block,address:s,insertionMark:f,draggeeOriginalAddress:r,hasDragPositionChangedSinceDragStart:o,dropdownMenuDropdownAddress:i,isUnreachable:p});++c;const{dimensions:g}=m.rbox;u+=h+g.width,d=Math.max(d,g.height);continue}if(n.kind===rt.CommandSequence)throw new Error("Impossible: A tooth should never contain a command sequence.")}const h=Vt(s).ofTRe.x+s.commandSocket.indent;return{width:Math.max(u+s.commandBlockHorizontalPadding,h),height:d+s.commandSocket.height+2*s.commandBlockVerticalPadding}}function Wt(e,t){const{sizing:n,fonts:r,dropdownTexts:o}=t.config,i=o[e],a=t.measureText(i,r.blockDropdownFont,n.blockDropdownTextSizePx),s=t.measureText(ft,r.blockDropdownFont,n.blockDropdownTextSizePx),l=Math.max(a.width,s.width),c=Math.max(a.height,s.height),u={width:l+2*n.blockDropdownHorizontalPadding,height:c+2*n.blockDropdownVerticalPadding},d=n.blockDropdownArrowWidth,h=Ye.height*n.blockDropdownArrowWidth/Ye.width,f={width:d+n.blockDropdownArrowLeftMargin,height:h+n.blockDropdownArrowVerticalMargin};return{width:u.width+f.width+2*(.5*u.height),height:Math.max(u.height,f.height)}}function jt(e,t){const{sizing:n,fonts:r}=t.config,o=t.measureText(e,r.blockDropdownFont,n.blockDropdownTextSizePx),i=t.measureText(ft,r.blockDropdownFont,n.blockDropdownTextSizePx),a=Math.max(o.width,i.width),s=Math.max(o.height,i.height),l={width:a+2*n.blockLiteralHorizontalPadding,height:s+2*n.blockLiteralVerticalPadding};return{width:l.width+2*(.5*l.height),height:l.height}}function qt(e,t){const{dropdowns:n,expressions:r,sequences:o}=t.args,i=[];let a=0,s=0,l=0;for(const c of e.signature){if(c.kind===et.Label){i.push({kind:rt.Label,text:c.text});continue}if(c.kind===et.Dropdown){i.push({kind:rt.Dropdown,value:n[a]}),++a;continue}if(c.kind===et.Expression){const e=r[s];if(++s,e.isLiteral){i.push({kind:rt.Literal,source:e.source});continue}i.push({kind:rt.Block,block:e});continue}if(c.kind===et.CommandSequence){const e=o[l];++l,i.push({kind:rt.CommandSequence,sequence:e});continue}}return i}function Vt(e){const t=e.blockBorder,n=e.commandSocket.minorBase,r=e.commandSocket.majorBase,o=e.commandSocket.height,i=(r-n)/2,a=Math.atan(i/o),s=o/i,{indent:l}=e.commandSocket,c=e.blockBorderRadius+e.blockBorder,u=e.blockBorderRadius,d={x:l,y:0},h={x:l,y:-c},f=He(h,{x:c*Math.cos(a),y:c*Math.sin(a)}),p=He(f,{x:f.y/s,y:-f.y}),m=He(p,{x:o/s,y:-o}),g=He(m,{x:-u/s,y:u}),v=He(g,{x:u/Math.cos(a),y:0}),b=Ue(v,{x:u*Math.cos(a),y:u*Math.sin(a)}),y=He(v,{x:0,y:-u}),k=He(m,{x:n,y:0}),w=Ue(He(k,{x:u/s,y:u}),{x:u/Math.cos(a),y:0}),x=He(w,{x:0,y:-u}),S=He(w,{x:u*Math.cos(a),y:u*-Math.sin(a)}),L=He(p,{x:r,y:0}),E=He(L,Ue(p,d)),C=He(E,{x:0,y:-c}),T=He(C,{x:-c*Math.cos(a),y:c*Math.sin(a)}),B=He(d,{x:0,y:-t}),A=He(h,{x:u*Math.cos(a),y:u*Math.sin(a)}),P=Ue(v,{x:c*Math.cos(a),y:c*Math.sin(a)}),I=He(v,{x:0,y:-c}),_=He(w,{x:0,y:-c}),D=He(w,{x:c*Math.cos(a),y:-c*Math.sin(a)}),M=He(C,{x:-u*Math.cos(a),y:u*Math.sin(a)}),R=He(C,{x:0,y:u});return{ofTLs:We(d),ofTLe:We(f),ofBLs:We(b),ofBLe:We(y),ofBRs:We(x),ofBRe:We(S),ofTRs:We(T),ofTRe:We(E),ifTLs:We(B),ifTLe:We(A),ifBLs:We(P),ifBLe:We(I),ifBRs:We(_),ifBRe:We(D),ifTRs:We(M),ifTRe:We(R)}}function Kt(e){const{sizing:t}=e.config;return 0+t.commandSocket.height+2*t.commandBlockVerticalPadding}function Gt(e){const{sizing:t,fonts:n}=e.config;return e.measureText(ft,n.blockLabelFont,t.blockLabelTextSizePx).height+t.commandSocket.height+2*t.commandBlockVerticalPadding}function Jt(e){if(Number.isInteger(e)&&e>=0)return e;throw new Error("Expected numeric address part (i.e., a non-negative integer) but got the address part: ".concat(String(e),"."))}function Yt(e,t){if(0===t.length)return!1;const n=e[t[0].kind];return n.kind===$e.Command&&n.isEntryPoint}function Qt(e,t){if(e.length>t.length)return null;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return null;return t.slice(e.length)}function Xt(e,t){if(0===e.length)throw new Error("Cannot get insertion mark command for empty command sequence.");const n=e[0],r=t[n.kind];if(r.kind!==$e.Command)throw new Error("Expected top command to be a command block.");return r.hasFemaleSocket?n:e[e.length-1]}function Zt(e,t){const n={topLeft:He(e.rbox.topLeft,t),dimensions:e.rbox.dimensions},r=e.teeth.map((e=>({rbox:{topLeft:He(e.rbox.topLeft,t),dimensions:e.rbox.dimensions},hasFemaleSocket:e.hasFemaleSocket,hasMaleSocket:e.hasMaleSocket}))),o=e.labelSpecs.map((e=>function(e,t){const n={topLeft:He(e.rbox.topLeft,t),dimensions:e.rbox.dimensions};return{kind:tt.Label,text:e.text,rbox:n}}(e,t))),i=e.dropdownSpecs.map((e=>function(e,t){const n={topLeft:He(e.rbox.topLeft,t),dimensions:e.rbox.dimensions};return{kind:tt.Dropdown,parentBlockKind:e.parentBlockKind,value:e.value,hasPendingEditMark:e.hasPendingEditMark,address:e.address,isUnreachable:e.isUnreachable,rbox:n}}(e,t))),a=e.subexpressionSpecs.map((e=>function(e,t){if(e.kind===tt.Literal)return function(e,t){const n={topLeft:He(e.rbox.topLeft,t),dimensions:e.rbox.dimensions};return{kind:tt.Literal,parentBlockKind:e.parentBlockKind,source:e.source,hasQueryInsertionMark:e.hasQueryInsertionMark,address:e.address,isUnreachable:e.isUnreachable,rbox:n}}(e,t);return Zt(e,t)}(e,t))),s=e.subsequenceSpecs.map((e=>$t(e,t)));return{kind:tt.Block,block:e.block,address:e.address,isUnreachable:e.isUnreachable,rbox:n,teeth:r,labelSpecs:o,dropdownSpecs:i,subexpressionSpecs:a,subsequenceSpecs:s}}function $t(e,t){const n={topLeft:He(e.rbox.topLeft,t),dimensions:e.rbox.dimensions},r=e.blockSpecs.map((e=>Zt(e,t)));return{kind:tt.BlockSequence,sequence:e.sequence,address:e.address,rbox:n,blockSpecs:r}}function en(e,t){return{kind:tt.Block,block:e.block,address:t,isUnreachable:!1,rbox:e.rbox,teeth:e.teeth,labelSpecs:e.labelSpecs,dropdownSpecs:e.dropdownSpecs.map(((e,n)=>function(e,t){return{kind:tt.Dropdown,parentBlockKind:e.parentBlockKind,value:e.value,hasPendingEditMark:!1,address:t,isUnreachable:!1,rbox:e.rbox}}(e,t.concat([st,n])))),subexpressionSpecs:e.subexpressionSpecs.map(((e,n)=>function(e,t){if(e.kind===tt.Literal)return function(e,t){return{kind:tt.Literal,parentBlockKind:e.parentBlockKind,source:e.source,hasQueryInsertionMark:e.hasQueryInsertionMark,address:t,isUnreachable:!1,rbox:e.rbox}}(e,t);return en(e,t)}(e,t.concat([lt,n])))),subsequenceSpecs:e.subsequenceSpecs.map(((e,n)=>tn(e,t.concat([ct,n]))))}}function tn(e,t){return{kind:tt.BlockSequence,sequence:e.sequence,address:t,rbox:e.rbox,blockSpecs:e.blockSpecs.map(((e,n)=>en(e,t.concat([n]))))}}function nn(e,t){if(0===t.length)return e;if(t.length>1){const n=Jt(t[0]);return rn(e.blockSpecs[n],t.slice(1))}if(1===t.length){const n=Jt(t[0]),r=e.blockSpecs.slice(n),o=r[r.length-1],i=[at];return{kind:tt.BlockSequence,sequence:e.sequence.slice(n),address:i,rbox:{topLeft:r[0].rbox.topLeft,dimensions:{width:Math.max(...r.map((e=>e.rbox.dimensions.width))),height:o.rbox.topLeft.y+o.rbox.dimensions.height-r[0].rbox.topLeft.y}},blockSpecs:r}}throw console.error("Invalid local address.",{spec:e,localAddress:t}),new Error("Invalid local address.")}function rn(e,t){if(0===t.length){const t=e.address.slice(0,-1);return{kind:tt.BlockSequence,sequence:[e.block],address:t,blockSpecs:[e],rbox:e.rbox}}if(t[0]===lt){const n=Jt(t[1]),r=e.subexpressionSpecs[n];if(r.kind===tt.Literal)throw new Error("Impossible: a block literal node is on the draggee path.");return rn(r,t.slice(2))}if(t[0]===ct){const n=Jt(t[1]);return nn(e.subsequenceSpecs[n],t.slice(2))}throw console.error("Invalid local address.",{spec:e,localAddress:t}),new Error("Invalid local address.")}function on(e){if("string"===typeof e&&sn(e))return e;if(Number.isInteger(e)&&e>=0)return String(e);throw new Error("Expected address part to be a non-negative integer or a NodeAddressPartString, but got: ".concat(String(e),"."))}function an(e){if(sn(e))return e;const t=Number.parseInt(e,10);return Number.isInteger(t)&&t>=0?t:null}function sn(e){return Boolean(dt[e])}function ln(e,t){const n=document.getElementById(t+mt.root);if(null===n)return null;const r=document.elementsFromPoint(e.x,e.y);for(const o of r){const e=cn(o);if(null!==e&&n.contains(o))return e}return null}function cn(e){let t=e;for(;null!==t;){const e=t.getAttribute("data-touch-role");if(null!==e&&e.length>0)return e;t=t.parentElement}return null}function un(e){const{state:t}=e,n=dn(e),{uiTouch:r}=t,o=null!==r&&r.kind===nt.BlockDrag&&r.hasPositionChangedSinceDragStart&&null!==r.insertionMarkAddress&&null!==n?{address:r.insertionMarkAddress,draggee:n.sequence}:null,i=null!==r&&r.kind===nt.BlockDrag?r.draggeeOriginalAddress:null,a=null!==r&&r.kind===nt.BlockDrag&&r.hasPositionChangedSinceDragStart,s=null===t.dropdownMenu?null:t.dropdownMenu.dropdownAddress;return e.state.canvas.items.map(((t,n)=>Nt({editorProps:e,item:t,address:[ot,n],insertionMark:o,draggeeOriginalAddress:i,hasDragPositionChangedSinceDragStart:a,dropdownMenuDropdownAddress:s})))}function dn(e){const{uiTouch:t}=e.state;return null===t||t.kind!==nt.BlockDrag?null:hn(e,t)}function hn(e,t){const{canvas:n}=e.state,{draggeeOriginalAddress:r}=t,o=Ue(t.currentClientPosition,t.startClientPosition);if(r[0]===it){const t=null===n.scrollInProgress?n.scroll:He(n.scroll,Ue(n.scrollInProgress.currentClientPosition,n.scrollInProgress.startClientPosition)),i=Ue(o,t),a=Zt(fn(e)[Jt(r[1])],i),s=[at];return tn({kind:tt.BlockSequence,sequence:[a.block],address:s,blockSpecs:[a],rbox:a.rbox},[at])}if(r[0]===ot){const{state:t}=e,n=Jt(r[1]);return function(e,t,n){return tn($t(nn(e,n),t),[at])}(Nt({editorProps:e,item:t.canvas.items[n],address:[ot,n],insertionMark:null,draggeeOriginalAddress:null,hasDragPositionChangedSinceDragStart:!1,dropdownMenuDropdownAddress:null}),o,r.slice(2))}throw new Error("Impossible draggee address: [".concat(r.map(String).join(", "),"]"))}function fn(e){const{state:t}=e,{sizing:n,blockDefs:r}=e.config,{blockKinds:o,scroll:i,scrollInProgress:a}=t.palette,s=null===a?i:He(i,Ue(a.currentClientPosition,a.startClientPosition));let l=s.y+n.paletteTopPadding;const c=[];for(let u=0;u<o.length;++u){const i=o[u],a=Ft({editorProps:e,position:{x:s.x+n.paletteLeftPadding,y:l},block:{isLiteral:!1,kind:i,args:r[i].defaultArgs},address:[it,u],insertionMark:null,draggeeOriginalAddress:null!==t.uiTouch&&t.uiTouch.kind===nt.BlockDrag?t.uiTouch.draggeeOriginalAddress:null,hasDragPositionChangedSinceDragStart:null!==t.uiTouch&&t.uiTouch.kind===nt.BlockDrag&&t.uiTouch.hasPositionChangedSinceDragStart,dropdownMenuDropdownAddress:null,isUnreachable:!1});c.push(a),l+=a.rbox.dimensions.height+n.paletteInterblockMargin}return c}function pn(e,t,n,r,o){if(!Un(o,e.config.componentInstanceUid))return null;const{blockDefs:i}=e.config;return i[n.sequence[0].kind].kind===$e.Query?function(e,t,n){const{snapHorizontalRange:r,snapVerticalRange:o}=e.config.sizing,i=t.flatMap(gn);let a=null,s=1/0;for(const l of i){const e=vn(l.rbox,n.rbox),t=e.x*e.x+e.y*e.y;t<s&&Math.abs(e.x)<=r&&Math.abs(e.y)<=o&&(a=l.address,s=t)}return a}(e,t,n):function(e,t,n,r){const o=function(e,t,n,r){for(let o=t.length-1;o>=0;--o){const i=En(e,t[o],n,t,r);if(null!==i)return i}return null}(e,t,n,r);if(null===o)return null;const i=yn({editorProps:e,canvasItems:t.map(bn),draggeeSpec:n,draggeeOriginalAddress:r,insertionAddress:o});if(function(e,t){return e.some((e=>{const n=e.content;if(0===n.length||t[n[0].kind].kind===$e.Query)return!1;const r=n[0];if(1===n.length)return Ln(r,t);const o=t[r.kind];if(o.kind===$e.Command&&!o.hasMaleSocket||Ln(r,t))return!0;const{length:i}=n;return n.slice(1).some(((e,n)=>{const r=t[e.kind];if(r.kind!==$e.Command)return!1;const o=n+1,a=r.hasMaleSocket&&!r.hasFemaleSocket,s=!r.hasMaleSocket&&r.hasFemaleSocket&&o!==i-1;return a||s||Ln(e,t)}))}))}(i,e.config.blockDefs))return null;const{canvas:a}=e.state,s=null===a.scrollInProgress?a.scroll:He(a.scroll,Ue(a.scrollInProgress.currentClientPosition,a.scrollInProgress.startClientPosition)),{canvasBounds:l}=e.config.sizing,c={topLeft:Ue(l.topLeft,s),dimensions:l.dimensions};if(!function(e,t){const n=e.topLeft.x,r=n+e.dimensions.width,o=e.topLeft.y,i=o+e.dimensions.height,a=t.topLeft.x,s=a+t.dimensions.width,l=t.topLeft.y,c=l+t.dimensions.height;return n<s&&r>a&&o<c&&i>l}(n.rbox,c))return null;return o}(e,t,n,r)}function mn(e){const t=[];for(const n of e.subexpressionSpecs)if(n.kind!==tt.Literal)t.push(...mn(n));else{const e=n;t.push({address:e.address,rbox:e.rbox})}for(const n of e.subsequenceSpecs)t.push(...gn(n));return t}function gn(e){return e.blockSpecs.flatMap(mn)}function vn(e,t){const n=.5*e.dimensions.height,r=e.topLeft.x+n,o=e.topLeft.y+n,i=.5*t.dimensions.height;return{x:r-(t.topLeft.x+i),y:o-(t.topLeft.y+i)}}function bn(e){return{position:e.rbox.topLeft,content:e.sequence}}function yn(e){let{editorProps:t,canvasItems:n,draggeeSpec:r,draggeeOriginalAddress:o,insertionAddress:i}=e;const a=o[0]===ot?(s=o,n.map(((e,t)=>{const n=Qt([ot,t],s),r=wn(e.content,n);return{position:e.position,content:r}}))):n;var s;const{uiTouch:l}=t.state;if(null!==l&&l.kind===nt.BlockDrag&&!Un(l.currentClientPosition,t.config.componentInstanceUid))return _n(r.sequence,t.config.blockDefs)?n:a.filter((e=>e.content.length>0));const c=r.sequence,u=null!==i?function(e,t,n,r){return t.map(((t,o)=>{const i=Qt([ot,o],r),a=Sn(t.content,n,i);return{position:null!==i&&1===i.length&&0===i[0]?Ue(t.position,{x:0,y:zt({editorProps:e,position:{x:0,y:0},address:r,insertionMark:null,draggeeOriginalAddress:null,hasDragPositionChangedSinceDragStart:!1,dropdownMenuDropdownAddress:null,isUnreachable:!1,sequence:n}).rbox.dimensions.height}):t.position,content:a}}))}(t,a,c,i):a.concat([bn(r)]);return u.filter((e=>e.content.length>0))}function kn(e,t){if(null===t)return e;if(t.length<2)throw new Error("Illegal localAddress passed to removeNodeAtLocalAddressFromBlock.");if(2===t.length&&t[0]===lt){const n=Jt(t[1]);return{...e,args:{...e.args,expressions:e.args.expressions.map(((e,t)=>t===n?{isLiteral:!0,source:""}:e))}}}return{isLiteral:!1,kind:e.kind,args:{dropdowns:e.args.dropdowns,expressions:e.args.expressions.map(((e,n)=>e.isLiteral?e:kn(e,Qt([lt,n],t)))),sequences:e.args.sequences.map(((e,n)=>wn(e,Qt([ct,n],t))))}}}function wn(e,t){if(null===t)return e;if(t.length<1)throw new Error("Illegal localAddress passed to removeNodeAtLocalAddressFromBlockSequence.");if(1===t.length){const n=Jt(t[0]);return e.slice(0,n)}return e.map(((e,n)=>kn(e,Qt([n],t))))}function xn(e,t,n){if(null===n)return e;if(n.length<2)throw new Error("Illegal localAddress passed to insertNodeAtLocalAddressIntoBlock.");if(2===n.length&&n[0]===lt){if(t.length>1)throw new Error("Impossible: a block sequence with more than one block is being inserted into an expression slot.");const r=Jt(n[1]);return{...e,args:{...e.args,expressions:e.args.expressions.map(((e,n)=>n===r?t[0]:e))}}}return{isLiteral:!1,kind:e.kind,args:{dropdowns:e.args.dropdowns,expressions:e.args.expressions.map(((e,r)=>e.isLiteral?e:xn(e,t,Qt([lt,r],n)))),sequences:e.args.sequences.map(((e,r)=>Sn(e,t,Qt([ct,r],n))))}}}function Sn(e,t,n){if(null===n)return e;if(n.length<1)throw new Error("Illegal localAddress passed to insertNodeAtLocalAddressIntoBlockSequence.");if(1===n.length){const r=Jt(n[0]);return[...e.slice(0,r),...t,...e.slice(r)]}return e.map(((e,r)=>xn(e,t,Qt([r],n))))}function Ln(e,t){return e.args.sequences.some((e=>function(e,t){const{length:n}=e;return e.some(((e,r)=>{const o=t[e.kind];if(o.kind!==$e.Command)return!1;const{hasFemaleSocket:i,hasMaleSocket:a}=o;return a&&!i||!a&&i&&r!==n-1||Ln(e,t)}))}(e,t)))}function En(e,t,n,r,o){const i=Cn(t,n,r,o).slice().sort(((e,t)=>e.rbox.topLeft.y-t.rbox.topLeft.y));if(0===i.length)return null;const{snapHorizontalRange:a,snapVerticalRange:s}=e.config.sizing,l=n.rbox.topLeft.x,c=n.rbox.topLeft.y,u=c+n.rbox.dimensions.height,d=i[0],h=d.rbox.topLeft.x,f=d.rbox.topLeft.y,p=Math.abs(l-h);if(c<=f&&Math.max(0,f-u)<=s&&p<=a)return d.topAddress;const m=i[i.length-1],g=m.rbox.topLeft.x,v=m.rbox.topLeft.y,b=v+m.rbox.dimensions.height,y=Math.abs(l-g);if(c>=v&&Math.max(0,c-b)<=s&&y<=a)return m.bottomAddress;for(let k=1;k<i.length;++k){const e=i[k],t=e.rbox.topLeft.x,n=e.rbox.topLeft.y,r=i[k-1],o=r.rbox.topLeft.x,s=r.rbox.topLeft.y,u=Math.min(Math.abs(l-t),Math.abs(l-o));if(s<=c&&c<=n&&u<=a)return null!==e.topAddress?e.topAddress:r.bottomAddress}return null}function Cn(e,t,n,r){return e.blockSpecs.flatMap((e=>function(e,t,n,r){if(1===e.address.length&&e.address[0]===ut)return[];const o=[];for(let i=0;i<e.teeth.length;++i){const t=e.teeth[i],r=Tn(e.address,i,n),a=Pn(e.address,i,i===e.teeth.length-1);o.push({topAddress:r,bottomAddress:a,rbox:t.rbox})}for(const i of e.subsequenceSpecs)o.push(...Cn(i,t,n,r));return o}(e,t,n,r)))}function Tn(e,t,n){if(0===t)return e;const r=e.concat([ct,t-1]),o=Bn(n[Jt(e[1])],r.slice(2));return r.concat([o.blockSpecs.filter((e=>!(1===e.address.length&&e.address[0]===ut))).length])}function Bn(e,t){if(0===t.length)return e;return An(e.blockSpecs.filter((e=>!(1===e.address.length&&e.address[0]===ut)))[Jt(t[0])],t.slice(1))}function An(e,t){if(0===t.length)throw new Error("Invalid local address.");if(t[0]===lt){const n=e.subexpressionSpecs[Jt(t[1])];if(n.kind===tt.Block)return An(n,t.slice(2))}if(t[0]===ct){return Bn(e.subsequenceSpecs[Jt(t[1])],t.slice(2))}throw new Error("Invalid local address.")}function Pn(e,t,n){if(n){const t=Jt(e[e.length-1]);return e.slice(0,-1).concat(t+1)}return e.concat([ct,t,0])}function In(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function _n(e,t){return e.some((e=>Dn(e,t)))}function Dn(e,t){if(!t[e.kind].isDeletable)return!0;for(const n of e.args.expressions)if(!n.isLiteral&&Dn(n,t))return!0;for(const n of e.args.sequences)if(_n(n,t))return!0;return!1}function Mn(e,t){return e.x===t.x&&e.y===t.y}function Rn(e,t){return nn(un(e)[Jt(t[1])],t.slice(2,-2)).blockSpecs[0]}function On(e){let{menu:t,editorProps:n}=e;const{sizing:r,colors:o,fonts:i}=n.config,{dropdownAddress:a}=t,s=Rn(n,a),l=Nn({menu:t,editorProps:n}),c=s.isUnreachable?o.unreachableBlocks[s.block.kind]:o.blocks[s.block.kind],u={topLeft:He(l.rbox.topLeft,{x:r.blockDropdownMenuBorder,y:r.blockDropdownMenuBorder}),dimensions:{width:l.rbox.dimensions.width-2*r.blockDropdownMenuBorder,height:l.rbox.dimensions.height-2*r.blockDropdownMenuBorder}};return(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)("defs",{children:(0,Ze.jsx)("clipPath",{id:n.config.componentInstanceUid+mt.dropdownMenuClipPath,children:(0,Ze.jsx)("rect",{x:u.topLeft.x,y:u.topLeft.y,rx:r.blockDropdownMenuBorderRadius-r.blockDropdownMenuBorder,ry:r.blockDropdownMenuBorderRadius-r.blockDropdownMenuBorder,width:u.dimensions.width,height:u.dimensions.height})})}),(0,Ze.jsx)("rect",{x:l.rbox.topLeft.x,y:l.rbox.topLeft.y,rx:r.blockDropdownMenuBorderRadius,ry:r.blockDropdownMenuBorderRadius,width:l.rbox.dimensions.width,height:l.rbox.dimensions.height,fill:wt(c.tertiary)}),(0,Ze.jsx)("g",{clipPath:"url(#".concat(n.config.componentInstanceUid).concat(mt.dropdownMenuClipPath,")"),children:l.choiceSpecs.map(((e,t)=>(0,Ze.jsxs)("g",{"data-touch-role":pt.dropdownChoicePrefix+t,children:[(0,Ze.jsx)("rect",{x:e.rbox.topLeft.x,y:e.rbox.topLeft.y,width:e.rbox.dimensions.width,height:e.rbox.dimensions.height,fill:wt(c.primary)}),(0,Ze.jsx)("text",{x:e.textRbox.topLeft.x,y:e.textRbox.topLeft.y,dominantBaseline:"middle",fontFamily:i.blockDropdownMenuFont,fontSize:r.blockDropdownMenuTextSizePx,fill:wt(o.blockDropdownText),children:e.text}),t>0&&(0,Ze.jsx)("rect",{x:e.rbox.topLeft.x,y:e.rbox.topLeft.y+e.rbox.dimensions.height,width:e.rbox.dimensions.width,height:r.blockDropdownMenuInterChoiceDividerHeight,fill:wt(c.tertiary)})]},t)))})]})}function Nn(e){let{menu:t,editorProps:n}=e;const{state:r}=n,{sizing:o,fonts:i,dropdownTexts:a}=n.config,{canvas:s}=r,l=null===s.scrollInProgress?s.scroll:He(s.scroll,Ue(s.scrollInProgress.currentClientPosition,s.scrollInProgress.startClientPosition)),{dropdownAddress:c}=t,u=Rn(n,c),d=Jt(c[c.length-1]),h=u.dropdownSpecs[d],f=He(h.rbox.topLeft,l),p=He(f,{x:.5*h.rbox.dimensions.width,y:.5*h.rbox.dimensions.height}),m=He(o.canvasBounds.topLeft,{x:.5*o.canvasBounds.dimensions.width,y:.5*o.canvasBounds.dimensions.height}),g=null!==r.uiTouch&&r.uiTouch.kind===nt.DropdownMenuScroll?He(t.scroll,Ue(r.uiTouch.currentClientPosition,r.uiTouch.startClientPosition)):t.scroll,v=[];let b=g.y+o.blockDropdownMenuBorder;for(const L of t.choices){const e=a[L],t=n.measureText(e,i.blockDropdownMenuFont,o.blockDropdownMenuTextSizePx),r={topLeft:{x:f.x+g.x+o.blockDropdownMenuBorder,y:b},dimensions:{width:t.width+2*o.blockDropdownMenuHorizontalPadding,height:t.height+2*o.blockDropdownMenuChoiceVerticalMargin}};v.push({text:e,textRbox:{topLeft:{x:f.x+g.x+o.blockDropdownMenuBorder+o.blockDropdownMenuHorizontalPadding,y:o.blockDropdownMenuChoiceVerticalMargin+b+.5*t.height},dimensions:{width:t.width,height:t.height}},rbox:r}),b+=r.dimensions.height+o.blockDropdownMenuInterChoiceDividerHeight}const y=Math.max(...v.map((e=>e.rbox.dimensions.width))),k=v[v.length-1].rbox,w=Math.min(o.blockDropdownMenuDimensions.height,k.topLeft.y+k.dimensions.height+o.blockDropdownMenuBorder,p.y<=m.y?o.canvasBounds.topLeft.y+o.canvasBounds.dimensions.height-f.y:f.y-o.canvasBounds.topLeft.y),x=p.y<=m.y?f.y+h.rbox.dimensions.height:f.y-w,S={topLeft:{x:f.x,y:x},dimensions:{width:Math.min(o.blockDropdownMenuDimensions.width,y+2*o.blockDropdownMenuBorder),height:w}};return{choiceSpecs:v.map((e=>({text:e.text,textRbox:{topLeft:He(e.textRbox.topLeft,{x:0,y:x}),dimensions:e.textRbox.dimensions},rbox:{topLeft:He(e.rbox.topLeft,{x:0,y:x}),dimensions:{...e.rbox.dimensions,width:y}}}))),rbox:S}}function zn(e,t,n){if(t[0]!==ot)throw new Error("Non-canvas dropdown address passed to updateDropdownValueInCanvas.");return{items:e.items.map(((e,r)=>r!==t[1]?e:{position:e.position,content:Fn(e.content,t.slice(2),n)})),scroll:e.scroll,scrollInProgress:e.scrollInProgress}}function Fn(e,t,n){return e.map(((e,r)=>t[0]!==r?e:Hn(e,t.slice(1),n)))}function Hn(e,t,n){return{isLiteral:!1,kind:e.kind,args:{dropdowns:e.args.dropdowns.map(((e,r)=>2===t.length&&t[0]===st&&t[1]===r?n:e)),expressions:e.args.expressions.map(((e,r)=>e.isLiteral?e:t[0]===lt&&t[1]===r?Hn(e,t.slice(2),n):e)),sequences:e.args.sequences.map(((e,r)=>t[0]===ct&&t[1]===r?Fn(e,t.slice(2),n):e))}}}function Un(e,t){const n=t+mt.canvasBackground;return document.elementsFromPoint(e.x,e.y).some((e=>e.id===n))}function Wn(e,t,n){const r=ln(e,t),{uiTouch:o}=n;return null!==o&&o.kind===nt.BlockDrag?"grabbing":null!==r&&r.startsWith(pt.blockAddressPrefix)?"grab":null!==r&&r.startsWith(pt.literalAddressPrefix)?"text":null!==r&&(r.startsWith(pt.dropdownAddressPrefix)||r.startsWith(pt.dropdownChoicePrefix))?"pointer":"default"}let jn=function(e){return e.Group="Group",e.Image="Image",e.Text="Text",e.Path="Path",e.Clear="Clear",e}({}),qn=function(e){return e.MoveTo="MoveTo",e.LineTo="LineTo",e.ArcTo="ArcTo",e}({}),Vn=function(e){return e.Translate="Translate",e.Rotate="Rotate",e.Scale="Scale",e}({});const Kn={kind:jn.Group,children:[]};function Gn(e,t){switch(e.kind){case jn.Group:t.save(),function(e,t){var n,r;if(function(e,t){for(const n of e)Yn(n,t)}(null!==(n=e.transform)&&void 0!==n?n:[],t),t.globalAlpha*=null!==(r=e.alpha)&&void 0!==r?r:1,void 0!==e.clipPath){t.beginPath();for(const n of e.clipPath)Qn(n,t);t.closePath(),t.clip()}}(e,t);for(const n of e.children)Gn(n,t);t.restore();break;case jn.Image:t.drawImage(e.source,e.dx,e.dy,e.dw,e.dh);break;case jn.Text:t.save(),Jn(e,t),void 0!==e.fill&&(t.fillStyle=lc(e.fill),t.fillText(e.text,e.x,e.y,e.maxWidth)),t.restore();break;case jn.Path:if(t.save(),e.path instanceof Path2D)void 0!==e.fill&&(t.fillStyle=lc(e.fill),t.fill(e.path)),void 0!==e.strokeWidth&&void 0!==e.stroke&&(t.strokeStyle=lc(e.stroke),t.lineWidth=e.strokeWidth,t.stroke(e.path));else{t.beginPath();for(const n of e.path)Qn(n,t);t.closePath(),void 0!==e.fill&&(t.fillStyle=lc(e.fill),t.fill()),void 0!==e.strokeWidth&&void 0!==e.stroke&&(t.strokeStyle=lc(e.stroke),t.lineWidth=e.strokeWidth,t.stroke())}t.restore();break;case jn.Clear:t.clearRect(e.x,e.y,e.w,e.h)}}function Jn(e,t){var n,r,o;t.font="".concat(null!==(n=e.fontWeight)&&void 0!==n?n:""," ").concat(e.fontSize,"px ").concat(e.fontFamily).replace(/ {2,}/g," ").trim(),t.textBaseline=null!==(r=e.textBaseline)&&void 0!==r?r:t.textBaseline,t.textAlign=null!==(o=e.textAlign)&&void 0!==o?o:t.textAlign}function Yn(e,t){switch(e.kind){case Vn.Translate:t.translate(e.x,e.y);break;case Vn.Rotate:t.rotate(e.angle);break;case Vn.Scale:t.scale(e.x,e.y)}}function Qn(e,t){switch(e.kind){case qn.MoveTo:t.moveTo(e.x,e.y);break;case qn.LineTo:t.lineTo(e.x,e.y);break;case qn.ArcTo:t.arcTo(e.x1,e.y1,e.x2,e.y2,e.radius)}}const Xn=1;var Zn=n(5403);const $n=(0,Zn.F3)("SafeArea",{web:()=>n.e(707).then(n.bind(n,2707)).then((e=>new e.SafeAreaWeb))}),er=[];function tr(){return $n.getSafeAreaInsets()}$n.addListener("safeAreaChanged",(e=>{for(const t of er)t(e)}));const nr=(0,Zn.F3)("Preferences",{web:()=>n.e(828).then(n.bind(n,828)).then((e=>new e.PreferencesWeb))});function rr(e,t){return localStorage.setItem(e,t),nr.set({key:e,value:t})}function or(e){return nr.get({key:e}).then((e=>e.value))}const ir=(0,Zn.F3)("SplashScreen",{web:()=>n.e(484).then(n.bind(n,6484)).then((e=>new e.SplashScreenWeb))}),ar={button_pop:n.p+"static/media/button_pop.a629d5bb0b3ce6cf961c.mp3",club_attack:n.p+"static/media/club_attack.68a253eee29102004b26.mp3",sword_attack:n.p+"static/media/sword_attack.72b32592073bf20a5805.mp3",character_movement:n.p+"static/media/character_movement.2a86842e05a8cddf8b3e.mp3",success_music:n.p+"static/media/success_music.afad66f56ee264c1489e.mp3",goblin_yelp:n.p+"static/media/goblin_yelp.6553f2d9e8a74f0dfc70.mp3",witch_yelp:n.p+"static/media/witch_yelp.a3a14770c669e5ebfdc3.mp3",hero_yelp:n.p+"static/media/hero_yelp.f800084a9875bfd13ec7.mp3",error_buzzer:n.p+"static/media/error_buzzer.d11120a50a0aa0efc5ac.mp3",heal:n.p+"static/media/heal.5b841eafe3fba0c101d7.mp3",fireball_launch:n.p+"static/media/fireball_launch.10e7032110a71e245357.mp3",fireball_explosion:n.p+"static/media/fireball_explosion.f424cfb653b35a24086d.mp3",greensleeves:n.p+"static/media/greensleeves.2eee5582e41e49710594.mp3",puzzle_music:n.p+"static/media/puzzle_music.3d5bd921fc8ffbe45f3c.mp3",block_pop:n.p+"static/media/block_pop.118caa1c1c266cbde819.mp3"};let sr=function(e){return e.ButtonPop="ButtonPop",e.ClubAttack="ClubAttack",e.SwordAttack="SwordAttack",e.CharacterMovement="CharacterMovement",e.SuccessMusic="SuccessMusic",e.GoblinYelp="GoblinYelp",e.WitchYelp="WitchYelp",e.HeroYelp="HeroYelp",e.ErrorBuzzer="ErrorBuzzer",e.Heal="Heal",e.FireballLaunch="FireballLaunch",e.FireballExplosion="FireballExplosion",e.Greensleeves="Greensleeves",e.PuzzleMusic="PuzzleMusic",e.BlockPop="BlockPop",e}({});class lr{constructor(){this.ctx=void 0,this.nodeCollections=void 0,this.nextAvailableSoundCollectionRawId=void 0,this.buttonPopBuffer=void 0,this.clubAttackBuffer=void 0,this.swordAttackBuffer=void 0,this.characterMovementBuffer=void 0,this.successMusicBuffer=void 0,this.goblinYelpBuffer=void 0,this.witchYelpBuffer=void 0,this.heroYelpBuffer=void 0,this.errorBuzzerBuffer=void 0,this.healBuffer=void 0,this.fireballLaunchBuffer=void 0,this.fireballExplosionBuffer=void 0,this.greensleevesBuffer=void 0,this.puzzleMusicBuffer=void 0,this.blockPopBuffer=void 0,this.ctx=new AudioContext,this.nodeCollections=new Map,this.nextAvailableSoundCollectionRawId=0,this.buttonPopBuffer=null,this.loadAudio(ar.button_pop).then((e=>{this.buttonPopBuffer=e})),this.clubAttackBuffer=null,this.loadAudio(ar.club_attack).then((e=>{this.clubAttackBuffer=e})),this.swordAttackBuffer=null,this.loadAudio(ar.sword_attack).then((e=>{this.swordAttackBuffer=e})),this.characterMovementBuffer=null,this.loadAudio(ar.character_movement).then((e=>{this.characterMovementBuffer=e})),this.successMusicBuffer=null,this.loadAudio(ar.success_music).then((e=>{this.successMusicBuffer=e})),this.goblinYelpBuffer=null,this.loadAudio(ar.goblin_yelp).then((e=>{this.goblinYelpBuffer=e})),this.witchYelpBuffer=null,this.loadAudio(ar.witch_yelp).then((e=>{this.witchYelpBuffer=e})),this.heroYelpBuffer=null,this.loadAudio(ar.hero_yelp).then((e=>{this.heroYelpBuffer=e})),this.errorBuzzerBuffer=null,this.loadAudio(ar.error_buzzer).then((e=>{this.errorBuzzerBuffer=e})),this.healBuffer=null,this.loadAudio(ar.heal).then((e=>{this.healBuffer=e})),this.fireballLaunchBuffer=null,this.loadAudio(ar.fireball_launch).then((e=>{this.fireballLaunchBuffer=e})),this.fireballExplosionBuffer=null,this.loadAudio(ar.fireball_explosion).then((e=>{this.fireballExplosionBuffer=e})),this.greensleevesBuffer=null,this.loadAudio(ar.greensleeves).then((e=>{this.greensleevesBuffer=e})),this.puzzleMusicBuffer=null,this.loadAudio(ar.puzzle_music).then((e=>{this.puzzleMusicBuffer=e})),this.blockPopBuffer=null,this.loadAudio(ar.block_pop).then((e=>{this.blockPopBuffer=e}))}async loadAudio(e){const t=await fetch(e);return await this.ctx.decodeAudioData(await t.arrayBuffer())}scheduleSounds(e){const{currentTime:t}=this.ctx,n=[];for(const a of e){var r;const e=this.getBufferForSoundKind(a.kind);if(null===e)continue;const o=Math.max(t,t+a.timeInSeconds),i=Math.max(0,-a.timeInSeconds),s=this.ctx.createBufferSource();if(s.buffer=e,s.loop=null!==(r=a.loop)&&void 0!==r&&r,void 0===a.gain)s.connect(this.ctx.destination);else{const e=this.ctx.createGain();s.connect(e),e.gain.value=a.gain,e.connect(this.ctx.destination)}s.start(o,i,a.durationInSeconds),n.push(s)}const o={nodes:n},i={soundCollectionRawId:this.nextAvailableSoundCollectionRawId};return++this.nextAvailableSoundCollectionRawId,this.nodeCollections.set(i.soundCollectionRawId,o),i}getBufferForSoundKind(e){return{[sr.ButtonPop]:this.buttonPopBuffer,[sr.ClubAttack]:this.clubAttackBuffer,[sr.SwordAttack]:this.swordAttackBuffer,[sr.CharacterMovement]:this.characterMovementBuffer,[sr.SuccessMusic]:this.successMusicBuffer,[sr.GoblinYelp]:this.goblinYelpBuffer,[sr.WitchYelp]:this.witchYelpBuffer,[sr.HeroYelp]:this.heroYelpBuffer,[sr.ErrorBuzzer]:this.errorBuzzerBuffer,[sr.Heal]:this.healBuffer,[sr.FireballLaunch]:this.fireballLaunchBuffer,[sr.FireballExplosion]:this.fireballExplosionBuffer,[sr.Greensleeves]:this.greensleevesBuffer,[sr.PuzzleMusic]:this.puzzleMusicBuffer,[sr.BlockPop]:this.blockPopBuffer}[e]}cancel(e){const t=this.nodeCollections.get(e.soundCollectionRawId);if(void 0!==t){for(const e of t.nodes)e.disconnect();this.nodeCollections.delete(e.soundCollectionRawId)}}resume(){this.ctx.resume()}}const cr=(0,Zn.F3)("App",{web:()=>n.e(551).then(n.bind(n,6551)).then((e=>new e.AppWeb))}),ur=(0,Zn.F3)("KeepAwake",{web:()=>n.e(849).then(n.bind(n,5849)).then((e=>new e.KeepAwakeWeb))});function dr(){ur.allowSleep().catch(hr)}function hr(){}const fr=(0,Zn.F3)("Device",{web:()=>n.e(950).then(n.bind(n,5950)).then((e=>new e.DeviceWeb))}),pr="1.43.0";let mr=function(e){return e.English="en-US",e.Japanese="ja-JP",e.JapaneseHiragana="ja-JP-hiragana",e}({}),gr=function(e){return e.PleaseSwitchToLandscape="PleaseSwitchToLandscape",e.LevelCleared="LevelCleared",e.LevelFailed="LevelFailed",e.NextLevel="NextLevel",e.CannotAdvance="CannotAdvance",e.CannotRetreat="CannotRetreat",e.CannotAttack="CannotAttack",e.CannotHeal="CannotHeal",e.CloseLiteralEditor="CloseLiteralEditor",e.StartPuzzleFromBeginning="StartPuzzleFromBeginning",e.StartPuzzleFromLastSaved="StartPuzzleFromLastSaved",e.Settings="Settings",e.FlagAndCurrentLanguage="FlagAndCurrentLanguage",e.Credits="Credits",e.ResetToLevelOne="ResetToLevelOne",e.CreditScreenTitle="CreditScreenTitle",e.Stage2ComingSoon="Stage2ComingSoon",e.LoadingDotDotDot="LoadingDotDotDot",e.TutorialLevel1Part1_MoveTheHero="TutorialLevel1Part1_MoveTheHero",e.TutorialLevel1Part2_DragBlueBlock="TutorialLevel1Part2_DragBlueBlock",e.TutorialLevel1Part3_DragAnotherBlock="TutorialLevel1Part3_DragAnotherBlock",e.TutorialLevel1Part4_PressView="TutorialLevel1Part4_PressView",e.TutorialLevel1Part5_PressPlay="TutorialLevel1Part5_PressPlay",e.TutorialLevel1Part6_TryAgain="TutorialLevel1Part6_TryAgain",e.TutorialLevel2Part1_MoveTheHero="TutorialLevel2Part1_MoveTheHero",e.UseForeverBlockHint="UseForeverBlockHint",e.TutorialLevel9Part1_ScrollDown="TutorialLevel9Part1_ScrollDown",e.TutorialLevel9Part2_ScrollUp="TutorialLevel9Part2_ScrollUp",e.TutorialLevel9Part3_DragLessThan="TutorialLevel9Part3_DragLessThan",e.TutorialLevel9Part4_DragHealth="TutorialLevel9Part4_DragHealth",e.TutorialLevel9Part5_Type3="TutorialLevel9Part5_Type3",e.AreYouSureYouWantToResetToLevelOne="AreYouSureYouWantToResetToLevelOne",e.ConfirmReset="ConfirmReset",e.CancelReset="CancelReset",e}({}),vr=function(e){return e.WhenBattleStarts="WhenBattleStarts",e.MoveForward="MoveForward",e.Attack="Attack",e.Heal="Heal",e.MoveBackward="MoveBackward",e.Forever="Forever",e.If="If",e.XInFront="XInFront",e.And="And",e.Or="Or",e.Not="Not",e.Health="Health",e.LessThan="LessThan",e.Equal="Equal",e.GreaterThan="GreaterThan",e}({}),br=function(e){return e.Nothing="Nothing",e.Goblin="Goblin",e.Witch="Witch",e}({}),yr=function(e){return e.WhenBattleStarts="InactiveWhenBattleStarts",e.MoveForward="InactiveMoveForward",e.Attack="InactiveAttack",e.Heal="InactiveHeal",e.MoveBackward="InactiveMoveBackward",e.Forever="InactiveForever",e.If="InactiveIf",e.XInFront="InactiveXInFront",e.And="InactiveAnd",e.Or="InactiveOr",e.Not="InactiveNot",e.Health="InactiveHealth",e.LessThan="InactiveLessThan",e.Equal="InactiveEqual",e.GreaterThan="InactiveGreaterThan",e}({}),kr=function(e){return e.EvalBlock="EvalBlock",e.Advance="Advance",e.Attack="Attack",e.Heal="Heal",e.Retreat="Retreat",e.Summon="Summon",e.FailHeroAction="FailHeroAction",e.ClimbStairs="ClimbStairs",e.FailLevel="FailLevel",e}({}),wr=function(e){return e.Empty="Empty",e.Hero="Hero",e.Goblin="Goblin",e.Witch="Witch",e}({}),xr=function(e){return e.Loading="Loading",e.StaticHome="StaticHome",e.Edit="Edit",e.StaticSettings="StaticSettings",e.StaticConfirmResetToLevelOne="StaticConfirmResetToLevelOne",e.HomeToView="HomeToView",e.EditToView="EditToView",e.ViewToEdit="ViewToEdit",e.ViewToHome="ViewToHome",e.EditToHome="EditToHome",e.PlayBattle="PlayBattle",e.PauseBattle="PauseBattle",e.NextLevel="NextLevel",e.OpenSettings="OpenSettings",e.CloseSettings="CloseSettings",e.Credits="Credits",e}({}),Sr=function(e){return e[e.Level1=1]="Level1",e[e.Level2=2]="Level2",e[e.Level3=3]="Level3",e[e.Level4=4]="Level4",e[e.Level5=5]="Level5",e[e.Level6=6]="Level6",e[e.Level7=7]="Level7",e[e.Level8=8]="Level8",e[e.Level9=9]="Level9",e[e.Level10=10]="Level10",e}({});const Lr=Math.max(...Object.values(Sr).filter((e=>Number.isInteger(e)))),Er='"Checkpoint", "Twemoji Country Flags", Helvetica, Arial, sans-serif',Cr=Er,Tr=Er,Br=Er,Ar='"Noto Sans JP", Helvetica, Arial, sans-serif',Pr="{USE_MANUAL_BREAKING}",Ir="{BR}",_r="{EDIT_BUTTON}",Dr="{VIEW_BUTTON}",Mr="{PLAY_BUTTON}",Rr="{CHANGE_TO_BLOCK_FONT}",Or="{CHANGE_TO_UI_FONT}",Nr="{MULTILINE_PRETTY_PRINTED_LOGGER_ID}",zr=[_r,Dr,Mr],Fr={[_r]:me.buttons.puzzle.edit,[Dr]:me.buttons.puzzle.view,[Mr]:me.buttons.puzzle.play},Hr=[Rr,Or],Ur={[Rr]:Ar,[Or]:Er},Wr="Kyle Lin\nmayuge__san\n\nFrom Flaticon:\nPixel Perfect\n\nFrom Freesound:\nnicholasdaryl\nAris621\nlesaucisson\nNatal420\nmetekavruk\nArtOrDie\nProducing_Raylite\nsuntemple\nplasterbrain\nHighPixel\nG-14\nMATRIXXX_\nDave Rager\n\n\u201cGreensleeves\u201d score courtesy of\nthe Mutopia Project\n\nCastle Coders ".concat(pr,"\nCopyright 2024 Zaqlo Studios.\nAll rights reserved.\n\nInstance number:\n").concat(Nr),jr={[mr.English]:{[gr.PleaseSwitchToLandscape]:"Please switch your device's orientation to landscape.",[gr.LevelCleared]:"Level Complete!",[gr.LevelFailed]:"Level Failed.",[gr.NextLevel]:"Next Level",[gr.CannotAdvance]:"Cannot move forward",[gr.CannotRetreat]:"Cannot move backward",[gr.CannotAttack]:"Nothing to attack",[gr.CannotHeal]:"Max health reached",[gr.CloseLiteralEditor]:"Close",[gr.StartPuzzleFromBeginning]:"Start",[gr.StartPuzzleFromLastSaved]:"Start",[gr.Settings]:"Settings",[gr.FlagAndCurrentLanguage]:"\ud83c\uddfa\ud83c\uddf8 English",[gr.Credits]:"Credits",[gr.ResetToLevelOne]:"Reset to Level 1",[gr.CreditScreenTitle]:"Credits",[gr.Stage2ComingSoon]:"Stage 1 complete!\nStage 2 coming soon.",[gr.LoadingDotDotDot]:"Loading...",[gr.TutorialLevel1Part1_MoveTheHero]:"Use code blocks to\nmove the hero to the stairs!\n\nPress ".concat(_r," to open\nthe code block editor."),[gr.TutorialLevel1Part2_DragBlueBlock]:"Drag the blue block and connect it\nto the bottom of the yellow block.",[gr.TutorialLevel1Part3_DragAnotherBlock]:"Drag another blue block to the\nbottom of the stack.",[gr.TutorialLevel1Part4_PressView]:"Nice work!\nPress ".concat(Dr," to continue."),[gr.TutorialLevel1Part5_PressPlay]:"Press ".concat(Mr," to continue."),[gr.TutorialLevel1Part6_TryAgain]:"Oops!\nWe didn't add enough code blocks\n to move the hero to the stairs.\nAdd more code blocks to fix this.",[gr.TutorialLevel2Part1_MoveTheHero]:"Use the code blocks to\nmove the hero to the stairs!\nHint: You must defeat\nthe goblin blocking your way\nbefore you can move forward.",[gr.UseForeverBlockHint]:"By default, each \u201c".concat(Rr,"if").concat(Or,"\u201d block\nonly runs once. If you want a\nblock to run repeatedly, put it\ninside a \u201c").concat(Rr,"forever").concat(Or,"\u201d block."),[gr.TutorialLevel9Part1_ScrollDown]:"Scroll down.",[gr.TutorialLevel9Part2_ScrollUp]:"Scroll up.",[gr.TutorialLevel9Part3_DragLessThan]:"Drag the green \u201c".concat(Rr,"<").concat(Or,"\u201d block\nonto the canvas."),[gr.TutorialLevel9Part4_DragHealth]:"Drag the light blue \u201c".concat(Rr,"HP").concat(Or,"\u201d block\ninto the left side of the \u201c").concat(Rr,"<").concat(Or,"\u201d block."),[gr.TutorialLevel9Part5_Type3]:"Tap the right side of the \u201c".concat(Rr,"<").concat(Or,"\u201d block.\nThen, export type \u201c").concat(Rr,"3").concat(Or,"\u201d (without the quotes)."),[gr.AreYouSureYouWantToResetToLevelOne]:"Reset to level 1?",[gr.ConfirmReset]:"Reset",[gr.CancelReset]:"Cancel"},[mr.Japanese]:{[gr.PleaseSwitchToLandscape]:"".concat(Pr,"\u30c7\u30d0\u30a4\u30b9\u306e").concat(Ir,"\u753b\u9762\u3092").concat(Ir,"\u6a2a\u306b").concat(Ir,"\u56de\u8ee2").concat(Ir,"\u3055\u305b\u3066").concat(Ir,"\u304f\u3060\u3055\u3044\u3002"),[gr.LevelCleared]:"\u30ec\u30d9\u30eb\u30af\u30ea\u30a2\uff01",[gr.LevelFailed]:"\u30ec\u30d9\u30eb\u5931\u6557",[gr.NextLevel]:"\u6b21\u306e\u30ec\u30d9\u30eb\u3078",[gr.CannotAdvance]:"\u9032\u3081\u306a\u3044",[gr.CannotRetreat]:"\u623b\u308c\u306a\u3044",[gr.CannotAttack]:"\u653b\u6483\u5bfe\u8c61\u304c\u306a\u3044",[gr.CannotHeal]:"HP\u304c\u3044\u3063\u3071\u3044\uff01",[gr.CloseLiteralEditor]:"\u9589\u3058\u308b",[gr.StartPuzzleFromBeginning]:"\u306f\u3058\u3081\u304b\u3089",[gr.StartPuzzleFromLastSaved]:"\u3064\u3065\u304d\u304b\u3089",[gr.Settings]:"\u8a2d\u5b9a",[gr.FlagAndCurrentLanguage]:"\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8a9e",[gr.Credits]:"\u30b9\u30bf\u30c3\u30d5\u30ed\u30fc\u30eb",[gr.ResetToLevelOne]:"\u30ec\u30d9\u30eb\uff11\u306b\u30ea\u30bb\u30c3\u30c8\u3059\u308b",[gr.CreditScreenTitle]:"\u30b9\u30bf\u30c3\u30d5\u30ed\u30fc\u30eb",[gr.Stage2ComingSoon]:"\u30b9\u30c6\u30fc\u30b8\uff11\u30af\u30ea\u30a2\uff01\n\u30b9\u30c6\u30fc\u30b8\uff12\u306f\u8fd1\u65e5\u516c\u958b\u4e88\u5b9a\u3067\u3059\u3002",[gr.LoadingDotDotDot]:"\u30ed\u30fc\u30c9\u4e2d...",[gr.TutorialLevel1Part1_MoveTheHero]:"\u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u3092\u4f7f\u3063\u3066\n\u52c7\u8005\u3092\u968e\u6bb5\u306b\n\u9023\u308c\u3066\u884c\u304d\u307e\u3057\u3087\u3046\uff01\n\n".concat(_r,"\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),[gr.TutorialLevel1Part2_DragBlueBlock]:"\u9752\u306e\u30d6\u30ed\u30c3\u30af\u3092\u30c9\u30e9\u30c3\u30b0\u3057\u3066\u3001\u9ec4\u8272\u306e\n\u30d6\u30ed\u30c3\u30af\u306e\u4e0b\u306b\u7e4b\u304c\u3063\u3066\u304f\u3060\u3055\u3044\u3002",[gr.TutorialLevel1Part3_DragAnotherBlock]:"\u3082\u3046\u4e00\u3064\u306e\u9752\u306e\u30d6\u30ed\u30c3\u30af\u3092\n\u30c9\u30e9\u30c3\u30b0\u3057\u3066\u7e4b\u304c\u3063\u3066\u304f\u3060\u3055\u3044\u3002",[gr.TutorialLevel1Part4_PressView]:"".concat(Dr,"\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),[gr.TutorialLevel1Part5_PressPlay]:"".concat(Mr,"\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),[gr.TutorialLevel1Part6_TryAgain]:"\u304a\u3063\u3068\uff01\n\u52c7\u8005\u3092\u968e\u6bb5\u306b\u9023\u308c\u3066\u884c\u304f\u306e\u306b\n\u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u304c\n\u8db3\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u30b3\u30fc\u30c9\u3092\u4fee\u6b63\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002",[gr.TutorialLevel2Part1_MoveTheHero]:"\u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u3092\u4f7f\u3063\u3066\n\u52c7\u8005\u3092\u968e\u6bb5\u306b\u9023\u308c\u3066\u884c\u304d\u307e\u3057\u3087\u3046\uff01\n\u30d2\u30f3\u30c8\uff1a\n\u30b4\u30d6\u30ea\u30f3\u3092\u5012\u3055\u306a\u3044\u3068\n\u52c7\u8005\u304c\u9032\u3081\u307e\u305b\u3093\u3002",[gr.UseForeverBlockHint]:"\u73fe\u5728\u306e\u300c".concat(Rr,"\u3082\u3057").concat(Or,"\u300d\u30d6\u30ed\u30c3\u30af\u304c\n\u7e70\u308a\u8fd4\u3055\u308c\u307e\u305b\u3093\u3002\n\u7e70\u308a\u8fd4\u3057\u305f\u3044\u306a\u3089\n\u300c").concat(Rr,"\u6c38\u9060\u306b").concat(Or,"\u300d\u30d6\u30ed\u30c3\u30af\u306e\u4e2d\u306b\u5165\u308c\u307e\u3057\u3087\u3046\u3002"),[gr.TutorialLevel9Part1_ScrollDown]:"\u4e0b\u306b\u30b9\u30af\u30ed\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002",[gr.TutorialLevel9Part2_ScrollUp]:"\u4e0a\u306b\u30b9\u30af\u30ed\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002",[gr.TutorialLevel9Part3_DragLessThan]:"\u7dd1\u306e\u300c".concat(Rr,"<").concat(Or,"\u300d\u30d6\u30ed\u30c3\u30af\u3092\u30ad\u30e3\u30f3\u30d0\u30b9\u306b\n\u30c9\u30e9\u30c3\u30b0\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),[gr.TutorialLevel9Part4_DragHealth]:"\u6c34\u8272\u306e\u300c".concat(Rr,"HP").concat(Or,"\u300d\u30d6\u30ed\u30c3\u30af\u3092\n\u300c").concat(Rr,"<").concat(Or,"\u300d\u30d6\u30ed\u30c3\u30af\u306e\u5de6\u8fba\u306b\u5165\u308c\u3066\u304f\u3060\u3055\u3044\u3002"),[gr.TutorialLevel9Part5_Type3]:"\u300c".concat(Rr,"<").concat(Or,"\u300d\u30d6\u30ed\u30c3\u30af\u306e\u53f3\u8fba\u3092\u30bf\u30c3\u30d7\u3057\u3066\u3001\n\u30ad\u30fc\u30dc\u30fc\u30c9\u3067\u300c").concat(Rr,"3").concat(Or,"\u300d\u3092\u8a18\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),[gr.AreYouSureYouWantToResetToLevelOne]:"\u30ec\u30d9\u30eb\uff11\u306b\u30ea\u30bb\u30c3\u30c8\uff1f",[gr.ConfirmReset]:"\u6c7a\u5b9a",[gr.CancelReset]:"\u30ad\u30e3\u30f3\u30bb\u30eb"},[mr.JapaneseHiragana]:{[gr.PleaseSwitchToLandscape]:"".concat(Pr,"\u30c7\u30d0\u30a4\u30b9\u306e").concat(Ir,"\u304c\u3081\u3093\u3092").concat(Ir,"\u3088\u3053\u306b").concat(Ir,"\u304b\u3044\u3066\u3093").concat(Ir,"\u3055\u305b\u3066").concat(Ir,"\u304f\u3060\u3055\u3044\u3002"),[gr.LevelCleared]:"\u30ec\u30d9\u30eb\u30af\u30ea\u30a2\uff01",[gr.LevelFailed]:"\u30ec\u30d9\u30eb\u3057\u3063\u3071\u3044",[gr.NextLevel]:"\u3064\u304e\u306e\u30ec\u30d9\u30eb\u3078",[gr.CannotAdvance]:"\u3059\u3059\u3081\u306a\u3044",[gr.CannotRetreat]:"\u3082\u3069\u308c\u306a\u3044",[gr.CannotAttack]:"\u3053\u3046\u3052\u304d\u305f\u3044\u3057\u3087\u3046\u304c\u306a\u3044",[gr.CannotHeal]:"HP\u304c\u3044\u3063\u3071\u3044\uff01",[gr.CloseLiteralEditor]:"\u3068\u3058\u308b",[gr.StartPuzzleFromBeginning]:"\u306f\u3058\u3081\u304b\u3089",[gr.StartPuzzleFromLastSaved]:"\u3064\u3065\u304d\u304b\u3089",[gr.Settings]:"\u305b\u3063\u3066\u3044",[gr.FlagAndCurrentLanguage]:"\ud83c\uddef\ud83c\uddf5 \u306b\u307b\u3093\u3054",[gr.Credits]:"\u30b9\u30bf\u30c3\u30d5\u30ed\u30fc\u30eb",[gr.ResetToLevelOne]:"\u30ec\u30d9\u30eb\uff11\u306b\u30ea\u30bb\u30c3\u30c8\u3059\u308b",[gr.CreditScreenTitle]:"\u30b9\u30bf\u30c3\u30d5\u30ed\u30fc\u30eb",[gr.Stage2ComingSoon]:"\u30b9\u30c6\u30fc\u30b8\uff11\u30af\u30ea\u30a2\uff01\n\u30b9\u30c6\u30fc\u30b8\uff12\u306f\u304d\u3093\u3058\u3064\u3053\u3046\u304b\u3044\u3088\u3066\u3044\u3067\u3059\u3002",[gr.LoadingDotDotDot]:"\u30ed\u30fc\u30c9\u3061\u3085\u3046...",[gr.TutorialLevel1Part1_MoveTheHero]:"\u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u3092\u3064\u304b\u3063\u3066\n\u3086\u3046\u3057\u3083\u3092\u304b\u3044\u3060\u3093\u306b\n\u3064\u308c\u3066\u3044\u304d\u307e\u3057\u3087\u3046\uff01\n\n".concat(_r,"\u3092\u304a\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),[gr.TutorialLevel1Part2_DragBlueBlock]:"\u3042\u304a\u306e\u30d6\u30ed\u30c3\u30af\u3092\u30c9\u30e9\u30c3\u30b0\u3057\u3066\u3001\u304d\u3044\u308d\u306e\n\u30d6\u30ed\u30c3\u30af\u306e\u3057\u305f\u306b\u3064\u306a\u304c\u3063\u3066\u304f\u3060\u3055\u3044\u3002",[gr.TutorialLevel1Part3_DragAnotherBlock]:"\u3082\u3046\u3072\u3068\u3064\u306e\u3042\u304a\u306e\u30d6\u30ed\u30c3\u30af\u3092\n\u30c9\u30e9\u30c3\u30b0\u3057\u3066\u3064\u306a\u304c\u3063\u3066\u304f\u3060\u3055\u3044\u3002",[gr.TutorialLevel1Part4_PressView]:"".concat(Dr,"\u3092\u304a\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),[gr.TutorialLevel1Part5_PressPlay]:"".concat(Mr,"\u3092\u304a\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),[gr.TutorialLevel1Part6_TryAgain]:"\u304a\u3063\u3068\uff01\n\u3086\u3046\u3057\u3083\u3092\u304b\u3044\u3060\u3093\u306b\n\u3064\u308c\u3066\u3044\u304f\u306e\u306b\u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u304c\n\u305f\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u30b3\u30fc\u30c9\u3092\u3057\u3085\u3046\u305b\u3044\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002",[gr.TutorialLevel2Part1_MoveTheHero]:"\u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u3092\u3064\u304b\u3063\u3066\n\u3086\u3046\u3057\u3083\u3092\u304b\u3044\u3060\u3093\u306b\n\u3064\u308c\u3066\u3044\u304d\u307e\u3057\u3087\u3046\uff01\n\u30d2\u30f3\u30c8\uff1a\n\u30b4\u30d6\u30ea\u30f3\u3092\u305f\u304a\u3055\u306a\u3044\u3068\n\u3086\u3046\u3057\u3083\u304c\u3059\u3059\u3081\u307e\u305b\u3093\u3002",[gr.UseForeverBlockHint]:"\u3052\u3093\u3056\u3044\u306e\u300c".concat(Rr,"\u3082\u3057").concat(Or,"\u300d\u30d6\u30ed\u30c3\u30af\u304c\n\u304f\u308a\u304b\u3048\u3055\u308c\u307e\u305b\u3093\u3002\u304f\u308a\u304b\u3048\u3057\u305f\u3044\u306a\u3089\n\u300c").concat(Rr,"\u3048\u3044\u3048\u3093\u306b").concat(Or,"\u300d\u30d6\u30ed\u30c3\u30af\u306e\u306a\u304b\u306b\n\u3044\u308c\u307e\u3057\u3087\u3046\u3002"),[gr.TutorialLevel9Part1_ScrollDown]:"\u3057\u305f\u306b\u30b9\u30af\u30ed\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002",[gr.TutorialLevel9Part2_ScrollUp]:"\u3046\u3048\u306b\u30b9\u30af\u30ed\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002",[gr.TutorialLevel9Part3_DragLessThan]:"\u307f\u3069\u308a\u306e\u300c".concat(Rr,"<").concat(Or,"\u300d\u30d6\u30ed\u30c3\u30af\u3092\u30ad\u30e3\u30f3\u30d0\u30b9\u306b\n\u30c9\u30e9\u30c3\u30b0\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),[gr.TutorialLevel9Part4_DragHealth]:"\u307f\u305a\u3044\u308d\u306e\u300c".concat(Rr,"HP").concat(Or,"\u300d\u30d6\u30ed\u30c3\u30af\u3092\n\u300c").concat(Rr,"<").concat(Or,"\u300d\u30d6\u30ed\u30c3\u30af\u306e\u3055\u3078\u3093\u306b\u3044\u308c\u3066\u304f\u3060\u3055\u3044\u3002"),[gr.TutorialLevel9Part5_Type3]:"\u300c".concat(Rr,"<").concat(Or,"\u300d\u30d6\u30ed\u30c3\u30af\u306e\u3046\u3078\u3093\u3092\u30bf\u30c3\u30d7\u3057\u3066\u3001\n\u30ad\u30fc\u30dc\u30fc\u30c9\u3067\u300c").concat(Rr,"3").concat(Or,"\u300d\u3092\u304d\u306b\u3085\u3046\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),[gr.AreYouSureYouWantToResetToLevelOne]:"\u30ec\u30d9\u30eb\uff11\u306b\u30ea\u30bb\u30c3\u30c8\uff1f",[gr.ConfirmReset]:"\u3051\u3063\u3066\u3044",[gr.CancelReset]:"\u30ad\u30e3\u30f3\u30bb\u30eb"}};let qr=function(e){return e.SingleGoblin="SingleGoblin",e.MultipleGoblins="MultipleGoblins",e.SingleWitch="SingleWitch",e}({});const Vr={[mr.English]:{[qr.SingleGoblin]:"Your code is almost correct!\nYou successfully defeated\nthe goblin, but you forgot to\nmove the hero to the stairs.\nEdit your code to fix this.",[qr.MultipleGoblins]:"Your code is almost correct!\nYou successfully defeated\nthe goblins, but you forgot to\nmove the hero to the stairs.\nEdit your code to fix this.",[qr.SingleWitch]:"Your code is almost correct!\nYou successfully defeated\nthe witch, but you forgot to\nmove the hero to the stairs.\nEdit your code to fix this."},[mr.Japanese]:{[qr.SingleGoblin]:"\u60dc\u3057\u3044\u3067\u3059\uff01\n\u30b4\u30d6\u30ea\u30f3\u3092\u3046\u307e\u304f\u5012\u305b\u305f\u304c\u3001\n\u52c7\u8005\u3092\u968e\u6bb5\u306b\u9023\u308c\u3066\u884c\u3051\u307e\u305b\u3093\n\u3067\u3057\u305f\u3002\u30b3\u30fc\u30c9\u3092\n\u4fee\u6b63\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002",[qr.MultipleGoblins]:"\u60dc\u3057\u3044\u3067\u3059\uff01\n\u30b4\u30d6\u30ea\u30f3\u9054\u3092\u3046\u307e\u304f\u5012\u305b\u305f\u304c\u3001\n\u52c7\u8005\u3092\u968e\u6bb5\u306b\u9023\u308c\u3066\u884c\u3051\u307e\u305b\u3093\n\u3067\u3057\u305f\u3002\u30b3\u30fc\u30c9\u3092\n\u4fee\u6b63\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002",[qr.SingleWitch]:"\u60dc\u3057\u3044\u3067\u3059\uff01\n\u9b54\u6cd5\u4f7f\u3044\u3092\u3046\u307e\u304f\u5012\u305b\u305f\u304c\u3001\n\u52c7\u8005\u3092\u968e\u6bb5\u306b\u9023\u308c\u3066\u884c\u3051\u307e\u305b\u3093\n\u3067\u3057\u305f\u3002\u30b3\u30fc\u30c9\u3092\n\u4fee\u6b63\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002"},[mr.JapaneseHiragana]:{[qr.SingleGoblin]:"\u304a\u3057\u3044\u3067\u3059\uff01\n\u30b4\u30d6\u30ea\u30f3\u3092\u3046\u307e\u304f\u305f\u304a\u305b\u305f\u304c\u3001\n\u3086\u3046\u3057\u3083\u3092\u304b\u3044\u3060\u3093\u306b\n\u3064\u308c\u3066\u3044\u3051\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u30b3\u30fc\u30c9\u3092\n\u3057\u3085\u3046\u305b\u3044\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002",[qr.MultipleGoblins]:"\u304a\u3057\u3044\u3067\u3059\uff01\n\u30b4\u30d6\u30ea\u30f3\u305f\u3061\u3092\u3046\u307e\u304f\u305f\u304a\u305b\u305f\u304c\u3001\n\u3086\u3046\u3057\u3083\u3092\u304b\u3044\u3060\u3093\u306b\n\u3064\u308c\u3066\u3044\u3051\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u30b3\u30fc\u30c9\u3092\n\u3057\u3085\u3046\u305b\u3044\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002",[qr.SingleWitch]:"\u304a\u3057\u3044\u3067\u3059\uff01\n\u307e\u307b\u3046\u3064\u304b\u3044\u3092\u3046\u307e\u304f\u305f\u304a\u305b\u305f\u304c\u3001\n\u3086\u3046\u3057\u3083\u3092\u304b\u3044\u3060\u3093\u306b\n\u3064\u308c\u3066\u3044\u3051\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u30b3\u30fc\u30c9\u3092\n\u3057\u3085\u3046\u305b\u3044\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002"}};let Kr=function(e){return e.Victory="Victory",e.Defeat="Defeat",e.InProgress="InProgress",e}({}),Gr=function(e){return e.Advance="Advance",e.Retreat="Retreat",e.Attack="Attack",e.Heal="Heal",e}({}),Jr=function(e){return e.HomeScreenStart="HomeScreenStart",e.Settings="Settings",e.NextLevel="NextLevel",e.PuzzleScreenLeft="PuzzleScreenLeft",e.PuzzleScreenMiddle="PuzzleScreenMiddle",e.PuzzleScreenRight="PuzzleScreenRight",e.SettingsScreenClose="SettingsScreenClose",e.SettingsScreenSecondaryClose="SettingsScreenSecondaryClose",e.Language="Language",e.Credits="Credits",e.OpenConfirmResetToLevelOneScreen="OpenConfirmResetToLevelOneScreen",e.CreditsScreenClose="CreditsScreenClose",e.ConfirmResetToLevelOne="ConfirmResetToLevelOne",e.CancelResetToLevelOne="CancelResetToLevelOne",e.ConfirmResetToLevelOneScreenClose="ConfirmResetToLevelOneScreenClose",e.InEditorMiniBattleScreen="InEditorMiniBattleScreen",e}({}),Yr=function(e){return e.Green="Green",e.Purple="Purple",e}({});const Qr={white:ic("#f9f9f9"),gray:ic("#5a6177"),unreachableBlockGray:{primary:ic("#888888"),secondary:ic("#777777"),tertiary:ic("#666666")},backgroundDotGray:ic("#dddddd"),errorAlertRed:ic("#aa0000cc"),paletteBackgroundWhite:ic("#f9f9f9cc"),dividerGray:ic("#d4d4d4"),buttonBlue:ic("#469bbe"),red:{primary:ic("#ff6619"),secondary:ic("#ff5500"),tertiary:ic("#e64d00")},fire:{primary:ic("#ff8c1a"),secondary:ic("#ff8000"),tertiary:ic("#db6e00")},orange:{primary:ic("#ffab19"),secondary:ic("#ec9c13"),tertiary:ic("#cf8b17")},yellow:{primary:ic("#ffbf00"),secondary:ic("#e6ac00"),tertiary:ic("#cc9900")},lime:{primary:ic("#58c059"),secondary:ic("#46b946"),tertiary:ic("#389438")},emerald:{primary:ic("#0fbd8c"),secondary:ic("#0da57a"),tertiary:ic("#0b8e69")},cyan:{primary:ic("#5bb1d6"),secondary:ic("#47a8d1"),tertiary:ic("#2e8eb8")},blue:{primary:ic("#4c97ff"),secondary:ic("#4280d7"),tertiary:ic("#3373cc")},purple:{primary:ic("#9a66ff"),secondary:ic("#855cd6"),tertiary:ic("#774dcb")},magenta:{primary:ic("#cf63cf"),secondary:ic("#c94fc9"),tertiary:ic("#a63fa6")},pink:{primary:ic("#ff6680"),secondary:ic("#ff4d6a"),tertiary:ic("#ff3355")},insertionMarkTransparentBlack:ic("#00000033"),textWhite:ic("#ffffff"),textBrown:ic("#68442d"),squareWhite:ic("#ffffff55"),heartMarkRed:ic("#ef232e"),heartMarkBorderPink:ic("#f3b1b5")},Xr=10,Zr=3,$r={paletteWidth:200,blockPadding:5,blockBorder:1,blockBorderRadius:5,minPalettePadding:5,paletteInterblockMargin:10,snapVerticalRange:35,snapHorizontalRange:35,backgroundDotRadius:2,battleOutcomeAlertWidthFactor:.3,blockTextSizePx:16,unscaledErrorAlertTextSizePx:25,unscaledBattleOutcomeTextSizePx:32,unscaledButtonTextSizePx:25,castleInteriorImage:{width:1280,height:1280},commandSocket:{indent:12,majorBase:20,minorBase:12,height:8},commandSequenceArgIndent:12,interCommandPartMargin:6,healthTextBorder:1,depressedButtonScale:.9},eo={heroDamage:1,goblinDamage:1,witchDamage:1,witchAttackRange:4,witchSummonGoblinHealthCost:1,heroHeal:1},to={[vr.MoveForward]:Qr.blue,[vr.Attack]:Qr.purple,[vr.WhenBattleStarts]:Qr.yellow,[vr.Heal]:Qr.emerald,[vr.MoveBackward]:Qr.blue,[vr.Forever]:Qr.orange,[vr.If]:Qr.orange,[vr.XInFront]:Qr.cyan,[vr.And]:Qr.lime,[vr.Or]:Qr.lime,[vr.Not]:Qr.lime,[vr.Health]:Qr.cyan,[vr.LessThan]:Qr.lime,[vr.Equal]:Qr.lime,[vr.GreaterThan]:Qr.lime},no={sizingWithoutWindowDependentProperties:{blockBorder:$r.blockBorder,blockLiteralBorder:$r.blockBorder,blockDropdownBorder:$r.blockBorder,blockBorderRadius:$r.blockBorderRadius,paletteInterblockMargin:$r.paletteInterblockMargin,paletteTrashCanHorizontalMargin:10,paletteTrashCanVerticalMargin:10,snapVerticalRange:$r.snapVerticalRange,snapHorizontalRange:$r.snapHorizontalRange,backgroundDotRadius:$r.backgroundDotRadius,blockLabelTextSizePx:$r.blockTextSizePx,blockDropdownTextSizePx:$r.blockTextSizePx,blockDropdownHorizontalPadding:0,blockDropdownVerticalPadding:3*$r.blockBorder,blockDropdownArrowWidth:8,blockDropdownArrowLeftMargin:5,blockDropdownArrowVerticalMargin:1,blockLiteralTextSizePx:$r.blockTextSizePx,blockLiteralHorizontalPadding:0,blockLiteralVerticalPadding:3*$r.blockBorder,blockDropdownMenuTextSizePx:14,blockDropdownMenuBorder:$r.blockBorder,blockDropdownMenuBorderRadius:$r.blockBorderRadius,blockDropdownMenuHorizontalPadding:10,blockDropdownMenuChoiceVerticalMargin:8,blockDropdownMenuInterChoiceDividerHeight:1,commandSocket:$r.commandSocket,commandSequenceArgIndent:$r.commandSequenceArgIndent,interBlockPartHorizontalMargin:$r.interCommandPartMargin,commandBlockHorizontalPadding:$r.interCommandPartMargin,commandBlockVerticalPadding:.867*$r.blockTextSizePx-.5*$r.commandSocket.height,queryBlockVerticalPadding:3*$r.blockBorder,queryInsertionMarkHaloRadius:2.000001*$r.blockBorder},colors:{background:Qr.white,paletteBackground:Qr.paletteBackgroundWhite,paletteTrashCan:Qr.insertionMarkTransparentBlack,backgroundDot:Qr.backgroundDotGray,divider:Qr.dividerGray,blocks:to,unreachableBlocks:$o(to,(()=>Qr.unreachableBlockGray)),blockLabelText:Qr.textWhite,blockLiteralText:Qr.gray,blockDropdownText:Qr.textWhite,blockLiteralBackground:Qr.white,commandInsertionMark:Qr.insertionMarkTransparentBlack,queryInsertionMarkHalo:Qr.white},fonts:{blockLabelFont:Ar,blockDropdownFont:Ar,blockLiteralFont:Ar,blockDropdownMenuFont:Ar}},ro={r:0,g:0,b:0,a:0},oo={primary:ro,secondary:ro,tertiary:ro},io={colors:{background:ro,paletteBackground:ro,paletteTrashCan:ro,backgroundDot:ro,divider:ro,blocks:{[vr.WhenBattleStarts]:oo,[vr.MoveForward]:Xo(64,no.colors.blocks[vr.MoveForward]),[vr.LessThan]:Xo(64,no.colors.blocks[vr.LessThan]),[vr.Health]:Xo(64,no.colors.blocks[vr.Health])},unreachableBlocks:$o(to,(()=>Xo(64,Qr.unreachableBlockGray))),blockLabelText:Qr.textWhite,blockLiteralText:Qr.gray,blockDropdownText:Qr.textWhite,blockLiteralBackground:Qr.white,commandInsertionMark:Qr.insertionMarkTransparentBlack,queryInsertionMarkHalo:Qr.white}},ao={sizingWithoutWindowDependentProperties:{blockBorder:$r.blockBorder,blockLiteralBorder:$r.blockBorder,blockDropdownBorder:$r.blockBorder,blockBorderRadius:$r.blockBorderRadius,paletteInterblockMargin:0,paletteTrashCanHorizontalMargin:0,paletteTrashCanVerticalMargin:0,snapVerticalRange:$r.snapVerticalRange,snapHorizontalRange:$r.snapHorizontalRange,backgroundDotRadius:$r.backgroundDotRadius,blockLabelTextSizePx:$r.blockTextSizePx,blockDropdownTextSizePx:$r.blockTextSizePx,blockDropdownHorizontalPadding:0,blockDropdownVerticalPadding:3*$r.blockBorder,blockDropdownArrowWidth:8,blockDropdownArrowLeftMargin:5,blockDropdownArrowVerticalMargin:1,blockLiteralTextSizePx:$r.blockTextSizePx,blockLiteralHorizontalPadding:0,blockLiteralVerticalPadding:3*$r.blockBorder,blockDropdownMenuTextSizePx:14,blockDropdownMenuBorder:$r.blockBorder,blockDropdownMenuBorderRadius:$r.blockBorderRadius,blockDropdownMenuHorizontalPadding:10,blockDropdownMenuChoiceVerticalMargin:8,blockDropdownMenuInterChoiceDividerHeight:1,commandSocket:$r.commandSocket,commandSequenceArgIndent:$r.commandSequenceArgIndent,interBlockPartHorizontalMargin:$r.interCommandPartMargin,commandBlockHorizontalPadding:$r.interCommandPartMargin,commandBlockVerticalPadding:.867*$r.blockTextSizePx-.5*$r.commandSocket.height,queryBlockVerticalPadding:3*$r.blockBorder,queryInsertionMarkHaloRadius:2.000001*$r.blockBorder},colors:{background:ic("#222222"),paletteBackground:ro,paletteTrashCan:ro,backgroundDot:ro,divider:ro,blocks:{...$o(no.colors.blocks,(function(e){return{primary:Qo(1.5,e.primary),secondary:Qo(1.5,e.secondary),tertiary:Qo(1.5,e.tertiary)}})),...ei(no.colors.blocks,(function(e){return{primary:{...Qo(.5,e.primary),a:100},secondary:{...Qo(.5,e.secondary),a:100},tertiary:{...Qo(.5,e.tertiary),a:100}}}))},unreachableBlocks:{...$o(no.colors.blocks,(()=>Qr.unreachableBlockGray)),...ei(no.colors.blocks,(()=>Qr.unreachableBlockGray))},blockLabelText:Qr.textWhite,blockLiteralText:Qr.gray,blockDropdownText:Qr.textWhite,blockLiteralBackground:Qr.white,commandInsertionMark:Qr.insertionMarkTransparentBlack,queryInsertionMarkHalo:Qr.white}},so=[br.Nothing,br.Goblin,br.Witch],lo={[vr.WhenBattleStarts]:{[mr.English]:"when battle starts %%maleCommand %%undeletable %%entryPoint",[mr.Japanese]:"\u30d0\u30c8\u30eb\u304c\u59cb\u307e\u3063\u305f\u3068\u304d %%maleCommand %%undeletable %%entryPoint",[mr.JapaneseHiragana]:"\u30d0\u30c8\u30eb\u304c\u306f\u3058\u307e\u3063\u305f\u3068\u304d %%maleCommand %%undeletable %%entryPoint"},[vr.MoveForward]:{[mr.English]:"move forward %%hermaphroditeCommand",[mr.Japanese]:"\u4e00\u6b69\u9032\u3080 %%hermaphroditeCommand",[mr.JapaneseHiragana]:"\u3044\u3063\u307d\u3059\u3059\u3080 %%hermaphroditeCommand"},[vr.Attack]:{[mr.English]:"attack %%hermaphroditeCommand",[mr.Japanese]:"\u653b\u6483\u3059\u308b %%hermaphroditeCommand",[mr.JapaneseHiragana]:"\u3053\u3046\u3052\u304d\u3059\u308b %%hermaphroditeCommand"},[vr.Heal]:{[mr.English]:"heal %%hermaphroditeCommand",[mr.Japanese]:"\u56de\u5fa9\u3059\u308b %%hermaphroditeCommand",[mr.JapaneseHiragana]:"\u304b\u3044\u3075\u304f\u3059\u308b %%hermaphroditeCommand"},[vr.MoveBackward]:{[mr.English]:"move backward %%hermaphroditeCommand",[mr.Japanese]:"\u4e00\u6b69\u623b\u308b %%hermaphroditeCommand",[mr.JapaneseHiragana]:"\u3044\u3063\u307d\u3082\u3069\u308b %%hermaphroditeCommand"},[vr.Forever]:{[mr.English]:"forever {} %%femaleCommand",[mr.Japanese]:"\u6c38\u9060\u306b {} %%femaleCommand",[mr.JapaneseHiragana]:"\u3048\u3044\u3048\u3093\u306b {} %%femaleCommand"},[vr.If]:{[mr.English]:"if () then {} %%hermaphroditeCommand",[mr.Japanese]:"\u3082\u3057 () \u306a\u3089 {} %%hermaphroditeCommand",[mr.JapaneseHiragana]:"\u3082\u3057 () \u306a\u3089 {} %%hermaphroditeCommand"},[vr.XInFront]:{[mr.English]:"square in front has [".concat(so.join(" || "),"] %%query"),[mr.Japanese]:"\u524d\u306e\u30de\u30b9\u76ee\u306b [".concat(so.join(" || "),"] %%query"),[mr.JapaneseHiragana]:"\u307e\u3048\u306e\u30de\u30b9\u3081\u306b [".concat(so.join(" || "),"] %%query")},[vr.And]:{[mr.English]:"() and () %%query",[mr.Japanese]:"() \u304b\u3064 () %%query",[mr.JapaneseHiragana]:"() \u304b\u3064 () %%query"},[vr.Or]:{[mr.English]:"() or () %%query",[mr.Japanese]:"() \u307e\u305f\u306f () %%query",[mr.JapaneseHiragana]:"() \u307e\u305f\u306f () %%query"},[vr.Not]:{[mr.English]:"not () %%query",[mr.Japanese]:"() \u3067\u306a\u3044 %%query",[mr.JapaneseHiragana]:"() \u3067\u306a\u3044 %%query"},[vr.Health]:{[mr.English]:"HP %%query",[mr.Japanese]:"HP %%query",[mr.JapaneseHiragana]:"HP %%query"},[vr.LessThan]:{[mr.English]:"() < () %%query",[mr.Japanese]:"() < () %%query",[mr.JapaneseHiragana]:"() < () %%query"},[vr.Equal]:{[mr.English]:"() = () %%query",[mr.Japanese]:"() = () %%query",[mr.JapaneseHiragana]:"() = () %%query"},[vr.GreaterThan]:{[mr.English]:"() > () %%query",[mr.Japanese]:"() > () %%query",[mr.JapaneseHiragana]:"() > () %%query"}},co={[mr.English]:{[br.Nothing]:"nothing",[br.Goblin]:"goblin",[br.Witch]:"witch"},[mr.Japanese]:{[br.Nothing]:"\u4f55\u3082\u306a\u3044",[br.Goblin]:"\u30b4\u30d6\u30ea\u30f3\u304c\u3044\u308b",[br.Witch]:"\u9b54\u6cd5\u4f7f\u3044\u304c\u3044\u308b"},[mr.JapaneseHiragana]:{[br.Nothing]:"\u306a\u306b\u3082\u306a\u3044",[br.Goblin]:"\u30b4\u30d6\u30ea\u30f3\u304c\u3044\u308b",[br.Witch]:"\u307e\u307b\u3046\u3064\u304b\u3044\u304c\u3044\u308b"}},uo={[mr.English]:$o(lo,(e=>Zo(e[mr.English]))),[mr.Japanese]:$o(lo,(e=>Zo(e[mr.Japanese]))),[mr.JapaneseHiragana]:$o(lo,(e=>Zo(e[mr.JapaneseHiragana])))},ho="GhostSvg",fo="FrontCanvas",po="BlockLiteralEditor",mo="BlockLiteralEditor__Form",go="BlockLiteralEditor__Input",vo="BlockLiteralEditor__Button",bo=.1,yo={add:(e,t)=>e+t,scale:(e,t)=>e*t},ko={add:He,scale:je},wo={add:(e,t)=>({r:e.r+t.r,g:e.g+t.g,b:e.b+t.b,a:e.a+t.a}),scale:(e,t)=>({r:e.r*t,g:e.g*t,b:e.b*t,a:e.a*t})},xo="com.zaqlo.studios.castlecoders.state",So=mr.English,Lo={totalDurationInSeconds:3,movingPhaseDurationInSeconds:.5,insertionMarkTimeInSeconds:.4,blockReleaseTimeInSeconds:1.5,firstDragEnd:{x:280,y:90},secondDragEnd:{x:280,y:140}},Eo={paletteScroll:{totalDurationInSeconds:3,fingerDownTimeInSeconds:0,dragStartTimeInSeconds:.5,dragEndTimeInSeconds:1,fingerUpTimeInSeconds:2},paletteToCanvasDrag:{totalDurationInSeconds:3,movingPhaseDurationInSeconds:.5,healthBlockIntoLessThanBlockInsertionMarkTimeInSeconds:.4,blockReleaseTimeInSeconds:1.5,lessThanBlockDragEnd:{x:$r.paletteWidth+80,y:200}},literalTap:{fingerFlashPeriod:1}},Co=1,To=1,Bo=.3,Ao=.3,Po=[wr.Hero,wr.Goblin],Io=[wr.Goblin],_o=[wr.Hero],Do=[wr.Witch],Mo=.3,Ro=.8,Oo=.5,No=.7,zo=new Map,Fo="<<<<SEPARATOR>>>>",Ho={[mr.English]:120,[mr.Japanese]:94,[mr.JapaneseHiragana]:94},Uo={[mr.English]:72,[mr.Japanese]:94,[mr.JapaneseHiragana]:72},Wo=new Promise((e=>setTimeout(e,1e3))),jo={kind:sr.Greensleeves,timeInSeconds:.5,loop:!0,gain:.1},qo={kind:sr.PuzzleMusic,timeInSeconds:.5,loop:!0,gain:.2},Vo=.8,Ko=.275,Go=.8,Jo=.45,Yo=.25;function Qo(e,t){const n=t.r/255,r=t.g/255,o=t.b/255,i=n*(.213-.213*e)+r*(.715+.285*e)+o*(.072-.072*e),a=n*(.213-.213*e)+r*(.715-.715*e)+o*(.072+.928*e);return{r:Nc(255*(n*(.213+.787*e)+r*(.715-.715*e)+o*(.072-.072*e))),g:Nc(255*i),b:Nc(255*a),a:t.a}}function Xo(e,t){return{primary:{...t.primary,a:e},secondary:{...t.secondary,a:e},tertiary:{...t.tertiary,a:e}}}function Zo(e){const t={undeletable:e.includes("%%undeletable"),hermaphroditeCommand:e.includes("%%hermaphroditeCommand"),maleCommand:e.includes("%%maleCommand"),femaleCommand:e.includes("%%femaleCommand"),query:e.includes("%%query"),entryPoint:e.includes("%%entryPoint")};let n=e.replace(/%%(?:undeletable|hermaphroditeCommand|maleCommand|femaleCommand|query|entryPoint)/g,"").replace(/ {2,}/g," ");const r=[],o=[],i=[];for(;n.length>0;){const t=n.match(/^\([^)]*\)/);if(null!==t){r.push({kind:et.Expression}),i.push(t[0].slice(1,-1).trim()),n=n.slice(t[0].length);continue}const a=n.match(/^\[[^\]]*\]/);if(null!==a){const t=a[0].slice(1,-1).split("||").map((e=>e.trim()));if(!t.every((e=>"string"===typeof br[e])))throw new Error("Illegal dropdown value in block editor string: "+JSON.stringify(e));r.push({kind:et.Dropdown,choices:t}),o.push(t[0]),n=n.slice(a[0].length);continue}const s=n.match(/^\{\}/);if(null!==s){r.push({kind:et.CommandSequence}),n=n.slice(s[0].length);continue}const l=n.search(/[([{]/),c=n.slice(0,-1===l?n.length:l),u=c.trim();u.length>0&&r.push({kind:et.Label,text:u}),n=n.slice(c.length)}const a={expressions:i.map((e=>({isLiteral:!0,source:e}))),dropdowns:o,sequences:r.filter((e=>e.kind===et.CommandSequence)).map((()=>[]))};if(t.query&&!t.hermaphroditeCommand&&!t.maleCommand&&!t.femaleCommand&&!t.entryPoint)return{kind:$e.Query,isDeletable:!t.undeletable,signature:r.filter((t=>{if(t.kind===et.Label||t.kind===et.Dropdown||t.kind===et.Expression)return!0;throw new Error("Illegal block def string: "+JSON.stringify(e))})),defaultArgs:a};if(!t.query&&1===[t.hermaphroditeCommand,t.maleCommand,t.femaleCommand].filter((e=>e)).length)return{kind:$e.Command,isDeletable:!t.undeletable,isEntryPoint:t.entryPoint,hasFemaleSocket:t.femaleCommand||t.hermaphroditeCommand,hasMaleSocket:t.maleCommand||t.hermaphroditeCommand,signature:r,defaultArgs:a};throw new Error("Illegal block def string: "+JSON.stringify(e))}function $o(e,t){return{[vr.MoveForward]:t(e[vr.MoveForward],vr.MoveForward),[vr.Attack]:t(e[vr.Attack],vr.Attack),[vr.WhenBattleStarts]:t(e[vr.WhenBattleStarts],vr.WhenBattleStarts),[vr.Heal]:t(e[vr.Heal],vr.Heal),[vr.Forever]:t(e[vr.Forever],vr.Forever),[vr.MoveBackward]:t(e[vr.MoveBackward],vr.MoveBackward),[vr.If]:t(e[vr.If],vr.If),[vr.XInFront]:t(e[vr.XInFront],vr.XInFront),[vr.And]:t(e[vr.And],vr.And),[vr.Or]:t(e[vr.Or],vr.Or),[vr.Not]:t(e[vr.Not],vr.Not),[vr.Health]:t(e[vr.Health],vr.Health),[vr.LessThan]:t(e[vr.LessThan],vr.LessThan),[vr.Equal]:t(e[vr.Equal],vr.Equal),[vr.GreaterThan]:t(e[vr.GreaterThan],vr.GreaterThan)}}function ei(e,t){return{[yr.MoveForward]:t(e[vr.MoveForward],vr.MoveForward),[yr.Attack]:t(e[vr.Attack],vr.Attack),[yr.WhenBattleStarts]:t(e[vr.WhenBattleStarts],vr.WhenBattleStarts),[yr.Heal]:t(e[vr.Heal],vr.Heal),[yr.Forever]:t(e[vr.Forever],vr.Forever),[yr.MoveBackward]:t(e[vr.MoveBackward],vr.MoveBackward),[yr.If]:t(e[vr.If],vr.If),[yr.XInFront]:t(e[vr.XInFront],vr.XInFront),[yr.And]:t(e[vr.And],vr.And),[yr.Or]:t(e[vr.Or],vr.Or),[yr.Not]:t(e[vr.Not],vr.Not),[yr.Health]:t(e[vr.Health],vr.Health),[yr.LessThan]:t(e[vr.LessThan],vr.LessThan),[yr.Equal]:t(e[vr.Equal],vr.Equal),[yr.GreaterThan]:t(e[vr.GreaterThan],vr.GreaterThan)}}const ti=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296===(64512&o)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},ni={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<e.length;o+=3){const t=e[o],i=o+1<e.length,a=i?e[o+1]:0,s=o+2<e.length,l=s?e[o+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ti(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){const i=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<e.length;){const t=n[e.charAt(o++)],i=o<e.length?n[e.charAt(o)]:0;++o;const a=o<e.length?n[e.charAt(o)]:64;++o;const s=o<e.length?n[e.charAt(o)]:64;if(++o,null==t||null==i||null==a||null==s)throw new ri;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ri extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oi=function(e){return function(e){const t=ti(e);return ni.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ii=function(e){try{return ni.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const ai=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,si=()=>{try{return ai()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/castle-coders-alpha",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&ii(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},li=e=>{const t=(e=>{var t,n;return null===(n=null===(t=si())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},ci=()=>{var e;return null===(e=si())||void 0===e?void 0:e.config};class ui{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class di extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,di.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hi.prototype.create)}}class hi{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],o=r?function(e,t){return e.replace(fi,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",i="".concat(this.serviceName,": ").concat(o," (").concat(n,").");return new di(n,i,t)}}const fi=/\{\$([^}]+)}/g;function pi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const n=e[o],i=t[o];if(mi(n)&&mi(i)){if(!pi(n,i))return!1}else if(n!==i)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function mi(e){return null!==e&&"object"===typeof e}function gi(e){return e&&e._delegate?e._delegate:e}class vi{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const bi="[DEFAULT]";class yi{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ui;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(o)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const i=this.instances.get(r);return i&&e(i,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const o of n)try{o(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(o=t,o===bi?void 0:o),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var o;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ki{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yi(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const wi=[];var xi;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(xi||(xi={}));const Si={debug:xi.DEBUG,verbose:xi.VERBOSE,info:xi.INFO,warn:xi.WARN,error:xi.ERROR,silent:xi.SILENT},Li=xi.INFO,Ei={[xi.DEBUG]:"log",[xi.VERBOSE]:"log",[xi.INFO]:"info",[xi.WARN]:"warn",[xi.ERROR]:"error"},Ci=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ei[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};const Ti=(e,t)=>t.some((t=>e instanceof t));let Bi,Ai;const Pi=new WeakMap,Ii=new WeakMap,_i=new WeakMap,Di=new WeakMap,Mi=new WeakMap;let Ri={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ii.get(e);if("objectStoreNames"===t)return e.objectStoreNames||_i.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zi(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Oi(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ai||(Ai=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Fi(this),n),zi(Pi.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zi(e.apply(Fi(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];const i=e.call(Fi(this),t,...r);return _i.set(i,t.sort?t.sort():[t]),zi(i)}}function Ni(e){return"function"===typeof e?Oi(e):(e instanceof IDBTransaction&&function(e){if(Ii.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));Ii.set(e,t)}(e),Ti(e,Bi||(Bi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ri):e)}function zi(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(zi(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&Pi.set(t,e)})).catch((()=>{})),Mi.set(t,e),t}(e);if(Di.has(e))return Di.get(e);const t=Ni(e);return t!==e&&(Di.set(e,t),Mi.set(t,e)),t}const Fi=e=>Mi.get(e);const Hi=["get","getKey","getAll","getAllKeys","count"],Ui=["put","add","delete","clear"],Wi=new Map;function ji(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Wi.get(t))return Wi.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=Ui.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!Hi.includes(n))return;const i=async function(e){const t=this.transaction(e,o?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(i=i.index(s.shift())),(await Promise.all([i[n](...s),o&&t.done]))[0]};return Wi.set(t,i),i}Ri=(e=>({...e,get:(t,n,r)=>ji(t,n)||e.get(t,n,r),has:(t,n)=>!!ji(t,n)||e.has(t,n)}))(Ri);class qi{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Vi="@firebase/app",Ki="0.10.10",Gi=new class{constructor(e){this.name=e,this._logLevel=Li,this._logHandler=Ci,this._userLogHandler=null,wi.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xi))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Si[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xi.DEBUG,...t),this._logHandler(this,xi.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xi.VERBOSE,...t),this._logHandler(this,xi.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xi.INFO,...t),this._logHandler(this,xi.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xi.WARN,...t),this._logHandler(this,xi.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xi.ERROR,...t),this._logHandler(this,xi.ERROR,...t)}}("@firebase/app"),Ji="@firebase/app-compat",Yi="@firebase/analytics-compat",Qi="@firebase/analytics",Xi="@firebase/app-check-compat",Zi="@firebase/app-check",$i="@firebase/auth",ea="@firebase/auth-compat",ta="@firebase/database",na="@firebase/database-compat",ra="@firebase/functions",oa="@firebase/functions-compat",ia="@firebase/installations",aa="@firebase/installations-compat",sa="@firebase/messaging",la="@firebase/messaging-compat",ca="@firebase/performance",ua="@firebase/performance-compat",da="@firebase/remote-config",ha="@firebase/remote-config-compat",fa="@firebase/storage",pa="@firebase/storage-compat",ma="@firebase/firestore",ga="@firebase/vertexai-preview",va="@firebase/firestore-compat",ba="firebase",ya="[DEFAULT]",ka={[Vi]:"fire-core",[Ji]:"fire-core-compat",[Qi]:"fire-analytics",[Yi]:"fire-analytics-compat",[Zi]:"fire-app-check",[Xi]:"fire-app-check-compat",[$i]:"fire-auth",[ea]:"fire-auth-compat",[ta]:"fire-rtdb",[na]:"fire-rtdb-compat",[ra]:"fire-fn",[oa]:"fire-fn-compat",[ia]:"fire-iid",[aa]:"fire-iid-compat",[sa]:"fire-fcm",[la]:"fire-fcm-compat",[ca]:"fire-perf",[ua]:"fire-perf-compat",[da]:"fire-rc",[ha]:"fire-rc-compat",[fa]:"fire-gcs",[pa]:"fire-gcs-compat",[ma]:"fire-fst",[va]:"fire-fst-compat",[ga]:"fire-vertex","fire-js":"fire-js",[ba]:"fire-js-all"},wa=new Map,xa=new Map,Sa=new Map;function La(e,t){try{e.container.addComponent(t)}catch(n){Gi.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ea(e){const t=e.name;if(Sa.has(t))return Gi.debug("There were multiple attempts to register component ".concat(t,".")),!1;Sa.set(t,e);for(const n of wa.values())La(n,e);for(const n of xa.values())La(n,e);return!0}function Ca(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Ta=new hi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ba{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new vi("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ta.create("app-deleted",{appName:this._name})}}const Aa="10.13.1";function Pa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:ya,automaticDataCollectionEnabled:!1},t),o=r.name;if("string"!==typeof o||!o)throw Ta.create("bad-app-name",{appName:String(o)});if(n||(n=ci()),!n)throw Ta.create("no-options");const i=wa.get(o);if(i){if(pi(n,i.options)&&pi(r,i.config))return i;throw Ta.create("duplicate-app",{appName:o})}const a=new ki(o);for(const l of Sa.values())a.addComponent(l);const s=new Ba(n,r,a);return wa.set(o,s),s}function Ia(e,t,n){var r;let o=null!==(r=ka[e])&&void 0!==r?r:e;n&&(o+="-".concat(n));const i=o.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(o,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(o,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Gi.warn(e.join(" "))}Ea(new vi("".concat(o,"-version"),(()=>({library:o,version:t})),"VERSION"))}const _a="firebase-heartbeat-database",Da=1,Ma="firebase-heartbeat-store";let Ra=null;function Oa(){return Ra||(Ra=function(e,t){let{blocked:n,upgrade:r,blocking:o,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=zi(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(zi(a.result),e.oldVersion,e.newVersion,zi(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}(_a,Da,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ma)}catch(n){console.warn(n)}}}).catch((e=>{throw Ta.create("idb-open",{originalErrorMessage:e.message})}))),Ra}async function Na(e,t){try{const n=(await Oa()).transaction(Ma,"readwrite"),r=n.objectStore(Ma);await r.put(t,za(e)),await n.done}catch(n){if(n instanceof di)Gi.warn(n.message);else{const e=Ta.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Gi.warn(e.message)}}}function za(e){return"".concat(e.name,"!").concat(e.options.appId)}class Fa{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ua(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ha();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(n){Gi.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ha(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const o of e){const e=n.find((e=>e.agent===o.agent));if(e){if(e.dates.push(o.date),Wa(n)>t){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Wa(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),o=oi(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Gi.warn(t),""}}}function Ha(){return(new Date).toISOString().substring(0,10)}class Ua{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Oa()).transaction(Ma),n=await t.objectStore(Ma).get(za(e));return await t.done,n}catch(t){if(t instanceof di)Gi.warn(t.message);else{const e=Ta.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Gi.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Na(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Na(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Wa(e){return oi(JSON.stringify({version:2,heartbeats:e})).length}var ja;ja="",Ea(new vi("platform-logger",(e=>new qi(e)),"PRIVATE")),Ea(new vi("heartbeat",(e=>new Fa(e)),"PRIVATE")),Ia(Vi,Ki,ja),Ia(Vi,Ki,"esm2017"),Ia("fire-js","");Ia("firebase","10.13.1","app");const qa="firebasestorage.googleapis.com",Va="storageBucket";class Ka extends di{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Ya(e),"Firebase Storage: ".concat(t," (").concat(Ya(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ka.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ya(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Ga,Ja;function Ya(e){return"storage/"+e}function Qa(){return new Ka(Ga.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Xa(){return new Ka(Ga.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Za(){return new Ka(Ga.CANCELED,"User canceled the upload/download.")}function $a(){return new Ka(Ga.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function es(e){return new Ka(Ga.INVALID_ARGUMENT,e)}function ts(){return new Ka(Ga.APP_DELETED,"The Firebase app was deleted.")}function ns(e,t){return new Ka(Ga.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function rs(e){throw new Ka(Ga.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Ga||(Ga={}));class os{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=os.makeFromUrl(e,t)}catch(o){return new os(e,"")}if(""===n.path)return n;throw r=e,new Ka(Ga.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const o=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),s=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://".concat(t===qa?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<s.length;l++){const t=s[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let o=r[t.indices.path];o||(o=""),n=new os(e,o),t.postModify(n);break}}if(null==n)throw function(e){return new Ka(Ga.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class is{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function as(e){return"string"===typeof e||e instanceof String}function ss(e){return ls()&&e instanceof Blob}function ls(){return"undefined"!==typeof Blob}function cs(e,t,n,r){if(r<t)throw es("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw es("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function us(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function ds(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function hs(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),o=-1!==t.indexOf(e);return n||r||o}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Ja||(Ja={}));class fs{constructor(e,t,n,r,o,i,a,s,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=s,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new ps(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Ja.NO_ERROR,o=n.getStatus();if(!t||hs(o,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Ja.ABORT;return void e(!1,new ps(!1,null,t))}const i=-1!==this.successCodes_.indexOf(o);e(!0,new ps(i,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,o=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(o,o.getResponse());void 0!==e?n(e):n()}catch(i){r(i)}else if(null!==o){const e=Qa();e.serverResponse=o.getErrorText(),this.errorCallback_?r(this.errorCallback_(o,e)):r(e)}else if(t.canceled){r(this.appDelete_?ts():Za())}else{r(Xa())}};this.canceled_?t(0,new ps(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,o=null,i=null,a=!1,s=0;function l(){return 2===s}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){o=setTimeout((()=>{o=null,e(f,l())}),t)}function h(){i&&clearTimeout(i)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let i;r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),d(i)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==o?(e||(s=2),clearTimeout(o),d(0)):e||(s=1)))}return d(0),i=setTimeout((()=>{a=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ps{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function ms(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function gs(){const e=ms();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(ls())return new Blob(n);throw new Ka(Ga.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function vs(e){if("undefined"===typeof atob)throw t="base-64",new Ka(Ga.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const bs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ys{constructor(e,t){this.data=e,this.contentType=t||null}}function ks(e,t){switch(e){case bs.RAW:return new ys(ws(t));case bs.BASE64:case bs.BASE64URL:return new ys(xs(e,t));case bs.DATA_URL:return new ys(function(e){const t=new Ss(e);return t.base64?xs(bs.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw ns(bs.DATA_URL,"Malformed data URL.")}return ws(t)}(t.rest)}(t),new Ss(t).contentType)}throw Qa()}function ws(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function xs(e,t){switch(e){case bs.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw ns(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case bs.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw ns(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=vs(t)}catch(o){if(o.message.includes("polyfill"))throw o;throw ns(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Ss{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ns(bs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Ls{constructor(e,t){let n=0,r="";ss(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(ss(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Ls(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Ls(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(ls()){const e=t.map((e=>e instanceof Ls?e.data_:e));return new Ls(gs.apply(null,e))}{const e=t.map((e=>as(e)?ks(bs.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let o=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[o++]=e[t]})),new Ls(r,!0)}}uploadData(){return this.data_}}function Es(e){let t;try{t=JSON.parse(e)}catch(r){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function Cs(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Ts(e,t){return t}class Bs{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Ts}}let As=null;function Ps(){if(As)return As;const e=[];e.push(new Bs("bucket")),e.push(new Bs("generation")),e.push(new Bs("metageneration")),e.push(new Bs("name","fullPath",!0));const t=new Bs("name");t.xform=function(e,t){return function(e){return!as(e)||e.length<2?e:Cs(e)}(t)},e.push(t);const n=new Bs("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Bs("timeCreated")),e.push(new Bs("updated")),e.push(new Bs("md5Hash",null,!0)),e.push(new Bs("cacheControl",null,!0)),e.push(new Bs("contentDisposition",null,!0)),e.push(new Bs("contentEncoding",null,!0)),e.push(new Bs("contentLanguage",null,!0)),e.push(new Bs("contentType",null,!0)),e.push(new Bs("metadata","customMetadata",!0)),As=e,As}function Is(e,t,n){const r={type:"file"},o=n.length;for(let i=0;i<o;i++){const e=n[i];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,o=new os(n,r);return t._makeStorageReference(o)}})}(r,e),r}function _s(e,t,n){const r=Es(t);if(null===r)return null;return Is(e,r,n)}function Ds(e,t){const n={},r=t.length;for(let o=0;o<r;o++){const r=t[o];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Ms{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Rs(e){if(!e)throw Qa()}function Os(e,t){return function(n,r){const o=_s(e,r,t);return Rs(null!==o),o}}function Ns(e){return function(t,n){let r;var o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Ka(Ga.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Ka(Ga.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new Ka(Ga.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):r=403===t.getStatus()?function(e){return new Ka(Ga.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}(e.path):n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function zs(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Fs(e,t,n,r,o){const i=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const s=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;const l=zs(t,r,o),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ds(l,n)+"\r\n--"+s+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+s+"--",d=Ls.getBlob(c,r,u);if(null===d)throw $a();const h={name:l.fullPath},f=us(i,e.host,e._protocol),p=e.maxUploadRetryTime,m=new Ms(f,"POST",Os(e,n),p);return m.urlParams=h,m.headers=a,m.body=d.uploadData(),m.errorHandler=Ns(t),m}let Hs=null;class Us{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ja.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Ja.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Ja.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw rs("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rs("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rs("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw rs("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rs("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Ws extends Us{initXhr(){this.xhr_.responseType="text"}}function js(){return Hs?Hs():new Ws}class qs{constructor(e,t){this._service=e,this._location=t instanceof os?t:os.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new qs(e,t)}get root(){const e=new os(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Cs(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new os(this._location.bucket,e);return new qs(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Ka(Ga.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Vs(e,t,n){e._throwIfRoot("uploadBytes");const r=Fs(e.storage,e._location,Ps(),new Ls(t,!0),n);return e.storage.makeRequestWithTokens(r,js).then((t=>({metadata:t,ref:e})))}function Ks(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new os(e._location.bucket,n);return new qs(e.storage,r)}function Gs(e,t){if(e instanceof Xs){const n=e;if(null==n._bucket)throw new Ka(Ga.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Va+"' property when initializing the app?");const r=new qs(n,n._bucket);return null!=t?Gs(r,t):r}return void 0!==t?Ks(e,t):e}function Js(e,t){if(t&&function(e){return/^[A-Za-z]+:\/\//.test(e)}(t)){if(e instanceof Xs)return new qs(e,t);throw es("To use ref(service, url), the first argument must be a Storage instance.")}return Gs(e,t)}function Ys(e,t){const n=null===t||void 0===t?void 0:t[Va];return null==n?null:os.makeFromBucketSpec(n,e)}function Qs(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:o}=r;o&&(e._overrideAuthToken="string"===typeof o?o:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[oi(JSON.stringify({alg:"none",type:"JWT"})),oi(JSON.stringify(i)),""].join(".")}(o,e.app.options.projectId))}class Xs{constructor(e,t,n,r,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=qa,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?os.makeFromBucketSpec(r,this._host):Ys(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=os.makeFromBucketSpec(this._url,e):this._bucket=Ys(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cs("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cs("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qs(this,e)}_makeRequest(e,t,n,r){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new is(ts());{const i=function(e,t,n,r,o,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const s=ds(e.urlParams),l=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new fs(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,o,a)}(e,this._appId,n,r,t,this._firebaseVersion,o);return this._requests.add(i),i.getPromise().then((()=>this._requests.delete(i)),(()=>this._requests.delete(i))),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Zs="@firebase/storage",$s="0.13.1",el="storage";function tl(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Xs(r,o,i,n,Aa)}Ea(new vi(el,tl,"PUBLIC").setMultipleInstances(!0)),Ia(Zs,$s,""),Ia(Zs,$s,"esm2017");const nl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya;const t=wa.get(e);if(!t&&e===ya&&ci())return Pa();if(!t)throw Ta.create("no-app",{appName:e});return t}(),t=arguments.length>1?arguments[1]:void 0;e=gi(e);const n=Ca(e,el).getImmediate({identifier:t}),r=li("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Qs(e,t,n,r)}(n,...r),n}(Pa({apiKey:"AIzaSyCk9vuv-mY15d5RkKG45Nz90oQrNQtrATY",authDomain:"castle-coders.firebaseapp.com",projectId:"castle-coders",storageBucket:"castle-coders.appspot.com",messagingSenderId:"430020675972",appId:"1:430020675972:web:619f1cef2d906d93bbb5d1",measurementId:"G-3911408VKE"}));function rl(e,t){var n;return function(e,t,n){return Vs(e=gi(e),t,n)}((n=e,Js(gi(nl),n)),t)}var ol=function(e){return e[e.ConstNull=145]="ConstNull",e[e.ConstFalse=146]="ConstFalse",e[e.ConstTrue=147]="ConstTrue",e[e.OffsetPosInt1Byte=148]="OffsetPosInt1Byte",e[e.OffsetNegInt1Byte=149]="OffsetNegInt1Byte",e[e.Int2Byte=150]="Int2Byte",e[e.Int4Byte=151]="Int4Byte",e[e.Int8Byte=152]="Int8Byte",e[e.Float64=153]="Float64",e[e.ConstEmptyArray=154]="ConstEmptyArray",e[e.Array1Element=155]="Array1Element",e[e.Array2Element=156]="Array2Element",e[e.Array3Element=157]="Array3Element",e[e.Array4Element=158]="Array4Element",e[e.Array5Element=159]="Array5Element",e[e.Array6Element=160]="Array6Element",e[e.Array7Element=161]="Array7Element",e[e.Array8Element=162]="Array8Element",e[e.ArrayLen1Byte=163]="ArrayLen1Byte",e[e.ArrayLen2Byte=164]="ArrayLen2Byte",e[e.ArrayLen4Byte=165]="ArrayLen4Byte",e[e.ConstEmptyObject=166]="ConstEmptyObject",e[e.Object1Command=167]="Object1Command",e[e.Object2Command=168]="Object2Command",e[e.Object3Command=169]="Object3Command",e[e.Object4Command=170]="Object4Command",e[e.Object5Command=171]="Object5Command",e[e.Object6Command=172]="Object6Command",e[e.Object7Command=173]="Object7Command",e[e.Object8Command=174]="Object8Command",e[e.ObjectCommandCount1Byte=175]="ObjectCommandCount1Byte",e[e.ObjectCommandCount2Byte=176]="ObjectCommandCount2Byte",e[e.ObjectCommandCount4Byte=177]="ObjectCommandCount4Byte",e[e.Ref1Byte=178]="Ref1Byte",e[e.Ref2Byte=179]="Ref2Byte",e[e.Ref4Byte=180]="Ref4Byte",e[e.BigUint=181]="BigUint",e[e.NegBigInt=182]="NegBigInt",e[e.ConstEmptyString=183]="ConstEmptyString",e[e.String1Byte=184]="String1Byte",e[e.String2Byte=185]="String2Byte",e[e.String3Byte=186]="String3Byte",e[e.String4Byte=187]="String4Byte",e[e.String5Byte=188]="String5Byte",e[e.String6Byte=189]="String6Byte",e[e.String7Byte=190]="String7Byte",e[e.String8Byte=191]="String8Byte",e[e.String9Byte=192]="String9Byte",e[e.String10Byte=193]="String10Byte",e[e.String11Byte=194]="String11Byte",e[e.String12Byte=195]="String12Byte",e[e.String13Byte=196]="String13Byte",e[e.String14Byte=197]="String14Byte",e[e.String15Byte=198]="String15Byte",e[e.StringLen1Byte=199]="StringLen1Byte",e[e.StringLen2Byte=200]="StringLen2Byte",e[e.StringLen4Byte=201]="StringLen4Byte",e[e.ByteArray4Element=202]="ByteArray4Element",e[e.ByteArray8Element=203]="ByteArray8Element",e[e.ByteArray16Element=204]="ByteArray16Element",e[e.ByteArray32Element=205]="ByteArray32Element",e[e.ByteArray64Element=206]="ByteArray64Element",e}(ol||{});const il=255,al=65535,sl=256**4-1;class ll{constructor(e,t){this.lookupTable=void 0,this.isUsed=!1,this.handleInvalidJsonValue=void 0,this.lookupTable=e.slice(),this.handleInvalidJsonValue=null!==t&&void 0!==t?t:()=>{}}writeNodeAndMarkAnalyzerAsUsed(e,t){if(this.isUsed)throw new Error("NonReusableJsonAnalyzer is already used.");this.isUsed=!0,this.writeNode(e,t)}writeNode(e,t){if(Number.isInteger(e))return void this.writeTaggedInt(e,t);if("number"===typeof e)return t(ol.Float64),this.writeUntaggedF64(e,t),void(Number.isFinite(e)||this.handleInvalidJsonValue(e,!0));if("bigint"===typeof e)throw new Error("BigInts are not supported.");if("symbol"===typeof e)return t(ol.ConstNull),void this.handleInvalidJsonValue(e,!1);if(null===e)return void t(ol.ConstNull);if(!1===e)return void t(ol.ConstFalse);if(!0===e)return void t(ol.ConstTrue);if(""===e)return void t(ol.ConstEmptyString);if(Array.isArray(e)&&0===e.length)return void t(ol.ConstEmptyArray);{const n=this.getRefOfNodeThatEquals(e);if(null!==n)return void this.writeTaggedRef(n,t)}if(Array.isArray(e))return void this.writeTaggedArray(e,t);if(e instanceof Uint8Array||e instanceof Int8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Uint32Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array)return this.writeTaggedArray(Array.from(e),t),void this.handleInvalidJsonValue(e,!1);if("string"===typeof e){const n=(new TextEncoder).encode(e),r=n.length,o=r<=15?ol.String1Byte+r-1:void 0;if(void 0!==o)t(o);else{t(r<=il?ol.StringLen1Byte:r<=al?ol.StringLen2Byte:ol.StringLen4Byte),this.writeUntaggedUnoffsetSafeUint(r,t)}for(let e=0;e<r;++e)t(n[e]);return void this.lookupTable.push(e)}let n;try{n=Object.entries(e)}catch{return t(ol.ConstNull),void this.handleInvalidJsonValue(e,!1)}if(0===n.length)return void t(ol.ConstEmptyObject);const r=[];let o=0;for(;o<n.length;){const[e,t]=this.getLongestPrefixObjectRefAndEntryCount(n.slice(o));null!==e?(r.push({isObjectCopy:!0,ref:e}),o+=t):(r.push({isObjectCopy:!1,key:n[o][0],value:n[o][1]}),++o)}const i=r.length,a=i<=8?ol.Object1Command+i-1:void 0;if(void 0!==a)t(a);else{t(i<=il?ol.ObjectCommandCount1Byte:i<=al?ol.ObjectCommandCount2Byte:ol.ObjectCommandCount4Byte),this.writeUntaggedUnoffsetSafeUint(i,t)}for(const s of r)s.isObjectCopy?this.writeTaggedRef(s.ref,t):(this.writeNode(s.key,t),this.writeNode(s.value,t));this.lookupTable.push(e)}writeTaggedInt(e,t){if(-8<=e&&e<=8)return void t(e+136);if(9<=e&&e<=264)return t(ol.OffsetPosInt1Byte),void t(e-9);if(-264<=e&&e<=-9)return t(ol.OffsetNegInt1Byte),void t(-9-e);if(!(-2147483648<=e&&e<=2147483647))return t(ol.Float64),void this.writeUntaggedF64(e,t);if(-32768<=e&&e<=32767){t(ol.Int2Byte);const n=new ArrayBuffer(2);new DataView(n).setInt16(0,e,!0);const r=new Uint8Array(n);for(let e=0;e<2;++e)t(r[e]);return}t(ol.Int4Byte);const n=new ArrayBuffer(4);new DataView(n).setInt32(0,e,!0);const r=new Uint8Array(n);for(let o=0;o<4;++o)t(r[o])}writeUntaggedUnoffsetSafeUint(e,t){if(0===e)return void t(0);let n=e;for(;n>0;)t(n%256),n=Math.floor(n/256)}writeUntaggedF64(e,t){const n=new ArrayBuffer(8);new DataView(n).setFloat64(0,e,!0);const r=new Uint8Array(n);for(let o=0;o<8;++o)t(r[o])}writeTaggedRef(e,t){if(e<=127)return void t(e);const n=e<=il?ol.Ref1Byte:e<=al?ol.Ref2Byte:ol.Ref4Byte;if(e>sl)throw new Error("Reference too large. Index: "+e);t(n),this.writeUntaggedUnoffsetSafeUint(e,t)}writeTaggedArray(e,t){const n=function(e){if(4===e)return ol.ByteArray4Element;if(8===e)return ol.ByteArray8Element;if(16===e)return ol.ByteArray16Element;if(32===e)return ol.ByteArray32Element;if(64===e)return ol.ByteArray64Element;return null}(e.length);if(null!==n&&e.every((e=>Number.isInteger(e)&&0<=e&&e<=255))){t(n);for(const n of e)t(n);return}const r=e.length<=8?ol.Array1Element+e.length-1:void 0;if(void 0!==r)t(r);else{t(e.length<=il?ol.ArrayLen1Byte:e.length<=al?ol.ArrayLen2Byte:ol.ArrayLen4Byte),this.writeUntaggedUnoffsetSafeUint(e.length,t)}if(e.length>sl)throw new Error("Array too long. Length: "+e.length);for(let o=0;o<e.length;++o)this.writeNode(e[o],t);this.lookupTable.push(e)}getLongestPrefixObjectRefAndEntryCount(e){if(0===e.length)return[null,0];let t=null,n=0;for(let r=0;r<this.lookupTable.length;++r){const o=this.lookupTable[r];if(null===o||"object"!==typeof o)continue;let i;try{i=Object.entries(o)}catch{continue}i.length<=e.length&&i.every(((t,n)=>{let[r,o]=t;return r===e[n][0]&&dl(o,e[n][1])}))&&(i.length>n&&(t=r,n=i.length))}return[t,n]}getRefOfNodeThatEquals(e){for(let t=0;t<this.lookupTable.length;++t)if(dl(e,this.lookupTable[t]))return t;return null}readNodeAndMarkAnalyzerAsUsed(e){if(this.isUsed)throw new Error("NonReusableJsonAnalyzer is already used.");return this.isUsed=!0,this.readNode(e)}readNode(e){const t=e[0];if(t<=127)return{value:this.getReferent(t),bytesConsumed:1};if(128<=t&&t<=144)return{value:t-136,bytesConsumed:1};if(t===ol.ConstNull)return{value:null,bytesConsumed:1};if(t===ol.ConstFalse)return{value:!1,bytesConsumed:1};if(t===ol.ConstTrue)return{value:!0,bytesConsumed:1};if(ol.OffsetPosInt1Byte<=t&&t<=ol.Int4Byte)return this.readTaggedInt(e);if(t===ol.Float64){return{value:this.getUntaggedF64(e.subarray(1)),bytesConsumed:9}}if(ol.ConstEmptyArray<=t&&t<=ol.ArrayLen4Byte)return this.readTaggedArray(e);if(ol.ConstEmptyObject<=t&&t<=ol.ObjectCommandCount4Byte)return this.readTaggedObject(e);if(ol.Ref1Byte<=t&&t<=ol.Ref4Byte)return this.readReferentOfTaggedBigRef(e);if(t===ol.BigUint||t===ol.NegBigInt)throw new Error("BigInts are not supported.");if(ol.ConstEmptyString<=t&&t<=ol.StringLen4Byte)return this.readTaggedString(e);if(ol.ByteArray4Element<=t&&t<=ol.ByteArray64Element)return this.readTaggedByteArray(e);throw new Error("Invalid node tag: "+t)}readTaggedInt(e){const t=e[0];if(t===ol.OffsetPosInt1Byte)return{value:e[1]+9,bytesConsumed:2};if(t===ol.OffsetNegInt1Byte)return{value:-9-e[1],bytesConsumed:2};if(t===ol.Int2Byte){const t=new ArrayBuffer(2);new Uint8Array(t).set(e.subarray(1,3));return{value:new DataView(t).getInt16(0,!0),bytesConsumed:3}}if(t===ol.Int4Byte){const t=new ArrayBuffer(4);new Uint8Array(t).set(e.subarray(1,5));return{value:new DataView(t).getInt32(0,!0),bytesConsumed:5}}if(t===ol.Int8Byte)throw new Error("Int8Byte is not supported.");throw new Error("Invalid int tag: "+t)}getUntaggedF64(e){const t=new ArrayBuffer(8);return new Uint8Array(t).set(e.subarray(0,8)),new DataView(t).getFloat64(0,!0)}readTaggedArray(e){if(e[0]===ol.ConstEmptyArray)return{value:[],bytesConsumed:1};const{arrayLength:t,firstElementIndex:n}=this.getLengthAndFirstElementIndexOfTaggedNonEmptyArray(e),r=[];let o=n;for(let i=0;i<t;++i){const{bytesConsumed:t,value:n}=this.readNode(e.subarray(o));r.push(n),o+=t}return this.lookupTable.push(r),{value:r,bytesConsumed:o}}getLengthAndFirstElementIndexOfTaggedNonEmptyArray(e){const t=e[0];if(ol.Array1Element<=t&&t<=ol.Array8Element)return{arrayLength:t-ol.Array1Element+1,firstElementIndex:1};if(t===ol.ArrayLen1Byte)return{arrayLength:e[1],firstElementIndex:2};if(t===ol.ArrayLen2Byte){return{arrayLength:this.getUntaggedU16(e.subarray(1)),firstElementIndex:3}}if(t===ol.ArrayLen4Byte){return{arrayLength:this.getUntaggedU32(e.subarray(1)),firstElementIndex:5}}throw new Error("Invalid array tag: "+t)}getUntaggedU16(e){const t=new ArrayBuffer(2);return new Uint8Array(t).set(e.subarray(0,2)),new DataView(t).getUint16(0,!0)}getUntaggedU32(e){const t=new ArrayBuffer(4);return new Uint8Array(t).set(e.subarray(0,4)),new DataView(t).getUint32(0,!0)}readTaggedObject(e){if(e[0]===ol.ConstEmptyObject)return{value:{},bytesConsumed:1};const{commandCount:t,firstCommandIndex:n}=this.getLengthAndFirstCommandIndexOfTaggedNonEmptyObject(e),r=[];let o=n;for(let a=0;a<t;++a){const t=this.readNode(e.subarray(o));if(o+=t.bytesConsumed,"object"===typeof t.value&&null!==t.value){r.push(...Object.entries(t.value));continue}const n=this.readNode(e.subarray(o));o+=n.bytesConsumed,r.push([String(t.value),n.value])}const i=Object.fromEntries(r);return this.lookupTable.push(i),{value:i,bytesConsumed:o}}getLengthAndFirstCommandIndexOfTaggedNonEmptyObject(e){const t=e[0];if(ol.Object1Command<=t&&t<=ol.Object8Command)return{commandCount:t-ol.Object1Command+1,firstCommandIndex:1};if(t===ol.ObjectCommandCount1Byte)return{commandCount:e[1],firstCommandIndex:2};if(t===ol.ObjectCommandCount2Byte){return{commandCount:this.getUntaggedU16(e.subarray(1)),firstCommandIndex:3}}if(t===ol.ObjectCommandCount4Byte){return{commandCount:this.getUntaggedU32(e.subarray(1)),firstCommandIndex:5}}throw new Error("Invalid object tag: "+t)}readReferentOfTaggedBigRef(e){const t=e[0];if(t===ol.Ref1Byte){const t=e[1];return{value:this.getReferent(t),bytesConsumed:2}}if(t===ol.Ref2Byte){const t=this.getUntaggedU16(e.subarray(1));return{value:this.getReferent(t),bytesConsumed:3}}if(t===ol.Ref4Byte){const t=this.getUntaggedU32(e.subarray(1));return{value:this.getReferent(t),bytesConsumed:5}}throw new Error("Invalid ref tag: "+t)}getReferent(e){if(e>=this.lookupTable.length)throw new Error("Reference out of bounds. Index: "+e+". Lookup table length: "+this.lookupTable.length+".");return this.lookupTable[e]}readTaggedString(e){if(e[0]===ol.ConstEmptyString)return{value:"",bytesConsumed:1};const{stringUtf8Length:t,firstByteIndex:n}=this.getLengthAndFirstCharIndexOfTaggedNonEmptyString(e),r=e.subarray(n,n+t),o=(new TextDecoder).decode(r);return this.lookupTable.push(o),{value:o,bytesConsumed:n+t}}getLengthAndFirstCharIndexOfTaggedNonEmptyString(e){const t=e[0];if(ol.String1Byte<=t&&t<=ol.String15Byte)return{stringUtf8Length:t-ol.String1Byte+1,firstByteIndex:1};if(t===ol.StringLen1Byte)return{stringUtf8Length:e[1],firstByteIndex:2};if(t===ol.StringLen2Byte){return{stringUtf8Length:this.getUntaggedU16(e.subarray(1)),firstByteIndex:3}}if(t===ol.StringLen4Byte){return{stringUtf8Length:this.getUntaggedU32(e.subarray(1)),firstByteIndex:5}}throw new Error("Invalid string tag: "+t)}readTaggedByteArray(e){const t=e[0];if(t===ol.ByteArray4Element){return{value:Array.from(e.subarray(1,5)),bytesConsumed:5}}if(t===ol.ByteArray8Element){return{value:Array.from(e.subarray(1,9)),bytesConsumed:9}}if(t===ol.ByteArray16Element){return{value:Array.from(e.subarray(1,17)),bytesConsumed:17}}if(t===ol.ByteArray32Element){return{value:Array.from(e.subarray(1,33)),bytesConsumed:33}}if(t===ol.ByteArray64Element){return{value:Array.from(e.subarray(1,65)),bytesConsumed:65}}throw new Error("Invalid byte array tag: "+t)}}class cl{constructor(e){this.buffer=void 0,this.length=void 0,this.buffer=new Uint8Array(null!==e&&void 0!==e?e:0),this.length=0}pushByte(e){if(this.length>=this.buffer.length){const e=new Uint8Array(Math.max(1,2*this.buffer.length));e.set(this.buffer),this.buffer=e}this.buffer[this.length]=e,++this.length}pushBytes(e){const t=this.length+e.length;let n=this.buffer.length;for(;n<t;)n=Math.max(1,2*n);if(n!==this.buffer.length){const e=new Uint8Array(n);e.set(this.buffer),this.buffer=e}this.buffer.set(e,this.length),this.length+=e.length}unpushableSlice(e,t){return this.buffer.subarray(0,this.length).slice(e,t)}unpushableSubarray(e,t){return this.buffer.subarray(0,this.length).subarray(e,t)}getLength(){return this.length}}function ul(e,t){const n=new ll(t),r=new cl,o=r.pushByte.bind(r);return n.writeNodeAndMarkAnalyzerAsUsed(e,o),r.unpushableSubarray()}function dl(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every(((e,n)=>dl(e,t[n])));if(null===e||"object"!==typeof e||null===t||"object"!==typeof t)return!1;try{const n=Object.entries(e),r=Object.entries(t);return n.length===r.length&&n.every(((e,t)=>{let[n,o]=e;return r[t][0]===n&&dl(o,r[t][1])}))}catch{return!1}}const hl=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map((e=>[e.name,e])),fl=new Map(hl);Error;const pl=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],ml=new WeakSet,gl=e=>{var t;return null!==(t=fl.get(e))&&void 0!==t?t:Error},vl=e=>{let{from:t,seen:n,to:r,forceEnumerable:o,maxDepth:i,depth:a,useToJSON:s,serialize:l}=e;if(!r)if(Array.isArray(t))r=[];else if(!l&&bl(t)){r=new(gl(t.name))}else r={};if(n.push(t),a>=i)return r;if(s&&"function"===typeof t.toJSON&&!ml.has(t))return(e=>{ml.add(e);const t=e.toJSON();return ml.delete(e),t})(t);const c=e=>vl({from:e,seen:[...n],forceEnumerable:o,maxDepth:i,depth:a,useToJSON:s,serialize:l});for(const[u,d]of Object.entries(t))if(d&&d instanceof Uint8Array&&"Buffer"===d.constructor.name)r[u]="[object Buffer]";else if(null===d||"object"!==typeof d||"function"!==typeof d.pipe){if("function"!==typeof d)if(d&&"object"===typeof d)n.includes(t[u])?r[u]="[Circular]":(a++,r[u]=c(t[u]));else try{r[u]=d}catch{}}else r[u]="[object Stream]";for(const{property:u,enumerable:d}of pl)"undefined"!==typeof t[u]&&null!==t[u]&&Object.defineProperty(r,u,{value:bl(t[u])?c(t[u]):t[u],enumerable:!!o||d,configurable:!0,writable:!0});return r};function bl(e){return Boolean(e)&&"object"===typeof e&&"name"in e&&"message"in e&&"stack"in e}function yl(e){return JSON.stringify(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{maxDepth:n=Number.POSITIVE_INFINITY,useToJSON:r=!0}=t;return"object"===typeof e&&null!==e?vl({from:e,seen:[],forceEnumerable:!0,maxDepth:n,depth:0,useToJSON:r,serialize:!0}):"function"===typeof e?"[Function: ".concat(e.name||"anonymous","]"):e}(e))}const kl=1,wl=1,xl="com.zaqlo.studios.castlecoders.logcache",Sl="com.zaqlo.studios.castlecoders.loggeridbytes",Ll=200,El=120;let Cl=function(e){return e.Error="Error",e.LoggerIdCreated="LoggerIdCreated",e.AppLifeCycleMilestone="AppLifeCycleMilestone",e.ButtonPressed="ButtonPressed",e.BlockEditorCanvasItemsUpdated="BlockEditorCanvasItemsUpdated",e.BattleResumed="BattleResumed",e.BattlePaused="BattlePaused",e.LevelCompleted="LevelCompleted",e.LevelFailed="LevelFailed",e.LanguageChanged="LanguageChanged",e.AppActiveStatusChanged="AppActiveStatusChanged",e}({});const Tl=[];let Bl="Loading",Al=!1;const Pl=[],Il=(async()=>{const e=function(e){if(null===e)return null;let t;try{t=JSON.parse(e)}catch{return null}if(n=t,!Array.isArray(n)||16!==n.length||!n.every(Wl))return null;var n;return t}(await or(Sl));if(null!==e)return Bl=e,Al=!1,Bl;const t=function(){const e=new ArrayBuffer(16),t=new DataView(e);t.setFloat64(0,Math.random(),!0),t.setFloat64(8,Date.now(),!0);const n=new Uint8Array(e);return Array.from(n)}();return await rr(Sl,JSON.stringify(t)),Bl=t,Al=!0,Bl})(),_l=[],Dl=Il.then((e=>{Rl(_l,e),_l.splice(0,_l.length),_l.push=()=>{const e=new Error("Attempted to push to pendingLogEvents after the logger id was loaded.");return Ml([{kind:Cl.Error,errorMessage:yl(e),timestampDateDotNow:Date.now()}]),console.error(e),_l.length}}));function Ml(e){return"Loading"===Bl?(_l.push(...e),Dl):Rl(e,Bl)}function Rl(e,t){const n=Ol(t,Al),r=n.lastEmptiedDateDotNow+1e3*El,o=n.logEvents.concat(e);return zl({...n,logEvents:o}),o.length>=Ll||Date.now()>r?navigator.onLine?(console.log("Sending logs."),Hl(o,t).then(Fl)):(console.log("Attempted to send logs, but app is offline."),new Promise((e=>{Pl.push(e)}))):Promise.resolve()}function Ol(e,t){const n=localStorage.getItem(xl);if(null===n)return Nl(e,t);try{const r=JSON.parse(n);return r.logSchemaVersion!==kl?Nl(e,t):r}catch{return Nl(e,t)}}function Nl(e,t){const n=Date.now(),r={logSchemaVersion:kl,logEvents:t?[{kind:Cl.LoggerIdCreated,loggerIdBytes:e,timestampDateDotNow:n}]:[],lastEmptiedDateDotNow:n,lastUpdatedDateDotNow:n};return localStorage.setItem(xl,JSON.stringify(r)),r}function zl(e){const t=Date.now(),n={...e,lastUpdatedDateDotNow:t,lastEmptiedDateDotNow:0===e.logEvents.length?t:e.lastEmptiedDateDotNow},r=JSON.stringify(n);localStorage.setItem(xl,r)}function Fl(){if("Loading"===Bl)throw new Error("Called emptyLogCacheAssumingLoggerIdBytesHavedLoaded() but logger ID bytes are still loading.");zl({...Ol(Bl,Al),logEvents:[]})}function Hl(e,t){const n=performance.now(),r=function(e,t){return ul({loggerIdBytes:t,logSchemaVersion:kl,logCompressionSchemeVersion:wl,gameVersion:pr,logEvents:e},Tl)}(e,t),o=performance.now();console.log("Encoding took",o-n,"ms");const i=t.map((e=>function(e,t){if(e.length>t)throw new Error("String is too long to pad. Target length: ".concat(t,". String: ").concat(JSON.stringify(e)));return"0".repeat(t-e.length)+e}(e.toString(16),2))).join(""),a=Date.now().toString(16);return rl("logs/".concat(i,"_").concat(a,".dat"),new Blob([r])).then(Ul)}function Ul(){}function Wl(e){return Number.isInteger(e)&&0<=e&&e<=255}function jl(){return Bl}window.addEventListener("online",(async()=>{const e=await Il,t=Ol(e,Al);await Hl(t.logEvents,e),Fl();for(const n of Pl)n();Pl.splice(0,Pl.length)}));let ql=!1;class Vl extends t.Component{constructor(e){super(e),this.mainBlockEditorComponentInstanceUid=void 0,this.tutorialBlockEditorComponentInstanceUid=void 0,this.minimapBlockEditorComponentInstanceUid=void 0,this.ghostSvg=void 0,this.tempCanvasCtx=void 0,this.frontCanvasCtx=void 0,this.blockLiteralEditor=void 0,this.blockLiteralEditorForm=void 0,this.blockLiteralEditorInput=void 0,this.blockLiteralEditorCloseButton=void 0,this.initialSavedStateOrDefault=void 0,this.audioManager=void 0,this.isMounted_=void 0,this.lastBlockEditorSetStateCallTime=void 0,this.currentLevelBattleEventsCache=void 0,this.prevLevelBattleEventsCache=void 0,this.battleSoundsId=void 0,this.homeMusicId=void 0,this.puzzleMusicId=void 0,this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption=void 0,this.__debug__pause=void 0,function(){if(ql)return;!function(){for(let e=Sr.Level1;e<=Lr;++e)$c(e)}(),console.log("Finished preflight sanity check."),ql=!0}(),this.mainBlockEditorComponentInstanceUid=vt.generateComponentInstanceUid(),this.tutorialBlockEditorComponentInstanceUid=vt.generateComponentInstanceUid(),this.minimapBlockEditorComponentInstanceUid=vt.generateComponentInstanceUid(),this.ghostSvg=document.getElementById(ho);const t=document.createElement("canvas");this.tempCanvasCtx=t.getContext("2d",{willReadFrequently:!0});const n=document.getElementById(fo);this.frontCanvasCtx=n.getContext("2d"),this.blockLiteralEditor=document.getElementById(po),this.blockLiteralEditorForm=document.getElementById(mo),this.blockLiteralEditorInput=document.getElementById(go),this.blockLiteralEditorCloseButton=document.getElementById(vo),this.initialSavedStateOrDefault=or(xo).then((e=>{const t=Tc(e);return null===t?async function(){const e=Sr.Level1,t=ac(e),n=await async function(){try{return Ac((await fr.getLanguageTag()).value)}catch{return null}}(),r=null!==n&&void 0!==n?n:Bc();return{language:r,blockEditor:t,level:e}}():Promise.resolve(t)})),this.audioManager=new lr,this.isMounted_=!1,this.lastBlockEditorSetStateCallTime=Gl(),this.currentLevelBattleEventsCache={timeCached:{millisecondsSinceEpoch:0},events:[]},this.prevLevelBattleEventsCache={timeCached:{millisecondsSinceEpoch:0},events:[]},this.battleSoundsId={soundCollectionRawId:-1},this.homeMusicId={soundCollectionRawId:-1},this.puzzleMusicId={soundCollectionRawId:-1},this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption=!1,this.__debug__pause=!1,this.bindMethods();const{language:r,blockEditor:o,level:i}=function(){var e;const t=localStorage.getItem(xo);return null!==(e=Tc(t))&&void 0!==e?e:function(){const e=Sr.Level1,t=ac(e),n=Bc();return{language:n,blockEditor:t,level:e}}()}();this.state={appWidth:window.innerWidth,appHeight:window.innerHeight,orientationType:ru(),language:r,screen:{blockEditor:o,level:i,animationKind:xr.Loading,animationStartTime:Gl(),currentTimestamp:Gl(),battleAnimationOffsetSeconds:0,prevLevelBlockEditor:yc(),mostRecentTutorialBlockEditorUpdateTime:Gl()},onlyTouchStartButton:null,onlyTouchDepressedButton:null,mouseClientPosition:{x:-1,y:-1},safeAreaInsets:{insets:{left:0,right:0,top:0,bottom:0}},hasFailedLevelOneAtLeastOnce:!1},Ml([{kind:Cl.AppLifeCycleMilestone,milestoneKind:"AppConstructed",gameVersionWithoutV:pr,timestampDateDotNow:Date.now()}])}bindMethods(){this.onResize=this.onResize.bind(this),this.onDocumentVisibilityChange=this.onDocumentVisibilityChange.bind(this),this.onCapacitorAppStateChange=this.onCapacitorAppStateChange.bind(this),this.onWindowTouchStart=this.onWindowTouchStart.bind(this),this.onWindowMouseDown=this.onWindowMouseDown.bind(this),this.onWindowTouchMove=this.onWindowTouchMove.bind(this),this.onWindowMouseMove=this.onWindowMouseMove.bind(this),this.onWindowTouchEnd=this.onWindowTouchEnd.bind(this),this.onWindowMouseUp=this.onWindowMouseUp.bind(this),this.onLiteralEditorFormSubmit=this.onLiteralEditorFormSubmit.bind(this),this.onLiteralEditorInputChange=this.onLiteralEditorInputChange.bind(this),this.onCloseLiteralEditorButtonClick=this.onCloseLiteralEditorButtonClick.bind(this),this.measureCanvasText=this.measureCanvasText.bind(this),this.measureSvgText=this.measureSvgText.bind(this),this.setBlockEditorState=this.setBlockEditorState.bind(this),this.updateCanvas=this.updateCanvas.bind(this),this.getCurrentLevelBattleEvents=this.getCurrentLevelBattleEvents.bind(this),this.startLoadingBarProgressAnimation=this.startLoadingBarProgressAnimation.bind(this),this.renderTutorialCanvasElement=this.renderTutorialCanvasElement.bind(this)}componentDidMount(){var e;this.isMounted_=!0,window.addEventListener("resize",this.onResize),document.addEventListener("visibilitychange",this.onDocumentVisibilityChange),cr.addListener("appStateChange",this.onCapacitorAppStateChange),window.addEventListener("orientationchange",this.onResize),e=this.onResize,er.includes(e)||er.push(e),window.addEventListener("touchstart",this.onWindowTouchStart,{passive:!1}),window.addEventListener("mousedown",this.onWindowMouseDown),window.addEventListener("touchmove",this.onWindowTouchMove),window.addEventListener("mousemove",this.onWindowMouseMove),window.addEventListener("touchend",this.onWindowTouchEnd),window.addEventListener("mouseup",this.onWindowMouseUp),this.blockLiteralEditor.style.removeProperty("display"),this.blockLiteralEditorForm.addEventListener("submit",this.onLiteralEditorFormSubmit),this.blockLiteralEditorInput.addEventListener("input",this.onLiteralEditorInputChange),this.blockLiteralEditorCloseButton.addEventListener("touchend",this.onCloseLiteralEditorButtonClick),this.blockLiteralEditorCloseButton.addEventListener("mouseup",this.onCloseLiteralEditorButtonClick),Promise.all([this.initialSavedStateOrDefault,tr(),me.extended_home_background.ready,me.buttons.home.start.ready,me.buttons.home.settings.ready,Ne.checkpoint]).then((e=>{let[t]=e;this.onResize();const{language:n,blockEditor:r,level:o}=t;this.setState((e=>({...e,language:n,screen:{...e.screen,blockEditor:r,level:o}})),(()=>{Wo.then((()=>{ir.hide(),this.startLoadingBarProgressAnimation()}))}))})).catch((e=>{console.error("Error loading assets: ",e)})),window.app=this,window.skipToLevel=e=>{if(!(e===Math.floor(e)&&1<=e&&e<=Lr))throw new Error("Invalid level: "+JSON.stringify(e)+". Max level is "+Lr);this.setState({screen:{...this.state.screen,blockEditor:ac(e),level:e}},(()=>window.location.reload()))},this.logEventIfMounted({kind:Cl.AppLifeCycleMilestone,milestoneKind:"AppMounted",gameVersionWithoutV:pr,timestampDateDotNow:Date.now()})}startLoadingBarProgressAnimation(){const e=Gl();this.setState((t=>({...t,screen:{...t.screen,animationKind:xr.Loading,animationStartTime:e,currentTimestamp:e}})),this.getLoadingScreenAnimationUpdater(e)),this.logEventIfMounted({kind:Cl.AppLifeCycleMilestone,milestoneKind:"LoadingScreenStarted",gameVersionWithoutV:pr,timestampDateDotNow:Date.now()})}componentWillUnmount(){this.isMounted_=!1,window.removeEventListener("resize",this.onResize),document.removeEventListener("visibilitychange",this.onDocumentVisibilityChange),cr.removeAllListeners(),window.removeEventListener("orientationchange",this.onResize),function(e){for(;;){const t=er.indexOf(e);if(-1===t)break;er.splice(t,1)}}(this.onResize),window.removeEventListener("touchstart",this.onWindowTouchStart),window.removeEventListener("touchmove",this.onWindowTouchMove),window.removeEventListener("touchend",this.onWindowTouchEnd),this.blockLiteralEditorForm.removeEventListener("submit",this.onLiteralEditorFormSubmit),this.blockLiteralEditorInput.removeEventListener("input",this.onLiteralEditorInputChange),this.blockLiteralEditorCloseButton.removeEventListener("touchend",this.onCloseLiteralEditorButtonClick),this.blockLiteralEditorCloseButton.removeEventListener("mouseup",this.onCloseLiteralEditorButtonClick),Ml([{kind:Cl.AppLifeCycleMilestone,milestoneKind:"AppUnmounted",gameVersionWithoutV:pr,timestampDateDotNow:Date.now()}])}logEventIfMounted(e){this.logEventsIfMounted([e])}logEventsIfMounted(e){this.isMounted_?Ml(e):console.log("Suppressing log events from unmounted component",e)}setState(e,t){if(!this.__debug__pause)return super.setState(e,(()=>{this.updateCanvas(),function(e,t){const{language:n,screen:r}=e,o=r.level+1,{blockEditor:i,level:a}=gc(r,t)&&r.level<Lr?{blockEditor:ac(o),level:o}:r,s={version:Xn,language:n,blockEditor:i,level:a},l=JSON.stringify(s);rr(xo,l)}(this.state,this.getCurrentLevelBattleEvents);const e=null!==wc(this.state.mouseClientPosition,this.state,this.getButtonClickDetectorResources())?"pointer":"default",n=document.getElementById("Root");null!==n&&(n.style.cursor=e),"function"===typeof t&&t()}))}render(){return this.updateBlockLiteralEditor(),this.dualRender().reactElement}updateBlockLiteralEditor(){const{literalEditor:e}=this.state.screen.blockEditor,t=null!==e&&this.state.screen.animationKind===xr.Edit;this.blockLiteralEditor.classList.toggle("Hidden",!t);const{language:n}=this.state;this.blockLiteralEditorCloseButton.innerText=Kl(n,gr.CloseLiteralEditor),null!==e&&(this.blockLiteralEditorInput.value=e.literalSource,this.blockLiteralEditorInput.focus())}dualRender(){switch(this.state.orientationType){case"landscape-primary":case"landscape-secondary":return this.dualRenderAssumingLandscapeOrientation();case"portrait-secondary":case"portrait-primary":return this.dualRenderAssumingPortraitOrientation();default:return console.warn("The orientation API isn't supported in this browser. Falling back to landscape mode."),this.dualRenderAssumingLandscapeOrientation()}}dualRenderAssumingLandscapeOrientation(){const{screen:e}=this.state;switch(e.animationKind){case xr.Loading:return this.dualRenderLoadingScreen();case xr.StaticHome:return this.dualRenderHomeScreen();case xr.Edit:return this.dualRenderEditScreen();case xr.StaticSettings:return this.dualRenderSettingsScreen();case xr.StaticConfirmResetToLevelOne:return this.dualRenderConfirmResetToLevelOneScreen();case xr.HomeToView:return this.dualRenderHomeToViewAnimation();case xr.EditToView:return this.dualRenderEditToViewAnimation();case xr.ViewToEdit:return this.dualRenderViewToEditAnimation();case xr.ViewToHome:return this.dualRenderViewToHomeAnimation();case xr.EditToHome:return this.dualRenderEditToHomeAnimation();case xr.PlayBattle:case xr.PauseBattle:return this.dualRenderBattleScreen();case xr.NextLevel:return this.dualRenderNextLevelAnimation();case xr.OpenSettings:return this.dualRenderOpenSettingsAnimation();case xr.CloseSettings:return this.dualRenderCloseSettingsAnimation();case xr.Credits:return this.dualRenderCreditsAnimation();default:e.animationKind}}dualRenderLoadingScreen(){return{reactElement:(0,Ze.jsx)("div",{className:"App",children:(0,Ze.jsx)("div",{className:"AppMain",children:(0,Ze.jsx)("svg",{className:"MainSvg",width:this.state.appWidth,height:this.state.appHeight})})}),canvasElement:this.renderLoadingScreenCanvasElement()}}renderLoadingScreenCanvasElement(){const e=this.state.appWidth/ye.width,t=this.state.appHeight/ye.height,n=Math.min(e,t),r=this.getLoadCompletionFactor(),{language:o}=this.state,i={topLeft:He((()=>{const e=ye.width*n,t=ye.height*n;return{topLeft:{x:(this.state.appWidth-e)/2,y:(this.state.appHeight-t)/1},dimensions:{width:e,height:t}}})().topLeft,je(_e(Ie).topLeft,n)),dimensions:{width:_e(Ie).dimensions.width*n,height:_e(Ie).dimensions.height*n}},a=500*n,s={kind:jn.Text,text:Kl(o,gr.LoadingDotDotDot),x:i.topLeft.x+.5*i.dimensions.width,y:i.topLeft.y+i.dimensions.height+a,fontFamily:Er,fontSize:56*n,fill:Qr.textBrown,textAlign:"center",textBaseline:"top"},l=this.measureCanvasText(s),c=s.y+l.height,u=60*n,d=10*n;return{kind:jn.Group,children:[this.renderHomeScreenBackgroundCanvasElement(),{kind:jn.Image,source:me.loading_screen_castle_coders_text,dx:i.topLeft.x,dy:i.topLeft.y,dw:i.dimensions.width,dh:i.dimensions.height},s,bc({x:i.topLeft.x,y:c+u,w:i.dimensions.width,h:40*n,rx:20*n,ry:20*n,fill:ic("#888888")}),bc({x:i.topLeft.x,y:c+u,w:i.dimensions.width*r,h:40*n,rx:20*n,ry:20*n,fill:Qr.purple.secondary}),bc({x:i.topLeft.x,y:c+u+d,w:i.dimensions.width,h:40*n,rx:20*n,ry:20*n,fill:ic("#A6A6A6")}),bc({x:i.topLeft.x,y:c+u+d,w:i.dimensions.width*r,h:40*n,rx:20*n,ry:20*n,fill:Qr.purple.primary})]}}dualRenderHomeScreen(){return{reactElement:(0,Ze.jsx)("div",{className:"App",children:(0,Ze.jsx)("div",{className:"AppMain",children:(0,Ze.jsx)("svg",{className:"MainSvg",width:this.state.appWidth,height:this.state.appHeight})})}),canvasElement:this.renderHomeScreenCanvasElement()}}renderHomeScreenCanvasElement(){return{kind:jn.Group,children:[this.renderHomeScreenBackgroundCanvasElement(),this.renderHomeScreenButtonsCanvasElement()]}}renderHomeScreenBackgroundCanvasElement(){const e=this.state.appWidth/ye.width,t=this.state.appHeight/ye.height,n=Math.min(e,t),r=(()=>{const e=3*ye.width*n,t=2*ye.height*n;return{topLeft:{x:(this.state.appWidth-e)/2,y:(this.state.appHeight-t)/1},dimensions:{width:e,height:t}}})();return{kind:jn.Image,source:me.extended_home_background,dx:r.topLeft.x,dy:r.topLeft.y,dw:r.dimensions.width,dh:r.dimensions.height}}renderHomeScreenButtonsCanvasElement(){const e=this.state.appWidth/ye.width,t=this.state.appHeight/ye.height,n=Math.min(e,t),{onlyTouchDepressedButton:r,screen:o,language:i}=this.state,a=(()=>{const e=ye.width*n,t=ye.height*n;return{topLeft:{x:(this.state.appWidth-e)/2,y:(this.state.appHeight-t)/1},dimensions:{width:e,height:t}}})(),s={topLeft:He(a.topLeft,je(xe.topLeft,n)),dimensions:{width:xe.dimensions.width*n,height:xe.dimensions.height*n}},l=r===Jr.HomeScreenStart?Lc(s):s,c={topLeft:He(a.topLeft,je(Se.topLeft,n)),dimensions:{width:Se.dimensions.width*n,height:Se.dimensions.height*n}},u=r===Jr.Settings?Lc(c):c,d={topLeft:He(a.topLeft,je(_e(Le).topLeft,n)),dimensions:{width:_e(Le).dimensions.width*n,height:_e(Le).dimensions.height*n}},h=r===Jr.HomeScreenStart?Lc(d):d,f={topLeft:He(a.topLeft,je(_e(Ee).topLeft,n)),dimensions:{width:_e(Ee).dimensions.width*n,height:_e(Ee).dimensions.height*n}},p=r===Jr.Settings?Lc(f):f;return{kind:jn.Group,children:[{kind:jn.Image,source:me.buttons.home.start,dx:l.topLeft.x,dy:l.topLeft.y,dw:l.dimensions.width,dh:l.dimensions.height},{kind:jn.Text,text:Kl(i,o.level===Sr.Level1?gr.StartPuzzleFromBeginning:gr.StartPuzzleFromLastSaved),x:Yc(h).x,y:Yc(h).y,fill:Qr.textBrown,fontWeight:400,fontSize:r===Jr.HomeScreenStart?$r.depressedButtonScale*Ho[i]*n:Ho[i]*n,fontFamily:Er,textBaseline:"middle",textAlign:"center"},{kind:jn.Group,alpha:.5,children:r===Jr.HomeScreenStart?[{kind:jn.Image,source:ge.home.start,dx:l.topLeft.x,dy:l.topLeft.y,dw:l.dimensions.width,dh:l.dimensions.height}]:[]},{kind:jn.Image,source:me.buttons.home.settings,dx:u.topLeft.x,dy:u.topLeft.y,dw:u.dimensions.width,dh:u.dimensions.height},{kind:jn.Text,text:Kl(i,gr.Settings),x:Yc(p).x,y:Yc(p).y,fill:Qr.textBrown,fontWeight:400,fontSize:r===Jr.Settings?$r.depressedButtonScale*Uo[i]*n:Uo[i]*n,fontFamily:Er,textBaseline:"middle",textAlign:"center"},{kind:jn.Group,alpha:.5,children:r===Jr.Settings?[{kind:jn.Image,source:ge.home.settings,dx:u.topLeft.x,dy:u.topLeft.y,dw:u.dimensions.width,dh:u.dimensions.height}]:[]}]}}dualRenderEditScreen(){const{appHeight:e,screen:t}=this.state,n={config:this.getMainBlockEditorConfig(),state:t.blockEditor,measureText:this.measureSvgText,setState:this.setBlockEditorState},r=null===t.blockEditor.uiTouch&&null===t.blockEditor.palette.scrollInProgress&&null===t.blockEditor.canvas.scrollInProgress&&null===t.blockEditor.literalEditor,o={config:this.getTutorialBlockEditorConfig(),state:this.getTutorialBlockEditorState(),measureText:this.measureSvgText,setState:kc},{canvasElement:i,reactElement:a}=this.dualRenderPuzzleScreenButtons(),s=this.renderTutorialCanvasElement(),{canvasElement:l,reactElement:c}=s===Kn?this.dualRenderInEditorMiniBattleScreenAssumingNoTutorial():{canvasElement:Kn,reactElement:null};return{reactElement:(0,Ze.jsx)("div",{className:"App",children:(0,Ze.jsx)("div",{className:"AppMain",children:(0,Ze.jsxs)("svg",{className:"MainSvg",width:this.state.appWidth,height:e,children:[(0,Ze.jsx)(vt,{...n}),[Sr.Level1,Sr.Level9].includes(this.state.screen.level)&&r&&(0,Ze.jsx)("g",{style:{pointerEvents:"none"},children:(0,Ze.jsx)(vt,{...o})}),a,c]})})}),canvasElement:{kind:jn.Group,children:[s,l,i]}}}dualRenderInEditorMiniBattleScreenAssumingNoTutorial(){const{screen:e,appWidth:t,appHeight:n,onlyTouchDepressedButton:r}=this.state,o=this.getCurrentLevelBattleEvents(),i=tc(rc(e.level),o,0);return{reactElement:(0,Ze.jsx)("rect",{fill:"transparent",x:(1-Yo)*t,y:(1-Yo)*n,width:Yo*t,height:Yo*n}),canvasElement:{kind:jn.Group,transform:[{kind:Vn.Translate,x:t,y:n},{kind:Vn.Scale,x:Yo,y:Yo},{kind:Vn.Translate,x:-t,y:-n}],children:[this.renderBattleAndOutcomeScreenCanvasElement(-n,e.blockEditor,e.level,0,i),bc({x:0,y:0,w:t,h:n,fill:{r:255,g:255,b:255,a:r===Jr.InEditorMiniBattleScreen?128:0}})]}}}dualRenderSettingsScreen(){return this.dualRenderSettingsBoxOverHomeScreen(0)}dualRenderSettingsBoxOverHomeScreen(e){return{reactElement:(0,Ze.jsx)("div",{className:"App",children:(0,Ze.jsx)("div",{className:"AppMain",children:(0,Ze.jsx)("svg",{className:"MainSvg",width:this.state.appWidth,height:this.state.appHeight})})}),canvasElement:{kind:jn.Group,children:[this.renderHomeScreenCanvasElement(),this.renderSettingsBoxCanvasElement(e)]}}}renderSettingsBoxCanvasElement(e){const{appWidth:t,appHeight:n,onlyTouchDepressedButton:r,language:o}=this.state,i=this.state.appWidth/ye.width,a=this.state.appHeight/ye.height,s=Math.min(i,a),l=(()=>{const e=ye.width*s,t=ye.height*s;return{topLeft:{x:(this.state.appWidth-e)/2,y:(this.state.appHeight-t)/1},dimensions:{width:e,height:t}}})(),c={topLeft:He(He(l.topLeft,je(Ce.topLeft,s)),{x:0,y:e}),dimensions:{width:Ce.dimensions.width*s,height:Ce.dimensions.height*s}},u={topLeft:He(He(l.topLeft,je(Pe.topLeft,s)),{x:0,y:e}),dimensions:{width:Pe.dimensions.width*s,height:Pe.dimensions.height*s}},d=r===Jr.SettingsScreenClose?Lc(u):u,h={topLeft:He(He(l.topLeft,je(Te.topLeft,s)),{x:0,y:e}),dimensions:{width:Te.dimensions.width*s,height:Te.dimensions.height*s}},f=r===Jr.Language?Lc(h):h,p={topLeft:He(He(l.topLeft,je(Be.topLeft,s)),{x:0,y:e}),dimensions:{width:Be.dimensions.width*s,height:Be.dimensions.height*s}},m=r===Jr.Credits?Lc(p):p,g={topLeft:He(He(l.topLeft,je(Ae.topLeft,s)),{x:0,y:e}),dimensions:{width:Ae.dimensions.width*s,height:Ae.dimensions.height*s}},v=r===Jr.OpenConfirmResetToLevelOneScreen?Lc(g):g;return{kind:jn.Group,children:[bc({x:0,y:e,w:t,h:n,fill:{r:0,g:0,b:0,a:128}}),{kind:jn.Image,source:me.settings_box,dx:c.topLeft.x,dy:c.topLeft.y,dw:c.dimensions.width,dh:c.dimensions.height},{kind:jn.Image,source:me.buttons.settings.close,dx:d.topLeft.x,dy:d.topLeft.y,dw:d.dimensions.width,dh:d.dimensions.height},Cc(r===Jr.SettingsScreenClose?.5:0,{kind:jn.Image,source:ge.settings.close,dx:d.topLeft.x,dy:d.topLeft.y,dw:d.dimensions.width,dh:d.dimensions.height}),{kind:jn.Image,source:me.buttons.settings.language,dx:f.topLeft.x,dy:f.topLeft.y,dw:f.dimensions.width,dh:f.dimensions.height},{kind:jn.Text,text:Kl(o,gr.FlagAndCurrentLanguage),x:Yc(f).x,y:Yc(f).y,fill:Qr.textBrown,fontWeight:400,fontSize:r===Jr.Language?67*$r.depressedButtonScale*s:67*s,fontFamily:Er,textBaseline:"middle",textAlign:"center"},Cc(r===Jr.Language?.5:0,{kind:jn.Image,source:ge.settings.language,dx:f.topLeft.x,dy:f.topLeft.y,dw:f.dimensions.width,dh:f.dimensions.height}),{kind:jn.Image,source:me.buttons.settings.credits,dx:m.topLeft.x,dy:m.topLeft.y,dw:m.dimensions.width,dh:m.dimensions.height},{kind:jn.Text,text:Kl(o,gr.Credits),x:Yc(m).x,y:Yc(m).y,fill:Qr.textBrown,fontWeight:400,fontSize:r===Jr.Credits?67*$r.depressedButtonScale*s:67*s,fontFamily:Er,textBaseline:"middle",textAlign:"center"},Cc(r===Jr.Credits?.5:0,{kind:jn.Image,source:ge.settings.credits,dx:m.topLeft.x,dy:m.topLeft.y,dw:m.dimensions.width,dh:m.dimensions.height}),{kind:jn.Image,source:me.buttons.settings.reset_to_level_one,dx:v.topLeft.x,dy:v.topLeft.y,dw:v.dimensions.width,dh:v.dimensions.height},{kind:jn.Text,text:Kl(o,gr.ResetToLevelOne),x:Yc(v).x,y:Yc(v).y,fill:Qr.textBrown,fontWeight:400,fontSize:r===Jr.OpenConfirmResetToLevelOneScreen?56*$r.depressedButtonScale*s:56*s,fontFamily:Er,textBaseline:"middle",textAlign:"center"},Cc(r===Jr.OpenConfirmResetToLevelOneScreen?.5:0,{kind:jn.Image,source:ge.settings.reset_to_level_one,dx:v.topLeft.x,dy:v.topLeft.y,dw:v.dimensions.width,dh:v.dimensions.height})]}}dualRenderConfirmResetToLevelOneScreen(){return{reactElement:(0,Ze.jsx)("div",{className:"App",children:(0,Ze.jsx)("div",{className:"AppMain",children:(0,Ze.jsx)("svg",{className:"MainSvg",width:this.state.appWidth,height:this.state.appHeight})})}),canvasElement:{kind:jn.Group,children:[this.renderHomeScreenCanvasElement(),this.renderConfirmResetTOLevelOneBoxCanvasElement()]}}}renderConfirmResetTOLevelOneBoxCanvasElement(){const{appWidth:e,appHeight:t,onlyTouchDepressedButton:n,language:r}=this.state,o=this.state.appWidth/ye.width,i=this.state.appHeight/ye.height,a=Math.min(o,i),s=(()=>{const e=ye.width*a,t=ye.height*a;return{topLeft:{x:(this.state.appWidth-e)/2,y:(this.state.appHeight-t)/1},dimensions:{width:e,height:t}}})(),l={topLeft:He(He(s.topLeft,je(Ce.topLeft,a)),{x:0,y:0}),dimensions:{width:Ce.dimensions.width*a,height:Ce.dimensions.height*a}},c={topLeft:He(He(s.topLeft,je(Pe.topLeft,a)),{x:0,y:0}),dimensions:{width:Pe.dimensions.width*a,height:Pe.dimensions.height*a}},u=n===Jr.ConfirmResetToLevelOneScreenClose?Lc(c):c,d={topLeft:He(He(s.topLeft,je(Te.topLeft,a)),{x:0,y:0}),dimensions:{width:Te.dimensions.width*a,height:Te.dimensions.height*a}},h={topLeft:He(He(s.topLeft,je(Be.topLeft,a)),{x:0,y:0}),dimensions:{width:Be.dimensions.width*a,height:Be.dimensions.height*a}},f=n===Jr.ConfirmResetToLevelOne?Lc(h):h,p={topLeft:He(He(s.topLeft,je(Ae.topLeft,a)),{x:0,y:0}),dimensions:{width:Ae.dimensions.width*a,height:Ae.dimensions.height*a}},m=n===Jr.CancelResetToLevelOne?Lc(p):p;return{kind:jn.Group,children:[bc({x:0,y:0,w:e,h:t,fill:{r:0,g:0,b:0,a:128}}),{kind:jn.Image,source:me.settings_box,dx:l.topLeft.x,dy:l.topLeft.y,dw:l.dimensions.width,dh:l.dimensions.height},{kind:jn.Image,source:me.buttons.settings.close,dx:u.topLeft.x,dy:u.topLeft.y,dw:u.dimensions.width,dh:u.dimensions.height},Cc(n===Jr.ConfirmResetToLevelOneScreenClose?.5:0,{kind:jn.Image,source:ge.settings.close,dx:u.topLeft.x,dy:u.topLeft.y,dw:u.dimensions.width,dh:u.dimensions.height}),{kind:jn.Text,text:Kl(r,gr.AreYouSureYouWantToResetToLevelOne),x:Yc(d).x,y:Yc(d).y,fill:Qr.textBrown,fontWeight:400,fontSize:67*a,fontFamily:Er,textBaseline:"middle",textAlign:"center"},{kind:jn.Image,source:me.buttons.settings.credits,dx:f.topLeft.x,dy:f.topLeft.y,dw:f.dimensions.width,dh:f.dimensions.height},{kind:jn.Text,text:Kl(r,gr.ConfirmReset),x:Yc(f).x,y:Yc(f).y,fill:Qr.textBrown,fontWeight:400,fontSize:n===Jr.ConfirmResetToLevelOne?67*$r.depressedButtonScale*a:67*a,fontFamily:Er,textBaseline:"middle",textAlign:"center"},Cc(n===Jr.ConfirmResetToLevelOne?.5:0,{kind:jn.Image,source:ge.settings.credits,dx:f.topLeft.x,dy:f.topLeft.y,dw:f.dimensions.width,dh:f.dimensions.height}),{kind:jn.Image,source:me.buttons.settings.reset_to_level_one,dx:m.topLeft.x,dy:m.topLeft.y,dw:m.dimensions.width,dh:m.dimensions.height},{kind:jn.Text,text:Kl(r,gr.CancelReset),x:Yc(m).x,y:Yc(m).y,fill:Qr.textBrown,fontWeight:400,fontSize:n===Jr.CancelResetToLevelOne?67*$r.depressedButtonScale*a:67*a,fontFamily:Er,textBaseline:"middle",textAlign:"center"},Cc(n===Jr.CancelResetToLevelOne?.5:0,{kind:jn.Image,source:ge.settings.reset_to_level_one,dx:m.topLeft.x,dy:m.topLeft.y,dw:m.dimensions.width,dh:m.dimensions.height})]}}dualRenderHomeToViewAnimation(){const{appHeight:e,screen:t}=this.state,n=mc(t.currentTimestamp,t.animationStartTime),r=Math.max(-e*n/bo,-e),o=this.getCurrentLevelBattleEvents(),i=t.animationKind===xr.PlayBattle?t.battleAnimationOffsetSeconds+n:t.animationKind===xr.PauseBattle?t.battleAnimationOffsetSeconds:0,a=tc(rc(t.level),o,i);return{reactElement:(0,Ze.jsx)("div",{className:"App",children:(0,Ze.jsx)("div",{className:"AppMain",children:(0,Ze.jsx)("svg",{className:"MainSvg",width:this.state.appWidth,height:e})})}),canvasElement:{kind:jn.Group,children:[{kind:jn.Group,transform:[{kind:Vn.Translate,x:0,y:r}],children:[this.renderHomeScreenCanvasElement()]},this.renderBattleAndOutcomeScreenCanvasElement(r,t.blockEditor,t.level,i,a)]}}}dualRenderEditToViewAnimation(){const{appHeight:e,screen:t}=this.state,n=mc(t.currentTimestamp,t.animationStartTime),r=Math.max(-e*n/bo,-e),o=this.getCurrentLevelBattleEvents(),i=t.animationKind===xr.PlayBattle?t.battleAnimationOffsetSeconds+n:t.animationKind===xr.PauseBattle?t.battleAnimationOffsetSeconds:0,a=tc(rc(t.level),o,i),s={config:this.getMainBlockEditorConfig(),state:t.blockEditor,measureText:this.measureSvgText,setState:this.setBlockEditorState};return{reactElement:(0,Ze.jsx)("div",{className:"App",children:(0,Ze.jsx)("div",{className:"AppMain",children:(0,Ze.jsx)("svg",{className:"MainSvg",width:this.state.appWidth,height:e,children:(0,Ze.jsx)("g",{transform:"translate(0 ".concat(r,")"),children:(0,Ze.jsx)(vt,{...s})})})})}),canvasElement:{kind:jn.Group,children:[this.renderBattleAndOutcomeScreenCanvasElement(r,t.blockEditor,t.level,i,a),this.renderPuzzleScreenButtonsCanvasElement()]}}}dualRenderViewToEditAnimation(){const{appHeight:e,screen:t}=this.state,n=mc(t.currentTimestamp,t.animationStartTime),r=Math.min(e*n/bo-e,0),o=this.getCurrentLevelBattleEvents(),i=t.animationKind===xr.PlayBattle?t.battleAnimationOffsetSeconds+n:t.animationKind===xr.PauseBattle?t.battleAnimationOffsetSeconds:0,a=tc(rc(t.level),o,i),s={config:this.getMainBlockEditorConfig(),state:t.blockEditor,measureText:this.measureSvgText,setState:this.setBlockEditorState};return{reactElement:(0,Ze.jsx)("div",{className:"App",children:(0,Ze.jsx)("div",{className:"AppMain",children:(0,Ze.jsx)("svg",{className:"MainSvg",width:this.state.appWidth,height:e,children:(0,Ze.jsx)("g",{transform:"translate(0 ".concat(r,")"),children:(0,Ze.jsx)(vt,{...s})})})})}),canvasElement:{kind:jn.Group,children:[this.renderBattleAndOutcomeScreenCanvasElement(r,t.blockEditor,t.level,i,a),this.renderPuzzleScreenButtonsCanvasElement()]}}}dualRenderViewToHomeAnimation(){const{appHeight:e,screen:t}=this.state,n=mc(t.currentTimestamp,t.animationStartTime),r=Math.min(e*n/bo-e,0),o=this.getCurrentLevelBattleEvents(),i=t.animationKind===xr.PlayBattle?t.battleAnimationOffsetSeconds+n:t.animationKind===xr.PauseBattle?t.battleAnimationOffsetSeconds:0,a=tc(rc(t.level),o,i);return{reactElement:(0,Ze.jsx)("div",{className:"App",children:(0,Ze.jsx)("div",{className:"AppMain",children:(0,Ze.jsx)("svg",{className:"MainSvg",width:this.state.appWidth,height:e})})}),canvasElement:{kind:jn.Group,children:[{kind:jn.Group,transform:[{kind:Vn.Translate,x:0,y:r}],children:[this.renderHomeScreenCanvasElement()]},this.renderBattleAndOutcomeScreenCanvasElement(r,t.blockEditor,t.level,i,a)]}}}dualRenderEditToHomeAnimation(){const{appHeight:e,screen:t}=this.state,n=mc(t.currentTimestamp,t.animationStartTime),r=Math.min(e*n/bo-e,0),o={config:this.getMainBlockEditorConfig(),state:t.blockEditor,measureText:this.measureSvgText,setState:this.setBlockEditorState};return{reactElement:(0,Ze.jsx)("div",{className:"App",children:(0,Ze.jsx)("div",{className:"AppMain",children:(0,Ze.jsx)("svg",{className:"MainSvg",width:this.state.appWidth,height:e,children:(0,Ze.jsx)("g",{transform:"translate(0 ".concat(e+r,")"),children:(0,Ze.jsx)(vt,{...o})})})})}),canvasElement:{kind:jn.Group,transform:[{kind:Vn.Translate,x:0,y:r}],children:[this.renderHomeScreenCanvasElement()]}}}dualRenderBattleScreen(){const{appWidth:e,appHeight:t,screen:n}=this.state,r=mc(n.currentTimestamp,n.animationStartTime),o=this.getCurrentLevelBattleEvents(),i=n.animationKind===xr.PlayBattle?n.battleAnimationOffsetSeconds+r:n.animationKind===xr.PauseBattle?n.battleAnimationOffsetSeconds:0,a=tc(rc(n.level),o,i),[s,l]=this.getBattleScreenProtectedAreaScalePointAndScaleFactor(),c=this.getMinimapBBox(),u={config:this.getMinimapBlockEditorConfig(),state:this.getMinimapBlockEditorState(),measureText:this.measureSvgText,setState:kc};return{reactElement:(0,Ze.jsx)("div",{className:"App",children:(0,Ze.jsx)("div",{className:"AppMain",children:(0,Ze.jsx)("svg",{className:"MainSvg",width:this.state.appWidth,height:t,children:(0,Ze.jsx)("g",{transform:"translate(".concat(s.x," ").concat(s.y,") scale(").concat(l," ").concat(l,") translate(").concat(-s.x," ").concat(-s.y,")"),children:(0,Ze.jsx)("g",{transform:"translate(".concat(c.topLeft.x," ").concat(c.topLeft.y,") scale(").concat(c.dimensions.width/e," ").concat(c.dimensions.height/t,")"),opacity:0===i?0:1,children:(0,Ze.jsx)(vt,{...u})})})})})}),canvasElement:{kind:jn.Group,children:[this.renderBattleAndOutcomeScreenCanvasElement(-t,n.blockEditor,n.level,i,a,{renderTutorial:!0}),this.renderKilledEnemiesButForgotToMoveHeroToStairsHintIfNeeded(),this.renderPuzzleScreenButtonsCanvasElement()]}}}dualRenderNextLevelAnimation(){const{appHeight:e,screen:t}=this.state,n=mc(t.currentTimestamp,t.animationStartTime),r=Math.min(e*n/bo-e,e),o=this.getPrevLevelBattleEvents(),i=Number.MAX_SAFE_INTEGER,a=tc(rc(t.level-1),o,i),s=tc(rc(t.level),[],0),l={config:this.getMainBlockEditorConfig(),state:t.prevLevelBlockEditor,measureText:this.measureSvgText,setState:kc};return{reactElement:(0,Ze.jsx)("div",{className:"App",children:(0,Ze.jsx)("div",{className:"AppMain",children:(0,Ze.jsx)("svg",{className:"MainSvg",width:this.state.appWidth,height:e,children:(0,Ze.jsx)("g",{transform:"translate(0 ".concat(r,")"),children:(0,Ze.jsx)(vt,{...l})})})})}),canvasElement:{kind:jn.Group,children:[this.renderBattleAndOutcomeScreenCanvasElement(r,t.prevLevelBlockEditor,t.level-1,i,a),this.renderBattleAndOutcomeScreenCanvasElement(r-2*e,t.blockEditor,t.level,0,s),this.renderPuzzleScreenButtonsCanvasElement()]}}}dualRenderOpenSettingsAnimation(){const{screen:e,appHeight:t}=this.state,n=mc(e.currentTimestamp,e.animationStartTime),r=Math.max(t-t*n/bo,0);return this.dualRenderSettingsBoxOverHomeScreen(r)}dualRenderCloseSettingsAnimation(){const{screen:e,appHeight:t}=this.state,n=mc(e.currentTimestamp,e.animationStartTime),r=Math.min(t*n/bo,t);return this.dualRenderSettingsBoxOverHomeScreen(r)}dualRenderCreditsAnimation(){const e=(0,Ze.jsx)("div",{className:"App",children:(0,Ze.jsx)("div",{className:"AppMain",children:(0,Ze.jsx)("svg",{className:"MainSvg",width:this.state.appWidth,height:this.state.appHeight})})}),{appWidth:t,appHeight:n,screen:r}=this.state,o=-n*mc(r.currentTimestamp,r.animationStartTime)*.1,[i]=this.getUntransformedCreditScreenTextElementsAndFinalYCursor();return{reactElement:e,canvasElement:{kind:jn.Group,children:[bc({x:0,y:0,w:t,h:n,fill:{r:0,g:0,b:0,a:255}}),{kind:jn.Group,transform:[{kind:Vn.Translate,x:0,y:o}],children:i}]}}}getUntransformedCreditScreenTextElementsAndFinalYCursor(){const{appWidth:e,appHeight:t,language:n}=this.state,r=e/2039,o=t/1447,i=Math.min(r,o),a=[],s=Kl(n,gr.CreditScreenTitle),l={textAlign:"center",fontSize:96*i,fontFamily:Er},c=this.measureCanvasText({...l,text:s}),u={...l,kind:jn.Text,text:s,x:.5*e,y:t-c.height,fill:Qr.textWhite};a.push(u);const d=240*i,h={textAlign:"center",fontSize:80*i,fontFamily:Er},f=80*i;let p=u.y+c.height+d;const m=Wr.replaceAll(Nr,function(){const e=jl();if("Loading"===e)return"ffff ffff ffff ffff\nffff ffff ffff ffff";const[t,n,r,o,i,a,s,l,c,u,d,h,f,p,m,g]=e,v=[[t,n],[r,o],[i,a],[s,l]].map((e=>{let[t,n]=e;return lu(t)+lu(n)})).join(" "),b=[[c,u],[d,h],[f,p],[m,g]].map((e=>{let[t,n]=e;return lu(t)+lu(n)})).join(" ");return v+"\n"+b}()).split("\n\n");for(const g of m){const t=g.split("\n");for(const n of t){a.push({...h,kind:jn.Text,text:n,x:.5*e,y:p,fill:Qr.textWhite});p+=this.measureCanvasText({...h,text:n}).height+f}t.length>0&&(p-=f),p+=d}return[a,p]}getCreditRollDurationInSeconds(){const e=this.getUntransformedCreditScreenTextElementsAndFinalYCursor()[1],{appHeight:t}=this.state;return e/(.1*t)}renderBattleAndOutcomeScreenCanvasElement(e,t,n,r,o,i){var a;const{language:s,appWidth:l,appHeight:c,onlyTouchDepressedButton:u,screen:d}=this.state,h=this.state.appWidth/$r.castleInteriorImage.width,f=c-$r.castleInteriorImage.height*h,[p,m]=this.getBattleScreenProtectedAreaScalePointAndScaleFactor(),g=[{kind:Vn.Translate,x:p.x,y:p.y},{kind:Vn.Scale,x:m,y:m},{kind:Vn.Translate,x:-p.x,y:-p.y}],{levelState:v,battleStatus:b,errorAlert:y,particles:k,advanceSummon:w}=o,x=this.measureCanvasText({text:b===Kr.Victory?Kl(s,gr.LevelCleared):b===Kr.Defeat?Kl(s,gr.LevelFailed):"",fontSize:$r.unscaledBattleOutcomeTextSizePx*h,fontFamily:Tr}),S=this.measureCanvasText({text:b===Kr.Victory?Kl(s,gr.NextLevel):"",fontSize:$r.unscaledButtonTextSizePx*h,fontFamily:Br}),L=S.height,E={topLeft:{x:this.state.appWidth/2-(S.width+2*L)/2,y:0+.5*c+.5*x.height+2*x.height},dimensions:{width:S.width+2*L,height:S.height+2*L}},C=u===Jr.NextLevel?Lc(E):E,T=u===Jr.NextLevel?$r.depressedButtonScale*$r.unscaledButtonTextSizePx*h:$r.unscaledButtonTextSizePx*h,B=[bc({x:(this.state.appWidth-this.state.appWidth*$r.battleOutcomeAlertWidthFactor)/2,y:0,w:this.state.appWidth*$r.battleOutcomeAlertWidthFactor,h:c,fill:{r:0,g:0,b:0,a:204}}),{kind:jn.Text,text:Kl(s,gr.LevelCleared),x:(this.state.appWidth-this.state.appWidth*$r.battleOutcomeAlertWidthFactor)/2+this.state.appWidth*$r.battleOutcomeAlertWidthFactor*.5,y:0+.5*c,fill:Qr.textWhite,fontSize:$r.unscaledBattleOutcomeTextSizePx*h,fontFamily:Tr,textBaseline:"middle",textAlign:"center"},{kind:jn.Group,alpha:[xr.PlayBattle,xr.PauseBattle].includes(d.animationKind)?1:.5,children:n>=Lr?[]:[bc({x:C.topLeft.x,y:C.topLeft.y,w:C.dimensions.width,h:C.dimensions.height,fill:Qr.buttonBlue,rx:5,ry:5}),{kind:jn.Text,text:Kl(s,gr.NextLevel),x:Yc(C).x,y:Yc(C).y,fill:Qr.textWhite,fontSize:T,fontFamily:Br,textBaseline:"middle",textAlign:"center"},bc({x:C.topLeft.x,y:C.topLeft.y,w:C.dimensions.width,h:C.dimensions.height,fill:[xr.PlayBattle,xr.PauseBattle].includes(d.animationKind)?u===Jr.NextLevel?{r:255,g:255,b:255,a:128}:oc({r:0,g:0,b:0,a:150},{r:255,g:255,b:255,a:30},r,1):ro,rx:5,ry:5})]}],A=[bc({x:(this.state.appWidth-this.state.appWidth*$r.battleOutcomeAlertWidthFactor)/2,y:0,w:this.state.appWidth*$r.battleOutcomeAlertWidthFactor,h:c,fill:{r:0,g:0,b:0,a:204}}),{kind:jn.Text,text:Kl(s,gr.LevelFailed),x:(this.state.appWidth-this.state.appWidth*$r.battleOutcomeAlertWidthFactor)/2+this.state.appWidth*$r.battleOutcomeAlertWidthFactor*.5,y:0+.5*c,fill:Qr.textWhite,fontSize:$r.unscaledBattleOutcomeTextSizePx*h,fontFamily:Tr,textBaseline:"middle",textAlign:"center"}],P=null!==(a=null===i||void 0===i?void 0:i.renderTutorial)&&void 0!==a&&a;return{kind:jn.Group,clipPath:[{kind:qn.MoveTo,x:0,y:c+e},{kind:qn.LineTo,x:l,y:c+e},{kind:qn.LineTo,x:l,y:c+e+c},{kind:qn.LineTo,x:0,y:c+e+c},{kind:qn.LineTo,x:0,y:c+e}],children:[{kind:jn.Group,transform:[{kind:Vn.Translate,x:0,y:c+e}],children:[{kind:jn.Image,source:me.castle_interior,dx:0,dy:f,dw:l,dh:l*(me.castle_interior.naturalHeight/me.castle_interior.naturalWidth)},{kind:jn.Group,transform:g,children:[this.renderMinimapHoleCanvasElement()]},P?this.renderTutorialCanvasElement():Kn,{kind:jn.Group,transform:g,children:[...v.squares.map(((e,t)=>bc({x:(50+150*t)*h,y:f+1175*h,w:130*h,h:80*h,rx:65*h,ry:40*h,fill:Qr.squareWhite}))),...v.squares.map(((e,t)=>Gc({square:e,squareIndex:t,backgroundImageTop:f,backgroundImageScale:h,elapsedSeconds:r,battleAnimationData:o}))),null===w?Kn:Gc({square:w.summonee,squareIndex:w.summoneeIndex,backgroundImageTop:f,backgroundImageScale:h,elapsedSeconds:r,battleAnimationData:o}),...k.map((e=>function(e){const{cx:t,cy:n,r:r}=e;return bc({x:t-r,y:n-r,w:2*r,h:2*r,rx:r,ry:r,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill})}({cx:e.position.x*h,cy:f+e.position.y*h,r:e.radius*h,fill:e.color}))),null===y?Kn:(()=>{const e={kind:jn.Text,text:Kl(s,y.message),x:(150*y.index-80)*h+260*h*.5,y:f+805*h+160*h*.5,fill:Qr.textWhite,fontSize:$r.unscaledErrorAlertTextSizePx*h,fontFamily:Cr,textBaseline:"middle",textAlign:"center"},t=this.measureCanvasText(e),n=Math.max(260*h,t.width+20*h);return{kind:jn.Group,alpha:y.opacityFactor,children:[bc({x:(50+150*y.index)*h-.5*n,y:f+805*h,w:n,h:160*h,rx:5*h,ry:5*h,fill:Qr.errorAlertRed}),e]}})()]},...b===Kr.Victory?B:b===Kr.Defeat?A:[],b===Kr.Victory&&n===Lr?this.renderStage2ComingSoonCanvasElement():Kn]}]}}getBattleScreenProtectedAreaScalePointAndScaleFactor(){const{appHeight:e,screen:t}=this.state,n=this.state.safeAreaInsets.insets,r=this.state.appWidth/$r.castleInteriorImage.width,o=e-$r.castleInteriorImage.height*r,i=50*r,a={x:(50+150*(rc(t.level).squares.length-1))*r+130*r,y:o+770*r+80*r},s=a.x-i;return[a,(s-Math.max(0,n.left-i))/s]}renderPuzzleScreenButtonsCanvasElement(){return this.dualRenderPuzzleScreenButtons().canvasElement}dualRenderPuzzleScreenButtons(){const e=this.state.appWidth/$r.castleInteriorImage.width,{screen:t,onlyTouchDepressedButton:n}=this.state,r=this.state.safeAreaInsets.insets,o=Ec(t),i=gc(t,this.getCurrentLevelBattleEvents)||vc(t,this.getCurrentLevelBattleEvents),a=mc(t.currentTimestamp,t.animationStartTime),s=t.blockEditor.canvas.items,{hasFailedLevelOneAtLeastOnce:l}=this.state,c=t.level===Sr.Level1&&!l&&s[0].content.length<3,u=t.level===Sr.Level1&&l&&s[0].content.length<=3,d=t.level===Sr.Level1&&!l&&3===s[0].content.length,h=t.level===Sr.Level1&&s[0].content.length>=4,f=1===s.length&&1===s[0].content.length,{nondepressedLeftButtonBBox:p,nondepressedMiddleButtonBBox:m,nondepressedRightButtonBBox:g}=iu(e,r),v=n===Jr.PuzzleScreenLeft?Lc(p):p,b={kind:jn.Image,source:me.buttons.puzzle.edit,dx:v.topLeft.x,dy:v.topLeft.y,dw:v.dimensions.width,dh:v.dimensions.height},y=Cc(.5,b),k={kind:jn.Group,children:[b,n===Jr.PuzzleScreenLeft?Kn:bc({x:v.topLeft.x,y:v.topLeft.y,w:v.dimensions.width,h:v.dimensions.height,rx:.5*v.dimensions.width,ry:.5*v.dimensions.height,fill:oc({r:0,g:0,b:0,a:150},{r:255,g:255,b:255,a:30},a,1)})]},w=![xr.PlayBattle,xr.PauseBattle].includes(t.animationKind)||gc(t,this.getCurrentLevelBattleEvents)?y:vc(t,this.getCurrentLevelBattleEvents)||t.animationKind===xr.PauseBattle&&(c||u)||f||this.getCurrentLevelBattleAnimationData().didHeroSurviveLevelButFailToReachStairs?k:b,x=Cc(n===Jr.PuzzleScreenLeft?.5:0,{kind:jn.Image,source:ge.puzzle.all_purpose,dx:v.topLeft.x,dy:v.topLeft.y,dw:v.dimensions.width,dh:v.dimensions.height}),S=n===Jr.PuzzleScreenMiddle?Lc(m):m,L={source:me.buttons.puzzle.view},E={disabled:!0,source:me.buttons.puzzle.view},C={flashing:!0,source:me.buttons.puzzle.view},T={source:me.buttons.puzzle.play},B={disabled:!0,source:me.buttons.puzzle.play},A={flashing:!0,source:me.buttons.puzzle.play},P={source:me.buttons.puzzle.pause},I={disabled:!0,source:me.buttons.puzzle.pause},_=[xr.HomeToView,xr.EditToView],D=t.animationKind===xr.Edit&&(d||h)&&null===t.blockEditor.uiTouch?C:t.animationKind===xr.PauseBattle&&c?B:t.animationKind===xr.PauseBattle&&(d||h)?A:t.animationKind===xr.PauseBattle&&this.getCurrentLevelBattleAnimationData().didHeroSurviveLevelButFailToReachStairs?B:t.animationKind!==xr.PlayBattle||i?t.animationKind===xr.PlayBattle&&i?I:t.animationKind===xr.PauseBattle&&o?T:t.animationKind!==xr.PauseBattle||o?t.animationKind===xr.Edit?L:_.includes(t.animationKind)||t.animationKind===xr.NextLevel?B:E:B:P,M=Cc(D.disabled?.5:1,{kind:jn.Image,source:D.source,dx:S.topLeft.x,dy:S.topLeft.y,dw:S.dimensions.width,dh:S.dimensions.height}),R=Cc(n===Jr.PuzzleScreenMiddle?.5:0,{kind:jn.Image,source:ge.puzzle.all_purpose,dx:S.topLeft.x,dy:S.topLeft.y,dw:S.dimensions.width,dh:S.dimensions.height}),O=n!==Jr.PuzzleScreenMiddle&&D.flashing?bc({x:S.topLeft.x,y:S.topLeft.y,w:S.dimensions.width,h:S.dimensions.height,rx:.5*S.dimensions.width,ry:.5*S.dimensions.height,fill:oc({r:0,g:0,b:0,a:150},{r:255,g:255,b:255,a:30},a,1)}):Kn,N=n===Jr.PuzzleScreenRight?Lc(g):g,z={kind:jn.Image,source:me.buttons.puzzle.home,dx:N.topLeft.x,dy:N.topLeft.y,dw:N.dimensions.width,dh:N.dimensions.height},F=Cc(n===Jr.PuzzleScreenRight?.5:0,{kind:jn.Image,source:ge.puzzle.all_purpose,dx:N.topLeft.x,dy:N.topLeft.y,dw:N.dimensions.width,dh:N.dimensions.height});return{reactElement:(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)("ellipse",{cx:Yc(v).x,cy:Yc(v).y,rx:.5*v.dimensions.width,ry:.5*v.dimensions.height,fill:"transparent"}),(0,Ze.jsx)("ellipse",{cx:Yc(S).x,cy:Yc(S).y,rx:.5*S.dimensions.width,ry:.5*S.dimensions.height,fill:"transparent"}),(0,Ze.jsx)("ellipse",{cx:Yc(N).x,cy:Yc(N).y,rx:.5*N.dimensions.width,ry:.5*N.dimensions.height,fill:"transparent"})]}),canvasElement:{kind:jn.Group,children:[w,x,M,R,O,z,F]}}}renderStage2ComingSoonCanvasElement(){const{appWidth:e,appHeight:t,language:n}=this.state,r=e/2039,o=t/1447,i=Math.min(r,o),a=[],s=Kl(n,gr.Stage2ComingSoon).split("\n"),l=s[0],c={textAlign:"center",fontSize:120*i,fontFamily:Er},u=this.measureCanvasText({...c,text:l}),d={...c,kind:jn.Text,text:l,x:.5*e,y:.5*t,fill:Qr.textWhite};a.push(d);const h=240*i,f={textAlign:"center",fontSize:80*i,fontFamily:Er},p=80*i;let m=d.y+u.height+h;const g=s.slice(1);for(const v of g){a.push({...f,kind:jn.Text,text:v,x:.5*e,y:m,fill:Qr.textWhite});m+=this.measureCanvasText({...f,text:v}).height+p}return{kind:jn.Group,children:[bc({x:0,y:0,w:e,h:t,fill:{r:0,g:0,b:0,a:255}}),...a]}}renderTutorialCanvasElement(){const{level:e,blockEditor:t}=this.state.screen;return null===t.uiTouch&&null===t.palette.scrollInProgress&&null===t.canvas.scrollInProgress&&null===t.literalEditor?e===Sr.Level1?this.renderLevel1TutorialCanvasElementAssumingNoBlockEditorUiAction():e===Sr.Level2?this.renderLevel2TutorialCanvasElementAssumingNoBlockEditorUiAction():e===Sr.Level8?this.renderLevel8TutorialCanvasElementAssumingNoBlockEditorUiAction():e===Sr.Level9?this.renderLevel9TutorialCanvasElementAssumingNoBlockEditorUiAction():Kn:Kn}renderLevel1TutorialCanvasElementAssumingNoBlockEditorUiAction(){const{screen:e,language:t,appWidth:n,appHeight:r}=this.state,o=e.blockEditor.canvas.items,{hasFailedLevelOneAtLeastOnce:i}=this.state,a=!i&&1===o.length&&o[0].content.length>=3,s=n/$r.castleInteriorImage.width,l=(()=>{const e=me.tutorial.tall_instructions_box,t=500*s,n=t*(e.naturalHeight/e.naturalWidth);return{topLeft:{x:50*s,y:Math.max(-.26*n,r-600*s)},dimensions:{width:t,height:n}}})(),c=(()=>{const e=me.tutorial.short_instructions_box,t=650*s,o=t*(e.naturalHeight/e.naturalWidth);return{topLeft:{x:n-t-20*s,y:r-o-20*s},dimensions:{width:t,height:o}}})(),u=(()=>{const e=me.tutorial.short_instructions_box,t=650*s,n=t*(e.naturalHeight/e.naturalWidth);return{topLeft:{x:20*s,y:Math.max(-.3*n,r-600*s)},dimensions:{width:t,height:n}}})();if(e.animationKind===xr.PauseBattle&&!a&&!i){const[e,n]=this.getBattleScreenProtectedAreaScalePointAndScaleFactor(),r=me.tutorial.tall_instructions_box,o=l,i=Kl(t,gr.TutorialLevel1Part1_MoveTheHero);return{kind:jn.Group,transform:[{kind:Vn.Translate,x:e.x,y:e.y},{kind:Vn.Scale,x:n,y:n},{kind:Vn.Translate,x:-e.x,y:-e.y}],children:[{kind:jn.Image,source:r,dx:o.topLeft.x,dy:o.topLeft.y,dw:o.dimensions.width,dh:o.dimensions.height},this.renderTextAndIconsAroundCenter(i,Yc(o),{width:Go*o.dimensions.width,height:Jo*o.dimensions.height})]}}const d=me.tutorial.finger.naturalHeight/me.tutorial.finger.naturalWidth*60,h=fn({config:this.getMainBlockEditorConfig(),state:this.state.screen.blockEditor,measureText:this.measureSvgText,setState:kc}).find((e=>e.block.kind===vr.MoveForward)).rbox;if(e.animationKind===xr.Edit&&1===o.length&&1===o[0].content.length&&!i){const e=He(Yc(h),{x:-6,y:-.2*d}),n=me.tutorial.short_instructions_box,r=c,o=Kl(t,gr.TutorialLevel1Part2_DragBlueBlock),i=Lo.firstDragEnd,{screen:a}=this.state,s=mc(a.currentTimestamp,Pc(a.animationStartTime,a.mostRecentTutorialBlockEditorUpdateTime))%Lo.totalDurationInSeconds,l=He(e,je(Ue(i,e),Math.min(1,s/Lo.movingPhaseDurationInSeconds))),u=s<Lo.blockReleaseTimeInSeconds;return{kind:jn.Group,children:[{kind:jn.Image,source:n,dx:r.topLeft.x,dy:r.topLeft.y,dw:r.dimensions.width,dh:r.dimensions.height},this.renderTextAndIconsAroundCenter(o,Yc(r),{width:Vo*r.dimensions.width,height:Ko*r.dimensions.height}),u?{kind:jn.Image,source:me.tutorial.finger,dx:l.x,dy:l.y,dw:60,dh:d}:Kn]}}if(e.animationKind===xr.Edit&&1===o.length&&2===o[0].content.length&&!i){const e=He(Yc(h),{x:-6,y:-.2*d}),n=me.tutorial.short_instructions_box,r=c,o=Kl(t,gr.TutorialLevel1Part3_DragAnotherBlock),i=Lo.secondDragEnd,{screen:a}=this.state,s=mc(a.currentTimestamp,Pc(a.animationStartTime,a.mostRecentTutorialBlockEditorUpdateTime))%Lo.totalDurationInSeconds,l=He(e,je(Ue(i,e),Math.min(1,s/Lo.movingPhaseDurationInSeconds))),u=s<Lo.blockReleaseTimeInSeconds;return{kind:jn.Group,children:[{kind:jn.Image,source:n,dx:r.topLeft.x,dy:r.topLeft.y,dw:r.dimensions.width,dh:r.dimensions.height},this.renderTextAndIconsAroundCenter(o,Yc(r),{width:Vo*r.dimensions.width,height:Ko*r.dimensions.height}),u?{kind:jn.Image,source:me.tutorial.finger,dx:l.x,dy:l.y,dw:60,dh:d}:Kn]}}if(e.animationKind===xr.Edit&&1===o.length&&o[0].content.length>=3&&!i){const e=me.tutorial.short_instructions_box,n=c,r=Kl(t,gr.TutorialLevel1Part4_PressView);return{kind:jn.Group,children:[{kind:jn.Image,source:e,dx:n.topLeft.x,dy:n.topLeft.y,dw:n.dimensions.width,dh:n.dimensions.height},this.renderTextAndIconsAroundCenter(r,Yc(n),{width:Vo*n.dimensions.width,height:Ko*n.dimensions.height})]}}if(e.animationKind===xr.PauseBattle&&a){const[e,n]=this.getBattleScreenProtectedAreaScalePointAndScaleFactor(),r=me.tutorial.short_instructions_box,o=u,i=Kl(t,gr.TutorialLevel1Part5_PressPlay);return{kind:jn.Group,transform:[{kind:Vn.Translate,x:e.x,y:e.y},{kind:Vn.Scale,x:n,y:n},{kind:Vn.Translate,x:-e.x,y:-e.y}],children:[{kind:jn.Image,source:r,dx:o.topLeft.x,dy:o.topLeft.y,dw:o.dimensions.width,dh:o.dimensions.height},this.renderTextAndIconsAroundCenter(i,Yc(o),{width:Vo*o.dimensions.width,height:Ko*o.dimensions.height})]}}if(e.animationKind===xr.PauseBattle&&i&&o[0].content.length<=3){const[e,n]=this.getBattleScreenProtectedAreaScalePointAndScaleFactor(),r=me.tutorial.tall_instructions_box,o=l,i=Kl(t,gr.TutorialLevel1Part6_TryAgain);return{kind:jn.Group,transform:[{kind:Vn.Translate,x:e.x,y:e.y},{kind:Vn.Scale,x:n,y:n},{kind:Vn.Translate,x:-e.x,y:-e.y}],children:[{kind:jn.Image,source:r,dx:o.topLeft.x,dy:o.topLeft.y,dw:o.dimensions.width,dh:o.dimensions.height},this.renderTextAndIconsAroundCenter(i,Yc(o),{width:Go*o.dimensions.width,height:Jo*o.dimensions.height})]}}return Kn}renderLevel2TutorialCanvasElementAssumingNoBlockEditorUiAction(){const{screen:e,language:t,appWidth:n,appHeight:r}=this.state;if(e.animationKind!==xr.PauseBattle)return Kn;const o=e.blockEditor.canvas.items,i=1===o.length&&1===o[0].content.length,a=n/$r.castleInteriorImage.width,s=(()=>{const e=me.tutorial.tall_instructions_box,t=500*a,n=t*(e.naturalHeight/e.naturalWidth);return{topLeft:{x:50*a,y:Math.max(-.26*n,r-600*a)},dimensions:{width:t,height:n}}})(),[l,c]=this.getBattleScreenProtectedAreaScalePointAndScaleFactor(),u=[{kind:Vn.Translate,x:l.x,y:l.y},{kind:Vn.Scale,x:c,y:c},{kind:Vn.Translate,x:-l.x,y:-l.y}],d=me.tutorial.tall_instructions_box,h=s,f={kind:jn.Image,source:d,dx:h.topLeft.x,dy:h.topLeft.y,dw:h.dimensions.width,dh:h.dimensions.height};if(i){const e=Kl(t,gr.TutorialLevel2Part1_MoveTheHero);return{kind:jn.Group,transform:u,children:[f,this.renderTextAndIconsAroundCenter(e,Yc(h),{width:Go*h.dimensions.width,height:Jo*h.dimensions.height})]}}return Kn}renderLevel8TutorialCanvasElementAssumingNoBlockEditorUiAction(){return this.renderUseForeverBlockHintIfNeeded()}renderUseForeverBlockHintIfNeeded(){const{screen:e,language:t,appWidth:n,appHeight:r}=this.state;if(e.animationKind!==xr.PauseBattle)return Kn;const o=e.blockEditor.canvas.items.map((e=>e.content)).find((e=>e.length>0&&e[0].kind===vr.WhenBattleStarts)),i=n/$r.castleInteriorImage.width,a=(()=>{const e=me.tutorial.tall_instructions_box,t=500*i,n=t*(e.naturalHeight/e.naturalWidth);return{topLeft:{x:50*i,y:Math.max(-.26*n,r-600*i)},dimensions:{width:t,height:n}}})(),s=this.getCurrentLevelBattleAnimationData();if(s.didHeroSurviveLevelButFailToReachStairs&&!s.didHeroDefeatAllEnemiesButForgetToMoveToStairs&&void 0!==o&&o.some((e=>e.kind===vr.If))){const[e,n]=this.getBattleScreenProtectedAreaScalePointAndScaleFactor(),r=me.tutorial.tall_instructions_box,o=a,i=Kl(t,gr.UseForeverBlockHint);return{kind:jn.Group,transform:[{kind:Vn.Translate,x:e.x,y:e.y},{kind:Vn.Scale,x:n,y:n},{kind:Vn.Translate,x:-e.x,y:-e.y}],children:[{kind:jn.Image,source:r,dx:o.topLeft.x,dy:o.topLeft.y,dw:o.dimensions.width,dh:o.dimensions.height},this.renderTextAndIconsAroundCenter(i,Yc(o),{width:Go*o.dimensions.width,height:Jo*o.dimensions.height})]}}return Kn}renderLevel9TutorialCanvasElementAssumingNoBlockEditorUiAction(){const{screen:e,language:t,appWidth:n,appHeight:r}=this.state,o=e.blockEditor.canvas.items.some((e=>Uc(e.content))),i=n/$r.castleInteriorImage.width;if(e.animationKind===xr.PauseBattle)return this.renderUseForeverBlockHintIfNeeded();if(e.animationKind!==xr.Edit)return Kn;if(o)return Kn;const a=(()=>{const e=me.tutorial.short_instructions_box,t=650*i,o=t*(e.naturalHeight/e.naturalWidth);return{topLeft:{x:n-t-20*i,y:r-o-20*i},dimensions:{width:t,height:o}}})(),s=60,l=s*(me.tutorial.finger.naturalHeight/me.tutorial.finger.naturalWidth),c={config:this.getMainBlockEditorConfig(),state:this.state.screen.blockEditor,measureText:this.measureSvgText,setState:kc},u=fn(c),d=u.find((e=>e.block.kind===vr.LessThan)).rbox,h=d.topLeft.y,f=d.topLeft.y+d.dimensions.height,p=20+.3*l,m=165,g=h<0?-h+p:f>r?r-f-p:0,{canvas:v}=e.blockEditor,b=null===v.scrollInProgress?v.scroll:{x:v.scroll.x+v.scrollInProgress.currentClientPosition.x-v.scrollInProgress.startClientPosition.x,y:v.scroll.y+v.scrollInProgress.currentClientPosition.y-v.scrollInProgress.startClientPosition.y},y=(()=>{function e(e){const t=He(b,e.rbox.topLeft),o=t.x,i=t.y,a=o+e.rbox.dimensions.width,s=i+e.rbox.dimensions.height,l=0<=o&&a<=n&&0<=i&&s<=r,c=e.block.args.expressions.every((e=>e.isLiteral&&""===e.source));return l&&e.block.kind===vr.LessThan&&c}const t=un(c);for(const n of t){const t=jc(n,e);if(null!==t)return t}return null})(),k=(()=>{function e(e){const t=He(b,e.rbox.topLeft),o=t.x,i=t.y,a=o+e.rbox.dimensions.width,s=i+e.rbox.dimensions.height,l=0<=o&&a<=n&&0<=i&&s<=r,c=e.block.args.expressions[0],u=void 0!==c&&!c.isLiteral&&c.kind===vr.Health,d=e.block.args.expressions[1],h=void 0!==d&&d.isLiteral&&""===d.source;return l&&e.block.kind===vr.LessThan&&u&&h}const t=un(c);for(const n of t){const t=jc(n,e);if(null!==t)return t}return null})();if(null===y&&null===k&&0!==g){const e=[{topLeft:{x:0,y:0},dimensions:{width:0,height:0}},...u.map((e=>e.rbox)).filter((e=>e.topLeft.x+e.dimensions.width>m)),{topLeft:{x:0,y:u[u.length-1].rbox.topLeft.y+u[u.length-1].rbox.dimensions.height},dimensions:{width:0,height:0}}],n=10,o=(()=>{for(let t=p;t<r-p;t+=n){if(!e.some((e=>{const n=e.topLeft.y-p,r=e.topLeft.y+e.dimensions.height+p;return n<=t&&t<=r})))return t}throw new Error("Could not find a dragStartYCandidate.")})(),i=(()=>{for(let t=r-p;t>=p;t-=n){if(!e.some((e=>{const n=e.topLeft.y-p,r=e.topLeft.y+e.dimensions.height+p;return n<=t&&t<=r})))return t}throw new Error("Could not find a dragStartYCandidate.")})(),c={x:m,y:g<0?i:o},d=He(c,{x:0,y:g}),h=Kl(t,g<0?gr.TutorialLevel9Part1_ScrollDown:gr.TutorialLevel9Part2_ScrollUp),{screen:f}=this.state,v=mc(f.currentTimestamp,Pc(f.animationStartTime,f.mostRecentTutorialBlockEditorUpdateTime))%Eo.paletteScroll.totalDurationInSeconds,b=Eo.paletteScroll.dragEndTimeInSeconds-Eo.paletteScroll.dragStartTimeInSeconds,y=Math.max(0,Math.min(1,(v-Eo.paletteScroll.dragStartTimeInSeconds)/b)),k=He(c,je(Ue(d,c),y)),w=Eo.paletteScroll.fingerDownTimeInSeconds<=v&&v<=Eo.paletteScroll.fingerUpTimeInSeconds;return{kind:jn.Group,children:[{kind:jn.Image,source:me.tutorial.short_instructions_box,dx:a.topLeft.x,dy:a.topLeft.y,dw:a.dimensions.width,dh:a.dimensions.height},this.renderTextAndIconsAroundCenter(h,Yc(a),{width:Vo*a.dimensions.width,height:Ko*a.dimensions.height}),null===f.blockEditor.uiTouch&&w?{kind:jn.Image,source:me.tutorial.finger,dx:k.x,dy:k.y,dw:s,dh:l}:Kn]}}if(null===y&&null===k&&0===g){const e=He(Yc(d),{x:-6,y:-.2*l}),n=Kl(t,gr.TutorialLevel9Part3_DragLessThan),r=Eo.paletteToCanvasDrag.lessThanBlockDragEnd,{screen:o}=this.state,i=mc(o.currentTimestamp,Pc(o.animationStartTime,o.mostRecentTutorialBlockEditorUpdateTime))%Eo.paletteToCanvasDrag.totalDurationInSeconds,c=He(e,je(Ue(r,e),Math.min(1,i/Eo.paletteToCanvasDrag.movingPhaseDurationInSeconds))),u=i<Eo.paletteToCanvasDrag.blockReleaseTimeInSeconds;return{kind:jn.Group,children:[{kind:jn.Image,source:me.tutorial.short_instructions_box,dx:a.topLeft.x,dy:a.topLeft.y,dw:a.dimensions.width,dh:a.dimensions.height},this.renderTextAndIconsAroundCenter(n,Yc(a),{width:Vo*a.dimensions.width,height:Ko*a.dimensions.height}),null===o.blockEditor.uiTouch&&u?{kind:jn.Image,source:me.tutorial.finger,dx:c.x,dy:c.y,dw:s,dh:l}:Kn]}}const w=u.find((e=>e.block.kind===vr.Health)).rbox,x=w.topLeft.y,S=w.topLeft.y+w.dimensions.height,L=x<0?-x+p:S>r?r-S-p:0;if(null!==y&&null===k&&0!==L){const e=[{topLeft:{x:0,y:0},dimensions:{width:0,height:0}},...u.map((e=>e.rbox)).filter((e=>e.topLeft.x+e.dimensions.width>m)),{topLeft:{x:0,y:u[u.length-1].rbox.topLeft.y+u[u.length-1].rbox.dimensions.height},dimensions:{width:0,height:0}}],n=10,o=(()=>{for(let t=p;t<r-p;t+=n){if(!e.some((e=>{const n=e.topLeft.y-p,r=e.topLeft.y+e.dimensions.height+p;return n<=t&&t<=r})))return t}throw new Error("Could not find a dragStartYCandidate.")})(),i=(()=>{for(let t=r-p;t>=p;t-=n){if(!e.some((e=>{const n=e.topLeft.y-p,r=e.topLeft.y+e.dimensions.height+p;return n<=t&&t<=r})))return t}throw new Error("Could not find a dragStartYCandidate.")})(),c={x:m,y:g<0?i:o},d=He(c,{x:0,y:L}),h=Kl(t,L<0?gr.TutorialLevel9Part1_ScrollDown:gr.TutorialLevel9Part2_ScrollUp),{screen:f}=this.state,v=mc(f.currentTimestamp,Pc(f.animationStartTime,f.mostRecentTutorialBlockEditorUpdateTime))%Eo.paletteScroll.totalDurationInSeconds,b=Eo.paletteScroll.dragEndTimeInSeconds-Eo.paletteScroll.dragStartTimeInSeconds,y=Math.max(0,Math.min(1,(v-Eo.paletteScroll.dragStartTimeInSeconds)/b)),k=He(c,je(Ue(d,c),y)),w=Eo.paletteScroll.fingerDownTimeInSeconds<=v&&v<=Eo.paletteScroll.fingerUpTimeInSeconds;return{kind:jn.Group,children:[{kind:jn.Image,source:me.tutorial.short_instructions_box,dx:a.topLeft.x,dy:a.topLeft.y,dw:a.dimensions.width,dh:a.dimensions.height},this.renderTextAndIconsAroundCenter(h,Yc(a),{width:Vo*a.dimensions.width,height:Ko*a.dimensions.height}),null===f.blockEditor.uiTouch&&w?{kind:jn.Image,source:me.tutorial.finger,dx:k.x,dy:k.y,dw:s,dh:l}:Kn]}}if(null!==y&&null===k&&0===L){const e=He(Yc(w),{x:-6,y:-.2*l}),n=Kl(t,gr.TutorialLevel9Part4_DragHealth),r=He(b,{x:y.rbox.topLeft.x+$r.blockPadding+18,y:y.rbox.topLeft.y+.5*y.rbox.dimensions.height-.2*l}),{screen:o}=this.state,i=mc(o.currentTimestamp,Pc(o.animationStartTime,o.mostRecentTutorialBlockEditorUpdateTime))%Eo.paletteToCanvasDrag.totalDurationInSeconds,c=He(e,je(Ue(r,e),Math.min(1,i/Eo.paletteToCanvasDrag.movingPhaseDurationInSeconds))),u=i<Eo.paletteToCanvasDrag.blockReleaseTimeInSeconds;return{kind:jn.Group,children:[{kind:jn.Image,source:me.tutorial.short_instructions_box,dx:a.topLeft.x,dy:a.topLeft.y,dw:a.dimensions.width,dh:a.dimensions.height},this.renderTextAndIconsAroundCenter(n,Yc(a),{width:Vo*a.dimensions.width,height:Ko*a.dimensions.height}),null===o.blockEditor.uiTouch&&u?{kind:jn.Image,source:me.tutorial.finger,dx:c.x,dy:c.y,dw:s,dh:l}:Kn]}}if(null!==k){const e=Kl(t,gr.TutorialLevel9Part5_Type3),{screen:n}=this.state,r=mc(n.currentTimestamp,Pc(n.animationStartTime,n.mostRecentTutorialBlockEditorUpdateTime)),o=.5+.5*Math.sin(2*Math.PI*r/Eo.literalTap.fingerFlashPeriod),i=He(b,{x:k.rbox.topLeft.x+k.rbox.dimensions.width-$r.blockPadding-18,y:k.rbox.topLeft.y+.5*k.rbox.dimensions.height-.2*l});return{kind:jn.Group,children:[{kind:jn.Image,source:me.tutorial.short_instructions_box,dx:a.topLeft.x,dy:a.topLeft.y,dw:a.dimensions.width,dh:a.dimensions.height},this.renderTextAndIconsAroundCenter(e,Yc(a),{width:Vo*a.dimensions.width,height:Ko*a.dimensions.height}),{kind:jn.Group,alpha:o,children:[{kind:jn.Image,source:me.tutorial.finger,dx:i.x,dy:i.y,dw:s,dh:l}]}]}}return Kn}renderKilledEnemiesButForgotToMoveHeroToStairsHintIfNeeded(){const{language:e,appWidth:t,appHeight:n}=this.state,[r,o]=this.getBattleScreenProtectedAreaScalePointAndScaleFactor(),i=[{kind:Vn.Translate,x:r.x,y:r.y},{kind:Vn.Scale,x:o,y:o},{kind:Vn.Translate,x:-r.x,y:-r.y}],a=t/$r.castleInteriorImage.width,s=(()=>{const e=me.tutorial.tall_instructions_box,t=500*a,r=t*(e.naturalHeight/e.naturalWidth);return{topLeft:{x:50*a,y:Math.max(-.26*r,n-600*a)},dimensions:{width:t,height:r}}})(),l=me.tutorial.tall_instructions_box,c=s,u={kind:jn.Image,source:l,dx:c.topLeft.x,dy:c.topLeft.y,dw:c.dimensions.width,dh:c.dimensions.height};if(this.getCurrentLevelBattleAnimationData().didHeroDefeatAllEnemiesButForgetToMoveToStairs){const t=$c(this.state.screen.level);if("NoEnemies"===t)return Kn;const n=Vr[e][t];return{kind:jn.Group,transform:i,children:[u,this.renderTextAndIconsAroundCenter(n,Yc(c),{width:Go*c.dimensions.width,height:Jo*c.dimensions.height})]}}return Kn}getTutorialBlockEditorConfig(){const e={...io.colors,unreachableBlocks:this.getLevel9DragStatus().needsHealthBlockDrag?{...no.colors.unreachableBlocks,[vr.Health]:(t=no.colors.unreachableBlocks[vr.Health],n=e=>function(e,t){const n=e.a/255,r=t.a/255,o=n+r*(1-n),i={r:(e.r*n+t.r*r*(1-n))/o,g:(e.g*n+t.g*r*(1-n))/o,b:(e.b*n+t.b*r*(1-n))/o,a:255*o};return{r:Nc(i.r),g:Nc(i.g),b:Nc(i.b),a:Nc(i.a)}}({...e,a:192},no.colors.blockLiteralBackground),{primary:n(t.primary),secondary:n(t.secondary),tertiary:n(t.tertiary)})}:io.colors.unreachableBlocks};var t,n,r;return{...this.getMainBlockEditorConfig(),componentInstanceUid:this.tutorialBlockEditorComponentInstanceUid,colors:e,blockDefs:(r=this.state.language,uc(r))}}getTutorialBlockEditorState(){const{screen:e}=this.state;if(e.level===Sr.Level1)return this.getTutorialBlockEditorStateAssumingLevel1();if(e.level===Sr.Level9)return this.getTutorialBlockEditorStateAssumingLevel9();return{palette:{blockKinds:[],scroll:{x:0,y:0},scrollInProgress:null},uiTouch:null,literalEditor:null,dropdownMenu:null,canvas:{items:[],scroll:{x:0,y:0},scrollInProgress:null},cursor:"default"}}getTutorialBlockEditorStateAssumingLevel1(){const{appHeight:e,screen:t,hasFailedLevelOneAtLeastOnce:n}=this.state,{canvas:r}=t.blockEditor,o=r.items.find((e=>e.content.length>0&&e.content[0].kind===vr.WhenBattleStarts));if(!(o.content.length<=2)||n)return{palette:{blockKinds:[],scroll:{x:0,y:0},scrollInProgress:null},uiTouch:null,literalEditor:null,dropdownMenu:null,canvas:{items:[],scroll:{x:0,y:0},scrollInProgress:null},cursor:"default"};const i=me.tutorial.finger.naturalHeight/me.tutorial.finger.naturalWidth*60,a=fn({config:this.getMainBlockEditorConfig(),state:this.state.screen.blockEditor,measureText:this.measureSvgText,setState:kc}).find((e=>e.block.kind===vr.MoveForward)).rbox,s=mc(t.currentTimestamp,Pc(t.animationStartTime,t.mostRecentTutorialBlockEditorUpdateTime))%Lo.totalDurationInSeconds,l=Lo.insertionMarkTimeInSeconds<s&&s<Lo.blockReleaseTimeInSeconds,c=s<Lo.blockReleaseTimeInSeconds,u={x:0,y:e},[d,h]=[He(Yc(a),{x:-6,y:-.2*i}),1===o.content.length?Lo.firstDragEnd:Lo.secondDragEnd],f={x:0,y:0},p=Ue(a.topLeft,u),m=He(p,Ue(h,d)),g=He(p,je(Ue(m,p),Math.min(1,s/Lo.movingPhaseDurationInSeconds))),v={position:u,content:[{isLiteral:!1,kind:vr.MoveForward,args:{expressions:[{isLiteral:!0,source:""},{isLiteral:!0,source:""}],dropdowns:[],sequences:[]}}]},b={position:o.position,content:o.content.slice(0,1)},y={...b,content:b.content.concat([{isLiteral:!1,kind:vr.MoveForward,args:{expressions:[],dropdowns:[],sequences:[]}}])},k={...b,content:b.content.concat([{isLiteral:!1,kind:vr.MoveForward,args:{expressions:[],dropdowns:[],sequences:[]}},{isLiteral:!1,kind:vr.MoveForward,args:{expressions:[],dropdowns:[],sequences:[]}}])},w={kind:nt.BlockDrag,hasPositionChangedSinceDragStart:!0,draggeeOriginalAddress:[ot,0,0],insertionMarkAddress:1===o.content.length&&l?[ot,1,1]:2===o.content.length&&l?[ot,1,2]:null,startClientPosition:f,currentClientPosition:He(f,g)};return{palette:{blockKinds:[],scroll:{x:0,y:0},scrollInProgress:null},uiTouch:c?w:null,literalEditor:null,dropdownMenu:null,canvas:{items:c&&1===o.content.length?[v,b]:c||1!==o.content.length?c&&2===o.content.length?[v,y]:c||2!==o.content.length?[]:[v,k]:[v,y],scroll:{x:0,y:0},scrollInProgress:null},cursor:"default"}}getTutorialBlockEditorStateAssumingLevel9(){const e={palette:{blockKinds:[],scroll:{x:0,y:0},scrollInProgress:null},uiTouch:null,literalEditor:null,dropdownMenu:null,canvas:{items:[],scroll:{x:0,y:0},scrollInProgress:null},cursor:"default"},{appHeight:t,appWidth:n,screen:r}=this.state,o=me.tutorial.finger.naturalHeight/me.tutorial.finger.naturalWidth*60,i={config:this.getMainBlockEditorConfig(),state:this.state.screen.blockEditor,measureText:this.measureSvgText,setState:kc},a=fn(i),s=a.find((e=>e.block.kind===vr.LessThan)).rbox,l=a.find((e=>e.block.kind===vr.Health)).rbox,{canvas:c}=r.blockEditor,u=null===c.scrollInProgress?c.scroll:{x:c.scroll.x+c.scrollInProgress.currentClientPosition.x-c.scrollInProgress.startClientPosition.x,y:c.scroll.y+c.scrollInProgress.currentClientPosition.y-c.scrollInProgress.startClientPosition.y},d=(()=>{function e(e){const r=He(u,e.rbox.topLeft),o=r.x,i=r.y,a=o+e.rbox.dimensions.width,s=i+e.rbox.dimensions.height,l=0<=o&&a<=n&&0<=i&&s<=t,c=e.block.args.expressions.every((e=>e.isLiteral&&""===e.source));return l&&e.block.kind===vr.LessThan&&c}const r=un(i);for(const t of r){const n=jc(t,e);if(null!==n)return n}return null})(),{needsLessThanBlockDrag:h,needsHealthBlockDrag:f}=this.getLevel9DragStatus();if(!h&&!f)return e;const p=mc(r.currentTimestamp,Pc(r.animationStartTime,r.mostRecentTutorialBlockEditorUpdateTime))%Eo.paletteToCanvasDrag.totalDurationInSeconds,m=Eo.paletteToCanvasDrag.healthBlockIntoLessThanBlockInsertionMarkTimeInSeconds<p&&p<Eo.paletteToCanvasDrag.blockReleaseTimeInSeconds,g=p<Eo.paletteToCanvasDrag.blockReleaseTimeInSeconds,v={x:0,y:t},[b,y]=h?[He(Yc(s),{x:-6,y:-.2*o}),Eo.paletteToCanvasDrag.lessThanBlockDragEnd]:[He(Yc(l),{x:-6,y:-.2*o}),He(u,{x:d.rbox.topLeft.x+$r.blockPadding+18,y:d.rbox.topLeft.y+.5*d.rbox.dimensions.height-.2*o})],k={x:0,y:0},w=Ue((h?s:l).topLeft,v),x=He(w,Ue(y,b)),S=He(w,je(Ue(x,w),Math.min(1,p/Lo.movingPhaseDurationInSeconds))),L={position:v,content:[{isLiteral:!1,kind:vr.LessThan,args:{expressions:[{isLiteral:!0,source:""},{isLiteral:!0,source:""}],dropdowns:[],sequences:[]}}]},E={position:v,content:[{isLiteral:!1,kind:vr.Health,args:{expressions:[],dropdowns:[],sequences:[]}}]},C=null===d?null:{position:He(d.rbox.topLeft,u),content:[{isLiteral:!1,kind:vr.LessThan,args:{expressions:[{isLiteral:!0,source:""},{isLiteral:!0,source:""}],dropdowns:[],sequences:[]}}]},T={position:He(L.position,x),content:L.content},B=null===d||null===C?null:{position:C.position,content:[{isLiteral:!1,kind:vr.LessThan,args:{expressions:[{isLiteral:!1,kind:vr.Health,args:{expressions:[],dropdowns:[],sequences:[]}},d.block.args.expressions[1]],dropdowns:[],sequences:[]}}]},A={kind:nt.BlockDrag,hasPositionChangedSinceDragStart:!0,draggeeOriginalAddress:[ot,0,0],insertionMarkAddress:f&&m?[ot,1,0,lt,0]:null,startClientPosition:k,currentClientPosition:He(k,S)};return{palette:{blockKinds:[],scroll:{x:0,y:0},scrollInProgress:null},uiTouch:g?A:null,literalEditor:null,dropdownMenu:null,canvas:{items:g&&h?[L]:!g&&h?[L,T]:g&&f?[E,C]:!g&&f?[E,B]:[],scroll:{x:0,y:0},scrollInProgress:null},cursor:"default"}}getMinimapBlockEditorConfig(){const{appHeight:e}=this.state,t=this.state.safeAreaInsets.insets,n=this.getMainBlockEditorConfig();return{...n,blockDefs:{...n.blockDefs,...ei(n.blockDefs,_c)},componentInstanceUid:this.minimapBlockEditorComponentInstanceUid,colors:ao.colors,sizing:{...ao.sizingWithoutWindowDependentProperties,editorBounds:{topLeft:{x:0,y:0},dimensions:{width:this.state.appWidth,height:e}},paletteBounds:{topLeft:{x:0,y:0},dimensions:{width:0,height:e}},canvasBounds:{topLeft:{x:0,y:0},dimensions:{width:this.state.appWidth,height:e}},blockDropdownMenuDimensions:{width:.5*(this.state.appWidth-$r.paletteWidth),height:.5*e},dividers:[],paletteLeftPadding:t.left+$r.minPalettePadding,paletteRightPadding:$r.minPalettePadding,paletteTopPadding:t.top+$r.minPalettePadding,paletteBottomPadding:t.bottom+$r.minPalettePadding}}}getMinimapBlockEditorState(){var e;const{screen:t}=this.state,n=mc(t.currentTimestamp,t.animationStartTime),r=this.getCurrentLevelBattleEvents(),o=t.animationKind===xr.PlayBattle?t.battleAnimationOffsetSeconds+n:t.animationKind===xr.PauseBattle?t.battleAnimationOffsetSeconds:0,i=null!==(e=tc(rc(t.level),r,o).executedBlockAddress)&&void 0!==e?e:[ot,0,0],{blockEditor:a}=this.state.screen,s={x:20,y:20},l=a.canvas.items.filter((e=>e.content.length>=1&&e.content[0].kind===vr.WhenBattleStarts)).map((e=>({content:Dc(i.slice(2),e.content,[]),position:s})))[0];if(void 0===l)throw new Error("Impossible: Called getMinimapBlockEditorState when there was no active canvas item.");const c={...a,palette:{blockKinds:[],scroll:{x:0,y:0},scrollInProgress:null},uiTouch:null,canvas:{items:[l],scroll:{x:0,y:0},scrollInProgress:null}},u=zt({editorProps:{config:this.getMinimapBlockEditorConfig(),state:c,measureText:this.measureSvgText,setState:kc},position:s,sequence:l.content,address:[],insertionMark:null,draggeeOriginalAddress:null,hasDragPositionChangedSinceDragStart:!1,dropdownMenuDropdownAddress:null,isUnreachable:!1}),d=zc(i.slice(2),u);if(null===d)return c;const{appHeight:h}=this.state;return{...c,canvas:{...c.canvas,scroll:{x:c.canvas.scroll.x,y:-(d.topLeft.y+.5*d.dimensions.height)+.5*h}}}}renderMinimapHoleCanvasElement(){const{screen:e}=this.state,t=mc(e.currentTimestamp,e.animationStartTime);if(0===(e.animationKind===xr.PlayBattle?e.battleAnimationOffsetSeconds+t:e.animationKind===xr.PauseBattle?e.battleAnimationOffsetSeconds:0))return Kn;const n=this.getMinimapBBox();return{kind:jn.Clear,x:n.topLeft.x,y:n.topLeft.y,w:n.dimensions.width,h:n.dimensions.height}}getMinimapBBox(){const{appWidth:e,appHeight:t}=this.state,n=400*(e/$r.castleInteriorImage.width);return{topLeft:{x:20,y:20},dimensions:{width:n,height:t/e*n}}}dualRenderAssumingPortraitOrientation(){const e=Kl(this.state.language,gr.PleaseSwitchToLandscape),t=e.includes(Pr)?e.replace(Pr,"").split(Ir).map(((e,t)=>(0,Ze.jsx)("span",{className:"ManualBreak__Segment",children:e},t))):e;return{reactElement:(0,Ze.jsx)("div",{className:"App",children:(0,Ze.jsx)("div",{className:"PleaseSwitchToLandscapeRequestContainer",children:(0,Ze.jsx)("p",{className:"PleaseSwitchToLandscapeRequest",children:t})})}),canvasElement:Kn}}updateCanvas(){const{devicePixelRatio:e}=window,{frontCanvasCtx:t}=this,{appWidth:n,appHeight:r}=this.state;t.canvas.width=e*n,t.canvas.height=e*r,t.resetTransform(),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.scale(e,e);const{canvasElement:o}=this.dualRender();null!==o&&Gn(o,t)}onResize(){tr().then((e=>{this.setState({appWidth:window.innerWidth,appHeight:window.innerHeight,orientationType:ru(),safeAreaInsets:e})}))}onDocumentVisibilityChange(){Zn.Ii.isNativePlatform()||("hidden"===document.visibilityState&&(this.onAppDeactivated(),this.logEventIfMounted({kind:Cl.AppActiveStatusChanged,statusChangeKind:"Deactivated_Web",timestampDateDotNow:Date.now()})),"visible"===document.visibilityState&&(this.onAppReactivated(),this.logEventIfMounted({kind:Cl.AppActiveStatusChanged,statusChangeKind:"Activated_Web",timestampDateDotNow:Date.now()})))}onCapacitorAppStateChange(e){Zn.Ii.isNativePlatform()&&(e.isActive?(this.onAppReactivated(),this.logEventIfMounted({kind:Cl.AppActiveStatusChanged,statusChangeKind:"Activated_Native",timestampDateDotNow:Date.now()})):(this.onAppDeactivated(),this.logEventIfMounted({kind:Cl.AppActiveStatusChanged,statusChangeKind:"Deactivated_Native",timestampDateDotNow:Date.now()})))}onAppReactivated(){this.audioManager.resume()}onAppDeactivated(){this.state.screen.animationKind===xr.PlayBattle&&this.pauseBattle()}onWindowTouchStart(e){e.target!==this.blockLiteralEditorInput&&e.preventDefault(),1===e.touches.length?this.onOnlyPointerDown({x:e.touches[0].clientX,y:e.touches[0].clientY}):this.setState({onlyTouchStartButton:null,onlyTouchDepressedButton:null})}onWindowMouseDown(e){this.onOnlyPointerDown({x:e.clientX,y:e.clientY})}onOnlyPointerDown(e){const t=wc(e,this.state,this.getButtonClickDetectorResources());this.setState({onlyTouchStartButton:t,onlyTouchDepressedButton:t})}onWindowTouchMove(e){if(1!==e.touches.length)return void this.setState({onlyTouchStartButton:null,onlyTouchDepressedButton:null});const t=wc({x:e.touches[0].clientX,y:e.touches[0].clientY},this.state,this.getButtonClickDetectorResources()),n=t===this.state.onlyTouchStartButton?t:null;this.setState({onlyTouchDepressedButton:n})}onWindowMouseMove(e){this.setState({mouseClientPosition:{x:e.clientX,y:e.clientY}}),this.onOnlyPointerMove({x:e.clientX,y:e.clientY})}onOnlyPointerMove(e){const t=wc(e,this.state,this.getButtonClickDetectorResources()),n=t===this.state.onlyTouchStartButton?t:null;this.setState({onlyTouchDepressedButton:n})}onWindowTouchEnd(e){0===e.touches.length&&1===e.changedTouches.length?this.onOnlyPointerUp({x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}):this.setState({onlyTouchStartButton:null,onlyTouchDepressedButton:null})}onWindowMouseUp(e){this.onOnlyPointerUp({x:e.clientX,y:e.clientY})}onOnlyPointerUp(e){const{onlyTouchStartButton:t}=this.state,n=wc(e,this.state,this.getButtonClickDetectorResources());if(n===t&&null!==n){switch(this.setState({onlyTouchStartButton:null,onlyTouchDepressedButton:null}),n){case Jr.HomeScreenStart:case Jr.Settings:case Jr.NextLevel:case Jr.PuzzleScreenLeft:case Jr.PuzzleScreenMiddle:case Jr.PuzzleScreenRight:case Jr.Language:case Jr.Credits:case Jr.OpenConfirmResetToLevelOneScreen:case Jr.SettingsScreenClose:case Jr.ConfirmResetToLevelOne:case Jr.CancelResetToLevelOne:case Jr.ConfirmResetToLevelOneScreenClose:case Jr.InEditorMiniBattleScreen:this.audioManager.scheduleSounds([{kind:sr.ButtonPop,timeInSeconds:0}]);case Jr.SettingsScreenSecondaryClose:case Jr.CreditsScreenClose:}switch(n){case Jr.HomeScreenStart:this.onHomeScreenStartButtonClick();break;case Jr.Settings:this.onHomeScreenSettingsButtonClick();break;case Jr.NextLevel:this.onNextLevelButtonClick();break;case Jr.PuzzleScreenLeft:this.onPuzzleScreenLeftButtonClick();break;case Jr.PuzzleScreenMiddle:this.onPuzzleScreenMiddleButtonClick();break;case Jr.PuzzleScreenRight:this.onPuzzleScreenRightButtonClick();break;case Jr.Language:this.onLanguageButtonClick();break;case Jr.Credits:this.onCreditsButtonClick();break;case Jr.OpenConfirmResetToLevelOneScreen:this.onOpenConfirmResetToLevelOneScreenButtonClick();break;case Jr.SettingsScreenClose:this.onSettingsScreenCloseButtonClick();break;case Jr.SettingsScreenSecondaryClose:this.onSettingsScreenSecondaryCloseButtonClick();break;case Jr.ConfirmResetToLevelOneScreenClose:this.onConfirmResetToLevelOneCloseButtonClick();break;case Jr.CreditsScreenClose:this.onCreditsScreenCloseButtonClick();break;case Jr.ConfirmResetToLevelOne:this.onConfirmResetToLevelOneButtonClick();break;case Jr.CancelResetToLevelOne:this.onCancelResetToLevelOneButtonClick();break;case Jr.InEditorMiniBattleScreen:this.onInEditorMiniBattleScreenClick()}}else this.setState({onlyTouchStartButton:null,onlyTouchDepressedButton:null})}onEditBlocksButtonClick(){const{screen:e}=this.state;if(this.audioManager.cancel(this.battleSoundsId),dr(),![xr.PlayBattle,xr.PauseBattle].includes(e.animationKind))return;const t=Gl(),n=()=>{const e=this.state;if(e.screen.animationKind!==xr.ViewToEdit||!Jl(e.screen.animationStartTime,t))return;const r=Gl();mc(r,e.screen.animationStartTime)>bo?this.setState({...e,screen:{blockEditor:{...e.screen.blockEditor,literalEditor:null},level:e.screen.level,animationKind:xr.Edit,animationStartTime:r,currentTimestamp:r,battleAnimationOffsetSeconds:0,prevLevelBlockEditor:yc(),mostRecentTutorialBlockEditorUpdateTime:this.state.screen.mostRecentTutorialBlockEditorUpdateTime}},this.getEditScreenAnimationUpdaterIfOnTutorialLevel(r)):(this.setState({...e,screen:{...e.screen,currentTimestamp:r}}),requestAnimationFrame(n))};this.setState({screen:{blockEditor:e.blockEditor,level:e.level,animationKind:xr.ViewToEdit,animationStartTime:t,currentTimestamp:Gl(),battleAnimationOffsetSeconds:0,prevLevelBlockEditor:yc(),mostRecentTutorialBlockEditorUpdateTime:this.state.screen.mostRecentTutorialBlockEditorUpdateTime}},n),this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"Edit",timestampDateDotNow:Date.now()})}onViewMapButtonClick(){this.startEditToViewAnimation(),this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"ViewMap",timestampDateDotNow:Date.now()})}onInEditorMiniBattleScreenClick(){this.startEditToViewAnimation(),this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"InEditorMiniBattleScreen",timestampDateDotNow:Date.now()})}startEditToViewAnimation(){const{screen:e}=this.state;if(e.animationKind!==xr.Edit)return;const t=Gl();this.setState({screen:{blockEditor:e.blockEditor,level:e.level,animationKind:xr.EditToView,animationStartTime:t,currentTimestamp:Gl(),battleAnimationOffsetSeconds:0,prevLevelBlockEditor:yc(),mostRecentTutorialBlockEditorUpdateTime:this.state.screen.mostRecentTutorialBlockEditorUpdateTime}},this.getViewScreenEnterAnimationUpdater(t,xr.EditToView))}onResumeBattleButtonClick(){const{screen:e}=this.state;if(e.animationKind!==xr.PauseBattle)throw new Error("The Resume Battle button was clicked when screen.animationKind was "+e.animationKind);{const e=this.getCurrentLevelBattleAnimationData();if(e.didHeroSurviveLevelButFailToReachStairs||e.battleStatus===Kr.Victory||e.battleStatus===Kr.Defeat)return}this.battleSoundsId=this.audioManager.scheduleSounds(this.getBattleSoundsForCurrentLevel()),ur.allowSleep().catch(hr);const t=Gl(),n=()=>{const r=this.state;if(r.screen.animationKind!==xr.PlayBattle||!Jl(r.screen.animationStartTime,t))return;const o=this.getCurrentLevelBattleAnimationData();if(o.didHeroSurviveLevelButFailToReachStairs){const t=Gl(),n=mc(t,e.animationStartTime),o=e.battleAnimationOffsetSeconds+n;this.setState({...r,screen:{...r.screen,animationKind:xr.PauseBattle,animationStartTime:t,currentTimestamp:t,battleAnimationOffsetSeconds:o},hasFailedLevelOneAtLeastOnce:r.screen.level===Sr.Level1||r.hasFailedLevelOneAtLeastOnce},this.getPauseScreenAnimationUpdater(t))}else o.battleStatus===Kr.Victory&&this.audioManager.cancel(this.puzzleMusicId),o.battleStatus!==Kr.Victory||this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption||(this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption=!0,this.logEventIfMounted({kind:Cl.LevelCompleted,completedLevel:e.level,canvasItems:e.blockEditor.canvas.items,timestampDateDotNow:Date.now()}),dr()),o.battleStatus!==Kr.Defeat&&!o.didHeroSurviveLevelButFailToReachStairs||this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption||(this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption=!0,this.logEventIfMounted({kind:Cl.LevelFailed,failedLevel:e.level,didHeroSurvive:o.levelState.squares.some((e=>e.kind===wr.Hero&&e.health>0)),canvasItems:e.blockEditor.canvas.items,timestampDateDotNow:Date.now()}),dr()),this.setState({...r,screen:{...r.screen,currentTimestamp:Gl()}}),requestAnimationFrame(n)};this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption=!1,this.setState({screen:{blockEditor:e.blockEditor,level:e.level,animationKind:xr.PlayBattle,animationStartTime:t,currentTimestamp:Gl(),battleAnimationOffsetSeconds:e.battleAnimationOffsetSeconds,prevLevelBlockEditor:yc(),mostRecentTutorialBlockEditorUpdateTime:this.state.screen.mostRecentTutorialBlockEditorUpdateTime}},n),this.logEventsIfMounted([{kind:Cl.ButtonPressed,buttonKind:"ResumeBattle",timestampDateDotNow:Date.now()},{kind:Cl.BattleResumed,battleAnimationOffsetSeconds:e.battleAnimationOffsetSeconds,canvasItems:e.blockEditor.canvas.items,timestampDateDotNow:Date.now()}])}onPauseBattleButtonClick(){this.pauseBattle(),this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"PauseBattle",timestampDateDotNow:Date.now()})}pauseBattle(){const{screen:e}=this.state;this.audioManager.cancel(this.battleSoundsId),dr();const t=Gl(),n=mc(t,e.animationStartTime),r=e.battleAnimationOffsetSeconds+n;this.setState({screen:{...e,animationKind:xr.PauseBattle,animationStartTime:t,currentTimestamp:t,battleAnimationOffsetSeconds:r}},this.getPauseScreenAnimationUpdater(t)),this.logEventIfMounted({kind:Cl.BattlePaused,battleAnimationOffsetSeconds:r,canvasItems:e.blockEditor.canvas.items,timestampDateDotNow:Date.now()})}onNextLevelButtonClick(){const e=function(e){if(e<Lr)return e+1;return null}(this.state.screen.level);if(null===e)throw new Error("There is no next level.");const t=Gl(),n=()=>{const e=this.state;if(e.screen.animationKind!==xr.NextLevel||!Jl(e.screen.animationStartTime,t))return;const r=Gl();if(mc(r,e.screen.animationStartTime)>.2)return this.playPuzzleMusic(),void this.setState({...e,screen:{...e.screen,animationKind:xr.PauseBattle,animationStartTime:r,currentTimestamp:r,battleAnimationOffsetSeconds:0}},this.getPauseScreenAnimationUpdater(r));this.setState({...e,screen:{...e.screen,currentTimestamp:r}}),requestAnimationFrame(n),this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"NextLevel",timestampDateDotNow:Date.now()})};this.setState({screen:{blockEditor:ac(e),level:e,animationKind:xr.NextLevel,animationStartTime:t,currentTimestamp:t,battleAnimationOffsetSeconds:0,prevLevelBlockEditor:this.state.screen.blockEditor,mostRecentTutorialBlockEditorUpdateTime:this.state.screen.mostRecentTutorialBlockEditorUpdateTime}},n)}onPuzzleScreenLeftButtonClick(){const{screen:e}=this.state;[xr.PlayBattle,xr.PauseBattle].includes(e.animationKind)&&!gc(e,this.getCurrentLevelBattleEvents)&&this.onEditBlocksButtonClick()}onPuzzleScreenMiddleButtonClick(){const{screen:e,hasFailedLevelOneAtLeastOnce:t}=this.state,n=gc(e,this.getCurrentLevelBattleEvents)||vc(e,this.getCurrentLevelBattleEvents);if(e.animationKind===xr.PlayBattle&&!n)return void this.onPauseBattleButtonClick();const r=e.blockEditor.canvas.items,o=e.level===Sr.Level1&&!t&&r[0].content.length<3;e.animationKind!==xr.PauseBattle||!Ec(e)||o?e.animationKind!==xr.Edit||this.onViewMapButtonClick():this.onResumeBattleButtonClick()}onPuzzleScreenRightButtonClick(){this.onReturnHomeButtonClick()}onLanguageButtonClick(){var e;const t=null!==(e={[mr.English]:mr.Japanese,[mr.Japanese]:mr.JapaneseHiragana,[mr.JapaneseHiragana]:mr.English}[this.state.language])&&void 0!==e?e:So;this.setState({language:t}),this.logEventsIfMounted([{kind:Cl.ButtonPressed,buttonKind:"ChangeLanguage",timestampDateDotNow:Date.now()},{kind:Cl.LanguageChanged,newLanguage:t,timestampDateDotNow:Date.now()}])}onCreditsButtonClick(){const e=Gl(),t=()=>{const n=this.state;if(n.screen.animationKind!==xr.Credits||!Jl(n.screen.animationStartTime,e))return;const r=Gl();mc(r,n.screen.animationStartTime)>this.getCreditRollDurationInSeconds()?this.setState({...n,screen:{...n.screen,animationKind:xr.StaticSettings}}):(this.setState({...n,screen:{...n.screen,currentTimestamp:r}}),requestAnimationFrame(t))};this.setState({screen:{...this.state.screen,animationKind:xr.Credits,animationStartTime:e,currentTimestamp:e}},t),this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"OpenCredits",timestampDateDotNow:Date.now()})}onOpenConfirmResetToLevelOneScreenButtonClick(){const e=Gl();this.setState((t=>({...t,screen:{...t.screen,animationKind:xr.StaticConfirmResetToLevelOne,animationStartTime:e,currentTimestamp:e}}))),this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"OpenConfirmResetToLevelOneScreen",timestampDateDotNow:Date.now()})}onSettingsScreenCloseButtonClick(){this.closeSettingsScreen(),this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"CloseSettingsWithPrimaryButton",timestampDateDotNow:Date.now()})}onSettingsScreenSecondaryCloseButtonClick(){this.closeSettingsScreen(),this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"CloseSettingsWithSecondaryButton",timestampDateDotNow:Date.now()})}onConfirmResetToLevelOneCloseButtonClick(){this.closeSettingsScreen(),this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"CloseConfirmResetToLevelOneScreen",timestampDateDotNow:Date.now()})}closeSettingsScreen(){const e=Gl(),t=()=>{const n=this.state;if(n.screen.animationKind!==xr.CloseSettings||!Jl(n.screen.animationStartTime,e))return;const r=Gl();mc(r,n.screen.animationStartTime)>bo?this.setState({...n,screen:{...n.screen,animationKind:xr.StaticHome}}):(this.setState({...n,screen:{...n.screen,currentTimestamp:r}}),requestAnimationFrame(t))},{screen:n}=this.state;this.setState({screen:{blockEditor:n.blockEditor,level:n.level,animationKind:xr.CloseSettings,animationStartTime:e,currentTimestamp:e,battleAnimationOffsetSeconds:0,prevLevelBlockEditor:yc(),mostRecentTutorialBlockEditorUpdateTime:this.state.screen.mostRecentTutorialBlockEditorUpdateTime}},t)}onCreditsScreenCloseButtonClick(){const e=Gl();this.setState({screen:{...this.state.screen,animationKind:xr.StaticSettings,animationStartTime:e,currentTimestamp:e}}),this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"CloseCredits",timestampDateDotNow:Date.now()})}onConfirmResetToLevelOneButtonClick(){this.setState({screen:{...this.state.screen,blockEditor:ac(Sr.Level1),level:Sr.Level1},hasFailedLevelOneAtLeastOnce:!1},this.startLoadingBarProgressAnimation),this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"ConfirmResetToLevelOne",timestampDateDotNow:Date.now()})}onCancelResetToLevelOneButtonClick(){const e=Gl();this.setState((t=>({...t,screen:{...t.screen,animationKind:xr.StaticSettings,animationStartTime:e,currentTimestamp:e}}))),this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"CancelResetToLevelOne",timestampDateDotNow:Date.now()})}onLiteralEditorFormSubmit(e){e.preventDefault(),this.closeLiteralEditor()}onLiteralEditorInputChange(){const e=this.blockLiteralEditorInput.value;this.setState((t=>{const{screen:n}=t;if(null===n.blockEditor.literalEditor)return t;const r={...n.blockEditor.literalEditor,literalSource:e};return{...t,screen:{...n,blockEditor:{...n.blockEditor,canvas:bt(n.blockEditor.canvas,r),literalEditor:r}}}}),(()=>this.setBlockEditorState(_c)))}onCloseLiteralEditorButtonClick(){this.closeLiteralEditor()}closeLiteralEditor(){this.setState((e=>{const{screen:t}=e;return null===t.blockEditor.literalEditor?e:{...e,screen:{...t,blockEditor:{...t.blockEditor,canvas:bt(t.blockEditor.canvas,t.blockEditor.literalEditor),literalEditor:null}}}}))}measureSvgText(e,t,n){const r=function(e,t,n){if(e.includes(Fo))throw new Error("Text cannot include SVG_TEXT_DIMENSION_CACHE_KEY_SEPARATOR. Text: "+JSON.stringify(e));return"".concat(n," ").concat(e).concat(Fo).concat(t)}(e,t,n),o=zo.get(r);if(void 0!==o)return o;const i=this.measureSvgTextIgnoringCache(e,t,n);return zo.set(r,i),i}measureSvgTextIgnoringCache(e,t,n){const{ghostSvg:r}=this,{appWidth:o,appHeight:i}=this.state,a=r.getBoundingClientRect();a.width===o&&a.height===i||(r.setAttribute("width",String(this.state.appWidth)),r.setAttribute("height",String(this.state.appHeight)));const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.textContent=e,s.style.fontFamily=t,s.style.fontSize=n+"px",r.appendChild(s);const l=s.getBBox();return r.removeChild(s),l}measureCanvasText(e){let{text:t,...n}=e;const{tempCanvasCtx:r}=this;Jn(n,r);const o=r.measureText(t);return{width:o.width,height:o.actualBoundingBoxAscent+o.actualBoundingBoxDescent}}getMainBlockEditorConfig(){const{appHeight:e}=this.state,t=this.state.safeAreaInsets.insets;return{componentInstanceUid:this.mainBlockEditorComponentInstanceUid,sizing:{...no.sizingWithoutWindowDependentProperties,editorBounds:{topLeft:{x:0,y:0},dimensions:{width:this.state.appWidth,height:e}},paletteBounds:{topLeft:{x:0,y:0},dimensions:{width:$r.paletteWidth,height:e}},canvasBounds:{topLeft:{x:$r.paletteWidth,y:0},dimensions:{width:this.state.appWidth-$r.paletteWidth,height:e}},blockDropdownMenuDimensions:{width:.5*(this.state.appWidth-$r.paletteWidth),height:.5*e},dividers:[{topLeft:{x:$r.paletteWidth,y:0},dimensions:{width:1,height:e}}],paletteLeftPadding:t.left+$r.minPalettePadding,paletteRightPadding:$r.minPalettePadding,paletteTopPadding:t.top+$r.minPalettePadding,paletteBottomPadding:t.bottom+$r.minPalettePadding},colors:no.colors,fonts:no.fonts,blockDefs:Hc(uc(this.state.language),this.state.screen.level),dropdownTexts:(n=this.state.language,co[n])};var n}setBlockEditorState(e,t){let n=null,r=!1,o=!1;this.setState((t=>{const i=t.screen.blockEditor;if(n=e(i),i!==n&&(this.lastBlockEditorSetStateCallTime=Gl()),t.screen.level===Sr.Level1){const e=null!==n.uiTouch&&n.uiTouch.kind===nt.BlockDrag&&n.uiTouch.draggeeOriginalAddress[0]===ot&&0===n.uiTouch.draggeeOriginalAddress[1]&&0===n.uiTouch.draggeeOriginalAddress[2],r=null!==n.canvas.scrollInProgress;(e||r)&&(n=t.screen.blockEditor),n={...n,canvas:{...n.canvas,items:n.canvas.items.filter((e=>e.content.length>=1&&e.content[0].kind===vr.WhenBattleStarts))}}}const a=n.canvas.items.some((e=>Uc(e.content)));t.screen.level!==Sr.Level9||a||(n={...n,canvas:{...n.canvas,scroll:i.canvas.scroll,scrollInProgress:null}});const s=t.screen.level===Sr.Level1&&Ic([null!==i.uiTouch&&null===n.uiTouch,null!==i.palette.scrollInProgress&&null===n.palette.scrollInProgress,null!==i.canvas.scrollInProgress&&null===n.canvas.scroll,1===i.canvas.items.length&&1===n.canvas.items.length&&n.canvas.items[0].content.length!==i.canvas.items[0].content.length]),l=t.screen.level===Sr.Level9&&Ic([null!==i.uiTouch&&null===n.uiTouch,null!==i.palette.scrollInProgress&&null===n.palette.scrollInProgress,null!==i.canvas.scrollInProgress&&null===n.canvas.scroll,null!==i.literalEditor&&null===n.literalEditor,i.canvas.items.length!==n.canvas.items.length,i.canvas.items.length===n.canvas.items.length&&i.canvas.items.some(((e,t)=>{const r=n.canvas.items[t];return e.content.length!==r.content.length}))]),c=s||l;return o=o||function(e,t){if(null===e.uiTouch||e.uiTouch.kind!==nt.BlockDrag||null!==t.uiTouch)return!1;const n=e.canvas.items,r=t.canvas.items,o=Jc(n.map((e=>tu(e.content)))),i=Jc(r.map((e=>tu(e.content))));if(e.uiTouch.draggeeOriginalAddress[0]===it)return!(r.length>n.length)&&i!==o;if(r.length>n.length)return!1;if(i<o)return!1;const a=3===e.uiTouch.draggeeOriginalAddress.length&&e.uiTouch.draggeeOriginalAddress[0]===ot&&0===e.uiTouch.draggeeOriginalAddress[2]&&r.length===n.length;if(a)return!1;return!0}(i,n),r=!(i.canvas.items.length===n.canvas.items.length&&i.canvas.items.every(((e,t)=>function(e,t){return n=e.position,r=t.position,n.x===r.x&&n.y===r.y&&au(e.content,t.content);var n,r}(e,n.canvas.items[t])))),{screen:{...t.screen,blockEditor:n,mostRecentTutorialBlockEditorUpdateTime:c?Gl():t.screen.mostRecentTutorialBlockEditorUpdateTime}}}),(()=>{if(null===n)throw new Error("Expected newBlockEditorState to be set by the time ReactComponent.prototype.setState callback was called.");o&&this.audioManager.scheduleSounds([{kind:sr.BlockPop,timeInSeconds:0,gain:.2}]),r&&this.logEventIfMounted({kind:Cl.BlockEditorCanvasItemsUpdated,canvasItems:n.canvas.items,timestampDateDotNow:Date.now()}),void 0!==t&&t(n)}))}onHomeScreenStartButtonClick(){this.audioManager.cancel(this.homeMusicId),this.playPuzzleMusic();const e=Gl(),{screen:t}=this.state;this.setState({screen:{blockEditor:t.blockEditor,level:t.level,animationKind:xr.HomeToView,animationStartTime:e,currentTimestamp:e,battleAnimationOffsetSeconds:0,prevLevelBlockEditor:yc(),mostRecentTutorialBlockEditorUpdateTime:this.state.screen.mostRecentTutorialBlockEditorUpdateTime}},this.getViewScreenEnterAnimationUpdater(e,xr.HomeToView)),this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"HomeScreenStart",timestampDateDotNow:Date.now()})}playPuzzleMusic(){this.audioManager.cancel(this.puzzleMusicId),this.puzzleMusicId=this.audioManager.scheduleSounds([qo])}onHomeScreenSettingsButtonClick(){const e=Gl(),t=()=>{const n=this.state;if(n.screen.animationKind!==xr.OpenSettings||!Jl(n.screen.animationStartTime,e))return;const r=Gl();mc(r,n.screen.animationStartTime)>bo?this.setState({...n,screen:{...n.screen,animationKind:xr.StaticSettings}}):(this.setState({...n,screen:{...n.screen,currentTimestamp:r}}),requestAnimationFrame(t))},{screen:n}=this.state;this.setState({screen:{blockEditor:n.blockEditor,level:n.level,animationKind:xr.OpenSettings,animationStartTime:e,currentTimestamp:e,battleAnimationOffsetSeconds:0,prevLevelBlockEditor:yc(),mostRecentTutorialBlockEditorUpdateTime:this.state.screen.mostRecentTutorialBlockEditorUpdateTime}},t),this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"OpenSettings",timestampDateDotNow:Date.now()})}onReturnHomeButtonClick(){const{screen:e}=this.state;return this.audioManager.cancel(this.battleSoundsId),this.audioManager.cancel(this.puzzleMusicId),dr(),this.playHomeMusic(),e.animationKind===xr.Edit?(this.startEditToHomeAnimation(),void this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"ReturnHome",timestampDateDotNow:Date.now()})):[xr.PlayBattle,xr.PauseBattle].includes(e.animationKind)?(this.startViewToHomeAnimation(),void this.logEventIfMounted({kind:Cl.ButtonPressed,buttonKind:"ReturnHome",timestampDateDotNow:Date.now()})):void 0}playHomeMusic(e){this.audioManager.cancel(this.homeMusicId),this.homeMusicId=this.audioManager.scheduleSounds([void 0===e?jo:{...jo,timeInSeconds:e}])}startEditToHomeAnimation(){const e=this.state.screen,t=Gl();this.setState({screen:{blockEditor:e.blockEditor,level:e.level,animationKind:xr.EditToHome,animationStartTime:t,currentTimestamp:t,battleAnimationOffsetSeconds:0,prevLevelBlockEditor:yc(),mostRecentTutorialBlockEditorUpdateTime:this.state.screen.mostRecentTutorialBlockEditorUpdateTime}},this.getHomeScreenEnterAnimationUpdater(t,xr.EditToHome,!1))}startViewToHomeAnimation(){const e=this.state.screen,t=Gl(),n=gc(e,this.getCurrentLevelBattleEvents)&&e.level<Lr;this.setState({screen:{blockEditor:e.blockEditor,level:e.level,animationKind:xr.ViewToHome,animationStartTime:t,currentTimestamp:t,battleAnimationOffsetSeconds:0,prevLevelBlockEditor:yc(),mostRecentTutorialBlockEditorUpdateTime:this.state.screen.mostRecentTutorialBlockEditorUpdateTime}},this.getHomeScreenEnterAnimationUpdater(t,xr.ViewToHome,n))}getHomeScreenEnterAnimationUpdater(e,t,n){const r=()=>{const o=this.state;if(o.screen.animationKind!==t||!Jl(o.screen.animationStartTime,e))return;const i=Gl();if(mc(i,o.screen.animationStartTime)>bo){const e=o.screen.level+1,t=n?{level:e,blockEditor:ac(e)}:{};this.setState({...o,screen:{...o.screen,...t,animationKind:xr.StaticHome}})}else this.setState({...o,screen:{...o.screen,currentTimestamp:i}}),requestAnimationFrame(r)};return r}getViewScreenEnterAnimationUpdater(e,t){const n=()=>{const r=this.state;if(r.screen.animationKind!==t||!Jl(r.screen.animationStartTime,e))return;const o=Gl();mc(o,r.screen.animationStartTime)>bo?this.setState({...r,screen:{...r.screen,animationKind:xr.PauseBattle,animationStartTime:o,currentTimestamp:o,battleAnimationOffsetSeconds:0}},this.getPauseScreenAnimationUpdater(o)):(this.setState({...r,screen:{...r.screen,currentTimestamp:o}}),requestAnimationFrame(n))};return n}getPauseScreenAnimationUpdater(e){const t=()=>{const n=this.state;if(n.screen.animationKind!==xr.PauseBattle||!Jl(n.screen.animationStartTime,e))return;const r=this.getCurrentLevelBattleAnimationData();r.battleStatus!==Kr.Victory||this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption||(this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption=!0,this.logEventIfMounted({kind:Cl.LevelCompleted,completedLevel:n.screen.level,canvasItems:n.screen.blockEditor.canvas.items,timestampDateDotNow:Date.now()})),r.battleStatus!==Kr.Defeat&&!r.didHeroSurviveLevelButFailToReachStairs||this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption||(this.hasRecordedLevelCompletionOrFailureSinceLastBattleResumption=!0,this.logEventIfMounted({kind:Cl.LevelFailed,failedLevel:n.screen.level,didHeroSurvive:r.levelState.squares.some((e=>e.kind===wr.Hero&&e.health>0)),canvasItems:n.screen.blockEditor.canvas.items,timestampDateDotNow:Date.now()}));const o=Gl();this.setState({...n,screen:{...n.screen,currentTimestamp:o}}),requestAnimationFrame(t)};return t}getEditScreenAnimationUpdaterIfOnTutorialLevel(e){if(![Sr.Level1,Sr.Level9].includes(this.state.screen.level))return kc;const t=()=>{const n=this.state;if(n.screen.animationKind===xr.Edit&&Jl(n.screen.animationStartTime,e)){if(null===n.screen.blockEditor.uiTouch&&null===n.screen.blockEditor.palette.scrollInProgress&&null===n.screen.blockEditor.canvas.scrollInProgress&&null===n.screen.blockEditor.literalEditor){const e=Gl();this.setState({...n,screen:{...n.screen,currentTimestamp:e}})}requestAnimationFrame(t)}};return t}getButtonClickDetectorResources(){return{tempCanvasCtx:this.tempCanvasCtx,measureCanvasText:this.measureCanvasText,getCurrentLevelBattleEvents:this.getCurrentLevelBattleEvents,renderTutorialCanvasElement:this.renderTutorialCanvasElement}}getCurrentLevelBattleAnimationData(){const{screen:e}=this.state,t=mc(e.currentTimestamp,e.animationStartTime),n=this.getCurrentLevelBattleEvents(),r=e.animationKind===xr.PlayBattle?e.battleAnimationOffsetSeconds+t:e.animationKind===xr.PauseBattle?e.battleAnimationOffsetSeconds:0;return tc(rc(e.level),n,r)}getCurrentLevelBattleEvents(){const{currentLevelBattleEventsCache:e,lastBlockEditorSetStateCallTime:t}=this;if(t.millisecondsSinceEpoch<=e.timeCached.millisecondsSinceEpoch)return e.events;const{screen:n}=this.state,r={timeCached:Gl(),events:Yl(n.blockEditor.canvas,rc(n.level))};return this.currentLevelBattleEventsCache=r,r.events}getPrevLevelBattleEvents(){const{prevLevelBattleEventsCache:e,lastBlockEditorSetStateCallTime:t}=this;if(t.millisecondsSinceEpoch<=e.timeCached.millisecondsSinceEpoch)return e.events;const{screen:n}=this.state,r={timeCached:Gl(),events:Yl(n.prevLevelBlockEditor.canvas,rc(n.level-1))};return this.prevLevelBattleEventsCache=r,r.events}getLevel9DragStatus(){if(this.state.screen.level!==Sr.Level9)return{needsLessThanBlockDrag:!1,needsHealthBlockDrag:!1};if(this.state.screen.blockEditor.canvas.items.some((e=>Uc(e.content))))return{needsLessThanBlockDrag:!1,needsHealthBlockDrag:!1};const{appHeight:e,appWidth:t,screen:n}=this.state,r=me.tutorial.finger.naturalHeight/me.tutorial.finger.naturalWidth*60,o={config:this.getMainBlockEditorConfig(),state:this.state.screen.blockEditor,measureText:this.measureSvgText,setState:kc},i=fn(o),a=i.find((e=>e.block.kind===vr.LessThan)).rbox,s=a.topLeft.y,l=a.topLeft.y+a.dimensions.height,c=20+.3*r,u=s<0?-s+c:l>e?e-l-c:0,d=i.find((e=>e.block.kind===vr.Health)).rbox,h=d.topLeft.y,f=d.topLeft.y+d.dimensions.height,p=h<0?-h+c:f>e?e-f-c:0,{canvas:m}=n.blockEditor,g=null===m.scrollInProgress?m.scroll:{x:m.scroll.x+m.scrollInProgress.currentClientPosition.x-m.scrollInProgress.startClientPosition.x,y:m.scroll.y+m.scrollInProgress.currentClientPosition.y-m.scrollInProgress.startClientPosition.y},v=(()=>{function n(n){const r=He(g,n.rbox.topLeft),o=r.x,i=r.y,a=o+n.rbox.dimensions.width,s=i+n.rbox.dimensions.height,l=0<=o&&a<=t&&0<=i&&s<=e,c=n.block.args.expressions.every((e=>e.isLiteral&&""===e.source));return l&&n.block.kind===vr.LessThan&&c}const r=un(o);for(const e of r){const t=jc(e,n);if(null!==t)return t}return null})(),b=(()=>{function n(n){const r=He(g,n.rbox.topLeft),o=r.x,i=r.y,a=o+n.rbox.dimensions.width,s=i+n.rbox.dimensions.height,l=0<=o&&a<=t&&0<=i&&s<=e,c=n.block.args.expressions[0],u=void 0!==c&&!c.isLiteral&&c.kind===vr.Health,d=n.block.args.expressions[1],h=void 0!==d&&d.isLiteral&&""===d.source;return l&&n.block.kind===vr.LessThan&&u&&h}const r=un(o);for(const e of r){const t=jc(e,n);if(null!==t)return t}return null})(),y=null===n.blockEditor.uiTouch&&null===n.blockEditor.palette.scrollInProgress&&null===n.blockEditor.canvas.scrollInProgress&&null===n.blockEditor.literalEditor;return{needsLessThanBlockDrag:null===v&&null===b&&0===u&&y,needsHealthBlockDrag:null!==v&&null===b&&0===p&&y}}getLoadingScreenAnimationUpdater(e){const t=()=>{const n=this.state;if(n.screen.animationKind!==xr.Loading||!Jl(n.screen.animationStartTime,e))return;const r=Gl();if(this.getLoadCompletionFactor()>=1)return this.setState({...n,screen:{...n.screen,animationKind:xr.StaticHome,animationStartTime:r,currentTimestamp:r}}),Zn.Ii.isNativePlatform()&&this.playHomeMusic(0),void this.logEventIfMounted({kind:Cl.AppLifeCycleMilestone,milestoneKind:"LoadingScreenFinished",gameVersionWithoutV:pr,timestampDateDotNow:Date.now()});this.setState({...n,screen:{...n.screen,currentTimestamp:r}}),requestAnimationFrame(t)};return t}getLoadCompletionFactor(){const{currentTimestamp:e,animationStartTime:t}=this.state.screen,n=mc(e,t);return Math.min(1,fc({kind:"StepwiseLinearFunction",points:[{x:0,y:0},{x:.3,y:.3},{x:.6,y:.3},{x:1,y:1}]},n))}renderTextAndIconsAroundCenter(e,t,n){const r=[],{puzzleButtonIconDimensions:o,font:i,textColor:a}=this.getInstructionsBoxRenderInfo(),s=e.split("\n").map((e=>zr.concat(Hr).reduce(((e,t)=>e.replace(t,"\n".concat(t,"\n"))),e).split("\n").map((e=>e.trim())).filter((e=>""!==e)))),{allLinePartWidths:l,lineHeights:c,fontSize:u}=this.getLineDimensionsAndOverrideFontSize(e,n);let d=t.y-.5*Jc(c);for(let h=0;h<s.length;++h){const e=c[h],n=s[h],f=l[h];let p=t.x-.5*Jc(f),m=i.fontFamily;for(let t=0;t<n.length;++t){const s=n[t],l=f[t];zr.includes(s)?r.push({kind:jn.Image,source:Fr[s],dx:p+.5*l-.5*o.width,dy:d+.5*e-.5*o.height,dw:o.width,dh:o.height}):Hr.includes(s)?m=Ur[s]:r.push({kind:jn.Text,text:s,x:p+.5*l,y:d+.5*e,fill:a,...i,fontSize:u,fontFamily:m,textAlign:"center",textBaseline:"middle"}),p+=l}d+=e}return{kind:jn.Group,children:r}}getLineDimensionsAndOverrideFontSize(e,t){const n=this.getLineDimensionsUsingDefaultFont(e),r=Jc(n.lineHeights),o=n.allLinePartWidths.map(Jc),i=Math.max(0,...o),{font:a,minLineHeight:s}=this.getInstructionsBoxRenderInfo();if(r<=t.height&&i<=t.width)return{...n,fontSize:a.fontSize};const l=Math.min(t.height/r,t.width/i),c=l*a.fontSize,u=l*s;return{...this.getLineDimensionsUsingFont(e,{...a,fontSize:c},u),fontSize:c}}getLineDimensionsUsingDefaultFont(e){const{font:t,minLineHeight:n}=this.getInstructionsBoxRenderInfo();return this.getLineDimensionsUsingFont(e,t,n)}getLineDimensionsUsingFont(e,t,n){const{puzzleButtonIconDimensions:r,puzzleButtonIconHorizontalMargin:o}=this.getInstructionsBoxRenderInfo(),i=e.split("\n").map((e=>zr.concat(Hr).reduce(((e,t)=>e.replace(t,"\n".concat(t,"\n"))),e).split("\n").map((e=>e.trim())).filter((e=>""!==e))));return{allLinePartWidths:i.map((e=>{let n=t.fontFamily;return e.map((e=>zr.includes(e)?r.width+2*o:Hr.includes(e)?(n=Ur[e],0):this.measureCanvasText({...t,fontFamily:n,text:e}).width))})),lineHeights:i.map((e=>{let o=t.fontFamily;return Math.max(n,...e.map((e=>zr.includes(e)?r.height:Hr.includes(e)?(o=Ur[e],0):this.measureCanvasText({...t,fontFamily:o,text:e}).height)))}))}}getInstructionsBoxRenderInfo(){const{appWidth:e}=this.state,t=e/$r.castleInteriorImage.width,n=50*t,{minLineHeight:r,fontSize:o}={[mr.English]:{minLineHeight:33*t,fontSize:22*t},[mr.Japanese]:{minLineHeight:42*t,fontSize:28*t},[mr.JapaneseHiragana]:{minLineHeight:42*t,fontSize:28*t}}[this.state.language];return{puzzleButtonIconDimensions:{width:n,height:n*(me.buttons.puzzle.edit.naturalHeight/me.buttons.puzzle.edit.naturalWidth)},puzzleButtonIconHorizontalMargin:10*t,minLineHeight:r,font:{fontSize:o,fontFamily:Er},textColor:Qr.textBrown}}getBattleSoundsForCurrentLevel(){const{screen:e}=this.state,t=mc(e.currentTimestamp,e.animationStartTime),n=function(e,t){const n=[];let r=e,o=To;for(let i=0;i<t.length;++i){const e=t[i],a=eu(e,r);n.push(...a.map((e=>({...e,timeInSeconds:o+e.timeInSeconds}))));const s=nc(e,r);o+=s;i+1<t.length&&t[i+1].kind===kr.ClimbStairs||e.kind===kr.EvalBlock||(o+=Co),r=ec(e,r)}return n}(rc(e.level),this.getCurrentLevelBattleEvents()),r=e.animationKind===xr.PlayBattle?e.battleAnimationOffsetSeconds+t:e.animationKind===xr.PauseBattle?e.battleAnimationOffsetSeconds:0;return n.map((e=>({...e,timeInSeconds:e.timeInSeconds-r})))}}function Kl(e,t){return jr[e][t]}function Gl(){return{millisecondsSinceEpoch:Date.now()}}function Jl(e,t){return e.millisecondsSinceEpoch===t.millisecondsSinceEpoch}function Yl(e,t){const n=e.items.find((e=>e.content.length>0&&e.content[0].kind===vr.WhenBattleStarts));if(void 0===n)return[];const r={gas:999,stack:n.content.slice(1).map(((e,t)=>({block:e,blockSource:[ot,0,t+1]}))).reverse(),levelState:t,events:[]};for(;r.gas>0&&r.stack.length>0&&Vc(r.levelState);)Ql(r,!0);const{events:o}=r;for(let i=0;i<100&&Vc(r.levelState);++i){const[e,t]=Zl(r.levelState,r,!0);o.push(...e),r.levelState=t}return $l(r.levelState)<r.levelState.squares.length-1&&Kc(o),o}function Ql(e,t){if(!(e.gas>0&&e.stack.length>0))return"";const n=e.stack.pop();if(void 0===n)return"";--e.gas;const{events:r}=e;let{levelState:o}=e;const{block:i,blockSource:a}=n;if(r.push({kind:kr.EvalBlock,block:i,source:a}),i.kind===vr.MoveForward){const t=o.squares[$l(o)+1].kind===wr.Empty?{kind:kr.Advance,source:a}:{kind:kr.FailHeroAction,failedActionKind:Gr.Advance,source:a};if(r.push(t),o=ec(t,o),$l(o)===o.squares.length-1)return r.push({kind:kr.ClimbStairs}),e.gas=0,e.levelState=o,""}if(i.kind===vr.MoveBackward){const e=$l(o)>0&&o.squares[$l(o)-1].kind===wr.Empty?{kind:kr.Retreat,source:a}:{kind:kr.FailHeroAction,failedActionKind:Gr.Retreat,source:a};r.push(e),o=ec(e,o)}if(i.kind===vr.Attack){const e=$l(o)<o.squares.length-1&&(o.squares[$l(o)+1].kind===wr.Goblin||o.squares[$l(o)+1].kind===wr.Witch)?{kind:kr.Attack,attackerIndex:$l(o),targetIndex:$l(o)+1,damage:eo.heroDamage,source:a}:{kind:kr.FailHeroAction,failedActionKind:Gr.Attack,source:a};r.push(e),o=ec(e,o)}if(i.kind===vr.Heal){const e=$l(o)<o.squares.length-1&&o.squares[$l(o)].health<o.squares[$l(o)].maxHealth?{kind:kr.Heal,targetIndex:$l(o),healAmount:Math.min(o.squares[$l(o)].maxHealth-o.squares[$l(o)].health,eo.heroHeal),source:a}:{kind:kr.FailHeroAction,failedActionKind:Gr.Heal,source:a};r.push(e),o=ec(e,o)}if(i.kind===vr.Forever&&(e.stack.push({block:i,blockSource:a}),e.stack.push(...i.args.sequences[0].map(((e,t)=>({block:e,blockSource:a.concat([ct,0,t])}))).reverse())),i.kind===vr.If){"true"===Xl(i.args.expressions[0],a.concat([lt,0]),e)&&e.stack.push(...i.args.sequences[0].map(((e,t)=>({block:e,blockSource:a.concat([ct,0,t])}))).reverse())}if(i.kind===vr.And){const t=Xl(i.args.expressions[0],a.concat([lt,0]),e),n=Xl(i.args.expressions[1],a.concat([lt,1]),e);return String("true"===t&&"true"===n)}if(i.kind===vr.Or){const t=Xl(i.args.expressions[0],a.concat([lt,0]),e),n=Xl(i.args.expressions[1],a.concat([lt,1]),e);return String("true"===t||"true"===n)}if(i.kind===vr.Not){const t=Xl(i.args.expressions[0],a.concat([lt,0]),e);return String("true"!==t)}if(i.kind===vr.XInFront){const e=i.args.dropdowns[0];if(!so.includes(e))return"";const t={[br.Nothing]:wr.Empty,[br.Goblin]:wr.Goblin,[br.Witch]:wr.Witch}[e],n=$l(o);if(-1===n||n===o.squares.length-1)return"";const r=n+1;return String(o.squares[r].kind===t)}if(i.kind===vr.Health){const e=$l(o);if(-1===e)return"0";const t=o.squares[e];return String(t.health)}if(i.kind===vr.LessThan){const t=Xl(i.args.expressions[0],a.concat([lt,0]),e),n=Number.parseFloat(t),r=Xl(i.args.expressions[1],a.concat([lt,1]),e),o=Number.parseFloat(r);return String(n<o)}if(i.kind===vr.Equal){const t=Xl(i.args.expressions[0],a.concat([lt,0]),e),n=Number.parseFloat(t),r=Xl(i.args.expressions[1],a.concat([lt,1]),e),o=Number.parseFloat(r);return String(n===o)}if(i.kind===vr.GreaterThan){const t=Xl(i.args.expressions[0],a.concat([lt,0]),e),n=Number.parseFloat(t),r=Xl(i.args.expressions[1],a.concat([lt,1]),e),o=Number.parseFloat(r);return String(n>o)}if(function(e){switch(e){case vr.MoveForward:case vr.MoveBackward:case vr.Attack:case vr.Heal:return!0;case vr.WhenBattleStarts:case vr.Forever:case vr.If:case vr.XInFront:case vr.And:case vr.Or:case vr.Not:case vr.Health:case vr.LessThan:case vr.Equal:case vr.GreaterThan:return!1}}(i.kind)){const[n,i]=Zl(o,e,t);r.push(...n),o=i}const s=o.squares[$l(o)];return s.kind===wr.Hero&&s.health<=0?(Kc(r),e.gas=0,e.levelState=o,""):(e.levelState=o,"")}function Xl(e,t,n){return e.isLiteral?e.source:(n.stack.push({block:e,blockSource:t}),Ql(n,!0))}function Zl(e,t,n){const r=[];let o=e;if($l(o)<o.squares.length-1&&o.squares[$l(o)+1].kind===wr.Goblin){const e={kind:kr.Attack,attackerIndex:$l(o)+1,targetIndex:$l(o),damage:eo.goblinDamage,source:null};r.push(e),o=ec(e,o)}if($l(o)<o.squares.length-1&&-1!==hc(o)){const e={kind:kr.Attack,attackerIndex:hc(o),targetIndex:$l(o),damage:eo.witchDamage,source:null},i=hc(o),a=i-$l(o);if(n&&a>1&&function(e,t){const n=e.levelState.squares[t].kind;if(n===wr.Empty||n===wr.Hero)throw new Error("Illegal enemyIndex passed to willHeroKillEnemyAtIndexAssumingEnemiesCannotSummon: ".concat(t,". The square at ").concat(t," contains ").concat(n,"."));const r=function(e){return{gas:e.gas,stack:e.stack.slice(),levelState:e.levelState,events:e.events.slice()}}(e);for(;r.gas>0&&r.stack.length>0&&Vc(r.levelState);)if(Ql(r,!1),r.levelState.squares[t].kind!==n)return!0;return!1}({...t,levelState:ec(e,o)},i)&&o.squares[i].health>eo.witchSummonGoblinHealthCost){const e={kind:kr.Summon,summonee:{kind:wr.Goblin,color:Yr.Purple,health:3,maxHealth:3},summonerIndex:hc(o),summonerHealthCost:eo.witchSummonGoblinHealthCost,targetIndex:$l(o)+1,source:null};r.push(e),o=ec(e,o)}else r.push(e),o=ec(e,o)}return[r,o]}function $l(e){return e.squares.findIndex((e=>e.kind===wr.Hero))}function ec(e,t){if(e.kind===kr.FailHeroAction||e.kind===kr.EvalBlock)return t;const n=$l(t);if(e.kind===kr.Advance){return{squares:t.squares.map(((e,r)=>r===n?{kind:wr.Empty}:r===n+1&&e.kind===wr.Empty?t.squares[n]:e))}}if(e.kind===kr.Retreat){return{squares:t.squares.map(((e,r)=>r===n?{kind:wr.Empty}:r===n-1&&e.kind===wr.Empty?t.squares[n]:e))}}if(e.kind===kr.Attack){return{squares:t.squares.map(((t,n)=>{if(n!==e.targetIndex)return t;if(t.kind===wr.Goblin){const n={...t,health:t.health-e.damage};return n.health<=0?{kind:wr.Empty}:n}if(t.kind===wr.Witch){const n={...t,health:t.health-e.damage};return n.health<=0?{kind:wr.Empty}:n}return t.kind===wr.Hero?{...t,health:t.health-e.damage}:t}))}}if(e.kind===kr.Summon){return{squares:t.squares.map(((t,n)=>{if(n===e.targetIndex)return e.summonee;if(n!==e.summonerIndex)return t;if(t.kind===wr.Goblin){const n={...t,health:t.health-e.summonerHealthCost};return n.health<=0?{kind:wr.Empty}:n}if(t.kind===wr.Witch){const n={...t,health:t.health-e.summonerHealthCost};return n.health<=0?{kind:wr.Empty}:n}return t.kind===wr.Hero?{...t,health:t.health-e.summonerHealthCost}:t}))}}if(e.kind===kr.Heal){return{squares:t.squares.map(((t,n)=>{if(n!==e.targetIndex)return t;if(t.kind===wr.Goblin){const n={...t,health:t.health+e.healAmount};return n.health<=0?{kind:wr.Empty}:n}return t.kind===wr.Hero?{...t,health:t.health+e.healAmount}:t}))}}if(e.kind===kr.ClimbStairs||e.kind===kr.FailLevel)return t;return e}function tc(e,t,n){const r=.5,o=150,i=U.xoroshiro128plus(42);let a=e,s=To,l=!1,c=null,u=!1;for(let f=0;f<t.length;++f){const e=t[f],d=nc(e,a),h=n-s;if(s>n){l=!0;break}if(e.kind===kr.EvalBlock&&(c=e.source),e.kind===kr.FailLevel&&(u=!0),d<=h){a=ec(e,a),s+=d;f+1<t.length&&t[f+1].kind===kr.ClimbStairs||e.kind===kr.EvalBlock||(s+=Co);continue}const p=h/d,m=a.squares.map(((t,n)=>{if(t.kind===wr.Hero&&e.kind===kr.Advance)return{x:o*p,y:0};if(t.kind===wr.Hero&&e.kind===kr.Retreat)return{x:o*-p,y:0};if(t.kind===wr.Hero&&e.kind===kr.FailHeroAction&&e.failedActionKind===Gr.Advance)return{x:o*fc({kind:"StepwiseLinearFunction",points:[{x:0,y:0},{x:.15,y:.2},{x:.85,y:.2},{x:1,y:0}]},p),y:0};if(t.kind===wr.Hero&&e.kind===kr.FailHeroAction&&e.failedActionKind===Gr.Retreat)return{x:o*fc({kind:"StepwiseLinearFunction",points:[{x:0,y:0},{x:.15,y:-.2},{x:.85,y:-.2},{x:1,y:0}]},p),y:0};if(t.kind===wr.Hero&&(e.kind===kr.Attack&&n===e.attackerIndex||e.kind===kr.FailHeroAction&&e.failedActionKind===Gr.Attack)){const e=Math.min(h/Bo,1);return{x:120*Math.sin(Math.PI*e),y:0}}if(t.kind===wr.Hero&&e.kind===kr.ClimbStairs){return{x:o*fc(pc({kind:"StepwiseLinearFunction",points:[{x:0,y:0},{x:.15,y:r},{x:.2,y:r},{x:1.25,y:4}]},.8),p),y:o*fc(pc({kind:"StepwiseLinearFunction",points:[{x:0,y:0},{x:.2,y:0},{x:1.25,y:-3.5}]},.8),p)}}return t.kind===wr.Goblin&&e.kind===kr.Attack&&n===e.attackerIndex?{x:-120*Math.sin(Math.PI*p),y:0}:{x:0,y:0}})),g=a.squares.map(((t,n,r)=>{if(e.kind!==kr.Attack||e.targetIndex!==n)return 0;const o=r[e.attackerIndex].kind;if(Po.includes(o)){if(p<Mo)return 0;const e=Math.min(1,(p-Mo)/(Ro-Mo));return.5*Math.sin(Math.PI*e)}if(o===wr.Witch){if(p<Oo)return 0;const e=Math.min(1,(p-Oo)/(No-Oo));return.5*Math.sin(Math.PI*e)}return 0})),v=a.squares.map(((t,n,r)=>{if(e.kind!==kr.Attack||e.targetIndex!==n)return!1;const o=r[e.attackerIndex].kind;if(Po.includes(o)){if(p<Mo)return!1;return Math.min(1,(p-Mo)/(Ro-Mo))>=.5}if(o===wr.Witch){if(p<Oo)return!1;return Math.min(1,(p-Oo)/(No-Oo))>=.5}return!1})),b=a.squares[$l(a)].health<=0?Kr.Defeat:Kr.InProgress,y=e.kind===kr.Heal&&e.targetIndex===$l(a)||e.kind===kr.FailHeroAction&&e.failedActionKind===Gr.Heal&&h<=Ao,k=(()=>{const e=.15;if(p<e){const t=p/e;return Math.sin(t*(Math.PI/2))}const t=.85;if(p<t)return 1;const n=(p-t)/.15000000000000002;return Math.sin((1-n)*(Math.PI/2))})(),w=e.kind===kr.FailHeroAction&&e.failedActionKind===Gr.Advance?{message:gr.CannotAdvance,index:$l(a)+.5,opacityFactor:k}:e.kind===kr.FailHeroAction&&e.failedActionKind===Gr.Retreat?{message:gr.CannotRetreat,index:$l(a)+.5,opacityFactor:k}:e.kind===kr.FailHeroAction&&e.failedActionKind===Gr.Attack?{message:gr.CannotAttack,index:$l(a)+1+.5,opacityFactor:k}:e.kind===kr.FailHeroAction&&e.failedActionKind===Gr.Heal?{message:gr.CannotHeal,index:$l(a)+.5,opacityFactor:k}:null,x=e.kind===kr.Attack&&a.squares[e.attackerIndex].kind===wr.Witch,S=e.kind===kr.Summon&&a.squares[e.summonerIndex].kind===wr.Witch,L=x||S?Math.floor(fc({kind:"StepwiseLinearFunction",points:[{x:0,y:0},{x:.1,y:1},{x:.3,y:2},{x:.7,y:3}]},p)):0,E=fc({kind:"StepwiseLinearFunction",points:[{x:0,y:0},{x:.3,y:0},{x:.5,y:1},{x:1000.5,y:5001}]},p),C=Math.min(E,1),T=[],B=x?e.attackerIndex:S?e.summonerIndex:-1,A=x||S?e.targetIndex:-1;if(-1!==B&&2===L){const e={x:o*B+10,y:1145},t=He(e,{x:o*(A-B)+97.5,y:0}),n=100;for(let r=0;r<Math.floor(n*C);++r){const o=fc({kind:"StepwiseLinearFunction",points:[{x:0,y:e},{x:1,y:t}]},r/n,ko);for(let e=0;e<10;++e){const e={position:o,radius:U.unsafeUniformIntDistribution(300,500,i)/100,color:ic("#ff000033"),birthTimeFactor:r/n,isExplosion:!1};T.push(e)}}}if(-1!==B&&(2===L||3===L)){const e=He({x:o*B+10,y:1145},{x:o*(A-B)+97.5,y:0}),t=100;for(let n=0;n<Math.floor(t*C);++n)for(let r=0;r<10;++r){const r={position:e,radius:3*U.unsafeUniformIntDistribution(300,500,i)/100,color:ic("#ff000033"),birthTimeFactor:1+n/t,isExplosion:!0};T.push(r)}}const P=T.map((e=>{const t=e.isExplosion?1*(E-e.birthTimeFactor):E-e.birthTimeFactor;if(t<0)return{...e,color:ro};const n=U.unsafeUniformIntDistribution(0,360,i)/360*Math.PI*2,r={x:Math.cos(n),y:Math.sin(n)},a=e.isExplosion&&x?3:e.isExplosion&&S?6:1,s=a*(o*U.unsafeUniformIntDistribution(5,15,i))/100,l=He(e.position,je(r,s*t)),c=a*U.unsafeUniformIntDistribution(300,700,i)/100;var u,d;return{position:l,radius:e.radius+c*t,color:(u=fc({kind:"StepwiseLinearFunction",points:x?[{x:0,y:ic("#ffffcc")},{x:.2,y:ic("#ffcc00")},{x:1,y:ic("#a0000000")}]:[{x:0,y:ic("#ffccff")},{x:.2,y:ic("#cc00ff")},{x:1,y:ic("#0000a000")}]},t,wo),{r:(d=Math.floor)(u.r),g:d(u.g),b:d(u.b),a:d(u.a)})}})),I=x?a.squares.map(((t,n)=>n===e.targetIndex&&p>=.5?-e.damage:0)):S?a.squares.map(((t,n)=>n===e.summonerIndex&&L>=2?-e.summonerHealthCost:0)):a.squares.map(((t,n,r)=>e.kind===kr.Attack&&n===e.targetIndex&&Po.includes(r[e.attackerIndex].kind)&&p>=Mo?-e.damage:0)),_=S&&3===L?{summonee:e.summonee,summoneeIndex:e.targetIndex}:null,D=a.squares.map(((t,n,r)=>{if(!(e.kind===kr.Attack&&e.targetIndex===n&&"health"in t&&t.health+I[n]<=0))return 1;const o=r[e.attackerIndex].kind;if(Po.includes(o)){if(p<Mo)return 1;const e=Math.min(1,(p-Mo)/(Ro-Mo));return e<.5?1:.5*Math.sin(Math.PI*e)}if(o===wr.Witch){if(p<Oo)return 0;const e=Math.min(1,(p-Oo)/(No-Oo));return e<.5?1:.5*Math.sin(Math.PI*e)}return 1}));return{levelState:a,characterDisplacements:m,advanceHealthChanges:I,battleStatus:b,displayHeroHealingAnimation:y,errorAlert:w,witchAnimationFrame:L,particles:P.filter((e=>e.color.a>0)),executedBlockAddress:c,advanceSummon:_,didHeroDefeatAllEnemiesButForgetToMoveToStairs:Qc(a,u),didHeroSurviveLevelButFailToReachStairs:Xc(a,u),damageOverlayAlphas:g,hasDamageOverlayAlphaPeaked:v,squareOccupantAlphas:D}}const d=a.squares[$l(a)].health<=0?Kr.Defeat:l||$l(a)!==a.squares.length-1?Kr.InProgress:Kr.Victory,h=d===Kr.Victory?a.squares.map(((e,t)=>e.kind===wr.Hero?{x:600,y:-525}:{x:0,y:0})):a.squares.map((()=>({x:0,y:0})));return{levelState:a,characterDisplacements:h,advanceHealthChanges:a.squares.map((()=>0)),battleStatus:d,displayHeroHealingAnimation:!1,errorAlert:null,witchAnimationFrame:0,particles:[],executedBlockAddress:c,advanceSummon:null,didHeroDefeatAllEnemiesButForgetToMoveToStairs:Qc(a,u),didHeroSurviveLevelButFailToReachStairs:Xc(a,u),damageOverlayAlphas:a.squares.map((()=>0)),hasDamageOverlayAlphaPeaked:a.squares.map((()=>!1)),squareOccupantAlphas:a.squares.map((()=>1))}}function nc(e,t){if(e.kind===kr.EvalBlock)return.25;if(e.kind===kr.Advance)return.15;if(e.kind===kr.Retreat)return.15;if(e.kind===kr.Attack&&t.squares[e.attackerIndex].kind===wr.Witch)return 1.5;if(e.kind===kr.Summon)return 1.5;if(e.kind===kr.Attack)return Bo;if(e.kind===kr.Heal)return Ao;if(e.kind===kr.ClimbStairs)return 1.25;if(e.kind===kr.FailLevel)return 1;if(e.kind===kr.FailHeroAction){const{failedActionKind:t}=e;if(t===Gr.Advance||t===Gr.Retreat)return 1;if(t===Gr.Attack)return 1;if(t===Gr.Heal)return 1;return t}return e}function rc(e){switch(e){case Sr.Level1:return function(){const e={kind:wr.Empty},t={kind:wr.Hero,health:2,maxHealth:2};return{squares:[e,e,e,t,e,e,e]}}();case Sr.Level2:return function(){const e={kind:wr.Empty},t={kind:wr.Hero,health:2,maxHealth:2},n={kind:wr.Goblin,color:Yr.Green,health:1,maxHealth:1};return{squares:[e,e,e,e,e,t,n]}}();case Sr.Level3:return function(){const e={kind:wr.Empty},t={kind:wr.Hero,health:2,maxHealth:2},n={kind:wr.Goblin,color:Yr.Green,health:1,maxHealth:1};return{squares:[e,e,e,t,n,n,e]}}();case Sr.Level4:return function(){const e={kind:wr.Empty},t={kind:wr.Hero,health:2,maxHealth:2},n={kind:wr.Goblin,color:Yr.Green,health:1,maxHealth:1};return{squares:[e,e,e,t,e,n,n]}}();case Sr.Level5:return function(){const e={kind:wr.Empty},t={kind:wr.Hero,health:2,maxHealth:2},n={kind:wr.Goblin,color:Yr.Green,health:1,maxHealth:1};return{squares:[e,t,e,n,n,e,n]}}();case Sr.Level6:return function(){const e={kind:wr.Empty},t={kind:wr.Hero,health:3,maxHealth:3},n={kind:wr.Goblin,color:Yr.Purple,health:3,maxHealth:3};return{squares:[e,e,e,e,t,e,n]}}();case Sr.Level7:return function(){const e={kind:wr.Empty};return{squares:[{kind:wr.Hero,health:3,maxHealth:3},e,e,e,e,e,e]}}();case Sr.Level8:return function(){const e={kind:wr.Empty},t={kind:wr.Hero,health:3,maxHealth:3},n={kind:wr.Goblin,color:Yr.Green,health:1,maxHealth:1};return{squares:[t,n,e,e,e,n,e]}}();case Sr.Level9:return function(){const e={kind:wr.Empty},t={kind:wr.Hero,health:3,maxHealth:3},n={kind:wr.Goblin,color:Yr.Green,health:1,maxHealth:1};return{squares:[t,n,n,e,n,n,e]}}();case Sr.Level10:return function(){const e={kind:wr.Empty},t={kind:wr.Hero,health:5,maxHealth:5},n={kind:wr.Witch,health:3,maxHealth:3};return{squares:[t,e,e,n,e,e,e]}}()}}function oc(e,t,n,r){const o=-.5*Math.cos(2*r*Math.PI*n)+.5;return{r:Math.round(e.r+o*(t.r-e.r)),g:Math.round(e.g+o*(t.g-e.g)),b:Math.round(e.b+o*(t.b-e.b)),a:Math.round(e.a+o*(t.a-e.a))}}function ic(e){const t="#"===e.charAt(0)?e.slice(1):e;if(6!==t.length&&8!==t.length)throw new Error("Invalid color hex string.");return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:8===t.length?parseInt(t.slice(6,8),16):255}}function ac(e){return{palette:{blockKinds:dc(e),scroll:{x:0,y:0},scrollInProgress:null},uiTouch:null,literalEditor:null,dropdownMenu:null,canvas:{items:sc(e),scroll:{x:0,y:0},scrollInProgress:null},cursor:"default"}}function sc(e){switch(e){case Sr.Level1:case Sr.Level2:case Sr.Level3:case Sr.Level4:case Sr.Level5:case Sr.Level6:case Sr.Level10:return[{position:{x:$r.paletteWidth+$r.minPalettePadding,y:$r.minPalettePadding},content:[{isLiteral:!1,kind:vr.WhenBattleStarts,args:{expressions:[],dropdowns:[],sequences:[]}}]}];case Sr.Level7:return[{position:{x:$r.paletteWidth+$r.minPalettePadding,y:$r.minPalettePadding},content:[{isLiteral:!1,kind:vr.WhenBattleStarts,args:{expressions:[],dropdowns:[],sequences:[]}}]},{position:{x:$r.paletteWidth+$r.minPalettePadding+220,y:$r.minPalettePadding},content:[{isLiteral:!1,kind:vr.MoveForward,args:{expressions:[],dropdowns:[],sequences:[]}}]}];case Sr.Level8:return[{position:{x:$r.paletteWidth+$r.minPalettePadding,y:$r.minPalettePadding},content:[{isLiteral:!1,kind:vr.WhenBattleStarts,args:{expressions:[],dropdowns:[],sequences:[]}}]},{position:{x:$r.paletteWidth+$r.minPalettePadding+220,y:$r.minPalettePadding},content:[{isLiteral:!1,kind:vr.MoveForward,args:{expressions:[],dropdowns:[],sequences:[]}}]},{position:{x:$r.paletteWidth+$r.minPalettePadding+340,y:$r.minPalettePadding+50},content:[{isLiteral:!1,kind:vr.Attack,args:{expressions:[],dropdowns:[],sequences:[]}}]},{position:{x:$r.paletteWidth+$r.minPalettePadding+220,y:$r.minPalettePadding+120},content:[{isLiteral:!1,kind:vr.If,args:{expressions:[{isLiteral:!1,kind:vr.XInFront,args:{expressions:[],dropdowns:[br.Nothing],sequences:[]}}],dropdowns:[],sequences:[[]]}}]}];case Sr.Level9:return[{position:{x:$r.paletteWidth+$r.minPalettePadding,y:$r.minPalettePadding},content:[{isLiteral:!1,kind:vr.WhenBattleStarts,args:{expressions:[],dropdowns:[],sequences:[]}}]},{position:{x:$r.paletteWidth+$r.minPalettePadding+340,y:$r.minPalettePadding+50},content:[{isLiteral:!1,kind:vr.MoveForward,args:{expressions:[],dropdowns:[],sequences:[]}}]},{position:{x:$r.paletteWidth+$r.minPalettePadding+220,y:$r.minPalettePadding},content:[{isLiteral:!1,kind:vr.Attack,args:{expressions:[],dropdowns:[],sequences:[]}}]},{position:{x:$r.paletteWidth+$r.minPalettePadding+220,y:$r.minPalettePadding+100},content:[{isLiteral:!1,kind:vr.Heal,args:{expressions:[],dropdowns:[],sequences:[]}}]}]}}function lc(e){if(!function(e){const{r:t,g:n,b:r,a:o}=e;return Number.isInteger(t)&&0<=t&&t<=255&&Number.isInteger(n)&&0<=n&&n<=255&&Number.isInteger(r)&&0<=r&&r<=255&&Number.isInteger(o)&&0<=o&&o<=255}(e))throw new Error("Cannot stringify color because it is invalid. color: ".concat(JSON.stringify(e),"."));return"#"+cc(e.r.toString(16),2)+cc(e.g.toString(16),2)+cc(e.b.toString(16),2)+cc(e.a.toString(16),2)}function cc(e,t){if(!Number.isInteger(t))throw new Error("Cannot leftpad because desiredLength is not an integer. desiredLength: ".concat(t,"."));if(e.length>t)throw new Error("Cannot leftpad because string is too long to pad. desiredLength: ".concat(t,". Actual length: ").concat(e.length,". String: ").concat(JSON.stringify(e)));return"0".repeat(t-e.length)+e}function uc(e){return uo[e]}function dc(e){return{[Sr.Level1]:[vr.MoveForward],[Sr.Level2]:[vr.MoveForward,vr.Attack],[Sr.Level3]:[vr.MoveForward,vr.Attack],[Sr.Level4]:[vr.MoveForward,vr.Attack,vr.Heal],[Sr.Level5]:[vr.MoveForward,vr.Attack,vr.Heal],[Sr.Level6]:[vr.MoveForward,vr.Attack,vr.Heal,vr.MoveBackward],[Sr.Level7]:[vr.Forever],[Sr.Level8]:[vr.Forever,vr.If,vr.XInFront],[Sr.Level9]:[vr.Forever,vr.If,vr.XInFront,vr.Health,vr.LessThan,vr.Equal],[Sr.Level10]:[vr.MoveForward,vr.MoveBackward,vr.Attack,vr.Heal,vr.Forever,vr.If,vr.XInFront,vr.Health,vr.LessThan,vr.Equal]}[e]}function hc(e){const t=$l(e);if(-1===t)return-1;const n=Math.min(e.squares.length-1,t+eo.witchAttackRange);for(let r=t+1;r<=n;++r){const t=e.squares[r];if(t.kind===wr.Witch)return r;if(t.kind!==wr.Empty)return-1}return-1}function fc(e,t,n){const{points:r}=e;if(0===r.length)throw new Error("Cannot evaluate a stepwise linear function with no points.");if(void 0===n&&"number"!==typeof r[0].y)throw new Error("You must provide a VectorSpaceOperations argument for functions on non-number types.");const o=null!==n&&void 0!==n?n:yo;if(1===r.length)return r[0].y;const i=r[0];if(t<=i.x)return i.y;const a=r[r.length-1];if(t>=a.x)return a.y;for(let s=1;s<r.length;++s){const e=r[s-1],n=r[s];if(e.x<=t&&t<=n.x){const r=(t-e.x)/(n.x-e.x);return o.add(e.y,o.scale(o.add(n.y,o.scale(e.y,-1)),r))}}throw new Error("Malformed StepwiseLinearFunction. Points: "+JSON.stringify(r))}function pc(e,t){return{kind:"StepwiseLinearFunction",points:e.points.map((e=>({x:e.x*t,y:e.y})))}}function mc(e,t){return.001*(e.millisecondsSinceEpoch-t.millisecondsSinceEpoch)}function gc(e,t){if(![xr.PlayBattle,xr.PauseBattle].includes(e.animationKind))return!1;const n=mc(e.currentTimestamp,e.animationStartTime),r=e.animationKind===xr.PlayBattle?e.battleAnimationOffsetSeconds+n:e.animationKind===xr.PauseBattle?e.battleAnimationOffsetSeconds:0;if(0===r)return!1;const o=rc(e.level),{battleStatus:i}=tc(o,t(),r);return i===Kr.Victory}function vc(e,t){if(![xr.PlayBattle,xr.PauseBattle].includes(e.animationKind))return!1;const n=mc(e.currentTimestamp,e.animationStartTime),r=e.animationKind===xr.PlayBattle?e.battleAnimationOffsetSeconds+n:e.animationKind===xr.PauseBattle?e.battleAnimationOffsetSeconds:0;if(0===r)return!1;const o=rc(e.level),{battleStatus:i}=tc(o,t(),r);return i===Kr.Defeat}function bc(e){var t,n;const{x:r,y:o,w:i,h:a}=e,s=Math.min(null!==(t=e.rx)&&void 0!==t?t:0,i/2),l=Math.min(null!==(n=e.ry)&&void 0!==n?n:0,a/2),c=[{type:"M",values:[r+s,o]},{type:"H",values:[r+i-s]},{type:"A",values:[s,l,0,0,1,r+i,o+l]},{type:"V",values:[o+a-l]},{type:"A",values:[s,l,0,0,1,r+i-s,o+a]},{type:"H",values:[r+s]},{type:"A",values:[s,l,0,0,1,r,o+a-l]},{type:"V",values:[o+l]},{type:"A",values:[s,l,0,0,1,r+s,o]},{type:"Z",values:[]}].filter((function(e){return"A"!==e.type||0!==e.values[0]&&0!==e.values[1]})),u=new Path2D(c.map((e=>e.type+e.values.join(" "))).join("\n"));return{kind:jn.Path,path:u,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill}}function yc(){return ac(Sr.Level1)}function kc(){}function wc(e,t,n){const{screen:r}=t;if(r.animationKind===xr.Edit&&null!==r.blockEditor.literalEditor){if(document.elementsFromPoint(e.x,e.y).some((e=>e.id===po)))return null}return r.animationKind===xr.StaticHome?function(e,t,n){if(function(e,t,n){return Sc(e,xe.topLeft,me.buttons.home.start,t,n)}(e,t,n))return Jr.HomeScreenStart;if(function(e,t,n){return Sc(e,Se.topLeft,me.buttons.home.settings,t,n)}(e,t,n))return Jr.Settings;return null}(e,t,n):r.animationKind===xr.StaticSettings?xc(e,t,n):r.animationKind===xr.StaticConfirmResetToLevelOne?function(e,t,n){const r=xc(e,t,n);if(r===Jr.Credits)return Jr.ConfirmResetToLevelOne;if(r===Jr.OpenConfirmResetToLevelOneScreen)return Jr.CancelResetToLevelOne;if(r===Jr.SettingsScreenClose)return Jr.ConfirmResetToLevelOneScreenClose;if(r===Jr.SettingsScreenSecondaryClose)return r;return null}(e,t,n):r.animationKind===xr.Credits?Jr.CreditsScreenClose:[xr.Edit,xr.PlayBattle,xr.PauseBattle].includes(r.animationKind)?function(e,t,n){if(function(e,t,n){const{appWidth:r,appHeight:o}=t,i=r/$r.castleInteriorImage.width,a=t.safeAreaInsets.insets,s=me.buttons.puzzle.edit,l=iu(i,a).nondepressedLeftButtonBBox,c={kind:jn.Image,source:s,dx:l.topLeft.x,dy:l.topLeft.y,dw:l.dimensions.width,dh:l.dimensions.height},u=n.tempCanvasCtx;u.canvas.width=r,u.canvas.height=o,u.clearRect(0,0,u.canvas.width,u.canvas.height),Gn(c,u);const d=Math.floor(e.x),h=Math.floor(e.y);return u.getImageData(d,h,1,1).data[3]>0}(e,t,n))return Jr.PuzzleScreenLeft;if(function(e,t,n){const{appWidth:r,appHeight:o}=t,i=r/$r.castleInteriorImage.width,a=t.safeAreaInsets.insets,s=me.buttons.puzzle.view,l=iu(i,a).nondepressedMiddleButtonBBox,c={kind:jn.Image,source:s,dx:l.topLeft.x,dy:l.topLeft.y,dw:l.dimensions.width,dh:l.dimensions.height},u=n.tempCanvasCtx;u.canvas.width=r,u.canvas.height=o,u.clearRect(0,0,u.canvas.width,u.canvas.height),Gn(c,u);const d=Math.floor(e.x),h=Math.floor(e.y);return u.getImageData(d,h,1,1).data[3]>0}(e,t,n))return Jr.PuzzleScreenMiddle;if(function(e,t,n){const{appWidth:r,appHeight:o}=t,i=r/$r.castleInteriorImage.width,a=t.safeAreaInsets.insets,s=me.buttons.puzzle.home,l=iu(i,a).nondepressedRightButtonBBox,c={kind:jn.Image,source:s,dx:l.topLeft.x,dy:l.topLeft.y,dw:l.dimensions.width,dh:l.dimensions.height},u=n.tempCanvasCtx;u.canvas.width=r,u.canvas.height=o,u.clearRect(0,0,u.canvas.width,u.canvas.height),Gn(c,u);const d=Math.floor(e.x),h=Math.floor(e.y);return u.getImageData(d,h,1,1).data[3]>0}(e,t,n))return Jr.PuzzleScreenRight;if(gc(t.screen,n.getCurrentLevelBattleEvents)&&function(e,t,n){if(t.screen.level>=Lr)return!1;const{appWidth:r,appHeight:o,language:i}=t,a=r/$r.castleInteriorImage.width,s=n.measureCanvasText({text:Kl(i,gr.LevelCleared),fontSize:$r.unscaledBattleOutcomeTextSizePx*a,fontFamily:Tr}),l=n.measureCanvasText({text:Kl(i,gr.NextLevel),fontSize:$r.unscaledButtonTextSizePx*a,fontFamily:Br}),c=l.height,u=bc({x:t.appWidth/2-(l.width+2*c)/2,y:0+.5*o+.5*s.height+2*s.height,w:l.width+2*c,h:l.height+2*c,fill:Qr.buttonBlue,rx:5,ry:5}),d=n.tempCanvasCtx;d.canvas.width=r,d.canvas.height=o,d.clearRect(0,0,d.canvas.width,d.canvas.height),Gn(u,d);const h=Math.floor(e.x),f=Math.floor(e.y);return d.getImageData(h,f,1,1).data[3]>0}(e,t,n))return Jr.NextLevel;if(t.screen.animationKind===xr.Edit&&n.renderTutorialCanvasElement()===Kn&&e.x>=(1-Yo)*t.appWidth&&e.y>=(1-Yo)*t.appHeight)return Jr.InEditorMiniBattleScreen;return null}(e,t,n):null}function xc(e,t,n){return function(e,t,n){return Sc(e,Te.topLeft,me.buttons.settings.language,t,n)}(e,t,n)?Jr.Language:function(e,t,n){return Sc(e,Be.topLeft,me.buttons.settings.credits,t,n)}(e,t,n)?Jr.Credits:function(e,t,n){return Sc(e,Ae.topLeft,me.buttons.settings.reset_to_level_one,t,n)}(e,t,n)?Jr.OpenConfirmResetToLevelOneScreen:function(e,t,n){return Sc(e,Pe.topLeft,me.buttons.settings.close,t,n)}(e,t,n)?Jr.SettingsScreenClose:function(e,t,n){return!Sc(e,Ce.topLeft,me.settings_box,t,n)}(e,t,n)?Jr.SettingsScreenSecondaryClose:null}function Sc(e,t,n,r,o){const i=2039,a=1447,s=r.appWidth/i,l=r.appHeight/a,c=Math.min(s,l),u=(()=>{const e=i*c,t=a*c;return{topLeft:{x:(r.appWidth-e)/2,y:(r.appHeight-t)/1},dimensions:{width:e,height:t}}})(),d=Ue({x:Math.floor((e.x-u.topLeft.x)/c),y:Math.floor((e.y-u.topLeft.y)/c)},t),h=d.x,f=d.y;if(0===n.naturalWidth||0===n.naturalHeight)return!1;const p=o.tempCanvasCtx;p.canvas.width=ye.width,p.canvas.height=ye.height,p.clearRect(0,0,p.canvas.width,p.canvas.height),p.drawImage(n,h,f,1,1,h,f,1,1);return p.getImageData(h,f,1,1).data[3]>0}function Lc(e){const t=e.dimensions.width,n=e.dimensions.height,r=t*$r.depressedButtonScale,o=n*$r.depressedButtonScale;return{topLeft:He(e.topLeft,{x:.5*(t-r),y:.5*(n-o)}),dimensions:{width:r,height:o}}}function Ec(e){return e.blockEditor.canvas.items.some((e=>e.content[0].kind===vr.WhenBattleStarts&&e.content.length>=2))}function Cc(e,t){return{kind:jn.Group,alpha:e,children:[t]}}function Tc(e){if(null===e)return null;try{const t=JSON.parse(e);if(t.version!==Xn)return null;const{language:n,blockEditor:r,level:o}=t;return{language:n,blockEditor:r,level:o}}catch{return console.error("Failed to parse saved state: "+JSON.stringify(e)),null}}function Bc(){var e;return null!==(e=Ac(navigator.language))&&void 0!==e?e:So}function Ac(e){return e.startsWith("en")?mr.English:e.startsWith("ja")?mr.Japanese:null}function Pc(e,t){return{millisecondsSinceEpoch:Math.max(e.millisecondsSinceEpoch,t.millisecondsSinceEpoch)}}function Ic(e){return e.some(_c)}function _c(e){return e}function Dc(e,t,n){return t.map(((t,r)=>Mc(e,t,n.concat([r]))))}function Mc(e,t,n){return{kind:In(e,n)?Rc(t.kind):Oc(t.kind),isLiteral:t.isLiteral,args:{expressions:t.args.expressions.map(((t,r)=>t.isLiteral?t:Mc(e,t,n.concat([lt,r])))),dropdowns:t.args.dropdowns,sequences:t.args.sequences.map(((t,r)=>Dc(e,t,n.concat([ct,r]))))}}}function Rc(e){const t=$o(lo,((e,t)=>t));return{...t,...ei(t,_c)}[e]}function Oc(e){const t={[vr.WhenBattleStarts]:yr.WhenBattleStarts,[vr.MoveForward]:yr.MoveForward,[vr.Attack]:yr.Attack,[vr.Heal]:yr.Heal,[vr.MoveBackward]:yr.MoveBackward,[vr.Forever]:yr.Forever,[vr.If]:yr.If,[vr.XInFront]:yr.XInFront,[vr.And]:yr.And,[vr.Or]:yr.Or,[vr.Not]:yr.Not,[vr.Health]:yr.Health,[vr.LessThan]:yr.LessThan,[vr.Equal]:yr.Equal,[vr.GreaterThan]:yr.GreaterThan};return{...t,...ei(t,_c)}[e]}function Nc(e){const t=Math.min(255,Math.max(0,Math.round(e)));return Number.isInteger(t)?t:0}function zc(e,t){if(In(e,t.address))return t.rbox;for(const n of t.blockSpecs){const t=Fc(e,n);if(null!==t)return t}return null}function Fc(e,t){if(In(e,t.address))return t.rbox;for(const n of t.subexpressionSpecs){if(n.kind===tt.Literal)continue;const t=Fc(e,n);if(null!==t)return t}for(const n of t.subsequenceSpecs){const t=zc(e,n);if(null!==t)return t}return null}function Hc(e,t){switch(t){case Sr.Level1:case Sr.Level2:case Sr.Level3:case Sr.Level4:case Sr.Level5:case Sr.Level6:case Sr.Level10:return e;case Sr.Level7:{const t=[vr.MoveForward];return $o(e,((e,n)=>t.includes(n)?{...e,isDeletable:!1}:e))}case Sr.Level8:{const t=[vr.MoveForward,vr.Attack];return $o(e,((e,n)=>t.includes(n)?{...e,isDeletable:!1}:e))}case Sr.Level9:{const t=[vr.MoveForward,vr.Attack,vr.Heal];return $o(e,((e,n)=>t.includes(n)?{...e,isDeletable:!1}:e))}}}function Uc(e){return e.some(Wc)}function Wc(e){return e.args.expressions.some((e=>e.isLiteral?e.source.length>0:Wc(e)))||e.args.sequences.some(Uc)}function jc(e,t){for(const n of e.blockSpecs)if(t(n))return n;for(const n of e.blockSpecs){const e=qc(n,t);if(null!==e)return e}return null}function qc(e,t){for(const n of e.subexpressionSpecs)if(n.kind!==tt.Literal&&t(n))return n;for(const n of e.subsequenceSpecs){const e=jc(n,t);if(null!==e)return e}return null}function Vc(e){const t=$l(e);return-1!==t&&(!(e.squares[t].health<=0)&&t!==e.squares.length-1)}function Kc(e){e.some((e=>e.kind===kr.FailLevel))||e.push({kind:kr.FailLevel})}function Gc(e){let{square:t,squareIndex:n,backgroundImageTop:r,backgroundImageScale:o,elapsedSeconds:i,battleAnimationData:a}=e;const{characterDisplacements:s,witchAnimationFrame:l,battleStatus:c,displayHeroHealingAnimation:u,damageOverlayAlphas:d,squareOccupantAlphas:h}=a;if(t.kind===wr.Empty)return Kn;if(t.kind===wr.Hero){if(t.health<=0||c!==Kr.InProgress)return Kn;const e={topLeft:{x:(40+150*n+s[n].x)*o,y:r+(1020+s[n].y)*o},dimensions:{width:150*o,height:150*o*(me.hero.naturalHeight/me.hero.naturalWidth)}},l=ou({characterBBox:e,square:t,squareIndex:n,backgroundImageScale:o,battleAnimationData:a});return{kind:jn.Group,alpha:h[n],children:[l.all,{kind:jn.Group,alpha:u?oc({r:128,g:0,b:0,a:0},{r:255,g:128,b:128,a:255},i,3).a/255:0,children:l.orderedHeartMarkImageElements.map(((e,n)=>n<t.health+eo.heroHeal&&t.health<=n?{...e,source:me.heart_mark}:Kn))},{kind:jn.Image,source:me.hero,dx:e.topLeft.x,dy:e.topLeft.y,dw:e.dimensions.width,dh:e.dimensions.height},{kind:jn.Group,alpha:d[n],children:[{kind:jn.Image,source:ve.hero,dx:e.topLeft.x,dy:e.topLeft.y,dw:e.dimensions.width,dh:e.dimensions.height}]}]}}if(t.kind===wr.Goblin){const e=t.color===Yr.Green?me.green_goblin:t.color===Yr.Purple?me.purple_goblin:t.color,i={topLeft:{x:(40+150*n+s[n].x)*o,y:r+1020*o},dimensions:{width:150*o,height:150*o*(e.naturalHeight/e.naturalWidth)}};return{kind:jn.Group,alpha:h[n],children:[ou({characterBBox:i,square:t,squareIndex:n,backgroundImageScale:o,battleAnimationData:a}).all,{kind:jn.Image,source:e,dx:i.topLeft.x,dy:i.topLeft.y,dw:i.dimensions.width,dh:i.dimensions.height},{kind:jn.Group,alpha:d[n],children:[{kind:jn.Image,source:ve.goblin,dx:i.topLeft.x,dy:i.topLeft.y,dw:i.dimensions.width,dh:i.dimensions.height}]}]}}if(t.kind===wr.Witch){const e=[me.witch_idle,me.witch_wand_raised,me.witch_wand_lowered,me.witch_idle][l],i={topLeft:{x:(40+150*n+s[n].x)*o,y:r+1020*o},dimensions:{width:150*o,height:150*o*(e.naturalHeight/e.naturalWidth)}};return{kind:jn.Group,alpha:h[n],children:[ou({characterBBox:i,square:t,squareIndex:n,backgroundImageScale:o,battleAnimationData:a}).all,{kind:jn.Image,source:e,dx:i.topLeft.x,dy:i.topLeft.y,dw:i.dimensions.width,dh:i.dimensions.height},e!==me.witch_idle?Kn:{kind:jn.Group,alpha:d[n],children:[{kind:jn.Image,source:ve.witch_idle,dx:i.topLeft.x,dy:i.topLeft.y,dw:i.dimensions.width,dh:i.dimensions.height}]}]}}return t}function Jc(e){let t=0;for(const n of e)t+=n;return t}function Yc(e){return{x:e.topLeft.x+.5*e.dimensions.width,y:e.topLeft.y+.5*e.dimensions.height}}function Qc(e,t){const n=$l(e);if(-1===n)return!1;const{squares:r}=e;return r[n].health>0&&r.slice(n+1).every((e=>e.kind===wr.Empty))&&t}function Xc(e,t){const n=$l(e);if(-1===n)return!1;const{squares:r}=e;return r[n].health>0&&t}function Zc(e){return[wr.Goblin,wr.Witch].includes(e.kind)}function $c(e){const t=rc(e),n=t.squares.slice($l(t)+1).filter(Zc);if(0===n.length)return"NoEnemies";const r=n.every((e=>e.kind===wr.Goblin)),o=n.every((e=>[wr.Witch].includes(e.kind)));if(r&&1===n.length)return qr.SingleGoblin;if(r&&n.length>=2)return qr.MultipleGoblins;if(o&&1===n.length)return qr.SingleWitch;throw new Error("Impossible enemy combination kind for level "+e)}function eu(e,t){const n=[];e.kind===kr.Attack&&Io.includes(t.squares[e.attackerIndex].kind)&&n.push({kind:sr.ClubAttack,timeInSeconds:0});e.kind===kr.Attack&&_o.includes(t.squares[e.attackerIndex].kind)&&n.push({kind:sr.SwordAttack,timeInSeconds:0});const r=e.kind===kr.Attack&&Do.includes(t.squares[e.attackerIndex].kind),o=e.kind===kr.Summon&&t.squares[e.summonerIndex].kind===wr.Witch;if((r||o)&&(n.push({kind:sr.FireballLaunch,timeInSeconds:.3,durationInSeconds:.3}),n.push({kind:sr.FireballExplosion,timeInSeconds:.6})),[kr.Advance,kr.Retreat].includes(e.kind)&&n.push({kind:sr.CharacterMovement,timeInSeconds:-.1}),e.kind===kr.ClimbStairs&&n.push({kind:sr.SuccessMusic,timeInSeconds:nc(e,t)+.05}),e.kind===kr.Attack){const r=t.squares[e.targetIndex];"health"in r&&r.health<=e.damage&&r.kind===wr.Goblin&&n.push({kind:sr.GoblinYelp,timeInSeconds:.75*nc(e,t)})}if(e.kind===kr.Attack){const r=t.squares[e.targetIndex];"health"in r&&r.health<=e.damage&&r.kind===wr.Witch&&n.push({kind:sr.WitchYelp,timeInSeconds:.5*nc(e,t)})}if(e.kind===kr.Attack){const r=t.squares[e.targetIndex];"health"in r&&r.health<=e.damage&&r.kind===wr.Hero&&n.push({kind:sr.HeroYelp,timeInSeconds:.5*nc(e,t)})}return e.kind===kr.FailHeroAction&&n.push({kind:sr.ErrorBuzzer,timeInSeconds:0}),e.kind===kr.Heal&&n.push({kind:sr.Heal,timeInSeconds:0}),n}function tu(e){return Jc(e.map(nu))}function nu(e){return 1+Jc(e.args.expressions.map((e=>e.isLiteral?0:nu(e))))+Jc(e.args.sequences.map(tu))}function ru(){var e;const t=null===(e=window.screen.orientation)||void 0===e?void 0:e.type;return void 0===t?window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary":t}function ou(e){let{characterBBox:t,square:n,squareIndex:r,backgroundImageScale:o,battleAnimationData:i}=e;const{advanceHealthChanges:a,damageOverlayAlphas:s,hasDamageOverlayAlphaPeaked:l}=i,c={width:32*o,height:32*o*(me.heart_mark.naturalHeight/me.heart_mark.naturalWidth)},u=Math.max(0,Math.min(Zr,n.maxHealth-Zr)),d=Math.min(Zr,n.maxHealth),h=o*Xr,f=new Array(d).fill(void 0).map(((e,i)=>({kind:jn.Image,source:i<n.health+a[r]?me.heart_mark:me.empty_heart_mark,dx:t.topLeft.x+.5*t.dimensions.width-.5*(d*c.width+d*h)+i*(c.width+h),dy:t.topLeft.y-40*o,dw:c.width,dh:c.height}))),p=new Array(u).fill(void 0).map(((e,i)=>({kind:jn.Image,source:i+Zr<n.health+a[r]?me.heart_mark:me.empty_heart_mark,dx:t.topLeft.x+.5*t.dimensions.width-.5*(u*c.width+u*h)+i*(c.width+h),dy:t.topLeft.y-70*o,dw:c.width,dh:c.height}))),m=f.concat(p),g={kind:jn.Group,children:m.map(((e,t)=>a[r]<0&&t<n.health&&n.health-1<=t?{kind:jn.Group,children:[{kind:jn.Group,alpha:l[r]?s[r]:1,children:[{...e,source:me.heart_mark}]},{kind:jn.Group,alpha:s[r],children:[{...e,source:ve.heart_mark}]}]}:Kn))};return{all:{kind:jn.Group,children:m.concat(g)},orderedHeartMarkImageElements:m}}function iu(e,t){return{nondepressedLeftButtonBBox:{topLeft:{x:890*e-t.right,y:5},dimensions:{width:120*e,height:120*e*(me.buttons.puzzle.edit.naturalHeight/me.buttons.puzzle.edit.naturalWidth)}},nondepressedMiddleButtonBBox:{topLeft:{x:1020*e-t.right,y:5},dimensions:{width:120*e,height:120*e*(me.buttons.puzzle.view.naturalHeight/me.buttons.puzzle.view.naturalWidth)}},nondepressedRightButtonBBox:{topLeft:{x:1150*e-t.right,y:5},dimensions:{width:120*e,height:120*e*(me.buttons.puzzle.home.naturalHeight/me.buttons.puzzle.home.naturalWidth)}}}}function au(e,t){return e.length===t.length&&e.every(((e,n)=>su(e,t[n])))}function su(e,t){return e.kind===t.kind&&e.args.dropdowns.length===t.args.dropdowns.length&&e.args.dropdowns.every(((e,n)=>e===t.args.dropdowns[n]))&&e.args.expressions.length===t.args.expressions.length&&e.args.expressions.every(((e,n)=>{const r=t.args.expressions[n];return e.isLiteral&&r.isLiteral?e.source===r.source:!e.isLiteral&&!r.isLiteral&&su(e,r)}))&&e.args.sequences.length===t.args.sequences.length&&e.args.sequences.every(((e,n)=>au(e,t.args.sequences[n])))}function lu(e){if(!(Number.isInteger(e)&&0<=e&&e<=255))throw new Error("byteAsHexString: ".concat(e," is not a byte."));const t=e.toString(16);return 1===t.length?"0"+t:t}const cu=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function uu(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(null!==navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),void 0!==t&&void 0!==t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),void 0!==t&&void 0!==t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}const du=e=>{void 0!==e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:r,getFCP:o,getLCP:i,getTTFB:a}=t;n(e),r(e),o(e),i(e),a(e)}))};r.createRoot(document.getElementById("Root")).render((0,Ze.jsx)(t.StrictMode,{children:(0,Ze.jsx)(Vl,{})})),function(e){if("serviceWorker"in navigator){if(new URL("/castle-coders-alpha",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="".concat("/castle-coders-alpha","/service-worker.js");cu?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((n=>{const r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):uu(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):uu(t,e)}))}}(),du(),console.log("Castle Coders v".concat(pr)),window.compressJson=ul,window.decompressJson=function(e,t){return new ll(t).readNodeAndMarkAnalyzerAsUsed(e).value},window.addEventListener("error",(e=>{const t={rawError:e.error,message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno};console.error(t,"This error was caught by the global error handler and logged."),Ml([{kind:Cl.Error,errorMessage:yl(t),timestampDateDotNow:Date.now()}])})),window.addEventListener("unhandledrejection",(e=>{const t={isTrusted:e.isTrusted,promise:e.promise,reason:e.reason,timeStamp:e.timeStamp};console.error("Unhandled rejection: ",e,"This error was caught by the global error handler and logged as ",t),Ml([{kind:Cl.Error,errorMessage:yl(t),timestampDateDotNow:Date.now()}])})),Ml([{kind:Cl.AppLifeCycleMilestone,milestoneKind:"IndexDotTsFinished",gameVersionWithoutV:pr,timestampDateDotNow:Date.now()}])})()})();
//# sourceMappingURL=main.e61d118a.js.map